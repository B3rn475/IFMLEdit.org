!function e(n,t,o){function i(a,d){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!d&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[a]={exports:{}};n[a][0].call(c.exports,(function(e){var t=n[a][1][e];return i(t||e)}),c,c.exports,e,n,t,o)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,n,t){(function(n){"use strict";var t=void 0!==t?t.window:void 0!==n?n.window:null;t.almost||(t.almost={plugins:{}}),t.almost.plugins.joint=e("./")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":2}],2:[function(e,n,t){"use strict";var o=e("./lib/board").Board,i=e("./lib/utils");t.Board=o,t.createBoard=o,t.utils=i},{"./lib/board":7,"./lib/utils":33}],3:[function(e,n,t){n.exports='<svg\r\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n   xmlns:cc="http://creativecommons.org/ns#"\r\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n   xmlns:svg="http://www.w3.org/2000/svg"\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r\n   version="1.1"\r\n   id="Capa_1"\r\n   x="0px"\r\n   y="0px"\r\n   width="44.238px"\r\n   height="44.238px"\r\n   viewBox="0 0 44.238 44.238"\r\n   xml:space="preserve"\r\n   inkscape:version="0.91 r13725"\r\n   sodipodi:docname="delete.svg"\r\n   style="enable-background:new 0 0 44.238 44.238;"><metadata\r\n     id="metadata51"><rdf:RDF><cc:Work\r\n         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type\r\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs\r\n     id="defs49" /><sodipodi:namedview\r\n     pagecolor="#ffffff"\r\n     bordercolor="#666666"\r\n     borderopacity="1"\r\n     objecttolerance="10"\r\n     gridtolerance="10"\r\n     guidetolerance="10"\r\n     inkscape:pageopacity="0"\r\n     inkscape:pageshadow="2"\r\n     inkscape:window-width="1600"\r\n     inkscape:window-height="837"\r\n     id="namedview47"\r\n     showgrid="false"\r\n     inkscape:zoom="5.3347802"\r\n     inkscape:cx="68.874387"\r\n     inkscape:cy="22.118999"\r\n     inkscape:window-x="-8"\r\n     inkscape:window-y="-8"\r\n     inkscape:window-maximized="1"\r\n     inkscape:current-layer="Capa_1"\r\n     showguides="true"\r\n     inkscape:guide-bbox="true" /><g\r\n     id="g4230"><circle\r\n       r="21"\r\n       cy="22.237999"\r\n       cx="22"\r\n       id="path4208"\r\n       style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.40000001;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker:none;enable-background:accumulate" /><g\r\n       style="fill:#000000;fill-opacity:1"\r\n       id="g7"><path\r\n         inkscape:connector-curvature="0"\r\n         style="fill:#000000;fill-opacity:1"\r\n         id="path9"\r\n         d="m 15.533,29.455 c -0.192,0 -0.384,-0.073 -0.53,-0.22 -0.293,-0.293 -0.293,-0.769 0,-1.062 L 28.174,15.002 c 0.293,-0.293 0.768,-0.293 1.061,0 0.293,0.293 0.293,0.768 0,1.061 L 16.063,29.235 c -0.146,0.147 -0.338,0.22 -0.53,0.22 z" /></g><g\r\n       style="fill:#000000;fill-opacity:1"\r\n       id="g11"><path\r\n         inkscape:connector-curvature="0"\r\n         style="fill:#000000;fill-opacity:1"\r\n         id="path13"\r\n         d="m 28.704,29.455 c -0.192,0 -0.384,-0.073 -0.53,-0.22 L 15.002,16.064 c -0.293,-0.293 -0.293,-0.768 0,-1.061 0.293,-0.293 0.768,-0.293 1.061,0 l 13.171,13.171 c 0.293,0.293 0.293,0.769 0,1.062 -0.146,0.146 -0.338,0.219 -0.53,0.219 z" /></g><path\r\n       inkscape:connector-curvature="0"\r\n       style="fill:#ff0000;fill-opacity:1"\r\n       id="path15"\r\n       d="M 22.119,44.237 C 9.922,44.237 0,34.315 0,22.12 0,9.924 9.922,0.001 22.119,0.001 c 12.197,0 22.119,9.922 22.119,22.119 0,12.197 -9.924,22.117 -22.119,22.117 z m 0,-42.736 C 10.75,1.501 1.5,10.751 1.5,22.12 c 0,11.369 9.25,20.619 20.619,20.619 11.369,0 20.619,-9.25 20.619,-20.619 0,-11.369 -9.25,-20.619 -20.619,-20.619 z" /></g><g\r\n     id="g17" /><g\r\n     id="g19" /><g\r\n     id="g21" /><g\r\n     id="g23" /><g\r\n     id="g25" /><g\r\n     id="g27" /><g\r\n     id="g29" /><g\r\n     id="g31" /><g\r\n     id="g33" /><g\r\n     id="g35" /><g\r\n     id="g37" /><g\r\n     id="g39" /><g\r\n     id="g41" /><g\r\n     id="g43" /><g\r\n     id="g45" /></svg>\r\n'},{}],4:[function(e,n,t){n.exports='<svg\r\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n   xmlns:cc="http://creativecommons.org/ns#"\r\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n   xmlns:svg="http://www.w3.org/2000/svg"\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r\n   class="detail convertSvgInline replaced-svg"\r\n   id="imgView"\r\n   fill="#000000"\r\n   viewBox="0 0 44.236 44.236"\r\n   x="0px"\r\n   y="0px"\r\n   width="256"\r\n   height="256"\r\n   version="1.1"\r\n   data-kw="configuration12"\r\n   data-id="51874"\r\n   xml:space="preserve"\r\n   inkscape:version="0.91 r13725"\r\n   sodipodi:docname="edit.svg"><metadata\r\n     id="metadata53"><rdf:RDF><cc:Work\r\n         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type\r\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs\r\n     id="defs51" /><sodipodi:namedview\r\n     pagecolor="#ffffff"\r\n     bordercolor="#666666"\r\n     borderopacity="1"\r\n     objecttolerance="10"\r\n     gridtolerance="10"\r\n     guidetolerance="10"\r\n     inkscape:pageopacity="0"\r\n     inkscape:pageshadow="2"\r\n     inkscape:window-width="1920"\r\n     inkscape:window-height="1017"\r\n     id="namedview49"\r\n     showgrid="false"\r\n     inkscape:zoom="2.6074563"\r\n     inkscape:cx="221.70951"\r\n     inkscape:cy="106.74523"\r\n     inkscape:window-x="-8"\r\n     inkscape:window-y="-8"\r\n     inkscape:window-maximized="1"\r\n     inkscape:current-layer="imgView" /><circle\r\n     style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03455937;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"\r\n     id="path4181"\r\n     cx="22.118"\r\n     cy="22.118"\r\n     r="21.254015" /><g\r\n     id="g3"><g\r\n       id="g5"><path\r\n         fill=""\r\n         d="M 22.118 44.236 C 9.922 44.236 0 34.314 0 22.119 C 0 9.923 9.922 0 22.118 0 s 22.118 9.923 22.118 22.119 C 44.236 34.314 34.314 44.236 22.118 44.236 Z M 22.118 1.5 C 10.75 1.5 1.5 10.75 1.5 22.119 s 9.25 20.617 20.618 20.617 s 20.618 -9.248 20.618 -20.617 S 33.486 1.5 22.118 1.5 Z"\r\n         id="path7" /><g\r\n         id="g9"><circle\r\n           fill=""\r\n           cx="22.118"\r\n           cy="22.438"\r\n           r="1.41"\r\n           id="circle11" /><path\r\n           fill=""\r\n           d="M 22.118 24.098 c -0.916 0 -1.66 -0.744 -1.66 -1.66 c 0 -0.915 0.745 -1.66 1.66 -1.66 s 1.659 0.745 1.659 1.66 C 23.777 23.354 23.034 24.098 22.118 24.098 Z M 22.118 21.277 c -0.64 0 -1.16 0.521 -1.16 1.16 s 0.521 1.161 1.16 1.161 c 0.639 0 1.159 -0.521 1.159 -1.161 S 22.758 21.277 22.118 21.277 Z"\r\n           id="path13" /></g><g\r\n         id="g15"><path\r\n           fill=""\r\n           d="M 22.118 32.42 c -0.6 0 -1.208 -0.061 -1.86 -0.182 c -0.446 -0.062 -0.83 -0.444 -0.898 -0.926 l -0.357 -1.838 c -0.461 -0.207 -0.896 -0.459 -1.287 -0.744 l -1.798 0.623 c -0.087 0.041 -0.233 0.07 -0.381 0.07 c -0.317 0 -0.622 -0.146 -0.837 -0.398 c -0.836 -0.952 -1.482 -2.074 -1.862 -3.233 c -0.183 -0.418 -0.023 -0.974 0.403 -1.257 l 1.358 -1.186 c -0.023 -0.23 -0.035 -0.479 -0.035 -0.752 c 0 -0.271 0.011 -0.52 0.035 -0.75 l -1.435 -1.245 c -0.35 -0.226 -0.51 -0.78 -0.303 -1.262 c 0.356 -1.098 1.003 -2.219 1.847 -3.181 c 0.299 -0.355 0.822 -0.488 1.261 -0.298 l 1.746 0.603 c 0.39 -0.284 0.825 -0.537 1.287 -0.745 l 0.364 -1.874 c 0.063 -0.447 0.449 -0.83 0.932 -0.894 c 1.125 -0.234 2.465 -0.243 3.693 0.009 c 0.432 0.055 0.817 0.438 0.886 0.921 l 0.357 1.838 c 0.447 0.204 0.875 0.453 1.283 0.746 l 1.803 -0.624 c 0.087 -0.04 0.232 -0.07 0.381 -0.07 c 0.318 0 0.624 0.146 0.838 0.401 c 0.834 0.949 1.48 2.07 1.861 3.23 c 0.183 0.419 0.022 0.974 -0.403 1.258 l -1.358 1.185 c 0.022 0.232 0.034 0.48 0.034 0.752 s -0.011 0.52 -0.034 0.75 l 1.434 1.245 c 0.351 0.226 0.511 0.78 0.304 1.261 c -0.356 1.098 -1.002 2.22 -1.847 3.182 c -0.303 0.357 -0.825 0.486 -1.262 0.299 l -1.75 -0.604 c -0.406 0.293 -0.836 0.541 -1.281 0.746 l -0.364 1.873 c -0.062 0.444 -0.446 0.827 -0.927 0.896 C 23.327 32.359 22.718 32.42 22.118 32.42 Z M 20.789 30.809 c 0.96 0.152 1.738 0.146 2.66 0 l 0.39 -2.012 c 0.05 -0.254 0.226 -0.464 0.466 -0.557 c 0.57 -0.221 1.111 -0.535 1.607 -0.936 c 0.201 -0.162 0.472 -0.207 0.716 -0.125 l 1.938 0.672 c 0.58 -0.705 1.033 -1.49 1.33 -2.301 l -1.549 -1.337 c -0.201 -0.174 -0.295 -0.442 -0.246 -0.703 c 0.047 -0.259 0.07 -0.558 0.07 -0.914 s -0.023 -0.654 -0.07 -0.913 c -0.05 -0.261 0.045 -0.529 0.246 -0.703 l 1.547 -1.342 c -0.313 -0.838 -0.764 -1.611 -1.33 -2.297 l -1.938 0.673 c -0.244 0.083 -0.516 0.036 -0.717 -0.125 c -0.495 -0.4 -1.035 -0.715 -1.605 -0.936 c -0.242 -0.093 -0.418 -0.303 -0.467 -0.557 l -0.391 -2.014 c -0.926 -0.156 -1.792 -0.148 -2.659 0 l -0.39 2.014 c -0.049 0.254 -0.225 0.464 -0.466 0.557 c -0.598 0.231 -1.149 0.552 -1.595 0.926 c -0.202 0.17 -0.478 0.22 -0.728 0.135 l -1.938 -0.672 c -0.581 0.707 -1.034 1.491 -1.33 2.301 l 1.549 1.337 c 0.201 0.175 0.294 0.442 0.246 0.705 c -0.048 0.255 -0.071 0.553 -0.071 0.911 s 0.023 0.657 0.071 0.912 c 0.049 0.263 -0.044 0.53 -0.246 0.705 l -1.547 1.343 c 0.313 0.836 0.763 1.609 1.329 2.297 l 1.938 -0.674 c 0.251 -0.084 0.526 -0.033 0.728 0.135 c 0.446 0.375 0.998 0.693 1.595 0.926 c 0.241 0.093 0.417 0.303 0.466 0.557 L 20.789 30.809 Z"\r\n           id="path17" /></g></g></g><g\r\n     id="g19" /><g\r\n     id="g21" /><g\r\n     id="g23" /><g\r\n     id="g25" /><g\r\n     id="g27" /><g\r\n     id="g29" /><g\r\n     id="g31" /><g\r\n     id="g33" /><g\r\n     id="g35" /><g\r\n     id="g37" /><g\r\n     id="g39" /><g\r\n     id="g41" /><g\r\n     id="g43" /><g\r\n     id="g45" /><g\r\n     id="g47" /></svg>\r\n'},{}],5:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,o="undefined"!=typeof window?window.$:void 0!==e?e.$:null;t.ElementsMenu=function e(t){if(!(this instanceof e))return new e(t);if(!(t=t||{}).container)throw new Error("container option is mandatory");if(0===o(t.container).length)throw new Error("invalid container option");if(!t.template)throw new Error("template option is mandatory");if("string"!=typeof t.template)throw new Error("invalid template option");if(0===o(t.template).length)throw new Error("invalid template option");if(!Array.isArray(t.builders))throw new Error("builders options is mandatory");if(!t.createItemDragger)throw new Error("createItemDragger option is Mandatory");if("function"!=typeof t.createItemDragger)throw new Error("invalid createItemDragger option");if("number"!=typeof t.width)throw new Error("width option is mandatory and has to be a number");if(void 0!==t.minHeight&&"number"!=typeof t.minHeight)throw new Error("width option is mandatory and has to be a number");if(void 0!==t.padding&&"number"!=typeof t.padding)throw new Error("width option is mandatory and has to be a number");var i=o(n.head(o(t.container))),r=t.builders,a=t.createItemDragger,d=o(t.template),l=t.width,s=t.minHeight||50,c=t.padding||0;if(c<0)throw new Error("padding cannot be less than zero");if(l<2*c)throw new Error("width cannot be less than zero (or 2 time padding)");if(s<2*c)throw new Error("minHeight cannot be less than zero (or 2 time padding)");n.each(r,(function(e){var n=d.clone();i.append(n),n.hasClass("almost-place-holder")||(n=n.find(".almost-place-holder")),a({el:n,createElements:e,width:l,minHeight:s,padding:c})}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n,t){(function(n){"use strict";var o="undefined"!=typeof window?window._:void 0!==n?n._:null,i=("undefined"!=typeof window?window.$:void 0!==n&&n.$,"undefined"!=typeof window?window.joint:void 0!==n?n.joint:null);e("./resizereactor").ResizeReactor;t.EmbeddingReactor=function e(n){if(!(this instanceof e))return new e(n);if(!((n=n||{}).paper&&"object"==typeof n.paper&&n.paper instanceof i.dia.Paper))throw new Error("paper option is mandatory");if(!n.model||"object"!=typeof n.model)throw new Error("model option is mandatory");if(!n.isValidParent||"function"!=typeof n.isValidParent)throw new Error("isValidParent option is mandatory");if(!n.undoReactor||"object"!=typeof n.undoReactor)throw new Error("undoReactor option is mandatory");var t,r=n.paper,a=n.model,d=n.isValidParent,l=n.undoReactor;function s(e){var n=e.model,t=a.findModelsInArea(n.getBBox({useModelGeometry:!0}));if(t.length)return o.chain(t).map((function(e){return r.findViewByModel(e)})).filter((function(n){return d(e,n)})).sortBy(o.method("get","z")).last().value()}r.on("cell:pointerdown",(function(e,n,i,r){o.noop(n,i,r);var d=e.model;d.isLink()||(t=d.position(),l.start(),d.toFront({deep:!0}),a.startBatch("to-front"),o.invoke(a.getLinks(),"toFront"),a.stopBatch("to-front"))})),r.on("cell:pointerup",(function(e,n,i,r){o.noop(n,i,r);var c,f,p,u=e.model;function w(){l.stop()&&(a.startBatch("to-back"),l.undo(!1),a.stopBatch("to-back"))}function g(){o.each(a.getConnectedLinks(u,{deep:!0}),(function(e){e.reparent()})),l.stop()}u.isLink()||(((c=u.position()).x!==t.x||c.y!==t.y)&&((p=(p=s(e))&&p.model)||d(e,void 0))?(f=a.getCell(u.get("parent")),p?f?(f.unembed(u,{reparenting:!0}),p.embed(u),g()):(p.embed(u),g()):f?(f.unembed(u),g()):l.stop()):w())})),a.on("add",(function(e){if(e.isLink())return e.get("parent")||e.reparent();var n,t=e,i=r.findViewByModel(t);if(t.get("parent"))return(n=a.getCell(t.get("parent"))).unembed(t,{reparenting:!0}),void n.embed(t);(n=(n=s(i))&&n.model)?n.embed(t):d(i,void 0)?t.set("parent"):o.defer((function(){t.remove()}))}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./resizereactor":24}],7:[function(e,n,t){(function(n){"use strict";var o=void 0!==d?d._:void 0!==n?n._:null,i=void 0!==d?d.$:void 0!==n?n.$:null,r=void 0!==d?d.Backbone:void 0!==n?n.Backbone:null,a=void 0!==d?d.joint:void 0!==n?n.joint:null,d=void 0!==d?d.window:void 0!==n?n.window:null,l=e("./map").Map,s=e("./itemdragger").ItemDragger,c=e("./panreactor").PanReactor,f=e("./zoomreactor").ZoomReactor,p=e("./manipulationreactor").ManipulationReactor,u=e("./embeddingreactor").EmbeddingReactor,w=e("./undoreactor").UndoReactor,g=e("./elementsmenu").ElementsMenu,h=e("./linkconnectionpoint").linkConnectionPoint,m=e("./validateconnection").validateConnection;function v(e,n){return!!e&&(!n||e.model.id!==n.model.id)}t.Board=function e(n){if(!(this instanceof e))return new e(n);if(o.extend(this,r.Events),!(n=n||{}).model||"object"!=typeof n.model)throw new Error("model option is mandatory");if(n.actions&&!Array.isArray(n.actions))throw new Error("actions option should be an Array");if(n.defaultLink&&"function"!=typeof n.defaultLink)throw new Error("defaultLink option must be a function");if(n.isValidParent&&"function"!=typeof n.isValidParent)throw new Error("isValidParent option must be a function");if(!n.el)throw new Error("el option is mandatory");if(0===i(n.el).length)throw new Error("invalid el option");var t=this,y=i(i(n.el).addClass("almost-joint-paper")[0]),b=n.model,x=n.defaultLink||o.noop,k=n.isValidParent||v,E=new a.dia.Paper({el:y,width:y.width(),height:y.height(),model:b,gridSize:10,defaultLink:x,multiLinks:!1,linkConnectionPoint:h,linkPinning:!1,validateConnection:m,interactive:!n.readonly}),C=l({paper:E,el:y,model:b,linkConnectionPoint:h}),j=w({el:y,model:b}),z=f({paper:E,el:y,model:b,minScale:n.minScale||.01,maxScale:n.maxScale||2}),S=p({paper:E,el:y,model:b,gridSize:10,actions:n.actions,resize:n.resize,rotate:n.rotate,magnetize:n.magnetize,undoReactor:j}),M=u({paper:E,model:b,isValidParent:k,undoReactor:j});function P(){var e=y.offset().left,n=y.offset().top,t=y.width(),o=y.height(),i=a.g.point(e,n),r=a.g.point(e+t,n+o),d=E.clientToLocalPoint(i),l=E.clientToLocalPoint(r);C.setViewport({x:d.x,y:d.y,width:l.x-d.x,height:l.y-d.y})}o.noop(M),y[0].addEventListener("mousedown",(function(e){if(i(e.target).hasClass("almost-joint-no-grip")){e.stopPropagation();var n=E.snapToGrid({x:e.clientX,y:e.clientY});c({paper:E,el:y,x:n.x,y:n.y})}}),!0),S.on("all",this.trigger,this),E.on("all",this.trigger,this),E.on("blank:pointerdown",(function(e,n,t){o.noop(e),c({paper:E,el:y,x:n,y:t})})),i(d).resize((function(){y.css("width","").css("height",""),E.setDimensions(y.width(),y.height()),P()})),E.on("translate",P),E.on("scale",P),b.once("add",P),t.zoomE=function(){z.zoomE()},t.paper=function(){return E},t.download=function(){C.download()},t.clearHistory=function(){j.clear()},t.startUndoSequence=function(){return j.start()},t.stopUndoSequence=function(){return j.stop()},t.createItemDragger=function(e){return s({paper:E,el:(e=e||{}).el,model:b,gridSize:10,createElements:e.createElements,width:e.width,minHeight:e.minHeight,linkConnectionPoint:h,undoReactor:j})},t.createElementsMenu=function(e){return g({container:(e=e||{}).container,template:e.template,builders:e.builders,createItemDragger:t.createItemDragger,width:e.width,minHeight:e.minHeight})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./elementsmenu":5,"./embeddingreactor":6,"./itemdragger":9,"./linkconnectionpoint":12,"./manipulationreactor":13,"./map":15,"./panreactor":23,"./undoreactor":28,"./validateconnection":30,"./zoomreactor":31}],8:[function(e,n,t){n.exports='<div class="almost-joint-item-dragger"></div>\r\n'},{}],9:[function(e,n,t){(function(n){"use strict";var o="undefined"!=typeof window?window.$:void 0!==n?n.$:null,i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.Backbone:void 0!==n?n.Backbone:null,a="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,d="undefined"!=typeof window?window.document:void 0!==n?n.document:null;function l(n){if(!(this instanceof l))return new l(n);if(i.extend(this,r.Events),!(n=n||{}).model||"object"!=typeof n.model)throw new Error("model option is mandatory");if(!n.paper||"object"!=typeof n.paper)throw new Error("paper option is mandatory");if(!n.createElements||"function"!=typeof n.createElements)throw new Error("createElements option is mandatory");if(!n.linkConnectionPoint||"function"!=typeof n.linkConnectionPoint)throw new Error("linkConnectionPoint option is mandatory");if(!n.el)throw new Error("el option is mandatory");if(0===o(n.el).length)throw new Error("invalid el options");if("number"!=typeof n.gridSize)throw new Error("gridSize option is mandatory and has to be a number");if(n.gridSize<0)throw new Error("gridSize cannot be less than zero");if("number"!=typeof n.width)throw new Error("width option is mandatory and has to be a number");if(n.width<0)throw new Error("width cannot be less than zero");if(n.minHeight<0)throw new Error("minHeight cannot be less than zero");if(!n.undoReactor||"object"!=typeof n.undoReactor)throw new Error("model option is mandatory");var t,s,c,f,p,u,w=this,g=n.gridSize,h=n.createElements,m=n.linkConnectionPoint,v=o(o(n.el)[0]),y=n.paper,b=n.model,x=n.minHeight,k=n.width-2*g,E=n.undoReactor,C=h(),j=(u=o(e("./dragger.html")),o(d.body).append(u),u),z=new a.dia.Graph,S=new a.dia.Paper({el:j,width:k,model:z,linkConnectionPoint:m,gridSize:g});z.addCells(C),t=function(e,n,t,o,r){var d=i(n).map((function(n){return e.findViewByModel(n).getBBox()})).reduce((function(e,n){return e.union(n)})),l=Math.max(d.width,d.height)+2*r,s=Math.max(1,l/t),c=t*s,f=Math.max(d.height+2*r,o*s),p=(c-d.width)/2,u=(f-d.height)/2,w=a.g.point(a.g.snapToGrid(d.x-p,r),a.g.snapToGrid(d.y-u,r));return new a.shapes.basic.Rect({position:w,size:{width:c,height:f},attrs:{rect:{fill:"transparent",stroke:"transparent"}}})}(S,C,k,x,g),z.addCell(t),s=t.position(),c=t.get("size"),f=k/c.width,p=c.height*f,S.scale(f,f),S.setDimensions(k,p),v.append(j),function(e,n){i.each(n,(function(n){e.findViewByModel(n).$el.css("pointer-events","none")}))}(S,C),i.each(C,(function(e){e.get("parent")||t.embed(e)})),t.translate(-s.x,-s.y),S.on("cell:pointerdown",(function(n,r,d,l){i.noop(n);var s=o(e("./overlay.html")),c=o(y.el),u=o("<div></div>").css("height",j.height()+2*g),h=c.offset().left,m=c.offset().top,x=c.width(),M=c.height(),P=a.g.point(h,m),R=a.g.point(h+x,m+M),B=a.g.point(r.clientX,r.clientY),L=y.clientToLocalPoint(P),T=y.clientToLocalPoint(R),A=y.clientToLocalPoint(B),_=a.g.point(x/(T.x-L.x),M/(T.y-L.y)),D=a.g.point(a.g.snapToGrid(A.x-d,g),a.g.snapToGrid(A.y-l,g));function O(){t.translate(-D.x,-D.y)}c.append(s),s.append(j),v.append(u),S.setDimensions(x,M),S.scale(_.x,_.y),S.setOrigin(-L.x*_.x,-L.y*_.y),t.translate(D.x,D.y),S.once("cell:pointermove",O),S.on("cell:pointerup",(function e(n,o,r,d){i.noop(n,o),S.off("cell:pointermove",O);var l,c,g=t.position(),h=a.g.rect(0,0,y.options.width,y.options.height),m=y.localToPaperPoint(y.clientToLocalPoint(S.localToClientPoint(a.g.point(r,d))));h.containsPoint(m)&&(c=i.filter(C,(function(e){return e.get("parent")===t.id})),i.each(c,(function(e){t.unembed(e)})),l=function(e,n){var t=e.cloneCells(n);return i.map(n,(function(e){return t[e.id]}))}(z,C),i.each(l,(function(e){e.unset("z")})),E.start(),b.addCells(l),E.stop(),i.each(c,(function(e){t.embed(e)}))),u.remove(),v.append(j),s.remove(),t.translate(-g.x,-g.y),S.setDimensions(k,p),S.scale(f,f),S.setOrigin(0,0),S.off("cell:pointerup",e),w.trigger("drag:end")})),w.trigger("drag:start")}))}l.prototype=Object.create(l.prototype),t.ItemDragger=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./dragger.html":8,"./overlay.html":10}],10:[function(e,n,t){n.exports='<div class="almost-join-item-dragger-overlay"></div>\r\n'},{}],11:[function(e,n,t){n.exports='<svg\r\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n   xmlns:cc="http://creativecommons.org/ns#"\r\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n   xmlns:svg="http://www.w3.org/2000/svg"\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   xml:space="preserve"\r\n   viewBox="0 0 44.236 44.236"\r\n   height="44.236"\r\n   width="44.236"\r\n   y="0px"\r\n   x="0px"\r\n   id="Capa_1"\r\n   version="1.1"><metadata\r\n     id="metadata53"><rdf:RDF><cc:Work\r\n         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type\r\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs\r\n     id="defs51" /><circle\r\n     r="22.118"\r\n     cy="22.118"\r\n     cx="22.118"\r\n     id="path4181"\r\n     style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.40000001;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker:none;enable-background:accumulate" /><path\r\n     id="path7"\r\n     d="M 22.118,44.236 C 9.922,44.236 0,34.314 0,22.119 0,9.923 9.922,0 22.118,0 c 12.196,0 22.118,9.923 22.118,22.119 0,12.195 -9.922,22.117 -22.118,22.117 z m 0,-42.736 C 10.75,1.5 1.5,10.75 1.5,22.119 c 0,11.369 9.25,20.617 20.618,20.617 11.368,0 20.618,-9.248 20.618,-20.617 C 42.736,10.75 33.486,1.5 22.118,1.5 Z" /><g\r\n     id="g19" /><g\r\n     id="g21" /><g\r\n     id="g23" /><g\r\n     id="g25" /><g\r\n     id="g27" /><g\r\n     id="g29" /><g\r\n     id="g31" /><g\r\n     id="g33" /><g\r\n     id="g35" /><g\r\n     id="g37" /><g\r\n     id="g39" /><g\r\n     id="g41" /><g\r\n     id="g43" /><g\r\n     id="g45" /><g\r\n     id="g47" /><g\r\n     id="g3"\r\n     transform="matrix(0.07890863,-0.07890863,0.07890863,0.07890863,0.90476107,22.118124)"><path\r\n       id="path5"\r\n       d="m 265.171,125.577 -80,-80 c -4.881,-4.881 -12.797,-4.881 -17.678,0 -4.882,4.882 -4.882,12.796 0,17.678 l 58.661,58.661 -213.654,0 c -6.903,0 -12.5,5.597 -12.5,12.5 0,6.902 5.597,12.5 12.5,12.5 l 213.654,0 -58.659,58.661 c -4.882,4.882 -4.882,12.796 0,17.678 2.44,2.439 5.64,3.661 8.839,3.661 3.199,0 6.398,-1.222 8.839,-3.661 l 79.998,-80 c 4.882,-4.882 4.882,-12.796 0,-17.678 z" /></g></svg>\r\n'},{}],12:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,o="undefined"!=typeof window?window.joint:void 0!==e?e.joint:null,i={top:!0,left:!0,bottom:!0,right:!0};function r(e,n,t){var r=(t=function(e){return e&&(e.top||e.left||e.bottom||e.right)?e:i}(t)).left?Math.abs(e.origin().x-n.origin().x):1/0,a=t.top?Math.abs(e.origin().y-n.origin().y):1/0,d=t.right?Math.abs(e.corner().x-n.corner().x):1/0,l=t.bottom?Math.abs(e.corner().y-n.corner().y):1/0,s=Math.min(r,a,d,l),c=e.containsRect(n)?n.center():e.center();return s===a?o.g.point(c.x,e.origin().y):s===r?o.g.point(e.origin().x,c.y):s===l?o.g.point(c.x,e.corner().y):o.g.point(e.corner().x,c.y)}function a(e,t,i){if(i){if((t=o.g.normalizeAngle(t))%90==0)return i;var r,a=e.bbox(t),d=e.center(),l=e.origin().rotate(d,t),s=e.topRight().rotate(d,t),c=e.corner().rotate(d,t),f=e.bottomLeft().rotate(d,t),p=o.g.line(l,f),u=o.g.line(s,l),w=o.g.line(c,f),g=o.g.line(s,c);switch(a.sideNearestToPoint(i)){case"top":r=o.g.line(i,o.g.point(i.x,a.corner().y));break;case"left":r=o.g.line(i,o.g.point(a.origin().x,i.y));break;case"right":r=o.g.line(i,o.g.point(a.corner().x,i.y));break;case"bottom":r=o.g.line(i,o.g.point(i.x,a.origin().y))}return n.chain([p,u,w,g]).map(n.bind(r.intersection,r)).reduce((function(e,n){return n?e?i.distance(e)>i.distance(n)?n:e:n:e})).value()}}t.linkConnectionPoint=function(e,n,t,i){var d,l=n.model,s=0,c=function(){var n,t=e.model,r=t.get("vertices"),a=t.get("source").id,c=t.get("target").id;if(a===l.id){if(r&&r.length>0)return o.g.rect(r[0].x,r[0].y,0,0);if(c)return n=t.getTargetElement(),s=n.get("angle"),d=n.get("borders"),n.getBBox({useModelGeometry:!0})}else{if(r&&r.length>0)return o.g.rect(r[r.length-1].x,r[r.length-1].y,0,0);if(a)return n=t.getSourceElement(),s=n.get("angle"),d=n.get("borders"),n.getBBox({useModelGeometry:!0})}return o.g.rect(i.x,i.y,0,0)}();function f(e,n,t,i){n=n||c,i=i||s,t=t||l.get("angle");var f=(e=e||l.getBBox({useModelGeometry:!0})).bbox(t),p=n;return f.containsRect(p)?a(e,t,r(f,p,d)):p.containsRect(f)?a(e,t,r(f,p,l.get("borders"))):a(e,t,function(e,n){if(e.intersect(n))return!1;var t=Math.max(e.origin().x,n.origin().x),i=Math.min(e.corner().x,n.corner().x),r=Math.max(e.origin().y,n.origin().y),a=Math.min(e.corner().y,n.corner().y);return t<=i?e.pointNearestToPoint(o.g.point((t+i)/2,n.center().y)):r<=a&&e.pointNearestToPoint(o.g.point(n.center().x,(r+a)/2))}(f,p))||e.intersectionWithLineFromCenterToPoint(n.center(),t)||a(e,t,f.pointNearestToPoint(n.center()))}return n.model.linkConnectionPoint?n.model.linkConnectionPoint(e,n,t,i,c,s,f):f()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,n,t){(function(n){"use strict";var o="undefined"!=typeof window?window._:void 0!==n?n._:null,i="undefined"!=typeof window?window.$:void 0!==n?n.$:null,r="undefined"!=typeof window?window.Backbone:void 0!==n?n.Backbone:null,a="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,d=e("mousetrap"),l="undefined"!=typeof window?window.navigator:void 0!==n?n.navigator:null,s=e("./resizereactor").ResizeReactor,c=e("./rotatereactor").RotateReactor;function f(e,n){return function(t){return void 0===t[e]?n:"function"==typeof t[e]?t[e]():t[e]}}var p=f("resizable",!1),u=f("rotatable",!1);t.ManipulationReactor=function n(f){if(!(this instanceof n))return new n(f);if(o.extend(this,r.Events),!((f=f||{}).paper&&"object"==typeof f.paper&&f.paper instanceof a.dia.Paper))throw new Error("paper option is mandatory");if(!f.model||"object"!=typeof f.model)throw new Error("model option is mandatory");if(f.actions&&!Array.isArray(f.actions))throw new Error("actions option should be an array");if(!f.el)throw new Error("el option is mandatory");if(0===i(f.el).length)throw new Error("invalid el option");if("number"!=typeof f.gridSize)throw new Error("gridSize option is mandatory and has to be a number");if(f.gridSize<0)throw new Error("gridSize cannot be less than zero");if(!f.undoReactor||"object"!=typeof f.undoReactor)throw new Error("undoReactor option is mandatory");var w=this,g=i(i(f.el)[0]),h=f.paper,m=f.model,v=f.gridSize,y=f.actions||[t.edit,t.delete],b=void 0===f.resize||!!f.resize,x=void 0===f.resize||!!f.rotate,k=void 0===f.magnetize||!!f.magnetize,E={},C=f.undoReactor;function j(e){if(!e.isLink()){var n,t,o=E[e.id];o&&(n=o.view.getBBox({useModelGeometry:!0}),o.el.css("left",n.x-v).css("top",n.y-v).css("width",n.width+2*v).css("height",n.height+2*v),t=e.get("angle"),i(o.el.find(".almost-joint-marker-rotate")).css("left",(n.width+94)/2*(1+Math.cos(a.g.toRad(t)))-36).css("top",(n.height+94)/2*(1+Math.sin(a.g.toRad(t)))-36))}}function z(e){var n=E[e.id];n&&(n.view.model.demagnetize&&n.view.model.demagnetize(),n.el.remove(),n.view.off("change:position change:size",j),delete E[e.id])}function S(e){o.map(E,(function(n,t){t!==e&&z(n.view.model)}))}g.attr("tabindex",1),h.on("cell:pointerdown",(function(n,t){if(!n.model.isLink()){var r;r=t,("mac"===l.platform.substr(0,3).toLowerCase()?r.metaKey:r.ctrlKey)||S(n.model.id);var a,d,f,M,P=n.model.id,R=E[P];R||((R=E[n.model.id]={el:(M=i(e("./manipulator.html")),g.append(M),M),view:n}).view.model.on("change:position change:size change:angle",j),R.view.model.on("change:id",(function(){delete E[P],P=this.id,E[this.id]=R})),a=i(R.el.find(".almost-joint-marker-tab")),R.context={undoReactor:C,close:function(){z(R.view.model)}},k&&R.view.model.magnetize&&R.view.model.demagnetize&&(d=i(o.first(i(e("./link.svg")))),f=i(o.first(i(e("./move.svg")))),d.on("click",(function(){var e=R.view.model.magnetize();(void 0===e||e)&&(d.after(f),d.detach())})),f.on("click",(function(){R.view.model.demagnetize(),f.after(d),f.detach()})),R.magnetizeCycle=function(){f.parent().length&&(f.click(),d.click())},a.append(d)),o.forEach(y,(function(e){e.checker(n.model)&&(e.click&&a.append(i(e.marker).clone().on("click",(function(){e.click.call(R.context,R.view)}))),e.event&&a.append(i(e.marker).clone().on("click",(function(){w.trigger("cell:"+e.event,R.view)}))))})),b&&p(n.model)&&(R.el.addClass("almost-joint-resizable"),["n","ne","e","se","s","sw","w","nw"].forEach((function(e){R.el.find(".almost-joint-marker-"+e).on("mousedown",(function(){s({view:R.view,paper:h,model:m,el:g,direction:e,gridSize:v,undoReactor:C})}))}))),x&&u(n.model)&&(R.el.addClass("almost-joint-rotatable"),R.el.find(".almost-joint-marker-rotate").on("mousedown",(function(){c({view:R.view,paper:h,model:m,el:g,angleStep:15,undoReactor:C})}))),j(n.model))}})),h.on("scale translate",(function(){o.map(E,(function(e){j(e.view.model)}))})),h.on("cell:pointermove",(function(e){j(e.model)})),m.on("change:target",(function(e){var n=E[e.get("source").id];e.toFront(),n&&n.view.model.magnetize&&n.view.model.demagnetize&&n.magnetizeCycle()})),m.on("remove",(function(e){z(e)})),g.mouseover((function(){g.focus()})),d(g[0]).bind("esc",o.ary(S,0)),h.on("blank:pointerdown",o.ary(S,0)),o.forEach(y,(function(e){e.shortcut&&d(g[0]).bind(e.shortcut,(function(){o.forEach(E,(function(n){e.checker(n.view.model)&&(e.click&&e.click.call(n.context,n.view),e.event&&w.trigger("cell:"+e.event,n.view))}))}))}))},t.delete={marker:e("./delete.svg"),checker:f("deletable",!0),click:function(e){this.undoReactor.start(),e.model.remove(),this.undoReactor.stop(),this.close()},shortcut:"del"},t.edit={marker:e("./edit.svg"),checker:f("editable",!1),event:"edit"}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./delete.svg":3,"./edit.svg":4,"./link.svg":11,"./manipulator.html":14,"./move.svg":22,"./resizereactor":24,"./rotatereactor":25,mousetrap:36}],14:[function(e,n,t){n.exports='<div class="almost-joint-manipulator">\r\n    <div class="almost-joint-marker-tab"></div>\r\n    <div class="almost-joint-marker-ne"></div>\r\n    <div class="almost-joint-marker-e"></div>\r\n    <div class="almost-joint-marker-se"></div>\r\n    <div class="almost-joint-marker-s"></div>\r\n    <div class="almost-joint-marker-sw"></div>\r\n    <div class="almost-joint-marker-w"></div>\r\n    <div class="almost-joint-marker-nw"></div>\r\n    <div class="almost-joint-marker-n"></div>\r\n    <div class="almost-joint-marker-rotate"></div>\r\n</div>\r\n'},{}],15:[function(e,n,t){(function(n){"use strict";var o="undefined"!=typeof window?window._:void 0!==n?n._:null,i="undefined"!=typeof window?window.$:void 0!==n?n.$:null,r="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,a=e("./preview").Preview,d=e("./viewport").Viewport;t.Map=function n(t){if(!(this instanceof n))return new n(t);if(!(t=t||{}).model||"object"!=typeof t.model)throw new Error("model option is Mandatory");if(!(t.paper&&"object"==typeof t.paper&&t.paper instanceof r.dia.Paper))throw new Error("paper option is Mandatory");if(!t.linkConnectionPoint||"function"!=typeof t.linkConnectionPoint)throw new Error("linkConnectionPoint option is Mandatory");if(!t.el)throw new Error("el option is Mandatory");if(0===i(t.el).length)throw new Error("invalid el option");var l,s=this,c=i(i(t.el)[0]),f=t.paper,p=t.linkConnectionPoint,u=(l=i(e("./preview.html")),c.append(l),l),w=function(){var n=i(e("./viewport.html"));return c.append(n),n}(),g=t.model,h=a({el:u,model:g,linkConnectionPoint:p}),m=d({el:w}),v=!0;g.on("change:position change:size change:angle change:parent add remove",(function(e){g.hasActiveBatch("add")||g.hasActiveBatch("clear")||v&&(e.isLink()||e.get("parent")||o.defer((function(){s.refresh()})))})),g.on("batch:stop",(function(e){"add"!==e.batchName&&"clear"!==e.batchName||g.hasActiveBatch("add")||g.hasActiveBatch("clear")||o.defer((function(){s.refresh()}))})),s.refresh=function(){var e,n,t,o,i;0===g.getElements().length?(n=c.width(),t=c.height(),o=f.clientToLocalPoint(r.g.point(0,0)),i=f.clientToLocalPoint(r.g.point(n,t)),e=r.g.rect(o.x,o.y,i.x-o.x,i.y-o.y)):(e=g.getBBox(g.getElements(),{useModelGeometry:!0}),e=r.g.rect(e.x-10,e.y-10,e.width+20,e.height+20)),h.setBBox(e),m.setBBox(e)},s.disableAutorefresh=function(){v=!1},s.enableAutorefresh=function(){v=!0},s.setViewport=function(e){m.setViewport(e)},s.download=function(){h.download()},s.refresh()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./preview":17,"./preview.html":16,"./viewport":19,"./viewport.html":18}],16:[function(e,n,t){n.exports="<div class='almost-joint-map'></div>\r\n"},{}],17:[function(e,n,t){(function(n){"use strict";var o="undefined"!=typeof window?window.$:void 0!==n?n.$:null,i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r="undefined"!=typeof window?window.atob:void 0!==n?n.atob:null,a="undefined"!=typeof window?window.Uint8Array:void 0!==n?n.Uint8Array:null,d="undefined"!=typeof window?window.Blob:void 0!==n?n.Blob:null,l="undefined"!=typeof window?window.saveAs:void 0!==n?n.saveAs:null,s=e("save-svg-as-png");t.Preview=function e(n){if(!(this instanceof e))return new e(n);if(!(n=n||{}).model||"object"!=typeof n.model)throw new Error("model option is Mandatory");if(!n.linkConnectionPoint||"function"!=typeof n.linkConnectionPoint)throw new Error("linkConnectionPoint option is Mandatory");if(!n.el)throw new Error("el option is Mandatory");if(0===o(n.el).length)throw new Error("invalid el option");var t=o(o(n.el)[0]),c=n.model,f=1,p=n.linkConnectionPoint,u=new i.dia.Paper({el:t,width:t.width(),height:t.height(),model:c,linkConnectionPoint:p,interactive:!1});this.setBBox=function(e){var n=t.width(),o=t.height(),i=n/e.width,r=o/e.height,a=Math.min(i,r),d=(n-e.width*a)/2-e.x*a,l=(o-e.height*a)/2-e.y*a;f=a,u.scale(a,a),u.setOrigin(d,l)},this.download=function(){s.svgAsPngUri(u.svg,{scale:3/f},(function(e){l(function(e){var n,t,o,i,l,s=e.indexOf("base64,"),c=e.substr(s+"base64,".length),f=e.substr(0,e.indexOf(";")),p=r(c),u=[];for(n=0;n<p.length;n+=512){for(t=p.slice(n,n+512),o=[],i=0;i<t.length;i+=1)o[i]=t.charCodeAt(i);l=new a(o),u.push(l)}return new d(u,{type:f})}(e),"model.png")}))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"save-svg-as-png":37}],18:[function(e,n,t){n.exports="<div class='almost-joint-map-viewport'></div>\r\n"},{}],19:[function(e,n,t){(function(n){"use strict";var o="undefined"!=typeof window?window.$:void 0!==n?n.$:null,i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r=e("./viewportoutline").ViewportOutline;t.Viewport=function e(n){if(!(this instanceof e))return new e(n);if(!(n=n||{}).el)throw new Error("el options is Mandatory");if(0===o(n.el).length)throw new Error("invalid el options");var t=o(o(n.el)[0]),a=new i.dia.Graph,d=new i.dia.Paper({el:t,width:t.width(),height:t.height(),model:a,interactive:!1}),l=new r({position:i.g.point(0,0),size:{width:1,height:1}});a.addCells([l]),this.setBBox=function(e){var n=t.width(),o=t.height(),i=n/e.width,r=o/e.height,a=Math.min(i,r),l=(n-e.width*a)/2-e.x*a,s=(o-e.height*a)/2-e.y*a;d.scale(a,a),d.setOrigin(l,s)},this.setViewport=function(e){l.position(e.x,e.y),l.resize(e.width,e.height)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./viewportoutline":20}],20:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window.$:void 0!==n&&n.$;var o="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null;t.ViewportOutline=o.shapes.basic.Generic.extend({markup:e("./markup.svg"),defaults:o.util.deepSupplement({type:"map.ViewportOutline",size:{width:1,height:1},attrs:{".almost-joint-viewport-bg-rect":{"follow-scale":"auto"},".almost-joint-viewport-outer-rect":{"ref-x":0,"ref-y":0,"ref-width":1,"ref-height":1,ref:".almost-joint-viewport-bg-rect"}}},o.shapes.basic.Generic.prototype.defaults)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./markup.svg":21}],21:[function(e,n,t){n.exports='<g class="scalable">\r\n    <rect class="almost-joint-viewport-bg-rect" width="1" height="1" fill="transparent" />\r\n</g>\r\n<rect class="almost-joint-viewport-outer-rect" fill="transparent" stroke="blue" stroke-width="1" />\r\n'},{}],22:[function(e,n,t){n.exports='<svg\r\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n   xmlns:cc="http://creativecommons.org/ns#"\r\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n   xmlns:svg="http://www.w3.org/2000/svg"\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r\n   version="1.1"\r\n   id="Capa_1"\r\n   x="0px"\r\n   y="0px"\r\n   width="44.236"\r\n   height="44.236"\r\n   viewBox="0 0 44.236 44.236"\r\n   xml:space="preserve"\r\n   inkscape:version="0.91 r13725"\r\n   sodipodi:docname="move.svg"><metadata\r\n     id="metadata53"><rdf:RDF><cc:Work\r\n         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type\r\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><defs\r\n     id="defs51" /><sodipodi:namedview\r\n     pagecolor="#ffffff"\r\n     bordercolor="#666666"\r\n     borderopacity="1"\r\n     objecttolerance="10"\r\n     gridtolerance="10"\r\n     guidetolerance="10"\r\n     inkscape:pageopacity="0"\r\n     inkscape:pageshadow="2"\r\n     inkscape:window-width="1600"\r\n     inkscape:window-height="837"\r\n     id="namedview49"\r\n     showgrid="false"\r\n     inkscape:zoom="7.5448594"\r\n     inkscape:cx="28.520049"\r\n     inkscape:cy="32.284412"\r\n     inkscape:window-x="-8"\r\n     inkscape:window-y="-8"\r\n     inkscape:window-maximized="1"\r\n     inkscape:current-layer="Capa_1" /><g\r\n     id="g19" /><g\r\n     id="g21" /><g\r\n     id="g23" /><g\r\n     id="g25" /><g\r\n     id="g27" /><g\r\n     id="g29" /><g\r\n     id="g31" /><g\r\n     id="g33" /><g\r\n     id="g35" /><g\r\n     id="g37" /><g\r\n     id="g39" /><g\r\n     id="g41" /><g\r\n     id="g43" /><g\r\n     id="g45" /><g\r\n     id="g47" /><g\r\n     id="g4177"><circle\r\n       r="22.118"\r\n       cy="22.118"\r\n       cx="22.118"\r\n       id="path4181"\r\n       style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.40000001;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker:none;enable-background:accumulate" /><path\r\n       inkscape:connector-curvature="0"\r\n       id="path7"\r\n       d="M 22.118,44.236 C 9.922,44.236 0,34.314 0,22.119 0,9.923 9.922,0 22.118,0 c 12.196,0 22.118,9.923 22.118,22.119 0,12.195 -9.922,22.117 -22.118,22.117 z m 0,-42.736 C 10.75,1.5 1.5,10.75 1.5,22.119 c 0,11.369 9.25,20.617 20.618,20.617 11.368,0 20.618,-9.248 20.618,-20.617 C 42.736,10.75 33.486,1.5 22.118,1.5 Z" /><g\r\n       id="g9"><circle\r\n         id="circle11"\r\n         r="1.41"\r\n         cy="22.438"\r\n         cx="22.118" /><path\r\n         inkscape:connector-curvature="0"\r\n         id="path13"\r\n         d="m 22.118,24.098 c -0.916,0 -1.66,-0.744 -1.66,-1.66 0,-0.915 0.745,-1.66 1.66,-1.66 0.915,0 1.659,0.745 1.659,1.66 0,0.916 -0.743,1.66 -1.659,1.66 z m 0,-2.821 c -0.64,0 -1.16,0.521 -1.16,1.16 0,0.639 0.521,1.161 1.16,1.161 0.639,0 1.159,-0.521 1.159,-1.161 0,-0.64 -0.519,-1.16 -1.159,-1.16 z" /></g><path\r\n       id="path7-2"\r\n       d="m 37.039974,21.736127 -0.214021,-0.324019 -4.000025,-4.000045 c -0.390033,-0.390026 -1.025986,-0.390026 -1.414002,0 -0.390025,0.390034 -0.390025,1.024038 0,1.414005 l 2.292035,2.292038 -10.586092,0 0,-10.586064 2.292034,2.292038 c 0.388016,0.390034 1.024029,0.390034 1.413994,0 0.388016,-0.390026 0.388016,-1.02403 0,-1.413997 l -4.000031,-4.000112 -0.01,-0.006 -0.314013,-0.207977 -0.38197,-0.07803 -0.0038,0 -0.378011,0.07803 -0.314013,0.207977 -0.012,0.006 -4.000031,4.000045 c -0.390026,0.390034 -0.390026,1.024038 0,1.414004 0.390026,0.389966 1.024029,0.390026 1.413994,0 l 2.294052,-2.292045 0,10.586131 -10.586032,0 2.292034,-2.292038 c 0.390026,-0.390034 0.390026,-1.024038 0,-1.414005 -0.390033,-0.389966 -1.024036,-0.390026 -1.414002,0 l -4.000092,4.000045 -0.006,0.01 -0.207976,0.314013 -0.07803,0.382039 0,0.0038 0.07803,0.378011 0.207976,0.312003 0.006,0.012 4.000032,4.000045 c 0.390026,0.390034 1.024029,0.390034 1.413995,0 0.390033,-0.388016 0.390033,-1.02403 0,-1.414004 l -2.291967,-2.292098 10.586092,0 0,10.586131 -2.292034,-2.292046 c -0.390026,-0.388016 -1.024029,-0.388016 -1.413995,0 -0.390033,0.390034 -0.390033,1.025988 0,1.414005 l 4.000032,4.000045 0.324018,0.215964 0.378003,0.07602 0.0038,0 0.381978,-0.07803 0.324018,-0.214022 4.000031,-4.000045 c 0.388008,-0.390026 0.388008,-1.02598 0,-1.413997 -0.390033,-0.390033 -1.025986,-0.390033 -1.414002,0 l -2.292027,2.292038 0,-10.586063 10.586092,0 -2.292034,2.292038 c -0.388016,0.388016 -0.388016,1.024038 0,1.414004 0.390026,0.388016 1.025979,0.388016 1.413995,0 l 4.000031,-4.000045 0.215964,-0.324018 0.07602,-0.378011 0,-0.0038 -0.07803,-0.381979 z"\r\n       style="fill:#010002"\r\n       inkscape:connector-curvature="0" /></g></svg>\r\n'},{}],23:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window.$:void 0!==e?e.$:null,o="undefined"!=typeof window?window.joint:void 0!==e?e.joint:null;t.PanReactor=function e(t){if(!(this instanceof e))return new e(t);if(!((t=t||{}).paper&&"object"==typeof t.paper&&t.paper instanceof o.dia.Paper))throw new Error("paper option is mandatory");if("number"!=typeof t.x)throw new Error("x option is mandatory and has to be a number");if("number"!=typeof t.y)throw new Error("y option is mandatory and has to be a number");if(!t.el)throw new Error("el option is mandatory");if(0===n(t.el).length)throw new Error("invalid el option");var i,r=n(n(t.el)[0]),a=t.paper,d=t.x,l=t.y;function s(e){var n=r.offset().left,t=r.offset().top,i=r.width(),s=r.height(),c=o.g.point(n,t),f=o.g.point(n+i,t+s),p=a.clientToLocalPoint(c),u=a.clientToLocalPoint(f),w=o.g.point(i/(u.x-p.x),s/(u.y-p.y)),g=o.g.point(d*w.x+n,l*w.y+t),h=o.g.point(e.clientX-g.x,e.clientY-g.y);a.setOrigin(h.x,h.y)}function c(){r.off("mouseup",c),r.off("mouseout",i),r.off("mousemove touchmove",s),r.removeClass("almost-joint-manipulating")}i=function(e){e.target===r.get(0)&&c()},r.on("mouseup",c),r.on("mouseout",i),r.on("mousemove touchmove",s),r.addClass("almost-joint-manipulating")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,o="undefined"!=typeof window?window.$:void 0!==e?e.$:null,i="undefined"!=typeof window?window.joint:void 0!==e?e.joint:null;t.ResizeReactor=function e(t){if(!(this instanceof e))return new e(t);if(!((t=t||{}).paper&&"object"==typeof t.paper&&t.paper instanceof i.dia.Paper))throw new Error("paper option is mandatory");if(!t.view||"object"!=typeof t.view)throw new Error("view option is mandatory");if(!t.model||"object"!=typeof t.model)throw new Error("model option is mandatory");if(!t.el)throw new Error("el option is mandatory");if(0===o(t.el).length)throw new Error("invalid el option");if(!t.direction)throw new Error("direction option is mandatory");if(-1===["ne","e","se","s","sw","w","nw","n"].indexOf(t.direction))throw new Error("invalid direction option");if("number"!=typeof t.gridSize)throw new Error("gridSize option is mandatory and has to be a number");if(t.gridSize<0)throw new Error("gridSize cannot be less than zero");if(!t.undoReactor||"object"!=typeof t.undoReactor)throw new Error("undoReactor option is mandatory");var r,a=o(o(t.el)[0]),d=t.paper,l=t.model,s=t.gridSize,c=t.view.model,f=t.undoReactor,p=function(e){if(2===e.length)return{v:e.substr(0,1),h:e.substr(-1)};switch(e){case"n":case"s":return{v:e};case"w":case"e":return{h:e}}}(t.direction),u=function(){var e,t,o,i=c.minsize,r=n.filter(c.getEmbeddedCells(),(function(e){return e.isContraint})),a=i.width,d=i.height;if(r.length){switch(o=l.getBBox(r,{useModelGeometry:!0}),t=c.getBBox({useModelGeometry:!0}),e=c.padding,p.h){case"e":a=o.corner().x-t.origin().x+e.right;break;case"w":a=t.corner().x-o.origin().x+e.left}switch(p.v){case"s":d=o.corner().y-t.origin().y+e.bottom;break;case"n":d=t.corner().y-o.origin().y+e.top}return{width:Math.max(a,i.width),height:Math.max(d,i.height)}}return i}();function w(e){var n,t,o,r,a=function(e){var n,t,o=c.get("parent");return e=i.g.point(i.g.snapToGrid(e.x,s),i.g.snapToGrid(e.y,s)),o&&(n=(o=l.getCell(o)).getBBox({useModelGeometry:!0}),t=o.padding,e=i.g.point(Math.max(Math.min(e.x,n.corner().x-t.right),n.x+t.left),Math.max(Math.min(e.y,n.corner().y-t.bottom),n.y+t.top))),e}(function(e,n){var t=e.x,o=e.y;switch(n.h){case"e":t-=s;break;case"w":t+=s}switch(n.v){case"s":o-=s;break;case"n":o+=s}return i.g.point(t,o)}(d.clientToLocalPoint({x:e.clientX,y:e.clientY}),p)),f=c.get("position"),w=c.get("size");switch(p.h){case"e":n=Math.max(a.x-f.x,u.width),o=f.x;break;case"w":n=Math.max(w.width-a.x+f.x,u.width),o=f.x+w.width-n;break;default:n=w.width,o=f.x}switch(p.v){case"s":t=Math.max(a.y-f.y,u.height),r=f.y;break;case"n":t=Math.max(w.height-a.y+f.y,u.height),r=f.y+w.height-t;break;default:t=w.height,r=f.y}c.position(o,r),c.resize(n,t)}function g(e){var n=i.g.point(e.clientX,e.clientY);return n=i.g.rect(a.offset().left,a.offset().top,a.width(),a.height()).pointNearestToPoint(n),e.clientX=n.x,e.clientY=n.y,w(e)}function h(){a.off("mouseup",h),a.off("mouseenter",r),a.off("mousemove",w),a.off("mouseleave",g),a.removeClass("almost-joint-manipulating"),a.removeClass("almost-joint-resizing-"+t.direction),f.stop()}f.start(),r=function(e){0===e.buttons&&h()},a.on("mouseup",h),a.on("mouseenter",r),a.on("mousemove",w),a.on("mouseleave",g),a.addClass("almost-joint-manipulating"),a.addClass("almost-joint-resizing-"+t.direction)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,n,t){(function(e){"use strict";"undefined"!=typeof window?window._:void 0!==e&&e._;var n="undefined"!=typeof window?window.$:void 0!==e?e.$:null,o="undefined"!=typeof window?window.joint:void 0!==e?e.joint:null;t.RotateReactor=function e(t){if(!(this instanceof e))return new e(t);if(!((t=t||{}).paper&&"object"==typeof t.paper&&t.paper instanceof o.dia.Paper))throw new Error("paper option is mandatory");if(!t.view||"object"!=typeof t.view)throw new Error("view option is mandatory");if(!t.el)throw new Error("el option is mandatory");if(0===n(t.el).length)throw new Error("invalid el option");if("number"!=typeof t.angleStep)throw new Error("angleStep option is mandatory and has to be a number");if(t.angleStep<0)throw new Error("angleStep cannot be less than zero");if(!t.undoReactor||"object"!=typeof t.undoReactor)throw new Error("undoReactor option is mandatory");var i,r=n(n(t.el)[0]),a=t.paper,d=t.view.model,l=t.angleStep,s=t.undoReactor;function c(e){var n=a.clientToLocalPoint({x:e.clientX,y:e.clientY}),t=d.getBBox({useModelGeometry:!0}).center(),i=Math.atan2(n.y-t.y,n.x-t.x);d.rotate(Math.round(o.g.toDeg(i)/l)*l,!0)}function f(){r.off("mouseup",f),r.off("mouseout",i),r.off("mousemove",c),r.removeClass("almost-joint-manipulating"),s.stop()}s.start(),i=function(e){e.target===r.get(0)&&f()},r.on("mouseup",f),r.on("mouseout",i),r.on("mousemove",c),r.addClass("almost-joint-manipulating")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(e,n,t){(function(t){"use strict";var o="undefined"!=typeof window?window._:void 0!==t?t._:null,i=e("./haseffect");n.exports=function(e,n,t){var r=o.last(e);!function(e,n,t){return void 0!==e&&!o.isArray(e)&&(!!t.ui&&(e.model===n.model&&!(!e.delta||!n.delta)))}(r,n,t)?e.push(n):(!function(e,n){e.delta=o.assign(n.delta,e.delta),n.id&&(e.id=n.id)}(r,n),i(r)||e.pop())}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./haseffect":27}],27:[function(e,n,t){(function(e){"use strict";var t="undefined"!=typeof window?window._:void 0!==e?e._:null;n.exports=function(e){return!(e.delta&&!e.id)||t.every(e.delta,(function(n,o){return!t.isEqual(n,e.model.get(o))}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(e,n,t){(function(n){"use strict";var o="undefined"!=typeof window?window._:void 0!==n?n._:null,i="undefined"!=typeof window?window.$:void 0!==n?n.$:null,r="undefined"!=typeof window?window.navigator:void 0!==n?n.navigator:null,a="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,d=e("mousetrap"),l=e("./addtohistory"),s=e("./optimizehistory"),c=e("../../utils");t.UndoReactor=function e(n){if(!(this instanceof e))return new e(n);if(!((n=n||{}).model&&"object"==typeof n.model&&n.model instanceof a.dia.Graph))throw new Error("model option is mandatory");if(!n.el)throw new Error("el option is mandatory");if(0===i(n.el).length)throw new Error("invalid el option");var t=this,f=i(n.el)[0],p=n.model,u=!1,w=!1,g=!0,h=[],m={history:[],future:[]};function v(){return g?u?m.future:(w||(m.future.length=0),m.history):[]}function y(e){o([e]).flattenDeep().forEachRight((function(e){e.id&&c.changeId(e.model,e.id),e.delta&&e.model.set(e.delta,{undo:!0}),e.add&&e.model.remove(),e.remove&&p.addCell(e.model)})).commit()}p.on("add",(function(e){var n;!e.isLink()||u||w||(n=e.get("target"))&&n.id||t.start(),v().push({model:e,add:!0})})),p.on("change",(function(e,n){var i,r,a=e.changedAttributes();delete a.attrs,o.keys(a).length&&(function(e,n){var t;if(u||w)return!1;if(e.isLink()){if(n.source&&(t=e.previous("source"))&&t.id&&(!(t=e.get("source"))||!t.id))return!0;if(n.target&&(t=e.previous("target"))&&t.id&&(!(t=e.get("target"))||!t.id))return!0}return!1}(e,a)&&t.start(),i=v(),(r={model:e,delta:o.mapValues(a,(function(n,t){return o.noop(n),e.previous(t)}))}).delta.id&&(r.id=r.delta.id,delete r.delta.id),l(i,r,n),function(e,n){var t;if(u||w)return!1;if(e.isLink()){if(n.source&&(t=e.get("source"))&&t.id&&(!(t=e.previous("source"))||!t.id))return!0;if(n.target&&(t=e.get("target"))&&t.id&&(!(t=e.previous("target"))||!t.id))return!0}return!1}(e,a)&&t.stop())})),p.on("remove",(function(e){v().push({model:e,remove:!0})})),t.start=function(){m.future.length=0,h.push(m),m={history:[],future:[]}},t.stop=function(){if(h.length){var e=s(m.history);return m=h.pop(),!!e.length&&(1===e.length&&(e=o.head(e)),m.history.push(e),!0)}},t.undo=function(e){if(arguments.length<1&&(e=!0),m.history.length){u=!0,g=e;var n=m.history.pop(),i=m.future.slice();t.start(),y(n),i.push(o.flattenDeep(m.future)),t.stop(),m.future=i,u=!1,g=!0}},t.redo=function(){if(m.future.length){w=!0;var e=m.future.pop(),n=m.future.slice();t.start(),y(e),t.stop(),m.future=n,w=!1}},t.clear=function(){h=[],m={history:[],future:[]}},d(f).bind("mod+z",(function(){return t.undo(),!1})),d(f).bind(/Mac|iPod|iPhone|iPad/.test(r.platform)?"mod+shift+z":"mod+y",(function(){return t.redo(),!1}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils":33,"./addtohistory":26,"./optimizehistory":29,mousetrap:36}],29:[function(e,n,t){(function(t){"use strict";var o="undefined"!=typeof window?window._:void 0!==t?t._:null,i=e("./haseffect");var r=o.flow(o.flattenDeep,(function(e){var n=[],t=null;return o.forEachRight(e,(function(e){var i;e.delta?t&&t.model===e.model?((i=t.id||e.id)&&(t.id=i),t.delta=o.assign(t.delta,e.delta)):(t=e,n.unshift(e)):n.unshift(e)})),n}),(function(e){var n=o.takeRightWhile(e,(function(e){return!!e.delta&&(!e.id&&!i(e))}));return o.difference(e,n)}));n.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./haseffect":27}],30:[function(e,n,t){(function(e){"use strict";"undefined"!=typeof window?window.joint:void 0!==e&&e.joint;t.validateConnection=function(e,n,t,o,i,r){return e!==t&&(r.model.validateConnection?r.model.validateConnection(e,n,t,o,i,r):"source"===i?-1!==r.model.validSources.indexOf(e.model.get("type")):-1!==r.model.validTargets.indexOf(t.model.get("type")))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,o="undefined"!=typeof window?window.$:void 0!==e?e.$:null,i="undefined"!=typeof window?window.joint:void 0!==e?e.joint:null;t.ZoomReactor=function e(t){if(!(this instanceof e))return new e(t);if(!((t=t||{}).paper&&"object"==typeof t.paper&&t.paper instanceof i.dia.Paper))throw new Error("paper option is mandatory");if(!t.model||"object"!=typeof t.model)throw new Error("model option is mandatory");if(!t.el)throw new Error("el option is mandatory");if(0===o(t.el).length)throw new Error("invalid el option");if("number"!=typeof t.minScale)throw new Error("minScale option is mandatory and has to be a number");if("number"!=typeof t.maxScale)throw new Error("maxScale option is mandatory and has to be a number");if(t.minScale<0)throw new Error("minScale cannot be less than zero");if(t.minScale>t.maxScale)throw new Error("maxScale cannot be less the minScale");var r=o(o(t.el)[0]),a=t.paper,d=t.model,l=t.minScale,s=t.maxScale,c=50,f=50;function p(e,n){var t,o,d=e.clientX,c=e.clientY,f=r.offset().left,p=r.offset().top,u=r.width(),w=r.height(),g=i.g.point(f,p),h=i.g.point(f+u,p+w),m=i.g.point(d,c),v=a.clientToLocalPoint(g),y=a.clientToLocalPoint(h),b=a.clientToLocalPoint(m),x={x:u/(y.x-v.x),y:w/(y.y-v.y)};x=function(e){return Math.min(Math.max(e,l),s)}(x.x*Math.pow(1.1,n)),a.scale(x,x),v=a.clientToLocalPoint(g),y=a.clientToLocalPoint(h),x=i.g.point(u/(y.x-v.x),w/(y.y-v.y)),t=i.g.point(b.x*x.x,b.y*x.y),o=i.g.point(d-t.x,c-t.y),a.setOrigin(o.x-f,o.y-p),e.preventDefault()}function u(){if(0!==d.getElements().length){var e=r.width()-2*c,n=r.height()-2*f,t=d.getBBox(d.getElements(),{useModelGeometry:!0}),o=e/t.width,i=n/t.height,p=Math.max(Math.min(o,i,s),l),u=(e-t.width*p)/2-t.x*p,w=(n-t.height*p)/2-t.y*p;a.scale(p,p),a.setOrigin(u+c,w+f)}}a.on("blank:pointerdblclick",u),a.on("blank:mousewheel",n.rearg(p,0,3)),a.on("cell:mousewheel",n.rearg(p,1,4)),this.zoomE=function(){u()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null;t.changeId=function(e,t){var o,i,r,a,d,l=e.get("id"),s=e.graph;return l===t||(s?!s.getCell(t)&&(o=s.getCells(),i=s.getConnectedLinks(e,{inbound:!0}),r=s.getConnectedLinks(e,{outbound:!0}),a=s.getCell(e.get("parent")),d=e.getEmbeddedCells(),e.set("id",t,{silent:!0}),n.forEach(d,(function(e){e.set("parent",t,{silent:!0})})),a&&((d=a.get("embeds"))[d.indexOf(l)]=t,a.set("embeds",d,{silent:!0})),n.forEach(i,(function(e){e.prop("target/id",t,{silent:!0})})),n.forEach(r,(function(e){e.prop("source/id",t,{silent:!0})})),s.resetCells(o),e.set("id",l,{silent:!0}),e.set("id",t),!0):(e.set("id",t),!0))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,n,t){"use strict";t.sortCells=e("./sortcells").sortCells,t.changeId=e("./changeid").changeId,t.isFullyContained=e("./isfullycontained").isFullyContained},{"./changeid":32,"./isfullycontained":34,"./sortcells":35}],34:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window.joint:void 0!==e?e.joint:null;t.isFullyContained=function(e,t){if(t.id===e.id)return!1;var o=e.getBBox({useModelGeometry:!0}),i=t.padding,r=t.getBBox({useModelGeometry:!0});return n.g.rect(r.x+i.left,r.y+i.top,r.width-i.left-i.right,r.height-i.top-i.bottom).containsRect(o)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null;function o(e,t){return e?o(t[e].get("parent"),t).concat(e):n([])}t.sortCells=function(e){var t=n.zipObject(n.map(e,(function(e){return[e.id,e]}))),i=n.zipObject(n.map(e,(function(e){return[e.id,o(e.id,t).value()]})));function r(e,n){var o,i=t[e.get("parent")];return i?(o=i.get("embeds")).indexOf(e.id)-o.indexOf(n.id):e.id<n.id?-1:1}return e.sort((function(e,o){if(e.isLink()!==o.isLink())return o.isLink()?-1:1;if(e.isLink())return e.id<o.id?-1:1;var a,d=i[e.id],l=i[o.id];return d.length<l.length?-1:d.length>l.length?1:(a=n.intersection(d,l),d=d.slice(a.length),l=l.slice(a.length),0===d.length?r(e,o):r(t[d[0]],t[l[0]]))}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(e,n,t){!function(e,t,o){if(e){for(var i,r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},d={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},s=1;s<20;++s)r[111+s]="f"+s;for(s=0;s<=9;++s)r[s+96]=s.toString();g.prototype.bind=function(e,n,t){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,n,t),this},g.prototype.unbind=function(e,n){return this.bind.call(this,e,(function(){}),n)},g.prototype.trigger=function(e,n){return this._directMap[e+":"+n]&&this._directMap[e+":"+n]({},e),this},g.prototype.reset=function(){return this._callbacks={},this._directMap={},this},g.prototype.stopCallback=function(e,n){return!((" "+n.className+" ").indexOf(" mousetrap ")>-1)&&(!function e(n,o){return null!==n&&n!==t&&(n===o||e(n.parentNode,o))}(n,this.target)&&("INPUT"==n.tagName||"SELECT"==n.tagName||"TEXTAREA"==n.tagName||n.isContentEditable))},g.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},g.addKeycodes=function(e){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);i=null},g.init=function(){var e=g(t);for(var n in e)"_"!==n.charAt(0)&&(g[n]=function(n){return function(){return e[n].apply(e,arguments)}}(n))},g.init(),e.Mousetrap=g,void 0!==n&&n.exports&&(n.exports=g),"function"==typeof define&&define.amd&&define((function(){return g}))}function c(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent("on"+n,t)}function f(e){if("keypress"==e.type){var n=String.fromCharCode(e.which);return e.shiftKey||(n=n.toLowerCase()),n}return r[e.which]?r[e.which]:a[e.which]?a[e.which]:String.fromCharCode(e.which).toLowerCase()}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function u(e,n,t){return t||(t=function(){if(!i)for(var e in i={},r)e>95&&e<112||r.hasOwnProperty(e)&&(i[r[e]]=e);return i}()[e]?"keydown":"keypress"),"keypress"==t&&n.length&&(t="keydown"),t}function w(e,n){var t,o,i,r=[];for(t=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<t.length;++i)o=t[i],l[o]&&(o=l[o]),n&&"keypress"!=n&&d[o]&&(o=d[o],r.push("shift")),p(o)&&r.push(o);return{key:o,modifiers:r,action:n=u(o,r,n)}}function g(e){var n=this;if(e=e||t,!(n instanceof g))return new g(e);n.target=e,n._callbacks={},n._directMap={};var o,i={},r=!1,a=!1,d=!1;function l(e){e=e||{};var n,t=!1;for(n in i)e[n]?t=!0:i[n]=0;t||(d=!1)}function s(e,t,o,r,a,d){var l,s,c,f,u=[],w=o.type;if(!n._callbacks[e])return[];for("keyup"==w&&p(e)&&(t=[e]),l=0;l<n._callbacks[e].length;++l)if(s=n._callbacks[e][l],(r||!s.seq||i[s.seq]==s.level)&&w==s.action&&("keypress"==w&&!o.metaKey&&!o.ctrlKey||(c=t,f=s.modifiers,c.sort().join(",")===f.sort().join(",")))){var g=!r&&s.combo==a,h=r&&s.seq==r&&s.level==d;(g||h)&&n._callbacks[e].splice(l,1),u.push(s)}return u}function u(e,t,o,i){n.stopCallback(t,t.target||t.srcElement,o,i)||!1===e(t,o)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(t),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(t))}function h(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=f(e);t&&("keyup"!=e.type||r!==t?n.handleKey(t,function(e){var n=[];return e.shiftKey&&n.push("shift"),e.altKey&&n.push("alt"),e.ctrlKey&&n.push("ctrl"),e.metaKey&&n.push("meta"),n}(e),e):r=!1)}function m(e,n,t,a){function s(n){return function(){d=n,++i[e],clearTimeout(o),o=setTimeout(l,1e3)}}function c(n){u(t,n,e),"keyup"!==a&&(r=f(n)),setTimeout(l,10)}i[e]=0;for(var p=0;p<n.length;++p){var g=p+1===n.length?c:s(a||w(n[p+1]).action);v(n[p],g,a,e,p)}}function v(e,t,o,i,r){n._directMap[e+":"+o]=t;var a,d=(e=e.replace(/\s+/g," ")).split(" ");d.length>1?m(e,d,t,o):(a=w(e,o),n._callbacks[a.key]=n._callbacks[a.key]||[],s(a.key,a.modifiers,{type:a.action},i,e,r),n._callbacks[a.key][i?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:i,level:r,combo:e}))}n._handleKey=function(e,n,t){var o,i=s(e,n,t),r={},c=0,f=!1;for(o=0;o<i.length;++o)i[o].seq&&(c=Math.max(c,i[o].level));for(o=0;o<i.length;++o)if(i[o].seq){if(i[o].level!=c)continue;f=!0,r[i[o].seq]=1,u(i[o].callback,t,i[o].combo,i[o].seq)}else f||u(i[o].callback,t,i[o].combo);var w="keypress"==t.type&&a;t.type!=d||p(e)||w||l(r),a=f&&"keydown"==t.type},n._bindMultiple=function(e,n,t){for(var o=0;o<e.length;++o)v(e[o],n,t)},c(e,"keypress",h),c(e,"keydown",h),c(e,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},{}],37:[function(e,n,t){!function(){var e=void 0!==t&&t||"undefined"!=typeof define&&{}||this;function n(e){if(!((n=e)instanceof HTMLElement||n instanceof SVGElement))throw new Error("an HTMLElement or SVGElement is required; got "+e);var n}function o(e,n,t){for(var o=n.selectorRemap,i=n.modifyStyle,r=n.modifyCss||function(e,n){return(e=o?o(e):e)+" { "+(i?i(n):n)+" }\n"},a="",d=[],l=document.styleSheets,s=0;s<l.length;s++){try{var c=l[s].cssRules}catch(e){console.warn("Stylesheet could not be loaded: "+l[s].href);continue}if(null!=c)for(var f,p=0;p<c.length;p++,f=null){var u=c[p];if(void 0!==u.style){var w;try{w=u.selectorText}catch(e){console.warn('The following CSS rule has an invalid selector: "'+u+'"',e)}try{w&&(f=e.querySelector(w)||e.parentNode&&e.parentNode.querySelector(w))}catch(e){console.warn('Invalid CSS selector "'+w+'"',e)}if(f)a+=r(u.selectorText,u.style.cssText);else if(u.cssText.match(/^@font-face/)){var g=/url\(["']?(.+?)["']?\)/,h=u.cssText.match(g),m=h&&h[1]||"";m.match(/^data:/)&&(m=""),"about:blank"===m&&(m=""),m?(m.startsWith("../")?m=l[s].href+"/../"+m:m.startsWith("./")&&(m=l[s].href+"/."+m),d.push({text:u.cssText,fontUrlRegexp:g,format:v(m),url:m})):a+=u.cssText+"\n"}}}}function v(e){for(var n={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},t=Object.keys(n),o=0;o<t.length;++o){var i=t[o];if(e.indexOf("."+i)>0)return n[i]}return console.error("Unknown font format for "+e+"; Fonts may not be working correctly"),"application/octet-stream"}!function e(n){if(n.length>0){o(n.pop())}else t(a);function o(t){var o=new XMLHttpRequest;function i(o){console.warn("Failed to load font from: "+t.url),console.warn(o),a+=t.text+"\n",e(n)}function r(t,o){var i='url("data:'+t.format+";base64,"+o+'")';a+=t.text.replace(t.fontUrlRegexp,i)+"\n",setTimeout((function(){e(n)}),0)}o.addEventListener("load",(function(){var e=function(e){for(var n="",t=new Uint8Array(e),o=t.byteLength,i=0;i<o;i++)n+=String.fromCharCode(t[i]);return window.btoa(n)}(o.response);r(t,e)})),o.addEventListener("error",i),o.addEventListener("abort",i),o.open("GET",t.url),o.responseType="arraybuffer",o.send()}}(d)}function i(e,n,t){var o=e.viewBox&&e.viewBox.baseVal&&e.viewBox.baseVal[t]||null!==n.getAttribute(t)&&!n.getAttribute(t).match(/%$/)&&parseInt(n.getAttribute(t))||e.getBoundingClientRect()[t]||parseInt(n.style[t])||parseInt(window.getComputedStyle(e).getPropertyValue(t));return null==o||isNaN(parseFloat(o))?0:o}function r(e){for(var n=window.atob(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(n.length),i=new Uint8Array(o),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return new Blob([o],{type:t})}e.prepareSvg=function(e,t,r){n(e),(t=t||{}).scale=t.scale||1,t.responsive=t.responsive||!1;var a="http://www.w3.org/2000/xmlns/";!function(e,t){n(e);var o=e.querySelectorAll("image"),i=o.length,r=function(){0===i&&t()};r();for(var a=0;a<o.length;a++)!function(e){var n=e.getAttributeNS("http://www.w3.org/1999/xlink","href");if(n&&(t=n.value)&&0==t.lastIndexOf("http",0)&&-1==t.lastIndexOf(window.location.host))console.warn("Cannot render embedded images linking to external hosts: "+n.value);else{var t,o=document.createElement("canvas"),a=o.getContext("2d"),d=new Image;d.crossOrigin="anonymous",(n=n||e.getAttribute("href"))?(d.src=n,d.onload=function(){o.width=d.width,o.height=d.height,a.drawImage(d,0,0),e.setAttributeNS("http://www.w3.org/1999/xlink","href",o.toDataURL("image/png")),i--,r()},d.onerror=function(){console.log("Could not load "+n),i--,r()}):(i--,r())}}(o[a])}(e,(function(){var n,d,l=document.createElement("div"),s=e.cloneNode(!0);if("svg"==e.tagName)n=t.width||i(e,s,"width"),d=t.height||i(e,s,"height");else{if(!e.getBBox)return void console.error("Attempted to render non-SVG element",e);var c=e.getBBox();n=c.x+c.width,d=c.y+c.height,s.setAttribute("transform",s.getAttribute("transform").replace(/translate\(.*?\)/,""));var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.appendChild(s),s=f}s.setAttribute("version","1.1"),s.getAttribute("xmlns")||s.setAttributeNS(a,"xmlns","http://www.w3.org/2000/svg"),s.getAttribute("xmlns:xlink")||s.setAttributeNS(a,"xmlns:xlink","http://www.w3.org/1999/xlink"),t.responsive?(s.removeAttribute("width"),s.removeAttribute("height"),s.setAttribute("preserveAspectRatio","xMinYMin meet")):(s.setAttribute("width",n*t.scale),s.setAttribute("height",d*t.scale)),s.setAttribute("viewBox",[t.left||0,t.top||0,n,d].join(" "));for(var p=s.querySelectorAll("foreignObject > *"),u=0;u<p.length;u++)p[u].getAttribute("xmlns")||p[u].setAttributeNS(a,"xmlns","http://www.w3.org/1999/xhtml");l.appendChild(s),o(e,t,(function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML="<![CDATA[\n"+e+"\n]]>";var o=document.createElement("defs");if(o.appendChild(t),s.insertBefore(o,s.firstChild),r){var i=l.innerHTML;i=i.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href'),r(i,n,d)}}))}))},e.svgAsDataUri=function(n,t,o){e.prepareSvg(n,t,(function(e){var n,t="data:image/svg+xml;base64,"+window.btoa((n='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+e,n=(n=encodeURIComponent(n)).replace(/%([0-9A-F]{2})/g,(function(e,n){var t=String.fromCharCode("0x"+n);return"%"===t?"%25":t})),decodeURIComponent(n)));o&&o(t)}))},e.svgAsPngUri=function(t,o,i){n(t),(o=o||{}).encoderType=o.encoderType||"image/png",o.encoderOptions=o.encoderOptions||.8;var r=function(e,n,t){var r=document.createElement("canvas"),a=r.getContext("2d");r.width=n,r.height=t;var d,l=window.devicePixelRatio||1;r.style.width=r.width+"px",r.style.height=r.height+"px",r.width*=l,r.height*=l,a.setTransform(l,0,0,l,0,0),o.canvg?o.canvg(r,e):a.drawImage(e,0,0),o.backgroundColor&&(a.globalCompositeOperation="destination-over",a.fillStyle=o.backgroundColor,a.fillRect(0,0,r.width,r.height));try{d=r.toDataURL(o.encoderType,o.encoderOptions)}catch(e){if("undefined"!=typeof SecurityError&&e instanceof SecurityError||"SecurityError"==e.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw e}i(d)};o.canvg?e.prepareSvg(t,o,r):e.svgAsDataUri(t,o,(function(e){var n=new Image;n.onload=function(){r(n,n.width,n.height)},n.onerror=function(){console.error("There was an error loading the data URI as an image on the following SVG\n",window.atob(e.slice(26)),"\n","Open the following link to see browser's diagnosis\n",e)},n.src=e}))},e.download=function(e,n){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r(n),e);else{var t=document.createElement("a");if("download"in t){t.download=e,t.style.display="none",document.body.appendChild(t);try{var o=r(n),i=URL.createObjectURL(o);t.href=i,t.onclick=function(){requestAnimationFrame((function(){URL.revokeObjectURL(i)}))}}catch(e){console.warn("This browser does not support object URLs. Falling back to string URL."),t.href=n}t.click(),document.body.removeChild(t)}else window.open(n,"_temp","menubar=no,toolbar=no,status=no")}},e.saveSvg=function(t,o,i){n(t),i=i||{},e.svgAsDataUri(t,i,(function(n){e.download(o,n)}))},e.saveSvgAsPng=function(t,o,i){n(t),i=i||{},e.svgAsPngUri(t,i,(function(n){e.download(o,n)}))},"undefined"!=typeof define&&define((function(){return e}))}()},{}]},{},[1]);