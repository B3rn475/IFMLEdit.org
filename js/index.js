!function e(n,t,i){function r(o,s){if(!t[o]){if(!n[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var u=t[o]={exports:{}};n[o][0].call(u.exports,(function(e){return r(n[o][1][e]||e)}),u,u.exports,e,n,t,i)}return t[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window.joint:void 0!==n&&n.joint;var i=e("./ifml").ifml,r=e("./pcn").pcn;t.defaultLink=function(e,n){switch(e.model.get("type")){case"ifml.ViewComponent":return new i.links.DataFlow;case"ifml.Event":return new i.links.NavigationFlow;case"pcn.PlaceChart":case"pcn.Transition":return new r.links.Link}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ifml":22,"./pcn":221}],2:[function(e,n,t){"use strict";t.examples=[{title:"IFML 2",url:"examples/ifml2.json",image:"examples/ifml2.png"},{title:"IFML 3",url:"examples/ifml3.json",image:"examples/ifml3.png"},{title:"IFML 4",url:"examples/ifml4.json",image:"examples/ifml4.png"},{title:"IFML 5",url:"examples/ifml5.json",image:"examples/ifml5.png"},{title:"IFML 6",url:"examples/ifml6.json",image:"examples/ifml6.png"},{title:"IFML 7",url:"examples/ifml7.json",image:"examples/ifml7.png"},{title:"IFML 8",url:"examples/ifml8.json",image:"examples/ifml8.png"},{title:"IFML 8 multi page",url:"examples/ifml8-multi-page.json",image:"examples/ifml8-multi-page.png"},{title:"IFML 9",url:"examples/ifml9.json",image:"examples/ifml9.png"},{title:"IFML 10",url:"examples/ifml10.json",image:"examples/ifml10.png"},{title:"IFML 11",url:"examples/ifml11.json",image:"examples/ifml11.png"},{title:"IFML 12",url:"examples/ifml12.json",image:"examples/ifml12.png"},{title:"IFML 13",url:"examples/ifml13.json",image:"examples/ifml13.png"}]},{}],3:[function(e,n,t){(function(e){"use strict";var n=void 0!==a?a.$:void 0!==e?e.$:null,i=(void 0!==a?a.URL:void 0!==e&&e.URL,void 0!==a?a.Worker:void 0!==e?e.Worker:null),r=void 0!==a?a.document:void 0!==e?e.document:null,a=void 0!==a?a.window:void 0!==e?e.window:null;t.IFBrowser=function e(t){if(!(this instanceof e))return new e(t);if(!(t=t||{}).el)throw new Error("el option is mandatory");if(0===n(t.el).length)throw new Error("invalid el option");if(!t.address)throw new Error("address option is mandatory");if(0===n(t.address).length)throw new Error("invalid address option");if(!t.back)throw new Error("back option is mandatory");if(0===n(t.back).length)throw new Error("invalid back option");if(!t.forward)throw new Error("forward option is mandatory");if(0===n(t.forward).length)throw new Error("invalid forward option");if(!t.repeat)throw new Error("repeat option is mandatory");if(0===n(t.repeat).length)throw new Error("invalid repeat option");if(!t.go)throw new Error("go option is mandatory");if(0===n(t.go).length)throw new Error("invalid go option");var a,o=n(n(t.el)[0]),s=n(n(t.address)[0]),l=n(n(t.back)[0]),p=n(n(t.forward)[0]),u=n(n(t.repeat)[0]),c=n(n(t.go)[0]),d=r.createElement("iframe"),f=t.BASE_PATH||"",_=[],h=[];function m(e){(e=e||{}).headers=e.headers||{};var n={command:"http",method:"GET",headers:e.headers,url:f+s.val()};a.postMessage(n),h=[],_.push(n)}function g(e){e.data.command="http",a.postMessage(e.data),s.val(e.data.url.substr(f.length)),h=[],_.push(e.data)}d.sandbox="allow-scripts allow-forms allow-same-origin",d.src=f,o.append(d),d.contentDocument.write("<html><body></body></html>"),d.contentDocument.close(),l.click((function(){return _.length<=1||!a||(h.push(_.pop()),a.postMessage(_[_.length-1]),s.val(_[_.length-1].url.substr(f.length))),!1})),p.click((function(){return!(!h.length||!a)&&(_.push(h.pop()),a.postMessage(_[_.length-1]),s.val(_[_.length-1].url.substr(f.length)),!1)})),u.click((function(){return!(!_.length||!a)&&(a.postMessage(_[_.length-1]),s.val(_[_.length-1].url.substr(f.length)),!1)})),c.click((function(){return m(),!1})),s.on("keypress",(function(e){if(13===e.keyCode)return m(),!1})),d.addEventListener("load",(function(){var e=r.createElement("script");e.type="text/javascript",e.text="(function inject() {    function toArray(collection) {        var i,            array = [];        for (i = 0; i < collection.length; i += 1) {            array.push(collection[i]);        }        return array;    }    function onclick(link) {        link.addEventListener('click', function (event) {            var url = new URL(link.href);            window.postMessage({method: 'GET',                                headers: {                                    'Referer': toURL('').href,                                },                                url: url.pathname + url.search}, '*');            event.preventDefault();        });    }    function toURL(href) {        if (href === '') {            href = 'http://localhost' + document.body.attributes['data-url'];        }        return new URL(href);    }    function onsubmit(form) {        form.addEventListener('submit', function (event) {            var url = toURL(form.action),                fields;            if (form.method.toLowerCase() === 'get') {                toArray(form).forEach(function (field) {                    if (field.name) {                        url.searchParams.set(field.name, field.value);                    }                });                window.postMessage({method: 'GET',                                    headers: {                                        'Referer': toURL('').href,                                    },                                    url: url.pathname + url.search}, '*');            } else {                var body = new URL('http://localhost?');                toArray(form).map(function (field) {                    if (field.name) {                        body.searchParams.set(field.name, field.value);                    }                });                body = body.search.substr(1);                window.postMessage({method: 'POST',                                    url: url.pathname + url.search,                                    headers: {                                        'Referer': toURL('').href,                                        'Content-Type': 'application/x-www-form-urlencoded',                                        'Transfer-Encoding': 'utf-16',                                        'Content-Length': body.length                                    },                                    body: body}, '*');            }            event.preventDefault();        });    }    function getElementsByTagName(tagname) {        return toArray(document.getElementsByTagName(tagname));    }    getElementsByTagName('a').forEach(onclick);    getElementsByTagName('form').forEach(onsubmit);}())",d.contentDocument.body.attributes["data-url"]=_[_.length-1].url,d.contentDocument.body.appendChild(e),d.contentWindow.addEventListener("message",g,!1)})),this.start=function(e){a&&a.terminate(),(a=new i("./js/demo-web-server.js")).postMessage({command:"load",zip:e,BASE_PATH:f}),a.onmessage=function(e){if(3===Math.floor(e.data.statusCode/100)&&"string"==typeof e.data.headers.Location)return s.val(e.data.headers.Location),m({headers:{Referer:"http://localhost"+_[_.length-1].url}});d.contentDocument.write(e.data.content),d.contentDocument.close()}},this.getCollectionNames=function(e){var n=a.onmessage;a.onmessage=function(t){t.data.response&&"get_collection_names"===t.data.command&&(a.onmessage=n,e(t.data.error,t.data.collections))},a.postMessage({command:"get_collection_names"})},this.dumpCollection=function(e,n){var t=a.onmessage;a.onmessage=function(i){i.data.response&&"dump_collection"===i.data.command&&i.data.collection===e&&(a.onmessage=t,n(i.data.error,i.data.docs))},a.postMessage({command:"dump_collection",collection:e})},this.restoreCollection=function(e,n){a.postMessage({command:"restore_collection",collection:e,documents:n})},this.reload=function(){var e={command:"http",method:"GET",url:f};a.postMessage(e),s.val(""),_=[e],h=[]},this.hotReload=function(){u.click()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,n,t){(function(e){"use strict";var n=void 0!==r?r.$:void 0!==e?e.$:null,i=(void 0!==r?r.URL:void 0!==e&&e.URL,void 0!==r?r.Worker:void 0!==e&&e.Worker,void 0!==r?r.document:void 0!==e?e.document:null),r=void 0!==r?r.window:void 0!==e?e.window:null;t.IFClient=function e(t){if(!(this instanceof e))return new e(t);if(!(t=t||{}).el)throw new Error("el option is mandatory");if(0===n(t.el).length)throw new Error("invalid el option");var r=n(n(t.el)[0]),a=i.createElement("iframe");a.sandbox="allow-scripts allow-forms allow-same-origin allow-modals",a.scrolling=t.scrolling,r.append(a),this.start=function(e){a.src=t.BASE_PATH,n(a).on("load",(function i(){a.contentWindow.postMessage({command:"load",zip:e,BASE_PATH:t.BASE_PATH},"*"),n(a).off("load",i)}))},this.getCollectionNames=function(e){a.contentWindow.addEventListener("message",(function n(t){t.data.response&&"get_collection_names"===t.data.command&&(a.contentWindow.removeEventListener("message",n,!1),e(t.data.error,t.data.collections))}),!1),a.contentWindow.postMessage({command:"get_collection_names"},"*")},this.dumpCollection=function(e,n){a.contentWindow.addEventListener("message",(function t(i){i.data.response&&"dump_collection"===i.data.command&&i.data.collection===e&&(a.contentWindow.removeEventListener("message",t,!1),n(i.data.error,i.data.docs))}),!1),a.contentWindow.postMessage({command:"dump_collection",collection:e},"*")},this.restoreCollection=function(e,n){a.contentWindow.postMessage({command:"restore_collection",collection:e,documents:n},"*")},this.reload=function(){a.contentWindow.postMessage({command:"reload"},"*")},this.hotReload=function(){a.contentWindow.postMessage({command:"hot_reload"},"*")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=("undefined"!=typeof window?window.$:void 0!==n&&n.$,"undefined"!=typeof window?window.joint:void 0!==n?n.joint:null),a=e("color");t.Action=r.shapes.basic.Generic.extend({markup:e("./markup.svg"),defaults:r.util.deepSupplement({type:"ifml.Action",size:{width:75,height:50},name:"Action",attrs:{".":{magnet:"passive"},".ifml-action-reference-rect":{"follow-scale":"auto"},".ifml-action-background-rect":{"ref-x":7.5,"ref-y":0,"ref-width":-15,"ref-height":1,ref:".ifml-action-reference-rect"},".ifml-action-background-arrow-left":{"ref-x":0,"ref-y":0,"ref-height":1,ref:".ifml-action-reference-rect"},".ifml-action-background-arrow-right-wrapper":{"ref-dx":-10,ref:".ifml-action-reference-rect"},".ifml-action-background-arrow-right":{"ref-height":1,ref:".ifml-action-reference-rect"},".name":{"ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle",ref:".ifml-action-reference-rect"}}},r.shapes.basic.Generic.prototype.defaults),minsize:{width:75,height:50},padding:{top:0,right:0,bottom:0,left:0},resizable:!0,isContraint:!0,requireEmbedding:!1,fullyContained:!0,containers:["ifml.ViewContainer"],editable:function(){var e=this.graph,n=i.chain([{property:"name",name:"Name",type:"string"},{property:"parameters",name:"Parameters",type:"stringset"},{property:"results",name:"Results",type:"stringset"}]);return e&&(n=n.concat({property:"embeds",name:"Events",type:"elementslist",filter:function(n){switch(e.getCell(n).get("type")){case"ifml.Event":return!0;default:return!1}},display:function(n){return e.getCell(n).prop("name/text")}})),n.value()},statistics:function(){return this.get("statistics")},initialize:function(){this.on("change:size",this._sizeChanged,this),this.on("change:name",this._nameChanged,this),this.on("change:accent",this._accentChanged,this),this.on("change:parameters",this._inputChanged,this),this.on("change:results",this._outputChanged,this),r.shapes.basic.Generic.prototype.initialize.apply(this,arguments),this._sizeChanged(),this._nameChanged(),this._accentChanged(),this._inputChanged(),this._outputChanged()},_sizeChanged:function(){var e=this.get("size"),n=this.minsize;(e.width<n.width||e.height<n.height)&&this.resize(Math.max(e.width,n.width),Math.max(e.height,n.height))},_nameChanged:function(){this.attr({".name":{text:this.get("name")}})},_inputChanged:function(e,n,t){(t=t||{}).undo||this.graph&&i.forEach(this.graph.getConnectedLinks(this,{inbound:!0}),(function(e){e.validateBindings()}))},_outputChanged:function(e,n,t){if(!(t=t||{}).undo){var r=this;r.graph&&i(r.get("embeds")||[]).map((function(e){return r.graph.getCell(e)})).flatten().filter((function(e){return"ifml.Event"===e.get("type")})).map((function(e){return r.graph.getConnectedLinks(e,{outbound:!0})})).flatten().forEach((function(e){e.validateBindings()})).value()}},inputs:function(){return i(this.get("parameters")||[]).sort().uniq(!0).value()},outputs:function(){return i(this.get("results")||[]).sort().uniq(!0).value()},_accentChanged:function(){var e="black",n="lightgray",t=this.get("accent");"number"==typeof t&&(e=a.hsl(120*t,100,35).string(),n=a.hsl(120*t,75,90).string()),this.attr({".ifml-action-background":{stroke:e,fill:n}})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./markup.svg":6,color:242}],6:[function(e,n,t){n.exports='<g class="ifml-element">\n    <g class="scalable">\n        <rect class="ifml-action-reference-rect" width="1" height="1" fill="transparent"/>\n    </g>\n    <rect class="ifml-action-background ifml-action-background-rect" fill="lightgray" stroke="black" stroke-width="0.5"/>\n    <svg class="ifml-action-background-arrow-left" height="50" width="10" viewBox="0 0 10 50" preserveAspectRatio="none">\n        <polyline class="ifml-action-background" points="10,0 7.5,0 0.5,25 7.5,50 10,50" fill="lightgray" stroke="black" stroke-width="0.5"/>\n    </svg>\n    <g class="ifml-action-background-arrow-right-wrapper">\n        <svg class="ifml-action-background ifml-action-background-arrow-right" height="50" width="10" viewBox="0 0 10 50" preserveAspectRatio="none">\n            <polyline class="ifml-action-background" points="0,0 2.5,0 9.5,25 2.5,50 0,50" fill="lightgray" stroke="black" stroke-width="0.5"/>\n        </svg>\n    </g>\n    <text class="name" fill="black" font-family="monospace" font-size="11" style="pointer-events: none"/>\n</g>\n'},{}],7:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=("undefined"!=typeof window?window.$:void 0!==n&&n.$,"undefined"!=typeof window?window.joint:void 0!==n?n.joint:null),a=e("color");function o(e){switch(e){case"top":return{"ref-y":-1,"ref-dy":null,"y-alignment":-.99};case"bottom":return{"ref-y":null,"ref-dy":1,"y-alignment":0};case"middle":return{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"};default:return{"ref-y":null,"ref-dy":1,"y-alignment":"middle"}}}function s(e){switch(e){case"left-outer":return{"ref-x":0,"ref-dx":null,"x-alignment":-.99};case"left":return{"ref-x":0,"ref-dx":null,"x-alignment":0};case"right":return{"ref-x":null,"ref-dx":0,"x-alignment":-.99};case"right-outer":return{"ref-x":null,"ref-dx":0,"x-alignment":0};case"middle":default:return{"ref-x":.5,"ref-dx":null,"x-alignment":"middle"}}}t.Event=r.shapes.basic.Generic.extend({markup:e("./markup.svg"),defaults:r.util.deepSupplement({type:"ifml.Event",size:{width:20,height:20},name:{text:"event",vertical:"top",horizontal:"left-outer"},attrs:{".":{magnet:"passive"},".ifml-event-magnet-rect":{magnet:!0,visibility:"hidden"},".ifml-event-system-symbol":{visibility:"hidden"},".ifml-event-selection-symbol":{visibility:"hidden"},text:{"ref-x":.5,"ref-y":-11,"x-alignment":"middle",ref:".ifml-event-magnet-rect"}}},r.shapes.basic.Generic.prototype.defaults),fixedParent:!0,requireEmbedding:!0,containers:["ifml.ViewContainer","ifml.ViewComponent","ifml.Action"],editable:function(){var e=this;return i([{property:"name/text",name:"Name",type:"string"},{property:"name/vertical",name:"Position Vertical",type:"enum",values:[{value:"top",name:"Top"},{value:"middle",name:"Middle"},{value:"bottom",name:"Bottom"}]},{property:"name/horizontal",name:"Position Horizontal",type:"enum",values:[{value:"left-outer",name:"Outer Left"},{value:"left",name:"Left"},{value:"middle",name:"Middle"},{value:"right",name:"Right"},{value:"right-outer",name:"Outer Right"}]}]).concat(function(){var n,t=e.graph.getCell(e.get("parent"));switch(t.get("type")){case"ifml.ViewContainer":n=[{value:void 0,name:"User Event"},{value:"system",name:"System Event"}];break;case"ifml.ViewComponent":switch(t.get("stereotype")){case"list":n=[{value:void 0,name:"User Event"},{value:"selection",name:"Selection Event"},{value:"system",name:"System Event"}];break;default:n=[{value:void 0,name:"User Event"},{value:"system",name:"System Event"}]}break;default:return[]}return[{property:"stereotype",name:"Event Type",type:"enum",values:n}]}()).value()},statistics:function(){return this.get("statistics")},deletable:function(){return!0!==this.get("parentLifecicle")},initialize:function(){r.shapes.basic.Generic.prototype.initialize.apply(this,arguments),this.on("change:parent",this._parentChanged,this),this.on("change:name",this._nameChanged,this),this.on("change:stereotype",this._stereotypeChanged,this),this.on("change:accent",this._accentChanged,this),this._parentPositionChanged(),this._nameChanged(),this._stereotypeChanged(),this._accentChanged()},_parentPositionChanged:function(){if(this.graph&&this.get("parent")){var e,n,t,i=this.graph.getCell(this.get("parent"));-1!==this.containers.indexOf(i.get("type"))&&(e=i.getBBox({useModelGeometry:!0}),n=this.getBBox({useModelGeometry:!0}),t=e.pointNearestToPoint(n.center()),this.translate(t.x-n.width/2-n.x,t.y-n.height/2-n.y))}},magnetize:function(){if(this.graph&&this.graph.getConnectedLinks(this,{outbound:!0}).length)return!1;this.attr({".ifml-event-magnet-rect":{visibility:"visible"}})},demagnetize:function(){this.attr({".ifml-event-magnet-rect":{visibility:"hidden"}})},_parentChanged:function(){this.graph&&(this.previous("parent")&&this.graph.getCell(this.previous("parent")).off("change:size",this._parentPositionChanged,this),this.get("parent")&&(this._parentPositionChanged(),this.graph.getCell(this.get("parent")).on("change:size",this._parentPositionChanged,this)))},_nameChanged:function(){this.attr({text:r.util.deepSupplement({text:this.get("name").text},o(this.get("name").vertical),s(this.get("name").horizontal))})},_stereotypeChanged:function(){var e="hidden",n="hidden";switch(this.get("stereotype")){case"system":e="visible";break;case"selection":n="visible"}this.attr({".ifml-event-system-symbol":{visibility:e},".ifml-event-selection-symbol":{visibility:n}})},linkConnectionPoint:function(e,n,t,a,o,s,l){i.noop(e,n,t,a,o,s);var p=this.getBBox({useModelGeometry:!0});return r.g.ellipse(p.center(),p.width/2,p.height/2).intersectionWithLineFromCenterToPoint(l())},_accentChanged:function(){var e="black",n="white",t=this.get("accent");"number"==typeof t&&(e=a.hsl(120*t,100,35).string(),n=a.hsl(120*t,75,90).string()),this.attr({".ifml-event-background":{stroke:e,fill:n}})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./markup.svg":8,color:242}],8:[function(e,n,t){n.exports='<g class="marker">\n    <circle class="ifml-event-background" fill="white" stroke="black" stroke-width="0.5" cx="10" cy="10" r="10" />\n    <circle class="ifml-event-magnet-rect" fill="white" stroke="red" stroke-width="1" cx="10" cy="10" r="10" style=\'cursor: cell\'/>\n    <g style="pointer-events:none" class="ifml-event-system-symbol">\n      <path\n         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         d="M 5.092725,8.5431 3.767505,7.6 l 0.4895,-0.991 1.57593,0.4895 0.13132,-0.2148 0.17908,-0.2508 0.28653,-0.2745998 0.0597,-0.06 -0.66858,-1.4564 0.90736,-0.6686 1.13234,1.2037 0.22354,-0.1176 0.31048,-0.124 0.42225,-0.105 0.0373,0 0.0931,-1.6144 1.14876,-0.099 0.36015,1.6144 0.36636,0.025 0.31048,0.043 0.33531,0.124 0.92522,-1.3225 1.00594,0.4718 -0.45329,1.5524 0.22354,0.1615 0.27322,0.2297 0.23596,0.2483 0.0435,0.049 1.44682,-0.6769 0.64579,0.8879998 -1.1736,1.1177 0.0497,0.1303 0.0745,0.2049 0.0931,0.2607 0.0683,0.2173 0.0373,0.1739 1.65794,0.1495 0.0497,1.1548 -1.5648,0.3168 -0.0373,0.3725 -0.0745,0.3354 -0.0869,0.3167 0.0124,0.056 1.32263,0.9004 -0.50297,1.0123 -1.54617,-0.472 -0.1242,0.1987 -0.27943,0.3105 -0.19249,0.2049 -0.0807,0.062 0.66441,1.4716 -0.919,0.6272 -1.1053,-1.1861 -0.14903,0.068 -0.3912,0.1367 -0.32289,0.098 -0.1304,0.025 -0.13662,1.6456 -1.11771,0.049 -0.37257,-1.5773 -0.21112,0 -0.3229,-0.049 -0.21112,-0.056 -0.23596,-0.087 -0.0497,-0.019 -0.91901,1.3537 -1.00594,-0.5029 0.48434,-1.5339 -0.21733,-0.1558 -0.32911,-0.2732 -0.25459,-0.2609 -1.45924,0.6831 -0.64579,-0.9252 1.18602,-1.0991 -0.006,-0.056 -0.13039,-0.3228 -0.1242,-0.3415 -0.0559,-0.2795 -1.65173,-0.1303 -0.0497,-1.1302 1.55238,-0.3665 0.0373,-0.3414 0.0869,-0.3788 z"\n      />\n      <circle\n         style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:0;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         cx="9.9998379"\n         cy="10.000993"\n         r="3.8250651" />\n      <path\n         d="m 6.980185,9.1039 -0.81548,-0.5804 0.30121,-0.6098 0.96977,0.3012 0.0808,-0.1321 0.1102,-0.1544 0.17632,-0.1689 0.0367,-0.037 -0.41142,-0.8962 0.55835,-0.4114998 0.6968,0.7406998 0.13756,-0.072 0.19106,-0.076 0.25983,-0.065 0.0229,0 0.0573,-0.9934998 0.7069,-0.061 0.22163,0.9933998 0.22544,0.016 0.19106,0.026 0.20634,0.076 0.56934,-0.8138998 0.61902,0.2904 -0.27894,0.9552998 0.13755,0.099 0.16813,0.1413 0.1452,0.1528 0.0267,0.03 0.89032,-0.4165 0.39739,0.5464 -0.72218,0.6878 0.0306,0.08 0.0459,0.1261 0.0573,0.1604 0.042,0.1337 0.0229,0.1071 1.02023,0.092 0.0306,0.7107 -0.96292,0.1949 -0.0229,0.2292 -0.0458,0.2064 -0.0535,0.1949 0.008,0.034 0.8139,0.5541 -0.30951,0.6229 -0.95145,-0.2904 -0.0764,0.1222 -0.17195,0.1911 -0.11846,0.1261 -0.0497,0.038 0.40886,0.9056 -0.56552,0.3859 -0.68016,-0.7298 -0.0917,0.042 -0.24073,0.084 -0.19869,0.061 -0.0802,0.016 -0.0841,1.0126 -0.6878,0.03 -0.22926,-0.9705 -0.12992,0 -0.1987,-0.03 -0.12992,-0.034 -0.1452,-0.054 -0.0306,-0.012 -0.56552,0.833 -0.61901,-0.3095 0.29804,-0.9439 -0.13374,-0.096 -0.20252,-0.1682 -0.15666,-0.1605 -0.89796,0.4203 -0.39739,-0.5693 0.72983,-0.6763 -0.004,-0.034 -0.0802,-0.1987 -0.0764,-0.2101 -0.0344,-0.172 -1.01641,-0.08 -0.0306,-0.6955 0.95527,-0.2255 0.0229,-0.2101 0.0535,-0.2331 z"\n         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <circle\n         r="2.3537924"\n         cy="10.000993"\n         cx="9.9998379"\n         style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:0;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    </g>\n    <g style="pointer-events:none" class="ifml-event-selection-symbol">\n      <rect\n         transform="matrix(0.70710679,0.70710678,-0.70710678,0.70710679,0,0)"\n         ry="0.44639358"\n         y="3.0045254"\n         x="9.3536758"\n         height="1.2433268"\n         width="8.0416594"\n         style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <rect\n         transform="matrix(0.57357644,-0.81915204,0.81915204,0.57357644,0,0)"\n         style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         width="12.044243"\n         height="1.2433268"\n         x="-7.080256"\n         y="15.301632"\n         ry="0.44639358" />\n    </g>\n    <text fill="black" font-family="monospace" font-size="11" style="pointer-events: none"/>\n</g>\n'},{}],9:[function(e,n,t){"use strict";t.elements={ViewContainer:e("./viewcontainer").ViewContainer,ViewComponent:e("./viewcomponent").ViewComponent,Event:e("./event").Event,Action:e("./action").Action}},{"./action":5,"./event":7,"./viewcomponent":10,"./viewcontainer":12}],10:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=("undefined"!=typeof window?window.$:void 0!==n&&n.$,"undefined"!=typeof window?window.joint:void 0!==n?n.joint:null),a=e("color");t.ViewComponent=r.shapes.basic.Generic.extend({markup:e("./markup.svg"),defaults:r.util.deepSupplement({type:"ifml.ViewComponent",size:{width:150,height:60},name:"View Component",stereotype:"form",attrs:{".":{magnet:"passive"},".ifml-component-reference-rect":{"follow-scale":"auto"},".ifml-component-background-rect":{"ref-x":0,"ref-y":0,"ref-width":1,"ref-height":1,ref:".ifml-component-reference-rect"},".ifml-component-binding-rect":{visibility:"hidden","ref-x":10,"ref-y":.5,"ref-width":-20,ref:".ifml-component-background-rect"},".ifml-component-magnet-rect":{magnet:!0,visibility:"hidden","ref-x":0,"ref-y":0,"ref-width":1,"ref-height":1,ref:".ifml-component-background-rect"},".ifml-component-headline":{"ref-x":.5,"ref-y":.5,ref:".ifml-component-background-rect"},".ifml-component-binding":{visibility:"hidden","ref-x":.5,"ref-y":.5,"ref-width":-10,"ref-height":1,"y-alignment":"middle",ref:".ifml-component-binding-rect"}}},r.shapes.basic.Generic.prototype.defaults),minsize:{width:150,height:60},padding:{top:0,right:0,bottom:0,left:0},resizable:!0,isContraint:!0,requireEmbedding:!0,fullyContained:!0,containers:["ifml.ViewContainer"],initialize:function(){switch(this.on("change:size",this._sizeChanged,this),this.on("change:name change:stereotype",this._headlineChanged,this),this.on("change:collection",this._collectionChanged,this),this.on("change:accent",this._accentChanged,this),r.shapes.basic.Generic.prototype.initialize.apply(this,arguments),this._alignGraphicsWithStereotype(),this._sizeChanged(),this._headlineChanged(),this._collectionChanged(),this._accentChanged(),this.get("stereotype")){case"details":this.on("change:fields",this._outputChanged,this),this._outputChanged();break;case"list":this.on("change:filters",this._inputChanged,this),this.on("change:fields",this._outputChanged,this),this._inputChanged(),this._outputChanged();break;default:this.on("change:fields",this._inputChanged,this),this.on("change:fields",this._outputChanged,this),this._inputChanged(),this._outputChanged()}},statistics:function(){return this.get("statistics")},_alignGraphicsWithStereotype:function(){switch(this.get("stereotype")){case"details":case"list":this.attr({".ifml-component-headline":{"y-alignment":"bottom"}}),this.attr({".ifml-component-binding-rect":{visibility:"visible"}}),this.attr({".ifml-component-binding":{visibility:"visible"}});break;default:this.attr({".ifml-component-headline":{"y-alignment":"middle"}}),this.attr({".ifml-component-binding-rect":{visibility:"hidden"}}),this.attr({".ifml-component-binding":{visibility:"hidden"}})}},_sizeChanged:function(){var e=this.get("size"),n=this.minsize;(e.width<n.width||e.height<n.height)&&this.resize(Math.max(e.width,n.width),Math.max(e.height,n.height))},_headlineChanged:function(){var e;this.attr({".ifml-component-headline":{text:"«"+(e=this.get("stereotype"),(e&&e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():e)+"»\n")+this.get("name")}})},_collectionChanged:function(){var e=this.get("collection");e?(this.removeAttr(".binding/fill"),this.attr({".ifml-component-binding":{text:"«DataBinding» "+e}})):this.attr({".ifml-component-binding":{fill:"grey",text:"«DataBinding» none"}})},_inputChanged:function(e,n,t){(t=t||{}).undo||this.graph&&i.forEach(this.graph.getConnectedLinks(this,{inbound:!0}),(function(e){e.validateBindings()}))},_outputChanged:function(e,n,t){if(!(t=t||{}).undo){var r=this;r.graph&&(i.forEach(r.graph.getConnectedLinks(r,{outbound:!0}),(function(e){e.validateBindings()})),i(r.get("embeds")||[]).map((function(e){return r.graph.getCell(e)})).flatten().filter((function(e){return"ifml.Event"===e.get("type")})).map((function(e){return r.graph.getConnectedLinks(e,{outbound:!0})})).flatten().forEach((function(e){e.validateBindings()})).value())}},editable:function(){var e=this;return i([{property:"name",name:"Name",type:"string"}]).concat(function(){switch(e.get("stereotype")){case"list":return[{property:"collection",name:"Collection",type:"string"},{property:"filters",name:"Filters",type:"stringset"},{property:"fields",name:"Fields",type:"stringset"}];case"details":return[{property:"collection",name:"Collection",type:"string"},{property:"fields",name:"Fields",type:"stringset"}];case"form":return[{property:"fields",name:"Fields",type:"stringset"}];default:return[]}}()).value()},inputs:function(){switch(this.get("stereotype")){case"details":return["id"];case"list":return i(this.get("filters")||[]).sort().uniq(!0).value();case"form":return i(this.get("fields")||[]).map((function(e){return[e,e+"-error"]})).flatten().sort().value();default:return[]}},outputs:function(){switch(this.get("stereotype")){case"details":case"list":return i(["id"]).concat(this.get("fields")||[]).sort().uniq(!0).value();case"form":return i(this.get("fields")||[]).sort().value();default:return[]}},magnetize:function(){this.attr({".ifml-component-magnet-rect":{visibility:"visible"}})},demagnetize:function(){this.attr({".ifml-component-magnet-rect":{visibility:"hidden"}})},_accentChanged:function(){var e="black",n="lightgray",t=this.get("accent");"number"==typeof t&&(e=a.hsl(120*t,100,35).string(),n=a.hsl(120*t,75,90).string()),this.attr({".ifml-component-background-rect":{stroke:e,fill:n},".ifml-component-binding-rect":{stroke:e}})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./markup.svg":11,color:242}],11:[function(e,n,t){n.exports='<g class="ifml-element">\n    <g class="scalable">\n        <rect class="ifml-component-reference-rect" width="1" height="1" fill="transparent"/>\n    </g>\n    <rect class="ifml-component-background-rect" fill="lightgray" stroke="black" stroke-width="0.5" rx="15" ry="15"/>\n    <rect class="ifml-component-magnet-rect" fill="lightgray" stroke="red" stroke-width="1" rx="15" ry="15" style=\'cursor: cell\'/>\n    <rect class="ifml-component-binding-rect" fill="white" stroke="black" stroke-width="0.5" height="20"/>\n    <text class="ifml-component-headline" fill="black" font-family="monospace" font-size="11" text-anchor="middle" style="pointer-events: none"/>\n    <text class="ifml-component-binding" fill="black" font-family="monospace" font-size="11" text-anchor="middle" style="pointer-events: none"/>\n</g>\n'},{}],12:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=("undefined"!=typeof window?window.$:void 0!==n&&n.$,"undefined"!=typeof window?window.joint:void 0!==n?n.joint:null),a=e("color");t.ViewContainer=r.shapes.basic.Generic.extend({markup:e("./markup.svg"),defaults:r.util.deepSupplement({type:"ifml.ViewContainer",size:{width:200,height:160},name:"View Container",default:!1,landmark:!1,xor:!1,attrs:{".":{marker:"passive"},".ifml-viewcontainer-reference-rect":{"follow-scale":"auto"},".ifml-viewcontainer-background-rect":{"ref-x":0,"ref-y":0,"ref-width":1,"ref-height":1,ref:".ifml-viewcontainer-reference-rect"},".ifml-viewcontainer-title-rect":{"ref-x":0,"ref-y":0,"ref-width":1,ref:".ifml-viewcontainer-reference-rect"},text:{"ref-x":5,"ref-y":.5,"ref-width":-10,"ref-height":1,"y-alignment":"middle",ref:".ifml-viewcontainer-title-rect"}}},r.shapes.basic.Generic.prototype.defaults),minsize:{width:180,height:100},padding:{top:20,right:0,bottom:0,left:0},resizable:!0,isContraint:!0,fullyContained:!0,containers:["ifml.ViewContainer"],initialize:function(){this.on("change:size",this._sizeChanged,this),this.on("change:name change:default change:landmark change:xor",this._nameChanged,this),this.on("change:default",this._defaultChanged,this),this.on("change:xor",this._xorChanged,this),this.on("change:landmark",this._landmarkChanged,this),this.on("change:parent",this._parentChanged,this),this.on("change:accent",this._accentChanged,this),r.shapes.basic.Generic.prototype.initialize.apply(this,arguments),this._sizeChanged(),this._nameChanged(),this._accentChanged()},editable:function(){var e=this.graph,n=i.chain([{property:"name",name:"Name",type:"string"}]);return e&&(n=(n=this.get("parent")&&!this.graph.getCell(this.get("parent")).get("xor")?n.concat({name:"Container Type",type:"booleanset",items:[{property:"xor",name:"XOR",type:"boolean"}]}):n.concat({name:"Container Type",type:"booleanset",items:[{property:"default",name:"Default",type:"boolean"},{property:"landmark",name:"Landmark",type:"boolean"}]})).concat({property:"embeds",name:"Children",type:"elementslist",filter:function(n){switch(e.getCell(n).get("type")){case"ifml.ViewContainer":case"ifml.ViewComponent":case"ifml.Event":return!0;default:return!1}},display:function(n){switch(e.getCell(n).get("type")){case"ifml.Event":return e.getCell(n).prop("name/text");default:return e.getCell(n).get("name")}}})),n.value()},statistics:function(){return this.get("statistics")},_sizeChanged:function(e,n,t){if(!(t=t||{}).undo){var i=this.get("size"),r=this.minsize;(i.width<r.width||i.height<r.height)&&this.resize(Math.max(i.width,r.width),Math.max(i.height,r.height))}},_defaultChanged:function(e,n,t){if(!(t=t||{}).undo&&!0===this.get("default")&&this.graph){var r,a=this.graph.getCell(this.get("parent")),o=this.id;if(a){if(!a.get("xor"))return void this.set("default");r=a.getEmbeddedCells()}else r=i.filter(this.graph.getCells(),(function(e){return!e.get("parent")}));i.chain(r).filter((function(e){return e&&!e.isLink()&&"ifml.ViewContainer"===e.get("type")&&e.get("default")&&e.id!==o})).invoke("set","default").run()}},_xorChanged:function(e,n,t){if(!(t=t||{}).undo&&!0===this.get("xor")&&this.graph){var i=this.getAncestors()[0];i&&!i.get("xor")||this.set("xor")}},_landmarkChanged:function(e,n,t){if(!(t=t||{}).undo&&!0===this.get("landmark")&&this.graph){var i=this.getAncestors()[0];i&&!i.get("xor")&&this.set("landmark")}},_parentChanged:function(e,n,t){if(t=t||{},this.graph){var i=this.graph.getCell(this.previous("parent"));if(i&&(i.off("change:xor",this._xorChanged,this),i.off("change:xor",this._landmarkChanged,this),i.off("change:xor",this._defaultChanged,this)),t.reparenting)return;if((i=this.graph.getCell(this.get("parent")))&&(i.on("change:xor",this._xorChanged,this),i.on("change:xor",this._landmarkChanged,this),i.on("change:xor",this._defaultChanged,this)),t.undo)return;this._xorChanged(),this._landmarkChanged(),this._defaultChanged()}},_nameChanged:function(){var e,n=[];this.get("default")&&n.push("D"),this.get("landmark")&&n.push("L"),this.get("xor")&&n.push("XOR"),e=n.length?"["+n.join(",")+"]"+this.get("name"):this.get("name"),this.attr({text:{text:e}})},_accentChanged:function(){var e="black",n="white",t=this.get("accent");"number"==typeof t&&(e=a.hsl(120*t,100,35).string(),n=a.hsl(120*t,75,90).string()),this.attr({".ifml-viewcontainer-background-rect":{stroke:e,fill:n},".ifml-viewcontainer-title-rect":{stroke:e,fill:n}})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./markup.svg":13,color:242}],13:[function(e,n,t){n.exports='<g class="ifml-element">\n    <g class="scalable">\n        <rect class="ifml-viewcontainer-reference-rect almost-joint-no-grip" width="1" height="1" fill="transparent"/>\n    </g>\n    <rect class="ifml-viewcontainer-background-rect almost-joint-no-grip" fill="white" stroke="black" stroke-width="0.5"/>\n    <rect class="ifml-viewcontainer-title-rect" height="20" stroke="black" fill=\'transparent\' stroke-width="0.5"/>\n    <text fill="black" font-family="monospace" font-size="14"/>\n</g>\n'},{}],14:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r={type:{ViewContainer:"ifml.ViewContainer",ViewComponent:"ifml.ViewComponent",ViewElement:["ifml.ViewContainer","ifml.ViewComponent"],Action:"ifml.Action",Event:"ifml.Event",DataFlow:"ifml.DataFlow",NavigationFlow:"ifml.NavigationFlow",Flow:["ifml.DataFlow","ifml.NavigationFlow"]},relation:{Parent:{relation:"hierarchy",from:"child",to:"parent",single:!0},Children:{relation:"hierarchy",from:"parent",to:"child"},Source:{relation:"source",from:"flow",to:"source",single:!0},Target:{relation:"target",from:"flow",to:"target",single:!0},Inbounds:{relation:"target",from:"target",to:"flow"},Outbounds:{relation:"source",from:"source",to:"flow"}},custom:{isDefault:function(e,n){arguments.length<2&&(n=!1);var t=this.toElement(e);return t?t.attributes.default:n},isXOR:function(e,n){arguments.length<2&&(n=!1);var t=this.toElement(e);return t?t.attributes.xor:n},isLandmark:function(e,n){arguments.length<2&&(n=!1);var t=this.toElement(e);return t?t.attributes.landmark:n},isTargetOfDataFlow:function(e){return n.any(this.getInbounds(e),n.bind(this.isDataFlow,this))},getTopLevels:function(){var e=this;return n.chain(this.elements).filter((function(n){return e.isViewContainer(n)})).reject((function(n){return e.getParentId(n)})).map(n.bind(this.toId,this)).value()},getActionOriginId:function(e,t){var i=n.first(this.getInbounds(e)),r=this.getSource(i),a=this.getParentId(r);return this.isViewContainer(a,!0)?a:this.getParentId(a)||t},getActionOrigin:function(e,n){return this.toElement(this.getActionOriginId(e,n))},getAncestors:function(e,t){var i=this;function r(e){return e?i.isAction(e)?r(i.getActionOriginId(e)).concat(e):r(i.getParentId(e)).concat(e):n.chain([])}return t?r(this.toId(e)).value():r(this.getParentId(e)).value()},getTopLevelAncestorId:function(e,t){if(this.isAction(e))return this.getTopLevelAncestorId(this.getActionOrigin(e));if(!this.getParentId(e))return this.toId(e);var i=n.first(this.getAncestors(e));return this.isAction(i)?this.getTopLevelAncestorId(this.getActionOrigin(i)):i||t},getTopLevelAncestor:function(e){return this.toElement(this.getTopLevelAncestorId(e))},getDescendants:function(e,t){var i=this,r=this.toId(e);function a(e,t){if(!t)return e;var r=i.getChildren(t);return n.reduce(r,a,e.concat(r))}return t?a(n([r]),r).compact().value():a(n([]),r).compact().value()},getInteractionContextId:function(e,t){var i,r=this.getSource(e),a=this.getParent(r),o=this.getTarget(e);return this.isAction(a)&&(a=this.getActionOrigin(a)),this.isAction(o)&&(o=a),i=n.last(n.intersection(this.getAncestors(a,!0),this.getAncestors(o,!0))),this.isViewComponent(i)&&(i=this.getParent(i)),i!==a&&i!==o||this.isXOR(i)&&(i=this.getParent(i)),this.toId(i)||t},getInteractionContext:function(e,n){return this.toElement(this.getInteractionContextId(e,n))},getTopMostXORDescendants:function(e){if(!this.isViewContainer(e))return[];var t=this;return function e(i,r){return r&&t.isViewContainer(r)?t.isXOR(r)?i.concat(r):n.reduce(t.getChildren(r),e,i):i}(n([]),this.toId(e)).compact().value()},getCoDisplayedAncestorId:function(e,t,i){var r=this.getChildren(t,this.getTopLevels());return n.first(n.intersection(r,this.getAncestors(e,!0)))||i},getCoDisplayedAncestor:function(e,n,t){return this.toElement(this.getCoDisplayedAncestorId(e,n,t))},getXORTargetSet:function(e,t){var i=this,r=this.toId(t),a=this.getTarget(e),o=this.getAncestors(a);return n.chain(o).takeRightWhile((function(e){return e!==r})).filter((function(e){return i.isViewContainer(e)&&i.isXOR(e)})).value()},getExtendedXORTargetSet:function(e,t){var i=this.getXORTargetSet(e,t);return this.isXOR(t)?n.flatten([i,this.toId(t)]):i},getDisplaySet:function(e,t){var i=this,r=this.getTarget(e),a=this.getXORTargetSet(e,t),o=n.chain(a).map((function(e){return i.toId(i.getCoDisplayedAncestor(r,e))}));return this.isXOR(t,!0)&&(o=o.concat(this.toId(this.getCoDisplayedAncestor(r,t)))),o.value()},getHideSet:function(e,t){var i=this,r=this.getInteractionContext(e),a=this.getAncestors(this.getTarget(e),!0),o=this.getXORTargetSet(e,t),s=n.chain(o);return this.isXOR(t,!0)&&t!==r&&(s=s.concat(this.toId(t))),s.map((function(e){return n.difference(i.getChildren(e),a)})).flatten().value()}}};t.extend=i.createExtender(r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,n,t){"use strict";var i=e("almost-extend").createExtender;t.extend=i({type:{ViewContainer:"ifml.ViewContainer",ViewComponent:"ifml.ViewComponent",ViewElement:["ifml.ViewContainer","ifml.ViewComponent"],Action:"ifml.Action",Event:"ifml.Event",DataFlow:"ifml.DataFlow",NavigationFlow:"ifml.NavigationFlow",Flow:["ifml.DataFlow","ifml.NavigationFlow"],PositionedElement:["ifml.ViewContainer","ifml.ViewComponent","ifml.Event","ifml.Action"],SizedElement:["ifml.ViewContainer","ifml.ViewComponent","ifml.Action"],ElementWithStats:["ifml.ViewContainer","ifml.ViewComponent","ifml.Event","ifml.Action","ifml.NavigationFlow","ifml.DataFlow"],TargetRelation:"target",SourceRelation:"source",HierarchicalRelation:"hierarchy"}})},{"almost-extend":232}],16:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window._:void 0!==n&&n._;var i=e("./intermediate").transform,r=e("./tojoint").toJoint,a=("undefined"!=typeof window?window.almost.plugins.joint:void 0!==n?n.almost.plugins.joint:null).utils;t.fromJSON=function(e){return a.sortCells(r(i(e)))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./intermediate":18,"./tojoint":21}],17:[function(e,n,t){(function(e){"use strict";var t=("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule;n.exports=[t((function(e,n){return n.isPositionedElement(e)}),(function(e){return{elements:{id:e.id,position:e.metadata.graphics.position}}})),t((function(e,n){return n.isSizedElement(e)}),(function(e){return{elements:{id:e.id,size:e.metadata.graphics.size}}})),t((function(e,n){return n.isElementWithStats(e)&&e.metadata.statistics}),(function(e){return{elements:{id:e.id,statistics:e.metadata.statistics.slice()}}})),t((function(e,n){return n.isFlow(e)&&e.metadata.graphics&&e.metadata.graphics.vertices}),(function(e){return{elements:{id:e.id,vertices:e.metadata.graphics.vertices}}})),t((function(e,n){return n.isEvent(e)}),(function(e){return{elements:{id:e.id,name:{text:e.attributes.name,horizontal:e.metadata.graphics.name.horizontal,vertical:e.metadata.graphics.name.vertical},stereotype:e.attributes.stereotype}}})),t((function(e,n){return n.isAction(e)&&e.metadata.graphics.parent}),(function(e){return{elements:[{id:e.id,parent:e.metadata.graphics.parent},{id:e.metadata.graphics.parent,embeds:e.id}]}})),t((function(e,n){return n.isViewContainer(e)}),(function(e){return{elements:{id:e.id,type:e.type,name:e.attributes.name,default:e.attributes.default,landmark:e.attributes.landmark,xor:e.attributes.xor}}})),t((function(e,n){return n.isViewComponent(e)}),(function(e){return{elements:{id:e.id,type:e.type,name:e.attributes.name,stereotype:e.attributes.stereotype,fields:e.attributes.fields&&e.attributes.fields.slice()||[]}}})),t((function(e,n){return n.isViewComponent(e)&&["list","details"].includes(e.attributes.stereotype)}),(function(e){return{elements:{id:e.id,collection:e.attributes.collection||""}}})),t((function(e,n){return n.isViewComponent(e)&&"list"===e.attributes.stereotype}),(function(e){return{elements:{id:e.id,filters:e.attributes.filters&&e.attributes.filters.slice()||[]}}})),t((function(e,n){return n.isEvent(e)}),(function(e){return{elements:{id:e.id,type:e.type}}})),t((function(e,n){return n.isAction(e)}),(function(e){return{elements:{id:e.id,type:e.type,name:e.attributes.name,results:e.attributes.results&&e.attributes.results.slice()||[],parameters:e.attributes.parameters&&e.attributes.parameters.slice()||[]}}})),t((function(e,n){return n.isFlow(e)}),(function(e){return{elements:{id:e.id,type:e.type,bindings:e.attributes.bindings}}}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,n,t){(function(n){"use strict";var i=e("./elementrules"),r=e("./relationrules"),a=e("../extender"),o="undefined"!=typeof window?window.almost:void 0!==n?n.almost:null,s=o.core,l=(0,o.createTransformer)({element:i,relation:r},s.merge(s.none(),{elements:s.flatten(s.reduceBy("id",s.merge(s.mergeOrSingle(),{id:s.first(),embeds:s.lazy(s.flatten())}))),relations:s.flatten()}));t.transform=function(e){return l(a.extend(e))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../extender":15,"./elementrules":17,"./relationrules":19}],19:[function(e,n,t){(function(e){"use strict";var t=("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule;n.exports=[t((function(e,n){return n.isHierarchicalRelation(e)}),(function(e){return{elements:[{id:e.child,parent:e.parent},{id:e.parent,embeds:e.child}]}})),t((function(e,n){return n.isSourceRelation(e)}),(function(e){return{elements:[{id:e.flow,parent:e.source,source:{id:e.source}},{id:e.source,embeds:e.flow}]}})),t((function(e,n){return n.isTargetRelation(e)}),(function(e){return{elements:{id:e.flow,target:{id:e.target}}}}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,n,t){(function(t){"use strict";var i=("undefined"!=typeof window?window.almost:void 0!==t?t.almost:null).createRule,r=e("../../").ifml;n.exports=[i((function(e,n){return n.isViewContainer(e)}),(function(e){return new r.elements.ViewContainer(e)})),i((function(e,n){return n.isViewComponent(e)}),(function(e){return new r.elements.ViewComponent(e)})),i((function(e,n){return n.isEvent(e)}),(function(e){return new r.elements.Event(e)})),i((function(e,n){return n.isAction(e)}),(function(e){return new r.elements.Action(e)})),i((function(e,n){return n.isDataFlow(e)}),(function(e){return new r.links.DataFlow(e)})),i((function(e,n){return n.isNavigationFlow(e)}),(function(e){return new r.links.NavigationFlow(e)}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../":22}],21:[function(e,n,t){(function(n){"use strict";var i=e("./elementrules"),r=e("../extender"),a="undefined"!=typeof window?window.almost:void 0!==n?n.almost:null,o=a.createTransformer({element:i},a.core.concat());t.toJoint=function(e){return o(r.extend(e))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../extender":15,"./elementrules":20}],22:[function(e,n,t){"use strict";var i={};t.ifml=i,i.elements=e("./elements").elements,i.links=e("./links").links,i.nets=e("./nets").nets,i.toJSON=e("./tojson").toJSON,i.fromJSON=e("./fromjson").fromJSON,i.extend=e("./extender").extend},{"./elements":9,"./extender":14,"./fromjson":16,"./links":26,"./nets":29,"./tojson":33}],23:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r="undefined"!=typeof window?window._:void 0!==n?n._:null,a=e("color");t.Base=i.dia.Link.extend({defaults:i.util.deepSupplement({bindings:[]},i.dia.Link.prototype.defaults),labelMarkup:e("./binding.svg").trim(),initialize:function(){this.on("change:bindings change:accent-in change:accent-out",this._labelChanged,this),this.on("change:source change:target",(function(){this.reparent(),this.validateBindings()}),this),this.on("change:accent",this._accentChanged,this),i.dia.Link.prototype.initialize.apply(this,arguments),this._labelChanged(),this._accentChanged()},editable:function(){if(this.graph){var e=this.getSourceElement(),n=this.getTargetElement();if("ifml.Event"===e.get("type")&&(e=this.graph.getCell(e.get("parent"))),"function"==typeof e.outputs&&"function"==typeof n.inputs)return[{property:"bindings",name:"Bindings",type:"bindings"}]}return[]},statistics:function(){return this.get("statistics")},validateBindings:function(){if(this.graph){var e,n,t,i=this.getSourceElement(),a=this.getTargetElement(),o=this.get("bindings")||[];if(i&&"ifml.Event"===i.get("type")&&(i=this.graph.getCell(i.get("parent"))),!i||!a)return void(o.length&&this.set("bindings",[]));if("function"!=typeof i.outputs||"function"!=typeof a.inputs)return void(o.length&&this.set("bindings",[]));e=r(i.outputs()).map((function(e){return[e,!0]})).zipObject().value(),n=r(a.inputs()).map((function(e){return[e,!0]})).zipObject().value(),t=r.filter(o,(function(t){return e[t.output]&&n[t.input]})),o.length!==t.length&&this.set("bindings",t)}},_labelChanged:function(){var e=r.chain([]),n=this.get("accent-in"),t=this.get("accent-out");(this.get("bindings").length||n||t)&&(e=e.concat([{position:10,attrs:{text:{text:n}}},{position:-10,attrs:{text:{text:t}}}])),this.get("bindings").length&&(e=e.concat([{position:.5}])),this.set("labels",e.value())},_accentChanged:function(){var e="black",n=this.get("accent");"number"==typeof n&&(e=a.hsl(120*n,100,35).string()),this.attr({".connection":{stroke:e},".marker-target":{stroke:e,fill:e}})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./binding.svg":24,color:242}],24:[function(e,n,t){n.exports='<g class="label">\n    <path d="m -10,4 16,0 4,-8 -16,0 z" fill="rgb(230, 230, 230)" stroke="black" stroke-width="0.5"/>\n    <rect class="bella" width="10" height="10" fill="transparent"/>\n    <text fill="black" font-family="monospace" font-size="14"/>\n</g>\n'},{}],25:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r=e("./base").Base;t.DataFlow=r.extend({defaults:i.util.deepSupplement({type:"ifml.DataFlow",attrs:{".connection":{stroke:"black","stroke-dasharray":"7.5,7.5"},".marker-target":{fill:"black",stroke:"black",d:"M 10 0 L 0 5 L 10 10 z"}}},r.prototype.defaults),validSources:["ifml.ViewComponent"],validTargets:["ifml.ViewComponent"]})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":23}],26:[function(e,n,t){"use strict";t.links={DataFlow:e("./dataflow").DataFlow,NavigationFlow:e("./navigationflow").NavigationFlow}},{"./dataflow":25,"./navigationflow":27}],27:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,a=e("./base").Base;t.NavigationFlow=a.extend({defaults:r.util.deepSupplement({type:"ifml.NavigationFlow",attrs:{".marker-target":{fill:"black",stroke:"black",d:"M 10 0 L 0 5 L 10 10 z"}}},a.prototype.defaults),validSources:["ifml.Event"],validTargets:["ifml.ViewComponent","ifml.ViewContainer","ifml.Action"],validateConnection:function(e,n,t,r,a,o){if(i.noop(n,r),e===t)return!1;var s,l=e.model,p=t.model,u=o.model;if("source"===a){if(!i.includes(u.validSources,l.get("type")))return!1}else if(!i.includes(u.validTargets,p.get("type")))return!1;return"ifml.Action"!==p.get("type")||"ifml.Action"!==l.graph.getCell(l.get("parent")).get("type")&&(s=p.graph.getConnectedLinks(p,{inbound:!0}),i.every(s,(function(e){return"ifml.NavigationFlow"!==e.get("type")||e===u})))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":23}],28:[function(e,n,t){"use strict";var i=e("../elements").elements;e("../links").links;t.createDetails=function(){return[new i.ViewComponent({position:{x:0,y:0},stereotype:"details"})]}},{"../elements":9,"../links":26}],29:[function(e,n,t){"use strict";t.nets={createDetails:e("./details").createDetails,createList:e("./list").createList}},{"./details":28,"./list":30}],30:[function(e,n,t){"use strict";var i=e("../elements").elements;e("../links").links;t.createList=function(){var e=new i.ViewComponent({position:{x:0,y:0},stereotype:"list"}),n=new i.Event({position:{x:140,y:50},name:{text:"selected",vertical:"bottom",horizontal:"right"},stereotype:"selection"});return e.embed(n),[e,n]}},{"../elements":9,"../links":26}],31:[function(e,n,t){(function(e){"use strict";var t="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,i=t.Rule,r=t.createRule;n.exports=[r(i.always,(function(e){var n=e.get("statistics");return{elements:{id:e.id,type:e.get("type"),metadata:{statistics:n&&n.slice()}}}})),r((function(e,n){return n.isElementWithPosition(e)}),(function(e){return{elements:{id:e.id,metadata:{graphics:{position:{x:e.prop("position/x"),y:e.prop("position/y")}}}}}})),r((function(e,n){return n.isElementWithSize(e)}),(function(e){return{elements:{id:e.id,metadata:{graphics:{size:{height:e.prop("size/height"),width:e.prop("size/width")}}}}}})),r((function(e,n){return n.isEvent(e)}),(function(e){return{elements:{id:e.id,attributes:{name:e.prop("name/text"),stereotype:e.prop("stereotype")},metadata:{graphics:{name:{horizontal:e.prop("name/horizontal"),vertical:e.prop("name/vertical")}}}}}})),r((function(e,n){return n.isAction(e)}),(function(e){return{elements:{id:e.id,attributes:{name:e.get("name"),parameters:(e.get("parameters")||[]).slice(),results:(e.get("results")||[]).slice()},metadata:{graphics:{parent:e.get("parent")}}}}})),r((function(e,n){return n.isViewComponent(e)}),(function(e){return{elements:{id:e.id,attributes:{name:e.get("name"),stereotype:e.get("stereotype"),fields:(e.get("fields")||[]).slice()}}}})),r((function(e,n){return n.isListOrDetails(e)}),(function(e){return{elements:{id:e.id,attributes:{collection:e.get("collection")||""}}}})),r((function(e,n){return n.isList(e)}),(function(e){return{elements:{id:e.id,attributes:{filters:(e.get("filters")||[]).slice()}}}})),r((function(e,n){return n.isViewContainer(e)}),(function(e){return{elements:{id:e.id,attributes:{name:e.get("name"),default:e.get("default"),landmark:e.get("landmark"),xor:e.get("xor")}}}})),r((function(e,n){return n.isFlow(e)}),(function(e){var n=e.get("vertices");return{elements:{id:e.id,attributes:{bindings:e.get("bindings").slice()},metadata:{graphics:{vertices:n&&n.slice()}}}}})),r((function(e,n){return n.isChildElement(e)}),(function(e){return{relations:{type:"hierarchy",parent:e.get("parent"),child:e.id}}})),r((function(e,n){return n.isFlow(e)}),(function(e){return{relations:{type:"source",flow:e.id,source:e.prop("source/id")}}})),r((function(e,n){return n.isFlow(e)}),(function(e){return{relations:{type:"target",flow:e.id,target:e.prop("target/id")}}}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window._:void 0!==n&&n._;var i=e("almost-extend").createExtender;t.extend=i({custom:{isViewContainer:function(e){return"ifml.ViewContainer"===e.get("type")},isViewComponent:function(e){return"ifml.ViewComponent"===e.get("type")},isViewElement:function(e){return this.isViewContainer(e)||this.isViewComponent(e)},isAction:function(e){return"ifml.Action"===e.get("type")},isEvent:function(e){return"ifml.Event"===e.get("type")},isDataFlow:function(e){return"ifml.DataFlow"===e.get("type")},isNavigationFlow:function(e){return"ifml.NavigationFlow"===e.get("type")},isFlow:function(e){return this.isDataFlow(e)||this.isNavigationFlow(e)},isList:function(e){return this.isViewComponent(e)&&"list"===e.get("stereotype")},isDetails:function(e){return this.isViewComponent(e)&&"details"===e.get("stereotype")},isListOrDetails:function(e){return this.isList(e)||this.isDetails(e)},isElement:function(e){return this.isEvent(e)||this.isAction(e)||this.isViewElement(e)||this.isFlow(e)},isElementWithPosition:function(e){return this.isEvent(e)||this.isAction(e)||this.isViewElement(e)},isElementWithSize:function(e){return this.isAction(e)||this.isViewElement(e)},isChildElement:function(e){return this.isEvent(e)||this.isViewComponent(e)||this.isViewContainer(e)&&e.get("parent")}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"almost-extend":232}],33:[function(e,n,t){(function(n){"use strict";var i=e("./elementrules"),r=e("./extender"),a=(0,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createTransformer)({element:i},"m2a");t.toJSON=function(e){return a(r.extend({elements:e.getCells(),relations:[]}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./elementrules":31,"./extender":32}],34:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isAction(e)}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.parameters,s=n.attributes.results,l=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name}})).value(),p={actions:{children:"A-"+r}};return p["A-"+r]={name:r+".js",content:e("./templates/action.js.ejs")({id:r,name:a,parameters:o,results:s,events:l})},p}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/action.js.ejs":38}],35:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null;t.rules=i([]).concat(e("./viewcontainer").rules).concat(e("./viewcomponent").rules).concat(e("./navigationflow").rules).concat(e("./action").rules).concat(e("./systemEvent").rules).value()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./action":34,"./navigationflow":36,"./systemEvent":37,"./viewcomponent":53,"./viewcontainer":54}],36:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isNavigationFlow(e)&&!n.isAction(n.getTarget(e))}),(function(n,t){var r=t.getSource(n),a=t.toId(r),o=t.getTargetId(n),s=t.getTopLevelAncestorId(o),l=i.chain(t.getAncestors(o,!0)).filter((function(e){return t.isViewContainer(e)})).filter((function(e){return t.isXOR(t.getParent(e))})).map((function(e){return{xor:t.getParentId(e),child:e}})).value(),p=i.chain(t.getOutbounds(a)).filter((function(e){return t.isNavigationFlow(e)})).map((function(e){return t.toElement(e)})).filter((function(e){return e.attributes.bindings&&e.attributes.bindings.length})).map((function(e){return e.attributes.bindings})).first().value(),u={navigations:{children:"E-"+a}};return u["E-"+a]={name:a+".js",content:e("./templates/navigation.js.ejs")({id:a,target:o,targetTop:s,targetActives:l,bindings:p})},u})),r((function(e,n){return n.isNavigationFlow(e)&&!n.isAction(n.getParent(n.getSource(e)))&&n.isAction(n.getTarget(e))}),(function(n,t){var r=t.getSource(n),a=t.toId(r),o=t.getTargetId(n),s=t.getActionOriginId(o),l=i.chain(t.getOutbounds(a)).filter((function(e){return t.isNavigationFlow(e)})).map((function(e){return t.toElement(e)})).filter((function(e){return e.attributes.bindings&&e.attributes.bindings.length})).map((function(e){return e.attributes.bindings})).first().value(),p={navigations:{children:"E-"+a}};return p["E-"+a]={name:a+".js",content:e("./templates/navigation-to-action.js.ejs")({id:a,containerId:s,target:o,bindings:l})},p}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/navigation-to-action.js.ejs":45,"./templates/navigation.js.ejs":46}],37:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window._:void 0!==n&&n._,e("../../../pcn").pcn;var i=("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule;t.rules=[i((function(e,n){return"system"===e.attributes.stereotype&&n.getOutbounds(e).length}),(function(n,t){var i=t.toId(n),r=n.attributes.name,a={controls:{children:"C-"+i}};return a["C-"+i]={isFolder:!0,name:"c-"+i,children:["C-"+i+"-VM","C-"+i+"-V"]},a["C-"+i+"-VM"]={name:"index.js",content:e("./templates/system-event-vm.js.ejs")({id:i})},a["C-"+i+"-V"]={name:"index.html",content:e("./templates/system-event-v.html.ejs")({id:i,name:r})},a}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/system-event-v.html.ejs":49,"./templates/system-event-vm.js.ejs":50}],38:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('/*jslint node: true, nomen: true */\n"use strict";\n\nvar Promise = require(\'bluebird\');\n\nfunction Action() { // add "options" parameters if needed\n    // TODO: Global Initialization\n    /*\n    example:\n    this.collection = options.repositories.mail;\n    */\n}\nAction.prototype.run = function (parameters, solve) { // add "onCancel" parameters if needed\n    // Parameters:\n');for(var i=0;i<parameters.length;i+=1)__append("    // parameters['"),__append(escapeFn(parameters[i])),__append("']\n");__append("\n    // TODO: Execution\n    /*\n    example:\n    mail.find({subject: 'Re: ' + data.subject})\n        .then(solve);\n    */\n    // THIS CAN BE REMOVED (BEGIN)\n    $.notify({message: '"),__append(escapeFn(name)),__append("'}, {allow_dismiss: true, type: 'success'});\n    solve({\n"),events.length&&(__append("        event: '"),__append(escapeFn(events[0].id)),__append("', // "),__append(escapeFn(events[0].name)),__append("\n"));for(var i=1;i<events.length;i+=1)__append("        // event: '"),__append(escapeFn(events[i].id)),__append("', // "),__append(escapeFn(events[i].name)),__append("\n");__append("        data: {\n");for(var i=0;i<results.length;i+=1)-1===parameters.indexOf(results[i])?(__append("            '"),__append(escapeFn(results[i])),__append("': '0',\n")):(__append("            '"),__append(escapeFn(results[i])),__append("': parameters['"),__append(escapeFn(results[i])),__append("'],\n"));__append("        }\n    });\n    // THIS CAN BE REMOVED (END)\n};\n\nexports.createAction = function (options) {\n    var action = new Action(options);\n    return function (data) {\n        return new Promise(function (solve, reject, onCancel) {\n            var parameters = (data && data.filters) || {};\n            action.run(parameters, solve, onCancel);\n        });\n    };\n};\n")}return __output}},{}],39:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("<h3>"),__append(escapeFn(name)),__append('</h3>\n<dl class="row" data-bind="if: item">\n');for(var i=0;i<fields.length;i+=1)__append('        <dt class="col-2">'),__append(escapeFn(fields[i])),__append('</dt>\n        <dd class="col-10" data-bind="text: item()[\''),__append(escapeFn(fields[i])),__append("']\"></dd>\n");if(__append("</dl>\n"),events.length){__append('<div class="row">\n');for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("    <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: trigger.bind($data,'"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n")):(__append('    <a class="btn btn-primary" data-bind="click: trigger.bind($data, \''),__append(escapeFn(events[i].id)),__append("')\">"),__append(escapeFn(events[i].name)),__append("</a>\n"));__append("</div>\n")}}return __output}},{}],40:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout'),\n    Promise = require('bluebird');\n\nfunction ViewModel(params) {\n    var self = this;\n    self._repository = params.context.repositories['"),__append(escapeFn(collection)),__append("'];\n    self.context = params.context;\n    self.status = ko.observable('');\n    self.item = ko.observable(undefined);\n\n    self.trigger = function (id) {\n        self.context.navigations[id](self.context, self.item());\n    };\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n\nViewModel.prototype.fields = {\n    id: 1\n");for(var i=0;i<fields.length;i+=1)__append("    ,'"),__append(escapeFn(fields[i])),__append("': 1\n");if(__append("};\n\nViewModel.prototype.waitForStatusChange = function () {\n"),incomings.length?__append("    return this._propagating ||\n           this._computing ||\n"):__append("    return this._computing ||\n"),__append("           this._initializing ||\n           Promise.resolve();\n};\n\n\nViewModel.prototype._compute = function() {\n"),incomings.length&&__append("    if (this._propagating) {\n        this._propagating.cancel();\n    }\n"),__append("    if (this._computing) {\n        this._computing.cancel();\n    }\n    var self = this;\n    this._computing = this._repository.findById(this.filters.id, this.fields).then(function (item) {\n        self.output = item;\n        self.item(item);\n        self.status('computed');\n        self._computing = undefined;\n    });\n};\n\n"),incomings.length){__append("ViewModel.prototype._allComputed = function() {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'] || this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return false;\n    }\n");__append("    return true;\n};\n\nViewModel.prototype._firstNotReady = function () {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("']) {\n        return Promise.reject();\n    }\n    if (this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].waitForStatusChange();\n        }\n");__append("    return Promise.resolve();\n};\n\nViewModel.prototype._waitForDependencies = function () {\n    if (this._allComputed()) {\n        return Promise.resolve();\n    } else {\n        var self = this;\n        return this._firstNotReady().then(function () {\n            return self._waitForDependencies();\n        });\n    }\n};\n\nViewModel.prototype._propagate = function () {\n    if (this._propagating) {\n        this._propagating.cancel();\n    }\n    if (this._computing) {\n        this._computing.cancel();\n    }\n    var self = this;\n    this._propagating = this._waitForDependencies().then(function () {\n");for(var i=0;i<incomings.length;i+=1)for(var bindings=incomings[i].bindings,k=0;k<bindings.length;k+=1)__append("        self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] = self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] || (\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output &&\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output['"),__append(escapeFn(bindings[k].output)),__append("']);\n");__append("        self.status('ready');\n        self._propagating = undefined;\n        self._compute();\n    });\n};\n")}__append("\nViewModel.prototype.init = function (options) {\n    options = options || {};\n    this.output = undefined;\n    this.filters = options.input || {};\n"),incomings.length?__append("    this.status('clear');\n"):__append("    this.status('ready');\n"),__append("    var self = this;\n    this._initializing = new Promise(function (resolve) {\n        setTimeout(function () {\n"),incomings.length?__append("            self._propagate();\n"):__append("            self._compute();\n"),__append("            resolve();\n            self._initializing = undefined;\n        }, 1);\n    });\n};\n\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                params.context.vms[vm.id] = vm;\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () { delete params.context.vms[vm.id]; });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n")}return __output}},{}],41:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("<h3>"),__append(escapeFn(name)),__append("</h3>\n<form>\n");for(var i=0;i<fields.length;i+=1)__append("    <div class=\"form-group\" data-bind=\"css: {'has-error': errors()['"),__append(escapeFn(fields[i])),__append('\']}">\n        <label for="'),__append(escapeFn(id)),__append("_field_"),__append(escapeFn(i)),__append('" data-bind="css: {active: fields()[\''),__append(escapeFn(fields[i])),__append("']}, attr: {'data-error': errors()['"),__append(escapeFn(fields[i])),__append("']}\">"),__append(escapeFn(fields[i])),__append('</label>\n        <input id="'),__append(escapeFn(id)),__append("_field_"),__append(escapeFn(i)),__append('" data-bind="value: fields()[\''),__append(escapeFn(fields[i])),__append('\']" type="text" class="form-control validate" aria-describedby="'),__append(escapeFn(id)),__append("_field_"),__append(escapeFn(i)),__append('_error">\n        <span id="'),__append(escapeFn(id)),__append("_field_"),__append(escapeFn(i)),__append('_error" class="help-block" data-bind="text: errors()[\''),__append(escapeFn(fields[i])),__append("']\"></span>\n    </div>\n");if(__append("</form>\n"),events.length){__append('<div class="row">\n');for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("    <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: trigger.bind($data,'"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n")):(__append('    <a class="btn btn-primary" data-bind="click: trigger.bind($data, \''),__append(escapeFn(events[i].id)),__append("')\">"),__append(escapeFn(events[i].name)),__append("</a>\n"));__append("</div>\n")}}return __output}},{}],42:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout'),\n    Promise = require('bluebird');\n\nfunction ViewModel(params) {\n    var self = this;\n    self.context = params.context;\n    self.status = ko.observable('');\n    self.fields = ko.observable({});\n    self.errors = ko.observable({});\n\n    self.trigger = function (id) {\n        self.context.navigations[id](self.context, self.output);\n    };\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n\nViewModel.prototype.waitForStatusChange = function () {\n"),incomings.length?__append("    return this._propagating ||\n           this._initializing ||\n"):__append("    return this._initializing ||\n"),__append("           Promise.resolve();\n};\n\nViewModel.prototype._compute = function () {\n"),incomings.length&&__append("    if (this._propagating) {\n        this._propagating.cancel();\n    }\n"),__append("    this.output = {\n");for(var i=0;i<fields.length;i+=1)__append("        '"),__append(escapeFn(fields[i])),__append("': this.input['"),__append(escapeFn(fields[i])),__append("'],\n");__append("    }\n    var self = this,\n        fields = {\n");for(var i=0;i<fields.length;i+=1)__append("            '"),__append(escapeFn(fields[i])),__append("': ko.observable(this.input['"),__append(escapeFn(fields[i])),__append("']),\n");__append("        },\n        errors = {\n");for(var i=0;i<fields.length;i+=1)__append("            '"),__append(escapeFn(fields[i])),__append("': ko.observable(this.input['"),__append(escapeFn(fields[i])),__append("-error']),\n");__append("        };\n");for(var i=0;i<fields.length;i+=1)__append("    fields['"),__append(escapeFn(fields[i])),__append("'].subscribe(function (value) {\n        self.output['"),__append(escapeFn(fields[i])),__append("'] = value;\n        self.errors()['"),__append(escapeFn(fields[i])),__append("'](undefined);\n    });\n");if(__append("    this.fields(fields);\n    this.errors(errors);\n    this.status('computed');\n};\n\n"),incomings.length){__append("ViewModel.prototype._allComputed = function () {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'] || this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return false;\n    }\n");__append("    return true;\n}\nViewModel.prototype._firstNotReady = function() {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("']) {\n        return Promise.reject();\n    }\n    if (this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].waitForStatusChange();\n}\n");__append("    return Promise.resolve();\n};\n\nViewModel.prototype._waitForDependencies = function () {\n    if (this._allComputed()) {\n        return Promise.resolve();\n    } else {\n        var self = this;\n        return this._firstNotReady().then(function () {\n            return self._waitForDependencies();\n        });\n    }\n};\n\nViewModel.prototype._propagate = function() {\n    if (this._propagating) {\n        this._propagating.cancel();\n    }\n    var self = this;\n    this._propagating = this._waitForDependencies().then(function () {\n");for(var i=0;i<incomings.length;i+=1)for(var bindings=incomings[i].bindings,k=0;k<bindings.length;k+=1)__append("        self.input['"),__append(escapeFn(bindings[k].input)),__append("'] = self.input['"),__append(escapeFn(bindings[k].input)),__append("'] || (\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output &&\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output['"),__append(escapeFn(bindings[k].output)),__append("']);\n");__append("        self.status('ready');\n        self._propagating = undefined;\n        self._compute();\n    });\n};\n")}__append("\nViewModel.prototype.init = function (options) {\n    options = options || {};\n    this.output = undefined;\n    this.fields({});\n    this.errors({});\n    this.input = options.input || {};\n"),incomings.length?__append("    this.status('clear');\n"):__append("    this.status('ready');\n"),__append("    var self = this;\n    this._initializing = new Promise(function (resolve) {\n        setTimeout(function () {\n"),incomings.length?__append("            self._propagate();\n"):__append("            self._compute();\n"),__append("            resolve();\n            self._initializing = undefined;\n        }, 1);\n    });\n};\n\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                params.context.vms[vm.id] = vm;\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () { delete params.context.vms[vm.id]; });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n")}return __output}},{}],43:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("<h3>"),__append(escapeFn(name)),__append('</h3>\n<table class="table table-hover table-sm">\n    <thead>\n        <tr>\n            <th>#</th>\n');for(var i=0;i<fields.length;i+=1)__append("            <th>"),__append(escapeFn(fields[i])),__append("</th>\n");events.length&&__append("            <th>actions</th>\n"),__append('        </tr>\n    </thead>\n    <tbody data-bind="foreach: items">\n'),showSelection?__append("        <tr data-bind=\"click: $parent.select, css: {'info': $parent.selected() === id}\">\n"):__append('        <tr data-bind="click: $parent.select">\n'),__append('            <td data-bind="text: id"></td>\n');for(var i=0;i<fields.length;i+=1)__append("            <td data-bind=\"text: $data['"),__append(escapeFn(fields[i])),__append('\']" style="white-space: pre-wrap;"></td>\n');if(events.length){__append("            <td>\n");for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("                <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: $parent.trigger.bind($data, '"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n")):(__append('                <a class="btn btn-primary" data-bind="click: $parent.trigger.bind($data, \''),__append(escapeFn(events[i].id)),__append("'), clickBubble: false\">"),__append(escapeFn(events[i].name)),__append("</a>\n"));__append("            </td>\n")}__append("        </tr>\n    </tbody>\n</table>\n")}return __output}},{}],44:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout'),\n    Promise = require('bluebird');\n\nfunction ViewModel(params) {\n    var self = this;\n    self._repository = params.context.repositories['"),__append(escapeFn(collection)),__append("'];\n    self.context = params.context;\n    self.status = ko.observable('');\n    self.selected = ko.observable(undefined);\n    self.items = ko.observableArray([]);\n\n    self.select = function() {\n        self.selected(this.id);\n        self.output = this;\n"),selection&&(__append("        self.trigger.call(this, '"),__append(escapeFn(selection.id)),__append("');\n")),__append("    };\n\n    self.trigger = function (id) {\n        self.context.navigations[id](self.context, this);\n    };\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n\nViewModel.prototype.fields = {\n    id: 1\n");for(var i=0;i<fields.length;i+=1)__append("    ,'"),__append(escapeFn(fields[i])),__append("': 1\n");if(__append("};\n\nViewModel.prototype.waitForStatusChange = function () {\n"),incomings.length?__append("    return this._propagating ||\n           this._computing ||\n"):__append("    return this._computing ||\n"),__append("           this._initializing ||\n           Promise.resolve();\n};\n\nViewModel.prototype._compute = function() {\n"),incomings.length&&__append("    if (this._propagating) {\n        this._propagating.cancel();\n    }\n"),__append("    if (this._computing) {\n        this._computing.cancel();\n    }\n    var self = this;\n    this._computing = this._repository.find(this.filters, this.fields).then(function (items) {\n        self.selected(undefined);\n        self.items(items);\n        if (items.length) {\n            self.selected(items[0].id);\n            self.output = items[0];\n        }\n        self.status('computed');\n        self._computing = undefined;\n    });\n};\n\n"),incomings.length){__append("ViewModel.prototype._allComputed = function() {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'] || this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return false;\n    }\n");__append("    return true;\n};\n\nViewModel.prototype._firstNotReady = function() {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("']) {\n        return Promise.reject();\n    }\n    if (this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].waitForStatusChange();\n    }\n");__append("    return Promise.resolve();\n};\n\nViewModel.prototype._waitForDependencies = function() {\n    if (this._allComputed()) {\n        return Promise.resolve();\n    } else {\n        var self = this;\n        return this._firstNotReady().then(function () {\n            return self._waitForDependencies();\n        });\n    }\n};\n\nViewModel.prototype._propagate = function() {\n    if (this._propagating) {\n        this._propagating.cancel();\n    }\n    if (this._computing) {\n        this._computing.cancel();\n    }\n    var self = this;\n    this._propagating = this._waitForDependencies().then(function () {\n");for(var i=0;i<incomings.length;i+=1)for(var bindings=incomings[i].bindings,k=0;k<bindings.length;k+=1)__append("        self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] = self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] || (\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output &&\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output['"),__append(escapeFn(bindings[k].output)),__append("']);\n");__append("        self.status('ready');\n        self._propagating = undefined;\n        self._compute();\n    });\n};\n")}__append("\nViewModel.prototype.init = function (options) {\n    options = options || {};\n    this.output = undefined;\n    this.filters = options.input || {};\n"),incomings.length?__append("    this.status('clear');\n"):__append("    this.status('ready');\n"),__append("    var self = this;\n    this._initializing = new Promise(function (resolve) {\n        setTimeout(function () {\n"),incomings.length?__append("            self._propagate();\n"):__append("            self._compute();\n"),__append("            resolve();\n            self._initializing = undefined;\n        }, 1);\n    });\n};\n\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                params.context.vms[vm.id] = vm;\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () { delete params.context.vms[vm.id]; });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n")}return __output}},{}],45:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){if(__append('/*jslint node: true, nomen: true */\n"use strict";\n\nexports.createNavigation = function () { // add "options" parameter if needed\n'),bindings){__append("    return function (context, data) {\n        data = data || {};\n        var packet = {\n");for(var i=0;i<bindings.length;i+=1)__append("            "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(bindings[i].input)),__append("' : data['"),__append(escapeFn(bindings[i].output)),__append("']\n");__append("        };\n        var promise = context.actions['"),__append(escapeFn(target)),__append("']({filters: packet});\n")}else __append("    return function (context) {\n        var promise = context.actions['"),__append(escapeFn(target)),__append("']();\n");__append("        context.runningActionsByContainer['"),__append(escapeFn(containerId)),__append("'].push(promise);\n        promise.then(function (result) {\n            context.runningActionsByContainer['"),__append(escapeFn(containerId)),__append("'].splice(\n                context.runningActionsByContainer['"),__append(escapeFn(containerId)),__append("'].indexOf(promise), 1\n            );\n            if (result.event) {\n                context.navigations[result.event](context, result.data);\n            }\n        });\n    };\n};\n")}return __output}},{}],46:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('/*jslint node: true, nomen: true */\n"use strict";\n\nexports.createNavigation = function () { // add "options" parameter if needed\n'),bindings?__append("    return function (context, data) {\n"):__append("    return function (context) {\n"),__append("        if (!context.vms['"),__append(escapeFn(targetTop)),__append("']) {\n            context.top.active('"),__append(escapeFn(targetTop)),__append("');\n"),targetTop!==target&&(targetActives.length?(__append("            context.vms['"),__append(escapeFn(targetTop)),__append("'].init({mask: '"),__append(escapeFn(targetActives[0].xor)),__append("'});\n")):(__append("            context.vms['"),__append(escapeFn(targetTop)),__append("'].init({mask: '"),__append(escapeFn(target)),__append("'});\n"))),__append("        }\n");for(var i=0;i<targetActives.length;i+=1)__append("        if (!context.vms['"),__append(escapeFn(targetActives[i].child)),__append("']) {\n            context.vms['"),__append(escapeFn(targetActives[i].xor)),__append("'].active('"),__append(escapeFn(targetActives[i].child)),__append("');\n"),targetActives[i].child!==target&&(targetActives.length>i+1?(__append("            context.vms['"),__append(escapeFn(targetActives[i].child)),__append("'].init({mask: '"),__append(escapeFn(targetActives[i+1].xor)),__append("'});\n")):(__append("            context.vms['"),__append(escapeFn(targetActives[i].child)),__append("'].init({mask: '"),__append(escapeFn(target)),__append("'});\n"))),__append("        }\n");if(bindings){__append("        data = data || {};\n        var packet = {\n");for(var i=0;i<bindings.length;i+=1)__append("            "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(bindings[i].input)),__append("' : data['"),__append(escapeFn(bindings[i].output)),__append("']\n");__append("        };\n        context.vms['"),__append(escapeFn(target)),__append("'].init({input: packet});\n")}else __append("        context.vms['"),__append(escapeFn(target)),__append("'].init();\n");__append("    };\n};\n")}return __output}},{}],47:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("<span>\n");for(var i=0;i<children.length;i+=1)__append("    \x3c!-- "),__append(escapeFn(children[i].name)),__append(" --\x3e\n    <c-"),__append(escapeFn(children[i].id)),__append(' params="context: context"></c-'),__append(escapeFn(children[i].id)),__append(">\n");for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("  <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: trigger.bind($data,'"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n")):(__append('  <a class="btn btn-primary" data-bind="click: trigger.bind($data,\''),__append(escapeFn(events[i].id)),__append("')\">"),__append(escapeFn(events[i].name)),__append("</a>\n"));__append("</span>\n")}return __output}},{}],48:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout');\n\nfunction ViewModel(params) {\n    var self = this;\n    self.context = params.context;\n\n    self.init = function (options) {\n        options = options || {};\n        self.children.forEach(function (child){\n            if (child === options.mask) {\n                return;\n            }\n            self.context.vms[child].init(options);\n        });\n    };\n\n    self.trigger = function (id) {\n        self.context.navigations[id](self.context);\n    };\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\nViewModel.prototype.children = [\n");for(var i=0;i<children.length;i+=1)__append("    "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(children[i].id)),__append("' // "),__append(escapeFn(children[i].name)),__append("\n");__append("];\n\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                params.context.vms[vm.id] = vm;\n                params.context.runningActionsByContainer[vm.id] = [];\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () {\n                    params.context.runningActionsByContainer[vm.id].forEach(function (promise) {\n                        promise.cancel();\n                    })\n                    delete params.context.runningActionsByContainer[vm.id];\n                    delete params.context.vms[vm.id];\n                });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n")}return __output}},{}],49:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<span>\n  \x3c!-- THIS CAN BE REMOVED (BEGIN) --\x3e\n  <a class="btn btn-primary" data-bind="click: trigger, clickBubble: false">'),__append(escapeFn(name)),__append("</a>\n  \x3c!-- THIS CAN BE REMOVED (END) --\x3e\n</span>\n");return __output}},{}],50:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout');\n\nfunction ViewModel(params) {\n    var self = this;\n\n    // TODO: Setup everything needed to start listening for the event\n    /*\n    example:\n    // let's trigger after 1 second\n    self.timer = setInterval(function(){\n        params.trigger();\n    }, 1000);\n    */\n\n    self.context = params.context;\n\n    self.trigger = params.trigger;\n}\n\nViewModel.prototype.dispose = function() {\n  // TODO: Teardown everything you setup to listen for the event\n  /*\n  example [continue]:\n  clearInterval(this.timer);\n  */\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () {\n                    vm.dispose();\n                });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n");return __output}},{}],51:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('<div class="container">\n    <div class="row">\n    ');for(var i=0;i<landmarks.length;i+=1)__append('        <a class="col-2 btn btn-secondary" data-bind="click: landmark.bind($data, \''),__append(escapeFn(landmarks[i].id)),__append("'), css: {active: active() === '"),__append(escapeFn(landmarks[i].id)),__append("'}\">"),__append(escapeFn(landmarks[i].name)),__append("</a>\n    ");__append("    </div>\n</div>\n");for(var i=0;i<children.length;i+=1)__append("\x3c!-- ko if: active() === '"),__append(escapeFn(children[i].id)),__append("' --\x3e\n    \x3c!-- "),__append(escapeFn(children[i].name)),__append(" --\x3e\n    <c-"),__append(escapeFn(children[i].id)),__append(' params="context: context"></c-'),__append(escapeFn(children[i].id)),__append(">\n\x3c!-- /ko --\x3e\n");for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("    <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: trigger.bind($data,'"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n  ")):(__append('    <a class="btn btn-primary" data-bind="click: trigger.bind($data, \''),__append(escapeFn(events[i].id)),__append("')\">"),__append(escapeFn(events[i].name)),__append("</a>\n  "))}return __output}},{}],52:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout');\n\nfunction ViewModel(params) {\n    var self = this;\n    self.context = params.context;\n    self.active = ko.observable(undefined);\n\n    self.init = function (options) {\n        options = options || {};\n        self.active(self.defaultChild);\n        if (self.defaultChild && options.mask !== self.defaultChild) {\n            self.context.vms[self.defaultChild].init(options);\n        }\n    };\n\n    self.landmark = function (id) {\n        self.active(id);\n        self.context.vms[id].init();\n    };\n    self.trigger = function (id) {\n        self.context.navigations[id](self.context);\n    };\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n"),defaultChild&&(__append("ViewModel.prototype.defaultChild = '"),__append(escapeFn(defaultChild)),__append("';\n")),__append("\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                params.context.vms[vm.id] = vm;\n                params.context.runningActionsByContainer[vm.id] = [];\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () {\n                    params.context.runningActionsByContainer[vm.id].forEach(function (promise) {\n                        promise.cancel();\n                    })\n                    delete params.context.runningActionsByContainer[vm.id];\n                    delete params.context.vms[vm.id];\n                });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n");return __output}},{}],53:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isViewComponent(e)&&"list"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.collection,s=n.attributes.filters,l=n.attributes.fields,p=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{source:t.getSource(e).id,bindings:e.attributes.bindings}})).value(),u=0!==i.chain(t.getOutbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{target:t.getTarget(e).id,bindings:e.attributes.bindings}})).value().length,c=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype}})).value(),d=i.chain(c).reject({stereotype:"selection"}).value(),f=i.chain(c).filter({stereotype:"selection"}).first().value(),_={controls:{children:"C-"+r}};return _["C-"+r]={isFolder:!0,name:"c-"+r,children:["C-"+r+"-VM","C-"+r+"-V"]},_["C-"+r+"-VM"]={name:"index.js",content:e("./templates/list-vm.js.ejs")({id:r,selection:f,collection:o,filters:s,fields:l,incomings:p})},_["C-"+r+"-V"]={name:"index.html",content:e("./templates/list-v.html.ejs")({name:a,events:d,fields:l,showSelection:u})},_})),r((function(e,n){return n.isViewComponent(e)&&"details"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.collection,s=n.attributes.fields,l=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{source:t.getSource(e).id,bindings:e.attributes.bindings}})).value(),p=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype}})).value(),u={controls:{children:"C-"+r}};return u["C-"+r]={isFolder:!0,name:"c-"+r,children:["C-"+r+"-VM","C-"+r+"-V"]},u["C-"+r+"-VM"]={name:"index.js",content:e("./templates/details-vm.js.ejs")({id:r,collection:o,fields:s,incomings:l})},u["C-"+r+"-V"]={name:"index.html",content:e("./templates/details-v.html.ejs")({name:a,events:p,fields:s})},u})),r((function(e,n){return n.isViewComponent(e)&&"form"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.fields,s=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{source:t.getSource(e).id,bindings:e.attributes.bindings}})).value(),l=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype}})).value(),p={controls:{children:"C-"+r}};return p["C-"+r]={isFolder:!0,name:"c-"+r,children:["C-"+r+"-VM","C-"+r+"-V"]},p["C-"+r+"-VM"]={name:"index.js",content:e("./templates/form-vm.js.ejs")({id:r,fields:o,incomings:s})},p["C-"+r+"-V"]={name:"index.html",content:e("./templates/form-v.html.ejs")({id:r,name:a,events:l,fields:o})},p}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/details-v.html.ejs":39,"./templates/details-vm.js.ejs":40,"./templates/form-v.html.ejs":41,"./templates/form-vm.js.ejs":42,"./templates/list-v.html.ejs":43,"./templates/list-vm.js.ejs":44}],54:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)}),(function(n,t){var r=t.toId(n),a=i.chain(t.getChildren(n)).reject((function(e){return t.isEvent(e)})).map((function(e){return{id:e,name:t.toElement(e).attributes.name}})).value(),o=i.chain(t.getChildren(n)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype}})).value(),s={controls:{children:"C-"+r}};return s["C-"+r]={isFolder:!0,name:"c-"+r,children:["C-"+r+"-VM","C-"+r+"-V"]},s["C-"+r+"-VM"]={name:"index.js",content:e("./templates/nonxor-vm.js.ejs")({id:r,children:a})},s["C-"+r+"-V"]={name:"index.html",content:e("./templates/nonxor-v.html.ejs")({children:a,events:o})},s})),r((function(e,n){return n.isViewContainer(e)&&n.isXOR(e)}),(function(n,t){var r=t.toId(n),a=i.chain(t.getChildren(n)).filter((function(e){return t.isViewContainer(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{id:e.id,name:e.attributes.name}})).value(),o=i.chain(t.getChildren(n)).filter((function(e){return t.isDefault(e)})).first().value(),s=i.chain(a).filter((function(e){return t.isLandmark(e.id)})).value(),l=i.chain(t.getChildren(n)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype}})).value(),p={controls:{children:"C-"+r}};return p["C-"+r]={isFolder:!0,name:"c-"+r,children:["C-"+r+"-VM","C-"+r+"-V"]},p["C-"+r+"-VM"]={name:"index.js",content:e("./templates/xor-vm.js.ejs")({id:r,defaultChild:o})},p["C-"+r+"-V"]={name:"index.html",content:e("./templates/xor-v.html.ejs")({children:a,landmarks:s,events:l})},p}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/nonxor-v.html.ejs":47,"./templates/nonxor-vm.js.ejs":48,"./templates/xor-v.html.ejs":51,"./templates/xor-vm.js.ejs":52}],55:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window._:void 0!==n&&n._;var i=e("./modelrules").rules,r=e("./elementrules").rules,a=("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createTransformer;t.transform=a({model:i,element:r},"m2t")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./elementrules":35,"./modelrules":56}],56:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.almost:void 0!==n?n.almost:null,a=r.Rule,o=r.createRule,s=r.Exception;t.rules=[o(a.always,(function(n){var t=i.chain(n.elements).filter((function(e){return n.isViewElement(e)})).value(),r=i.chain(n.elements).filter((function(e){return n.isEvent(e)})).filter((function(e){return n.getOutbounds(e).length})).value(),a=i.chain(n.elements).filter((function(e){return n.isAction(e)})).filter((function(e){return n.getInbounds(e).length})).value(),o=n.getTopLevels(),l=i.chain(o).filter((function(e){return n.isDefault(e)})).first().value(),p=i.chain(o).filter((function(e){return n.isLandmark(e)})).map((function(e){return n.toElement(e)})).map((function(e){return{id:e.id,name:e.attributes.name}})).value(),u=i.chain(n.elements).filter((function(e){return n.isViewComponent(e)})).reject({attributes:{stereotype:"form"}}).map((function(e){if(e.attributes.collection)return e.attributes.collection;throw new s("Collection cannot be empty\n(ViewComponent id:"+e.id+")")})).uniq().value();return{"":{isFolder:!0,children:"clientexample"},clientexample:{isFolder:!0,name:"clientexample",children:["src","package","gulp","gitignore"]},package:{name:"package.json",content:e("./templates/package.json.ejs")()},gitignore:{name:".gitignore",content:e("./templates/gitignore.ejs")()},gulp:{name:"gulpfile.js",content:e("./templates/gulpfile.js.ejs")()},src:{isFolder:!0,name:"src",children:["js","index"]},index:{name:"index.html",content:e("./templates/index.html.ejs")()},js:{isFolder:!0,name:"js",children:["js-index","controls","navigations","actions","repositories"]},"js-index":{name:"index.js",content:e("./templates/index.js.ejs")()},controls:{isFolder:!0,name:"controls",children:["controls-index","main-application"]},"controls-index":{name:"index.js",content:e("./templates/controls-index.js.ejs")({controls:t,events:r})},"main-application":{isFolder:!0,name:"main-application",children:["main-application-VM","main-application-V"]},"main-application-VM":{name:"index.js",content:e("./templates/main-application-vm.js.ejs")({defaultChild:l})},"main-application-V":{name:"index.html",content:e("./templates/main-application-v.html.ejs")({children:o,landmarks:p})},navigations:{isFolder:!0,name:"navigations",children:["navigations-index"]},"navigations-index":{name:"index.js",content:e("./templates/navigations-index.js.ejs")({events:r})},actions:{isFolder:!0,name:"actions",children:["actions-index"]},"actions-index":{name:"index.js",content:e("./templates/actions-index.js.ejs")({actions:a})},repositories:{isFolder:!0,name:"repositories",children:"repositories-index"},"repositories-index":{name:"index.js",content:e("./templates/repositories.index.js.ejs")({collections:u})}}})),o(a.always,(function(n){var t=i.chain(n.elements).filter((function(e){return n.isViewComponent(e)})).reject({attributes:{stereotype:"form"}}).map((function(e){return{name:e.attributes.collection,fields:i.chain(e.attributes.fields).concat(e.attributes.filters).compact().value()}})).groupBy("name").values().map((function(e){return{name:i.first(e).name,fields:i.chain(e).map("fields").flatten().uniq().value()}})).value(),r={repositories:{children:i.map(t,(function(e){return e.name+"-Repository"}))}};return i.each(t,(function(n){r[n.name+"-Repository"]={isFolder:!0,name:n.name,children:[n.name+"-Repository-Index",n.name+"-Repository-Default"]},r[n.name+"-Repository-Index"]={name:"index.js",content:e("./templates/repository.js.ejs")({name:n.name})},r[n.name+"-Repository-Default"]={name:"default.json",content:e("./templates/default.json.ejs")({fields:n.fields})}})),r}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./templates/actions-index.js.ejs":57,"./templates/controls-index.js.ejs":58,"./templates/default.json.ejs":59,"./templates/gitignore.ejs":60,"./templates/gulpfile.js.ejs":61,"./templates/index.html.ejs":62,"./templates/index.js.ejs":63,"./templates/main-application-v.html.ejs":64,"./templates/main-application-vm.js.ejs":65,"./templates/navigations-index.js.ejs":66,"./templates/package.json.ejs":67,"./templates/repositories.index.js.ejs":68,"./templates/repository.js.ejs":69}],57:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('/*jslint node: true, nomen: true */\n"use strict";\n\nexports.createActions = function (options) {\n    return {\n');for(var i=0;i<actions.length;i+=1)__append("        "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(actions[i].id)),__append("': require('./"),__append(escapeFn(actions[i].id)),__append("').createAction(options)\n");__append("    };\n};\n")}return __output}},{}],58:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout');\n\nexports.register = function () {\n    require('./main-application').register();\n");for(var i=0;i<controls.length;i+=1)__append("    require('./c-"),__append(escapeFn(controls[i].id)),__append("').register();\n");for(var i=0;i<events.length;i+=1)__append("  "),"system"==events[i].attributes.stereotype&&(__append("    require('./c-"),__append(escapeFn(events[i].id)),__append("').register();\n  "));__append("};\n")}return __output}},{}],59:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("[\n");for(var i=0;i<Math.min(1e3,Math.pow(4,Math.max(fields.length,1)));++i){__append("    "),__append(escapeFn(0!==i?",":"")),__append('{ "_id": '),__append(escapeFn(i)),__append(', "id": "'),__append(escapeFn(i)),__append('"');for(var f=0;f<fields.length;++f)__append(', "'),__append(escapeFn(fields[f])),__append('": "'),__append(escapeFn(Math.floor(i/Math.pow(4,fields.length-f-1))%4)),__append('"');__append("}\n")}__append("]\n")}return __output}},{}],60:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("# Logs\nlogs\n*.log\nnpm-debug.log*\nyarn-debug.log*\nyarn-error.log*\n\n# Runtime data\npids\n*.pid\n*.seed\n*.pid.lock\n\n# Directory for instrumented libs generated by jscoverage/JSCover\nlib-cov\n\n# Coverage directory used by tools like istanbul\ncoverage\n\n# nyc test coverage\n.nyc_output\n\n# Grunt intermediate storage (http://gruntjs.com/creating-plugins#storing-task-files)\n.grunt\n\n# Bower dependency directory (https://bower.io/)\nbower_components\n\n# node-waf configuration\n.lock-wscript\n\n# Compiled binary addons (http://nodejs.org/api/addons.html)\nbuild/Release\n\n# Dependency directories\nnode_modules/\njspm_packages/\n\n# Typescript v1 declaration files\ntypings/\n\n# Optional npm cache directory\n.npm\n\n# Optional eslint cache\n.eslintcache\n\n# Optional REPL history\n.node_repl_history\n\n# Output of 'npm pack'\n*.tgz\n\n# Yarn Integrity file\n.yarn-integrity\n\n# dotenv environment variables file\n.env\n\n# generated files\nwww\n");return __output}},{}],61:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true */\n\"use strict\";\n\nvar gulp = require('gulp'),\n    rimraf = require('gulp-rimraf'),\n    rename = require('gulp-rename'),\n    minifyCss = require('gulp-cssnano'),\n    browserify = require('browserify'),\n    source = require('vinyl-source-stream'),\n    buffer = require('vinyl-buffer'),\n    minifyjs = require('gulp-uglify-es').default,\n    merge = require('merge-stream');\n\ngulp.task('clean', function () {\n    return gulp.src('./www/*', {read: false}).pipe(rimraf({ force: true}));\n});\n\ngulp.task('html', function () {\n    return gulp.src('./src/index.html').pipe(gulp.dest('./www'));\n});\n\ngulp.task('vendor', function () {\n    return merge(\n        gulp.src([\n            './node_modules/bootstrap/dist/js/bootstrap.min.js',\n            './node_modules/bootstrap-notify/bootstrap-notify.min.js',\n            './node_modules/jquery/dist/jquery.min.js',\n            './node_modules/nedb/browser-version/out/nedb.min.js',\n            './node_modules/bluebird/js/browser/bluebird.min.js'\n        ]).pipe(gulp.dest('./www/js')),\n        gulp.src('./node_modules/knockout/build/output/knockout-latest.js')\n            .pipe(rename('knockout.min.js'))\n            .pipe(gulp.dest('./www/js'))\n    );\n});\n\ngulp.task('js', function () {\n    return browserify({\n        entries: './src/js/index.js',\n        debug: true\n    })\n        .transform('exposify', {\n            expose: {\n                'jquery': '$',\n                'knockout': 'ko',\n                'nedb': 'Nedb',\n                'bluebird': 'Promise'\n            }\n        })\n        .transform('stringify', {\n            extensions: ['.html'],\n            minify: true,\n            minifyOptions: {\n                removeComments: false\n            }\n        })\n        .bundle()\n        .pipe(source('index.js'))\n        .pipe(buffer())\n        //.pipe(minifyjs()) // uncomment for production\n        .pipe(gulp.dest('./www/js'));\n});\n\ngulp.task('css', function () {\n    return gulp.src('./node_modules/bootstrap/dist/css/bootstrap.min.css').pipe(gulp.dest('./www/css'));\n});\n\ngulp.task('build', gulp.parallel('html', 'css', 'js', 'vendor'));\n\ngulp.task('default', gulp.series('clean', 'build'));\n");return __output}},{}],62:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">\n    \x3c!-- TODO: Remove to use a different UI framework BEGIN --\x3e\n    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">\n    \x3c!-- TODO: Remove to use a different UI framework END --\x3e\n  </head>\n  <body>\n    <main-application class="flow-text" params="context: context"></main-application>\n    <script type="text/javascript" src="./js/jquery.min.js"><\/script>\n    \x3c!-- TODO: Remove to use a different UI framework BEGIN --\x3e\n    <script type="text/javascript" src="./js/bootstrap.min.js"><\/script>\n    <script type="text/javascript" src="./js/bootstrap-notify.min.js"><\/script>\n    \x3c!-- TODO: Remove to use a different UI framework END --\x3e\n    <script type="text/javascript" src="./js/knockout.min.js"><\/script>\n    \x3c!-- TODO: Remove if not using NEDB BEGIN --\x3e\n    <script type="text/javascript" src="./js/nedb.min.js"><\/script>\n    \x3c!-- TODO: Remove if not using NEDB END --\x3e\n    <script type="text/javascript" src="./js/bluebird.min.js"><\/script>\n    <script type="text/javascript" src="./js/index.js"><\/script>\n  </body>\n</html>\n');return __output}},{}],63:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout'),\n    repositories = require('./repositories'),\n    controls = require('./controls'),\n    navigations = require('./navigations'),\n    actions = require('./actions'),\n    Promise = require('bluebird');\n\nPromise.config({cancellation: true});\n\ncontrols.register();\n// TODO: register any custom control\n\nfunction ApplicationViewModel() {\n    // TODO: initialize global state\n    var repos = repositories.createRepositories({});\n    this.context = {\n        repositories: repos,\n        navigations: navigations.createNavigations({}),\n        actions: actions.createActions({repositories: repos}),\n        vms: {},\n        runningActionsByContainer: {}\n    };\n}\n\nvar application = new ApplicationViewModel();\n\nko.applyBindings(application);\n\napplication.context.top.init();\n");return __output}},{}],64:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('<nav class="navbar navbar-expand-lg bg-light">\n    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=""#landmark-menu">\n        <span class="navbar-toggler-icon"></span>\n    </button>\n    <div id="landmark-menu" class="collapse navbar-collapse">\n        <ul class="navbar-nav mr-auto">\n');for(var i=0;i<landmarks.length;i+=1)__append('            <li class="nav-item"data-bind="click: landmark.bind($data,\''),__append(escapeFn(landmarks[i].id)),__append("'), css: {active: active() === '"),__append(escapeFn(landmarks[i].id)),__append('\'}">\n                <a class="nav-link">'),__append(escapeFn(landmarks[i].name)),__append("</a>\n            </li>\n");__append('        </ul>\n    </div>\n</nav>\n<div class="container">\n');for(var i=0;i<children.length;i+=1)__append("    <span data-bind=\"if: active() === '"),__append(escapeFn(children[i])),__append("'\">\n        <c-"),__append(escapeFn(children[i])),__append(' params="context: context" class="container"></c-'),__append(escapeFn(children[i])),__append(">\n    </span>\n");__append("</div>\n")}return __output}},{}],65:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout'),\n    $ = require('jquery');\n\nexports.register = function () {\n    ko.components.register('main-application', {\n        viewModel: function(params) {\n            var self = this,\n"),defaultChild?(__append("                defaultChild = '"),__append(escapeFn(defaultChild)),__append("';\n")):__append("                defaultChild = undefined;\n"),__append("            self.context = params.context;\n            self.active = ko.observable(undefined);\n\n            self.landmark = function (id) {\n                self.active(id);\n                self.context.vms[id].init();\n            };\n            self.init = function () {\n                self.active(defaultChild);\n                if (self.context.vms[defaultChild]) {\n                    self.context.vms[defaultChild].init();\n                }\n            };\n\n            self.context.top = self;\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n");return __output}},{}],66:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('/*jslint node: true, nomen: true */\n"use strict";\n\nexports.createNavigations = function (options) {\n    return {\n');for(var i=0;i<events.length;i+=1)__append("        "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(events[i].id)),__append("': require('./"),__append(escapeFn(events[i].id)),__append("').createNavigation(options)\n");__append("    };\n};\n")}return __output}},{}],67:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('{\n  "name": "clientexample",\n  "description": "An example Web Client application generated by IFML-WebEditor",\n  "version": "0.0.1",\n  "private": true,\n  "scripts": {\n    "build": "gulp",\n    "postinstall": "npm run build"\n  },\n  "dependencies": {\n    "bluebird": "^3.7.1",\n    "bootstrap": "^4.4.1",\n    "bootstrap-notify": "^3.1.3",\n    "browserify": "^16.5.0",\n    "exposify": "^0.5.0",\n    "gulp": "^4.0.0",\n    "gulp-cssnano": "^2.1.0",\n    "gulp-rename": "^2.0.0",\n    "gulp-rimraf": "^1.0.0",\n    "gulp-uglify-es": "^2.0.0",\n    "jquery": "^3.4.1",\n    "knockout": "^3.4.0",\n    "merge-stream": "^1.0.0",\n    "nedb": "^1.8.0",\n    "stringify": "^5.1.0",\n    "vinyl-buffer": "^1.0.0",\n    "vinyl-source-stream": "^2.0.0"\n  }\n}\n');return __output}},{}],68:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('/*jslint node: true, nomen: true */\n"use strict";\n\nexports.createRepositories = function (options) {\n    var repositories = {}\n');for(var i=0;i<collections.length;++i)__append("    repositories['"),__append(escapeFn(collections[i])),__append("'] = require('./"),__append(escapeFn(collections[i])),__append("').createRepository(options);\n");__append("    return repositories;\n};\n")}return __output}},{}],69:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar Promise = require('bluebird'),\n    DataStore = require('nedb');\n\nfunction Repository(options) {\n    if (!(this instanceof Repository)) {\n        return new Repository(options);\n    }\n\n    // TODO: initialization\n\n    // TODO: remove this BEGIN\n    this.db = Promise.promisifyAll(new DataStore({\n        filename: '"),__append(escapeFn(name)),__append("',\n        inMemoryOnly: true\n    }));\n    this.db.insert(require('./default'));\n    // TODO: remove this END\n}\n\nRepository.prototype.findById = function (id) {\n    // TODO: implement the accessor to the datasource which returns a promise\n    // TODO: remove this BEGIN\n    return this.db.findOneAsync({id: id});\n    // TODO: remove this END\n};\n\nRepository.prototype.find = function (fields, project) {\n    // TODO: implement the accessor to the datasource which returns a promise\n    // TODO: remove this BEGIN\n    return this.db.findAsync(fields, project);\n    // TODO: remove this END\n};\n\nexports.createRepository = Repository;\n");return __output}},{}],70:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=e("jszip");t.compact=function(e){var n=r();return function e(n,t,r){i.each(r[t].children||[],(function(t){var i=r[t];i.isFolder?e(n.folder(i.name),t,r):n.file(i.name,i.content)}))}(n,"",e),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jszip:254}],71:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isAction(e)}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.parameters,s=n.attributes.results,l=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name}})).value(),p={actions:{children:"a-"+r}};return p["a-"+r]={name:r+".dart",content:e("./templates/action.dart.ejs")({id:r,name:a,parameters:o,results:s,events:l})},p}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/action.dart.ejs":74}],72:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null;t.rules=i([]).concat(e("./viewcontainer").rules).concat(e("./viewcomponent").rules).concat(e("./navigationflow").rules).concat(e("./action").rules).value()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./action":71,"./navigationflow":73,"./viewcomponent":82,"./viewcontainer":83}],73:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isNavigationFlow(e)&&!n.isAction(n.getTarget(e))}),(function(n,t){var r=t.getSource(n),a=t.toId(r),o=t.getTargetId(n),s=t.getTopLevelAncestor(o).id,l=i.chain(t.getAncestors(o,!0)).filter((function(e){return t.isViewContainer(e)})).filter((function(e){return t.isXOR(t.getParent(e))})).map((function(e){return{xor:t.getParentId(e),child:e}})).value(),p=i.chain(t.getOutbounds(a)).filter((function(e){return t.isNavigationFlow(e)})).map((function(e){return t.toElement(e)})).filter((function(e){return e.attributes.bindings&&e.attributes.bindings.length})).map((function(e){return e.attributes.bindings})).first().value(),u=t.isAction(t.getTarget(n)),c={events:{children:"e-"+a}};return c["e-"+a]={name:a+".dart",content:e("./templates/event.dart.ejs")({id:a,target:o,targetTop:s,targetActives:l,bindings:p,forceBindings:u})},c})),r((function(e,n){return n.isNavigationFlow(e)&&!n.isAction(n.getParent(n.getSource(e)))&&n.isAction(n.getTarget(e))}),(function(n,t){var r=t.getSource(n),a=t.toId(r),o=t.getTargetId(n),s=t.getActionOriginId(o),l=i.chain(t.getOutbounds(a)).filter((function(e){return t.isNavigationFlow(e)})).map((function(e){return t.toElement(e)})).filter((function(e){return e.attributes.bindings&&e.attributes.bindings.length})).map((function(e){return e.attributes.bindings})).first().value(),p={events:{children:"e-"+a}};return p["e-"+a]={name:a+".dart",content:e("./templates/event-to-action.dart.ejs")({id:a,containerId:s,target:o,bindings:l})},p}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/event-to-action.dart.ejs":76,"./templates/event.dart.ejs":77}],74:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import 'dart:async';\nimport '../commands.dart';\n");for(var i=0;i<events.length;i++)__append("import '../events/"),__append(escapeFn(events[i].id)),__append(".dart' as E"),__append(escapeFn(i)),__append(";\n");if(__append("\n"),parameters.length){__append("Future execute(CommandsBroker broker, Map<String, String> parameters) async {\n  // Parameters:\n");for(var i=0;i<parameters.length;i+=1)__append("  // parameters['"),__append(escapeFn(parameters[i])),__append("']\n")}else __append("void invoke(CommandsBroker broker) async {\n");if(__append("\n   // TODO: Implement\n\n"),events.length)if(results.length){__append("  final Map<String, String> results = <String, String>{\n");for(var i=0;i<results.length;i+=1)-1===parameters.indexOf(results[i])?(__append("    '"),__append(escapeFn(results[i])),__append("': '0',\n")):(__append("    '"),__append(escapeFn(results[i])),__append("': parameters['"),__append(escapeFn(results[i])),__append("'],\n"));__append("  };\n  E0.invoke(broker, results); // "),__append(escapeFn(events[0].name)),__append("\n");for(var i=1;i<events.length;i++)__append("  E"),__append(escapeFn(i)),__append(".invoke(broker, results);  // "),__append(escapeFn(events[i].name)),__append("\n")}else{__append("   E0.invoke(broker); // "),__append(escapeFn(events[0].name)),__append("\n");for(var i=1;i<events.length;i++)__append("   E"),__append(escapeFn(i)),__append(".invoke(broker);  // "),__append(escapeFn(events[i].name)),__append("\n")}__append("}\n")}return __output}},{}],75:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import 'dart:async';\nimport 'package:flutter/material.dart';\nimport '../commands.dart';\nimport '../repositories/"),__append(escapeFn(collection)),__append(".dart';\n");for(var i=0;i<events.length;i++)__append("import '../events/"),__append(escapeFn(events[i].id)),__append(".dart' as E"),__append(escapeFn(i)),__append(";\n");if(__append("\nenum _Status {clear, ready, computed}\n\nclass ViewElement extends StatefulWidget {\n  const ViewElement();\n  static const String id = '"),__append(escapeFn(id)),__append("';\n\n  // TODO: inject\n  final Repository repository = const Repository();\n\n  @override\n  _ViewElementState createState() => new _ViewElementState();\n}\n\nclass _ViewElementState extends State<ViewElement> {\n  CommandsBroker broker;\n  StreamSubscription sub;\n\n  _Status _status = _Status.ready;\n  String _id;\n  Map<String, String> _item;\n\n  final List<PropagateCallback> _propagateCallbacks = <PropagateCallback>[];\n\n"),incomings.length){__append("  Future _propagate() async {\n    await Future.wait([\n");for(var i=0;i<incomings.length;i++){__append("      () async {\n        final Completer<Map<String, String>> completer =\n            new Completer<Map<String, String>>();\n        broker.add(new PropagateCommand('"),__append(escapeFn(incomings[i].source)),__append("', completer.complete));\n        final Map<String, String> partial = await completer.future;\n");for(var bindings=incomings[i].bindings,k=0;k<bindings.length;k++)__append("        _id = _id ?? partial['"),__append(escapeFn(bindings[k].output)),__append("'];\n");__append("      }(),\n")}__append("    ]);\n    setState(() {\n      _status = _Status.ready;\n    });\n    await _compute();\n  }\n\n")}if(__append("  Future _compute() async {\n    final item = await widget.repository.findById(_id);\n    setState(() {\n      _status = _Status.computed;\n      _item = item;\n    });\n    _propagateCallbacks.forEach((callback) => callback(_item));\n    _propagateCallbacks.clear();\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final Commands commands = Commands.of(context);\n    if (commands.broker == broker) {\n      return;\n    }\n    if (broker != null) {\n      broker.unregister(ViewElement.id);\n      sub.cancel();\n    }\n    broker = commands.broker;\n    sub = broker.stream\n      .where((c) => c.target == ViewElement.id)\n      .listen((c) {\n        if (c is SetCommand) {\n          setState(() {\n            _id = c.input['id'];\n            _status = _Status.ready;\n            _item = null;\n          });\n"),incomings.length?__append("          _propagate();\n"):__append("          _compute();\n"),__append("        } else if (c is PropagateCommand) {\n          if (_status == _Status.computed) {\n            c.callback(_item);\n          } else {\n            _propagateCallbacks.add(c.callback);\n          }\n        }\n      });\n    broker.register(ViewElement.id);\n  }\n\n  @override\n  void dispose() {\n    super.dispose();\n    broker.unregister(ViewElement.id);\n    broker = null;\n    sub.cancel();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final CommandsBroker broker = Commands.of(context).broker;\n    final List<Widget> children = <Widget>[\n      const ListTile(title: const Text('"),__append(escapeFn(name)),__append("',\n        style: const TextStyle(fontWeight: FontWeight.bold))),\n    ];\n    if (_item != null) {\n      children.addAll(<Widget>[\n        new Container(\n          child: new Column(\n            crossAxisAlignment: CrossAxisAlignment.start,\n            children: <Widget> [\n"),1===fields.length)__append("              new ListTile(\n                title: new Text(_item['"),__append(escapeFn(fields[0])),__append("']),\n              ),\n");else for(var i=0;i<fields.length;i++)__append("              const Text('"),__append(escapeFn(fields[i])),__append("',\n                style: const TextStyle(fontWeight: FontWeight.bold)),\n              new Text(_item['"),__append(escapeFn(fields[i])),__append("']),\n");__append("              new ButtonBar(\n                children: <Widget>[\n");for(var i=0;i<events.length;i++)__append("                  new FlatButton(\n"),events[i].bindings&&events[i].bindings.length?(__append("                    onPressed: () => E"),__append(escapeFn(i)),__append(".invoke(broker, _item),\n")):(__append("                    onPressed: () => E"),__append(escapeFn(i)),__append(".invoke(broker),\n")),__append("                    child: const Text('"),__append(escapeFn(events[i].name)),__append("')\n                  ),\n");__append("                ]\n              ),\n            ]\n          )\n        ),\n      ]);\n    }\n    return new Card(\n      child: new Container(\n        child: new Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: children\n        )\n      )\n    );\n  }\n}\n")}return __output}},{}],76:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){if(__append("import '../commands.dart';\nimport '../actions/"),__append(escapeFn(target)),__append(".dart' as A;\n\n"),bindings&&bindings.length?__append("void invoke(CommandsBroker broker, Map<String, String> data) {\n"):__append("void invoke(CommandsBroker broker) {\n"),bindings&&bindings.length){__append("  final Map<String, String> parameters = <String, String>{\n");for(var i=0;i<bindings.length;i++)__append("    '"),__append(escapeFn(bindings[i].input)),__append("': data['"),__append(escapeFn(bindings[i].output)),__append("'],\n");__append("  };\n  A.execute(broker, parameters);\n")}else __append("  A.execute(broker);\n");__append("}\n")}return __output}},{}],77:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import '../commands.dart';\n\n"),forceBindings||bindings&&bindings.length?__append("void invoke(CommandsBroker broker, Map<String, String> data) {\n"):__append("void invoke(CommandsBroker broker) {\n"),__append("  broker.add(const ActivateCommand(null, '"),__append(escapeFn(targetTop)),__append("'));\n");for(var i=0;i<targetActives.length;i++)__append("  broker.add(const ActivateCommand('"),__append(escapeFn(targetActives[i].xor)),__append("', '"),__append(escapeFn(targetActives[i].child)),__append("'));\n");if(bindings&&bindings.length){__append("  final Map<String, String> target = <String, String>{\n");for(var i=0;i<bindings.length;i++)__append("    '"),__append(escapeFn(bindings[i].input)),__append("': data['"),__append(escapeFn(bindings[i].output)),__append("'],\n");__append("  };\n  broker.add(new SetCommand('"),__append(escapeFn(target)),__append("', target));\n")}else __append("  broker.add(const SetCommand('"),__append(escapeFn(target)),__append("'));\n");__append("}\n")}return __output}},{}],78:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import 'dart:async';\nimport 'package:flutter/material.dart';\nimport '../commands.dart';\n");for(var i=0;i<events.length;i++)__append("import '../events/"),__append(escapeFn(events[i].id)),__append(".dart' as E"),__append(escapeFn(i)),__append(";\n");if(__append("\nenum _Status {clear, ready, computed}\n\nclass ViewElement extends StatefulWidget {\n  const ViewElement();\n  static const String id = '"),__append(escapeFn(id)),__append("';\n\n  @override\n  _ViewElementState createState() => new _ViewElementState();\n}\n\nclass _ViewElementState extends State<ViewElement> {\n  CommandsBroker broker;\n  StreamSubscription sub;\n\n  _Status _status = _Status.ready;\n  Map<String, String> _input;\n  Map<String, TextEditingController> _fields;\n  Map<String, InputDecoration> _errors;\n\n  Map<String, String> get _output => new Map.fromIterable(\n    _fields.keys,\n    value: (key) => _fields[key].text\n  );\n\n  final List<PropagateCallback> _propagateCallbacks = <PropagateCallback>[];\n\n"),incomings.length){__append("  Future _propagate() async {\n    await Future.wait([\n");for(var i=0;i<incomings.length;i++){__append("      () async {\n        final Completer<Map<String, String>> completer =\n            new Completer<Map<String, String>>();\n        broker.add(new PropagateCommand('"),__append(escapeFn(incomings[i].source)),__append("', completer.complete));\n        final Map<String, String> partial = await completer.future;\n");for(var bindings=incomings[i].bindings,k=0;k<bindings.length;k++)__append("        _input['"),__append(escapeFn(bindings[k].input)),__append("'] = _input['"),__append(escapeFn(bindings[k].input)),__append("'] ?? partial['"),__append(escapeFn(bindings[k].output)),__append("'];\n");__append("      }(),\n")}__append("    ]);\n    setState(() {\n      _status = _Status.ready;\n    });\n    await _compute();\n  }\n\n")}__append("  Future _compute() async {\n    final Map<String, TextEditingController> fields = <String, TextEditingController>{\n");for(var i=0;i<fields.length;i++)__append("      '"),__append(escapeFn(fields[i])),__append("': new TextEditingController(text: _input['"),__append(escapeFn(fields[i])),__append("'] ?? ''),\n");__append("    };\n    final Map<String, InputDecoration> errors = <String, InputDecoration>{\n");for(var i=0;i<fields.length;i++)__append("      '"),__append(escapeFn(fields[i])),__append("': new InputDecoration(errorText: _input['"),__append(escapeFn(fields[i])),__append("-error']),\n");__append("    };\n    setState(() {\n      _status = _Status.computed;\n      _fields = fields;\n      _errors = errors;\n    });\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final Commands commands = Commands.of(context);\n    if (commands.broker == broker) {\n      return;\n    }\n    if (broker != null) {\n      broker.unregister(ViewElement.id);\n      sub.cancel();\n    }\n    broker = commands.broker;\n    sub = broker.stream\n      .where((c) => c.target == ViewElement.id)\n      .listen((c) {\n        if (c is SetCommand) {\n          setState(() {\n"),incomings.length?__append("            _input = new Map<String, String>.from(c.input);\n            _status = _Status.clear;\n"):__append("            _input = c.input;\n            _status = _Status.ready;\n"),__append("            _fields = null;\n            _errors = null;\n          });\n"),incomings.length?__append("          _propagate();\n"):__append("          _compute();\n"),__append("        } else if (c is PropagateCommand) {\n          if (_status == _Status.computed) {\n            c.callback(_output);\n          } else {\n            _propagateCallbacks.add(c.callback);\n          }\n        }\n      });\n    broker.register(ViewElement.id);\n  }\n\n  @override\n  void dispose() {\n    super.dispose();\n    broker.unregister(ViewElement.id);\n    broker = null;\n    sub.cancel();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final CommandsBroker broker = Commands.of(context).broker;\n    final List<Widget> children = <Widget> [\n      new ListTile( title: const Text('"),__append(escapeFn(name)),__append("',\n        style: const TextStyle(fontWeight: FontWeight.bold)))\n    ];\n    if (_fields != null) {\n      children.addAll(<Widget>[\n");for(var i=0;i<fields.length;i++)__append("        const Text('"),__append(escapeFn(fields[i])),__append("'),\n        new TextField(\n          controller: _fields['"),__append(escapeFn(fields[i])),__append("'],\n          decoration: _errors['"),__append(escapeFn(fields[i])),__append("'],\n        ),\n");for(var i=0;i<events.length;i++)__append("        new RaisedButton(\n"),events[i].bindings&&events[i].bindings.length?(__append("          onPressed: () => E"),__append(escapeFn(i)),__append(".invoke(broker, _output),\n")):(__append("          onPressed: () => E"),__append(escapeFn(i)),__append(".invoke(broker),\n")),__append("          child: const Text('"),__append(escapeFn(events[i].name)),__append("')\n        ),\n");__append("      ]);\n    }\n    return new Card(\n      child: new Container(\n        child: new Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: children\n        )\n      )\n    );\n  }\n}\n")}return __output}},{}],79:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import 'dart:async';\nimport 'package:flutter/material.dart';\nimport '../commands.dart';\nimport '../repositories/"),__append(escapeFn(collection)),__append(".dart';\n"),selection&&(__append("import '../events/"),__append(escapeFn(selection.id)),__append(".dart' as Selected;\n"));for(var i=0;i<events.length;i++)__append("import '../events/"),__append(escapeFn(events[i].id)),__append(".dart' as E"),__append(escapeFn(i)),__append(";\n");if(__append("\nenum _Status {clear, ready, computed}\n\nclass ViewElement extends StatefulWidget {\n  const ViewElement();\n  static const String id = '"),__append(escapeFn(id)),__append("';\n\n  // TODO: inject\n  final Repository repository = const Repository();\n\n  @override\n  _ViewElementState createState() => new _ViewElementState();\n}\n\nclass _ViewElementState extends State<ViewElement> {\n  CommandsBroker broker;\n  StreamSubscription sub;\n\n  _Status _status = _Status.ready;\n  Map<String, String> _filters;\n  List<Map<String, String>> _items;\n  Map<String, String> _selected;\n\n  final List<PropagateCallback> _propagateCallbacks = <PropagateCallback>[];\n\n"),incomings.length){__append("  Future _propagate() async {\n    await Future.wait([\n");for(var i=0;i<incomings.length;i++){__append("      () async {\n        final Completer<Map<String, String>> completer =\n            new Completer<Map<String, String>>();\n        broker.add(new PropagateCommand('"),__append(escapeFn(incomings[i].source)),__append("', completer.complete));\n        final Map<String, String> partial = await completer.future;\n");for(var bindings=incomings[i].bindings,k=0;k<bindings.length;k++)__append("        _filters['"),__append(escapeFn(bindings[k].input)),__append("'] = _filters['"),__append(escapeFn(bindings[k].input)),__append("'] ?? partial['"),__append(escapeFn(bindings[k].output)),__append("'];\n");__append("      }(),\n")}__append("    ]);\n    setState(() {\n      _status = _Status.ready;\n    });\n    await _compute();\n  }\n\n")}if(__append("  Future _compute() async {\n    final List<Map<String, String>> items = (await widget.repository.find(_filters)).toList();\n    final Map<String, String> selected = items.isNotEmpty ? items.first : <String, String>{};\n    setState(() {\n      _status = _Status.computed;\n      _items = items;\n      _selected = selected;\n    });\n    _propagateCallbacks.forEach((callback) => callback(_selected));\n    _propagateCallbacks.clear();\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final Commands commands = Commands.of(context);\n    if (commands.broker == broker) {\n      return;,\n    }\n    if (broker != null) {\n      broker.unregister(ViewElement.id);\n      sub.cancel();\n    }\n    broker = commands.broker;\n    sub = broker.stream\n      .where((c) => c.target == ViewElement.id)\n      .listen((c) {\n        if (c is SetCommand) {\n          setState(() {\n"),incomings.length?__append("            _filters = new Map<String, String>.from(c.input);\n            _status = _Status.clear;\n"):__append("            _filters = c.input;\n            _status = _Status.ready;\n"),__append("            _status = _Status.ready;\n            _items = null;\n          });\n"),incomings.length?__append("          _propagate();\n"):__append("          _compute();\n"),__append("        } else if (c is PropagateCommand) {\n          if (_status == _Status.computed) {\n            c.callback(_selected);\n          } else {\n            _propagateCallbacks.add(c.callback);\n          }\n        }\n      });\n    broker.register(ViewElement.id);\n  }\n\n  @override\n  void dispose() {\n    super.dispose();\n    broker.unregister(ViewElement.id);\n    broker = null;\n    sub.cancel();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final CommandsBroker broker = Commands.of(context).broker;\n    final List<Widget> tiles = <Widget> [\n      const ListTile(title: const Text('"),__append(escapeFn(name)),__append("',\n        style: const TextStyle(fontWeight: FontWeight.bold))),\n    ];\n    tiles.addAll((_items ?? const []).map((item) => new Container(\n      child: new Column(\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: <Widget> [\n"),1===fields.length)__append("          new ListTile(\n            title: new Text(item['"),__append(escapeFn(fields[0])),__append("']),\n            onTap: () {\n              setState((){\n                _selected = item;\n              });\n"),selected&&(selected.bindings&&selected.bindings.length?__append("              Selected.invoke(broker, _selected);\n"):__append("              Selected.invoke(broker);\n")),__append("            },\n          ),\n");else{__append("          new ListTile(\n            title: new Text('Item ' + item['id']),\n            onTap: () {\n              setState((){\n                _selected = item;\n              });\n"),selected&&(selected.bindings&&selected.bindings.length?__append("              Selected.invoke(broker, _selected);\n"):__append("              Selected.invoke(broker);\n")),__append("            },\n          ),\n");for(var i=0;i<fields.length;i++)__append("          const Text('"),__append(escapeFn(fields[i])),__append("',\n            style: const TextStyle(fontWeight: FontWeight.bold)),\n          new Text(item['"),__append(escapeFn(fields[i])),__append("']),\n")}if(events.length){__append("          new ButtonBar(\n           children: <Widget>[\n");for(var i=0;i<events.length;i++)__append("              new FlatButton(\n"),events[i].bindings&&events[i].bindings.length?(__append("                onPressed: () => E"),__append(escapeFn(i)),__append(".invoke(broker, item),\n")):(__append("                onPressed: () => E"),__append(escapeFn(i)),__append(".invoke(broker),\n")),__append("                child: const Text('"),__append(escapeFn(events[i].name)),__append("')\n              ),\n");__append("            ]\n          )\n")}__append("        ]\n      )\n    )));\n    return new Card(\n      child: new Container(\n        child: new Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: ListTile.divideTiles(\n            context: context,\n            tiles: tiles\n          ).toList()\n        )\n      )\n    );\n  }\n}\n")}return __output}},{}],80:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import 'dart:async';\nimport 'package:flutter/material.dart';\nimport '../commands.dart';\n");for(var i=0;i<children.length;i++)__append("import '"),__append(escapeFn(children[i].id)),__append(".dart' as C"),__append(escapeFn(i)),__append(";\n");for(var i=0;i<events.length;i++)__append("import '../events/"),__append(escapeFn(events[i].id)),__append(".dart' as E"),__append(escapeFn(i)),__append(";\n");__append("\nclass ViewElement extends StatefulWidget {\n  const ViewElement();\n  static const String id = '"),__append(escapeFn(id)),__append("';\n\n  @override\n  _ViewElementState createState() => new _ViewElementState();\n}\n\nclass _ViewElementState extends State<ViewElement> {\n  CommandsBroker broker;\n  StreamSubscription sub;\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final Commands commands = Commands.of(context);\n    if (commands.broker == broker) {\n      return;\n    }\n    if (broker != null) {\n      broker.unregister(ViewElement.id);\n      sub.cancel();\n    }\n    broker = commands.broker;\n    sub = broker.stream\n      .where((c) => c.target == ViewElement.id)\n      .listen((c) {\n        if (c is SetCommand) {\n          scheduleMicrotask(() {\n");for(var i=0;i<children.length;i++)__append("            broker.add(const SetCommand('"),__append(escapeFn(children[i].id)),__append("'));\n");__append("          });\n        }\n      });\n    broker.register(ViewElement.id);\n  }\n\n  @override\n  void dispose() {\n    super.dispose();\n    broker.unregister(ViewElement.id);\n    broker = null;\n    sub.cancel();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n      final CommandsBroker broker = Commands.of(context).broker;\n      return new Column(\n        crossAxisAlignment: CrossAxisAlignment.stretch,\n        children: <Widget> [\n");for(var i=0;i<children.length;i++)__append("          // "),__append(escapeFn(children[i].name)),__append("\n          const C"),__append(escapeFn(i)),__append(".ViewElement(),\n");for(var i=0;i<events.length;i++)__append("          new RaisedButton(\n              onPressed: () => E"),__append(escapeFn(i)),__append(".invoke(broker),\n              child: const Text('"),__append(escapeFn(events[i].name)),__append("')\n          ),\n");__append("        ]\n      );\n  }\n}\n")}return __output}},{}],81:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import 'dart:async';\nimport 'package:flutter/material.dart';\nimport '../commands.dart';\n");for(var i=0;i<children.length;i++)__append("import '"),__append(escapeFn(children[i].id)),__append(".dart' as C"),__append(escapeFn(i)),__append(";\n");for(var i=0;i<events.length;i++)__append("import '../events/"),__append(escapeFn(events[i].id)),__append(".dart' as E"),__append(escapeFn(i)),__append(";\n");__append("\nclass ViewElement extends StatefulWidget {\n  const ViewElement();\n  static const String id = '"),__append(escapeFn(id)),__append("';\n  @override\n  _ViewElementState createState() => new _ViewElementState();\n}\n\nclass _ViewElementState extends State<ViewElement> {\n  CommandsBroker broker;\n  StreamSubscription sub;\n  String current;\n\n  @override\n  void didChangeDependencies() {\n      super.didChangeDependencies();\n      final Commands commands = Commands.of(context);\n      if (commands.broker == broker) {\n          return;\n      }\n      if (broker != null) {\n        broker.unregister(ViewElement.id);\n        sub.cancel();\n      }\n      broker = commands.broker;\n      sub = broker.stream\n        .where((c) => c.target == ViewElement.id)\n        .listen((c) {\n          if (c is ActivateCommand) {\n            if (c.child != current) {\n              setState(() {\n                current = c.child;\n              });\n            }\n          } else if (c is SetCommand) {\n            setState(() {\n"),defaultChild?(__append("              current = '"),__append(escapeFn(defaultChild)),__append("';\n")):__append("              current = null;\n"),__append("            });\n"),defaultChild&&(__append("            scheduleMicrotask(() {\n              broker.add(new SetCommand('"),__append(escapeFn(defaultChild)),__append("'));\n            });\n")),__append("          }\n        });\n    broker.register(ViewElement.id);\n  }\n\n  @override\n  void dispose() {\n    super.dispose();\n    broker.unregister(ViewElement.id);\n    broker = null;\n    sub.cancel();\n  }\n\n  Widget _build(BuildContext context) {\n    switch (current) {\n");for(var i=0;i<children.length;i++)__append("      case '"),__append(escapeFn(children[i].id)),__append("':\n        // "),__append(escapeFn(children[i].name)),__append("\n        return const C"),__append(escapeFn(i)),__append(".ViewElement();\n");__append("      default:\n        return const Text('');\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final CommandsBroker broker = Commands.of(context).broker;\n    return new Column(\n      crossAxisAlignment: CrossAxisAlignment.stretch,\n      children: <Widget> [\n        new Row(\n          children: <Widget>[\n");for(var i=0;i<landmarks.length;i++)__append("            new RaisedButton(\n              onPressed: () {\n                broker.add(const ActivateCommand(ViewElement.id, '"),__append(escapeFn(landmarks[i].id)),__append("'));\n                broker.add(const SetCommand('"),__append(escapeFn(landmarks[i].id)),__append("'));\n              },\n              child: const Text('"),__append(escapeFn(landmarks[i].name)),__append("')\n            ),\n");__append("          ]\n        ),\n        _build(context),\n");for(var i=0;i<events.length;i++)__append("        new RaisedButton(\n          onPressed: () => E"),__append(escapeFn(i)),__append(".invoke(broker),\n          child: const Text('"),__append(escapeFn(events[i].name)),__append("')\n        ),\n");__append("      ]\n    );\n  }\n}\n")}return __output}},{}],82:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isViewComponent(e)&&"list"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.collection,s=n.attributes.filters,l=n.attributes.fields,p=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{source:t.getSource(e).id,bindings:e.attributes.bindings}})).value(),u=0!==i.chain(t.getOutbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{target:t.getTarget(e).id,bindings:e.attributes.bindings}})).value().length,c=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype,bindings:t.toElement(t.getOutbounds(e)[0]).attributes.bindings}})).value(),d=i.chain(c).reject({stereotype:"selection"}).value(),f=i.chain(c).filter({stereotype:"selection"}).first().value(),_={widgets:{children:"c-"+r}};return _["c-"+r]={name:r+".dart",content:e("./templates/list.dart.ejs")({id:r,name:a,selection:f,showSelection:u,collection:o,filters:s,fields:l,incomings:p,events:d})},_})),r((function(e,n){return n.isViewComponent(e)&&"details"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.collection,s=n.attributes.fields,l=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{source:t.getSource(e).id,bindings:e.attributes.bindings}})).value(),p=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,bindings:t.toElement(t.getOutbounds(e)[0]).attributes.bindings}})).value(),u={widgets:{children:"c-"+r}};return u["c-"+r]={name:r+".dart",content:e("./templates/details.dart.ejs")({id:r,name:a,collection:o,fields:s,incomings:l,events:p})},u})),r((function(e,n){return n.isViewComponent(e)&&"form"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.fields,s=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{source:t.getSource(e).id,bindings:e.attributes.bindings}})).value(),l=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,bindings:t.toElement(t.getOutbounds(e)[0]).attributes.bindings}})).value(),p={widgets:{children:"c-"+r}};return p["c-"+r]={name:r+".dart",content:e("./templates/form.dart.ejs")({id:r,name:a,fields:o,incomings:s,events:l})},p}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/details.dart.ejs":75,"./templates/form.dart.ejs":78,"./templates/list.dart.ejs":79}],83:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=i.chain(t.getChildren(n)).reject((function(e){return t.isEvent(e)})).map((function(e){return{id:e,name:t.toElement(e).attributes.name}})).value(),s=i.chain(t.getChildren(n)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name}})).value(),l={widgets:{children:"w-"+r}};return l["w-"+r]={name:r+".dart",content:e("./templates/nonxor.dart.ejs")({id:r,name:a,children:o,events:s})},l})),r((function(e,n){return n.isViewContainer(e)&&n.isXOR(e)}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=i.chain(t.getChildren(n)).filter((function(e){return t.isViewContainer(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{id:e.id,name:e.attributes.name}})).value(),s=i.chain(t.getChildren(n)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name}})).value(),l=i.chain(o).filter((function(e){return t.isLandmark(e.id)})).value(),p=i.chain(t.getChildren(n)).filter((function(e){return t.isDefault(e)})).first().value(),u={widgets:{children:"w-"+r}};return u["w-"+r]={name:r+".dart",content:e("./templates/xor.dart.ejs")({id:r,name:a,children:o,defaultChild:p,events:s,landmarks:l})},u}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/nonxor.dart.ejs":80,"./templates/xor.dart.ejs":81}],84:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window._:void 0!==n&&n._;var i=e("./modelrules").rules,r=e("./elementrules").rules,a=("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createTransformer;t.transform=a({model:i,element:r},"m2t")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./elementrules":72,"./modelrules":85}],85:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.almost:void 0!==n?n.almost:null,a=r.Rule,o=r.createRule,s=r.Exception;t.rules=[o(a.always,(function(n){var t=n.getTopLevels(),r=i.chain(t).filter((function(e){return n.isDefault(e)})).first().value(),a=i.chain(t).filter((function(e){return n.isLandmark(e)})).map((function(e){return n.toElement(e)})).map((function(e){return{id:e.id,name:e.attributes.name}})).value();return{"":{isFolder:!0,children:"flutterexample"},flutterexample:{isFolder:!0,name:"flutterexample",children:["lib","pubspec"]},lib:{isFolder:!0,name:"lib",children:["main","main-application","actions","widgets","events","commands","repositories"]},main:{name:"main.dart",content:e("./templates/main.dart.ejs")()},"main-application":{name:"main_application.dart",content:e("./templates/main_application.dart.ejs")({children:t,defaultChild:r,landmarks:a})},actions:{isFolder:!0,name:"actions"},widgets:{isFolder:!0,name:"widgets"},events:{isFolder:!0,name:"events"},repositories:{isFolder:!0,name:"repositories"},commands:{name:"commands.dart",content:e("./templates/commands.dart.ejs")()},pubspec:{name:"pubspec.yaml",content:e("./templates/pubspec.yaml.ejs")()}}})),o(a.always,(function(n){var t=i.chain(n.elements).filter((function(e){return n.isViewComponent(e)})).reject({attributes:{stereotype:"form"}}).map((function(e){if(e.attributes.collection)return{name:component.attributes.collection,fields:i.chain(component.attributes.fields).concat(component.attributes.filters).compact().value()};throw new s("Collection cannot be empty\n(ViewComponent id:"+e.id+")")})).groupBy("name").values().map((function(e){return{name:i.first(e).name,fields:i.chain(e).map("fields").flatten().uniq().value()}})).value(),r={repositories:{children:i.map(t,(function(e){return e.name+"-repository"}))}};return i.each(t,(function(n){r[n.name+"-repository"]={name:n.name+".dart",content:e("./templates/repository.dart.ejs")({name:n.name,fields:n.fields})}})),r}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./templates/commands.dart.ejs":86,"./templates/main.dart.ejs":87,"./templates/main_application.dart.ejs":88,"./templates/pubspec.yaml.ejs":89,"./templates/repository.dart.ejs":90}],86:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("import 'dart:async';\nimport 'dart:collection';\nimport 'package:flutter/material.dart';\n\nabstract class Command {\n  String get target;\n}\n\nclass ActivateCommand implements Command {\n  final String target;\n  final String child;\n  const ActivateCommand(this.target, this.child);\n}\n\nclass SetCommand implements Command {\n  final String target;\n  final Map<String, String> input;\n  const SetCommand(this.target, [this.input = const <String, String>{}]);\n}\n\ntypedef void PropagateCallback(Map<String, String> input);\n\nclass PropagateCommand implements Command {\n  final String target;\n  final PropagateCallback callback;\n  PropagateCommand(this.target, this.callback);\n}\n\nclass CommandsBroker {\n  final StreamController<Command> _controller\n      = new StreamController<Command>.broadcast(sync: true);\n  final Set<String> _registered = new Set<String>.from([]);\n  final Queue<Command> _queue = new Queue<Command>();\n\n  void add(Command command) {\n    assert(command != null);\n    if (_queue.isNotEmpty || !_registered.contains(command.target)) {\n      _queue.addLast(command);\n    } else {\n  \t  _controller.add(command);\n    }\n  }\n\n  void register(String id) {\n    _registered.add(id);\n    while (_queue.isNotEmpty && _registered.contains(_queue.first.target)) {\n      _controller.add(_queue.removeFirst());\n    }\n  }\n\n  void unregister(String id) {\n    _registered.remove(id);\n  }\n\n  Stream<Command> get stream => _controller.stream;\n}\n\nclass Commands extends InheritedWidget {\n  Commands({\n    Key key,\n    @required this.broker,\n    @required Widget child,\n  }): assert(broker != null),\n      assert(child != null),\n      super(key: key, child: child);\n\n  final CommandsBroker broker;\n\n  static Commands of(BuildContext context) =>\n      context.inheritFromWidgetOfExactType(Commands);\n\n  @override\n  bool updateShouldNotify(Commands old) => broker != old.broker;\n}\n");return __output}},{}],87:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("import 'package:flutter/material.dart';\nimport 'main_application.dart';\nimport 'commands.dart';\n\nvoid main() {\n  CommandsBroker broker = new CommandsBroker();\n  broker.add(new SetCommand(null));\n  runApp(new FlutterExampleApp(broker));\n}\n\nclass FlutterExampleApp extends StatelessWidget {\n  final CommandsBroker broker;\n\n  FlutterExampleApp(this.broker);\n\n  @overrride\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: 'Flutter Example',\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new Commands(\n        broker: broker,\n        child: new MainApplication(),\n      )\n    );\n  }\n}\n");return __output}},{}],88:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import 'dart:async';\nimport 'package:flutter/material.dart';\nimport 'commands.dart';\n");for(var i=0;i<children.length;i++)__append("import 'widgets/"),__append(escapeFn(children[i])),__append(".dart' as C"),__append(escapeFn(i)),__append(";\n");__append("\nclass MainApplication extends StatefulWidget {\n  @override\n  _MainApplicationState createState() => new _MainApplicationState();\n}\n\nclass _MainApplicationState extends State<MainApplication> {\n  CommandsBroker broker;\n  StreamSubscription sub;\n  String current;\n\n  @override\n  void didChangeDependencies() {\n      super.didChangeDependencies();\n      final Commands commands = Commands.of(context);\n      if (commands.broker == broker) {\n          return;\n      }\n      if (broker != null) {\n        broker.unregister(ViewElement.id);\n        sub.cancel();\n      }\n      broker = commands.broker;\n      sub = broker.stream\n        .where((c) => c.target == null)\n        .listen((c) {\n          if (c is ActivateCommand) {\n            setState(() {\n              current = c.child;\n            });\n          } else if (c is SetCommand) {\n"),defaultChild&&(__append("            setState(() {\n              current = '"),__append(escapeFn(defaultChild)),__append("';\n            });\n            broker.add(new SetCommand('"),__append(escapeFn(defaultChild)),__append("'));\n")),__append("          }\n        });\n    broker.register(null);\n  }\n\n  @override\n  void dispose() {\n    super.dispose();\n    broker.unregister(null);\n    broker = null;\n    sub.cancel();\n  }\n\n  Widget _build(BuildContext context) {\n    switch (current) {\n");for(var i=0;i<children.length;i++)__append("      case '"),__append(escapeFn(children[i])),__append("':\n        return const C"),__append(escapeFn(i)),__append(".ViewElement();\n");__append("      default:\n        return const Text('Empty Application - Forgot a default?');\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return new Scaffold(\n      appBar: new AppBar(\n        title: const Text('Flutter Example')\n      ),\n      body: new SingleChildScrollView(\n        child: _build(context)\n      ),\n      drawer: new Column(\n        children: <Widget>[\n");for(var i=0;i<landmarks.length;i++)__append("          new RaisedButton(\n            onPressed: () {\n              broker.add(const ActivateCommand(ViewElement.id, '"),__append(escapeFn(landmarks[i].id)),__append("'));\n              broker.add(const SetCommand('"),__append(escapeFn(landmarks[i].id)),__append("'));\n            },\n            child: const Text('"),__append(escapeFn(landmarks[i].name)),__append("')\n          ),\n");__append("        ]\n      )\n    );\n  }\n}\n")}return __output}},{}],89:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("name: flutterexample\ndescription: A Flutter Example application\ndependencies:\n  flutter:\n    sdk: flutter\ndev_dependencies:\n  flutter_test:\n    sdk: flutter\nflutter:\n  uses-material-design: true\n");return __output}},{}],90:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("import 'dart:async';\n\nconst List<Map<String, String>> _defaults = const <Map<String, String>>[\n");for(var i=0;i<Math.min(1e3,Math.pow(4,Math.max(fields.length,1)));++i){__append('    const {"id": "'),__append(escapeFn(i)),__append('"');for(var f=0;f<fields.length;++f)__append(', "'),__append(escapeFn(fields[f])),__append('": "'),__append(escapeFn(Math.floor(i/Math.pow(4,fields.length-f-1))%4)),__append('"');__append("},\n")}__append('];\n\nclass Repository {\n    const Repository();\n\n    Future<Map<String, String>> findById(String id) async {\n        final Iterable<Map<String, String>> matches\n            = _defaults.where((Map<String, String> element) => element["id"] == id);\n        if (matches.isNotEmpty) {\n            return matches.single;\n        }\n        return null;\n    }\n\n    Future<Iterable<Map<String, String>>> find(Map<String, String> filters) async {\n      if (filters.isEmpty) {\n        return _defaults;\n      }\n      return _defaults.where((Map<String, String> element)\n        => filters.keys.every((String key) => element[key] == filters[key]));\n    }\n}\n')}return __output}},{}],91:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window._:void 0!==n&&n._;var i=e("./compact").compact,r=e("../ifml").ifml,a=e("./server").transform,o=e("./client").transform,s=e("./mobile").transform,l=(e("./flutter"),{});t.ifml2code=l,l.server=function(e){var n=a(r.extend(e));return i(n)},l.client=function(e){var n=o(r.extend(e));return i(n)},l.mobile=function(e){var n=s(r.extend(e));return i(n)},l.flutter=function(e){var n=s(r.extend(e));return i(n)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../ifml":22,"./client":55,"./compact":70,"./flutter":84,"./mobile":113,"./server":155}],92:[function(e,n,t){arguments[4][34][0].apply(t,arguments)},{"../../../pcn":221,"./templates/action.js.ejs":96,dup:34}],93:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{"./action":92,"./navigationflow":94,"./systemEvent":95,"./viewcomponent":111,"./viewcontainer":112,dup:35}],94:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{"../../../pcn":221,"./templates/navigation-to-action.js.ejs":103,"./templates/navigation.js.ejs":104,dup:36}],95:[function(e,n,t){arguments[4][37][0].apply(t,arguments)},{"../../../pcn":221,"./templates/system-event-v.html.ejs":107,"./templates/system-event-vm.js.ejs":108,dup:37}],96:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('/*jslint node: true, nomen: true */\n"use strict";\n\nvar Promise = require(\'bluebird\');\n\nfunction Action() { // add "options" parameters if needed\n    // TODO: Global Initialization\n    /*\n    example:\n    this.collection = options.repositories.mail;\n    */\n}\nAction.prototype.run = function (parameters, solve) { // add "onCancel" parameters if needed\n    // Parameters:\n');for(var i=0;i<parameters.length;i+=1)__append("    // parameters['"),__append(escapeFn(parameters[i])),__append("']\n");__append("\n    // TODO: Execution\n    /*\n    example:\n    mail.find({subject: 'Re: ' + data.subject})\n        .then(solve);\n    */\n    // THIS CAN BE REMOVED (BEGIN)\n    M.toast({html: '"),__append(escapeFn(name)),__append("'}, 2000)\n    solve({\n"),events.length&&(__append("        event: '"),__append(escapeFn(events[0].id)),__append("', // "),__append(escapeFn(events[0].name)),__append("\n"));for(var i=1;i<events.length;i+=1)__append("        // event: '"),__append(escapeFn(events[i].id)),__append("', // "),__append(escapeFn(events[i].name)),__append("\n");__append("        data: {\n");for(var i=0;i<results.length;i+=1)-1===parameters.indexOf(results[i])?(__append("            '"),__append(escapeFn(results[i])),__append("': '0',\n")):(__append("            '"),__append(escapeFn(results[i])),__append("': parameters['"),__append(escapeFn(results[i])),__append("'],\n"));__append("        }\n    });\n    // THIS CAN BE REMOVED (END)\n};\n\nexports.createAction = function (options) {\n    var action = new Action(options);\n    return function (data) {\n        return new Promise(function (solve, reject, onCancel) {\n            var parameters = (data && data.filters) || {};\n            action.run(parameters, solve, onCancel);\n        });\n    };\n};\n")}return __output}},{}],97:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){switch(__append('<div class="card z-depth-1">\n    <div class="card-image">\n        <ul class="card-image collection with-header">\n            <li class="collection-header cyan">\n                <h5 class="white-text light">'),__append(escapeFn(name)),__append('</h5>\n            </li>\n        </ul>\n    </div>\n    <div class="card-content">\n        <div data-bind="if: item">\n'),fields.length){case 0:__append('       <span class="title" data-bind="text: item().id" style="white-space: pre-wrap;"></span>\n');break;case 1:__append('       <span class="title" data-bind="text: item()[\''),__append(escapeFn(fields[0])),__append('\']" style="white-space: pre-wrap;"></span>\n');break;default:for(var i=0;i<fields.length;i+=1)__append("        <strong>"),__append(escapeFn(fields[i])),__append("</strong>\n        <span data-bind=\"text: item()['"),__append(escapeFn(fields[i])),__append('\']" style="white-space: pre-wrap;"></span><br>\n')}if(__append("        </div>\n    </div>\n"),events.length){__append('    <div class="card-action">\n');for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("        <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: trigger.bind($data,'"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n")):(__append('        <a class="waves-effect waves-light btn cyan" data-bind="click: trigger.bind($data, \''),__append(escapeFn(events[i].id)),__append("')\">"),__append(escapeFn(events[i].name)),__append("</a>\n"));__append("    </div>\n")}__append("</div>\n")}return __output}},{}],98:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],99:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('<div class="card z-depth-1">\n    <div class="card-image">\n        <ul class="card-image collection with-header">\n            <li class="collection-header cyan">\n                <h5 class="white-text light">'),__append(escapeFn(name)),__append('</h5>\n            </li>\n        </ul>\n    </div>\n    <div class="card-content">\n        <div data-bind="if: fields">\n            <form>\n');for(var i=0;i<fields.length;i+=1)__append('                <div class="row">\n                    <div class="input-field col s12">\n                      <input id="'),__append(escapeFn(id)),__append("_field_"),__append(escapeFn(i)),__append('" data-bind="value: fields()[\''),__append(escapeFn(fields[i])),__append("'], css: {invalid: errors()['"),__append(escapeFn(fields[i])),__append('\']}" type="text" class="validate">\n                      <label for="'),__append(escapeFn(id)),__append("_field_"),__append(escapeFn(i)),__append('" data-bind="css: {active: fields()[\''),__append(escapeFn(fields[i])),__append("']}, attr: {'data-error': errors()['"),__append(escapeFn(fields[i])),__append("']}\">"),__append(escapeFn(fields[i])),__append("</label>\n                    </div>\n                </div>\n");if(__append("            </form>\n        </div>\n    </div>\n"),events.length){__append('    <div class="card-action">\n');for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("        <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: trigger.bind($data,'"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n")):(__append('        <a class="waves-effect waves-light btn cyan" data-bind="click: trigger.bind($data, \''),__append(escapeFn(events[i].id)),__append("')\">"),__append(escapeFn(events[i].name)),__append("</a>\n"));__append("    </div>\n")}__append("</div>\n")}return __output}},{}],100:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout'),\n    Promise = require('bluebird');\n\nfunction ViewModel(params) {\n    var self = this;\n    self.context = params.context;\n    self.status = ko.observable('');\n    self.fields = ko.observable({});\n    self.errors = ko.observable({});\n\n    self.trigger = function (id) {\n        self.context.navigations[id](self.context, self.output);\n    };\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n\nViewModel.prototype.waitForStatusChange = function () {\n"),incomings.length?__append("    return this._propagating ||\n           this._initializing ||\n"):__append("    return this._initializing ||\n"),__append("           Promise.resolve();\n};\n\nViewModel.prototype._compute = function () {\n"),incomings.length&&__append("    if (this._propagating) {\n        this._propagating.cancel();\n    }\n"),__append("    this.output = {\n");for(var i=0;i<fields.length;i+=1)__append("        '"),__append(escapeFn(fields[i])),__append("': this.input['"),__append(escapeFn(fields[i])),__append("'],\n");__append("    }\n    var self = this,\n        fields = {\n");for(var i=0;i<fields.length;i+=1)__append("            '"),__append(escapeFn(fields[i])),__append("': ko.observable(this.input['"),__append(escapeFn(fields[i])),__append("']),\n");__append("        },\n        errors = {\n");for(var i=0;i<fields.length;i+=1)__append("            '"),__append(escapeFn(fields[i])),__append("': ko.observable(this.input['"),__append(escapeFn(fields[i])),__append("-error']),\n");__append("        };\n");for(var i=0;i<fields.length;i+=1)__append("    fields['"),__append(escapeFn(fields[i])),__append("'].subscribe(function (value) {\n        self.output['"),__append(escapeFn(fields[i])),__append("'] = value;\n        self.errors()['"),__append(escapeFn(fields[i])),__append("'](undefined);\n    });\n");if(__append("    this.fields(fields);\n    this.errors(errors);\n    this.status('computed');\n};\n\n"),incomings.length){__append("ViewModel.prototype._allComputed = function () {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'] || this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return false;\n    }\n");__append("    return true;\n};\nViewModel.prototype._firstNotReady = function() {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("']) {\n        return Promise.reject();\n    }\n    if (this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].waitForStatusChange();\n}\n");__append("    return Promise.resolve();\n};\n\nViewModel.prototype._waitForDependencies = function () {\n    if (this._allComputed()) {\n        return Promise.resolve();\n    } else {\n        var self = this;\n        return this._firstNotReady().then(function () {\n            return self._waitForDependencies();\n        });\n    }\n};\n\nViewModel.prototype._propagate = function() {\n    if (this._propagating) {\n        this._propagating.cancel();\n    }\n    var self = this;\n    this._propagating = this._waitForDependencies().then(function () {\n");for(var i=0;i<incomings.length;i+=1)for(var bindings=incomings[i].bindings,k=0;k<bindings.length;k+=1)__append("        self.input['"),__append(escapeFn(bindings[k].input)),__append("'] = self.input['"),__append(escapeFn(bindings[k].input)),__append("'] || (\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output &&\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output['"),__append(escapeFn(bindings[k].output)),__append("']);\n");__append("        self.status('ready');\n        self._propagating = undefined;\n        self._compute();\n    });\n};\n")}__append("\nViewModel.prototype.init = function (options) {\n    options = options || {};\n    this.output = undefined;\n    this.fields({});\n    this.errors({});\n    this.input = options.input || {};\n"),incomings.length?__append("    this.status('clear');\n"):__append("    this.status('ready');\n"),__append("    var self = this;\n    this._initializing = new Promise(function (resolve) {\n        setTimeout(function () {\n"),incomings.length?__append("            self._propagate();\n"):__append("            self._compute();\n"),__append("            resolve();\n            self._initializing = undefined;\n        }, 1);\n    });\n};\n\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                params.context.vms[vm.id] = vm;\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () { delete params.context.vms[vm.id]; });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n")}return __output}},{}],101:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){switch(__append('<ul class="collection with-header z-depth-1">\n    <li class="collection-header cyan"><h5 class="white-text light">'),__append(escapeFn(name)),__append("</h5></li>\n    \x3c!-- ko foreach: items --\x3e\n"),showSelection?__append('    <li class="collection-item lighten-2" data-bind="click: $parent.select, css: {\'active cyan\': $parent.selected() === id}">\n'):__append('    <li class="collection-item" data-bind="click: $parent.select">\n'),fields.length){case 0:__append('       <span class="title" data-bind="text: id" style="white-space: pre-wrap;"></span>\n');break;case 1:__append('       <span class="title" data-bind="text: $data[\''),__append(escapeFn(fields[0])),__append('\']" style="white-space: pre-wrap;"></span>\n');break;default:for(var i=0;i<fields.length;i+=1)__append("        <strong>"),__append(escapeFn(fields[i])),__append("</strong>\n        <span data-bind=\"text: $data['"),__append(escapeFn(fields[i])),__append('\']" style="white-space: pre-wrap;"></span><br>\n')}if(events.length){__append("        <br>\n");for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("            <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: $parent.trigger.bind($data, '"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n")):(__append('            <a class="waves-effect waves-light btn cyan" data-bind="click: $parent.trigger.bind($data, \''),__append(escapeFn(events[i].id)),__append("'), clickBubble: false\">"),__append(escapeFn(events[i].name)),__append("</a>\n"))}__append("    </li>\n    \x3c!-- /ko --\x3e\n</ul>\n")}return __output}},{}],102:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout'),\n    Promise = require('bluebird');\n\nfunction ViewModel(params) {\n    var self = this;\n    self._repository = params.context.repositories['"),__append(escapeFn(collection)),__append("'];\n    self.context = params.context;\n    self.status = ko.observable('');\n    self.selected = ko.observable(undefined);\n    self.items = ko.observableArray([]);\n\n    self.select = function() {\n        self.selected(this.id);\n        self.output = this;\n"),selection&&(__append("        self.trigger.call(this, '"),__append(escapeFn(selection.id)),__append("');\n")),__append("    };\n\n    self.trigger = function (id) {\n        self.context.navigations[id](self.context, this);\n    };\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n\nViewModel.prototype.fields = {\n    id: 1\n");for(var i=0;i<fields.length;i+=1)__append("    ,'"),__append(escapeFn(fields[i])),__append("': 1\n");if(__append("};\n\nViewModel.prototype.waitForStatusChange = function () {\n"),incomings.length?__append("    return this._propagating ||\n           this._computing ||\n"):__append("    return this._computing ||\n"),__append("           this._initializing ||\n           Promise.resolve();\n};\n\nViewModel.prototype._compute = function() {\n"),incomings.length&&__append("    if (this._propagating) {\n        this._propagating.cancel();\n    }\n"),__append("    if (this._computing) {\n        this._computing.cancel();\n    }\n    var self = this;\n    this._computing = this._repository.find(this.filters, this.fields).then(function (items) {\n        self.selected(undefined);\n        self.items(items);\n        if (items.length) {\n            self.selected(items[0].id);\n            self.output = items[0];\n        }\n        $('.collapsible').collapsible();\n        self.status('computed');\n        self._computing = undefined;\n    });\n};\n\n"),incomings.length){__append("ViewModel.prototype._allComputed = function() {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'] || this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return false;\n    }\n");__append("    return true;\n};\n\nViewModel.prototype._firstNotReady = function() {\n");for(var i=0;i<incomings.length;i+=1)__append("    if (!this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("']) {\n        return Promise.reject();\n    }\n    if (this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].status() !== 'computed') {\n        return this.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].waitForStatusChange();\n    }\n");__append("    return Promise.resolve();\n};\n\nViewModel.prototype._waitForDependencies = function() {\n    if (this._allComputed()) {\n        return Promise.resolve();\n    } else {\n        var self = this;\n        return this._firstNotReady().then(function () {\n            return self._waitForDependencies();\n        });\n    }\n};\n\nViewModel.prototype._propagate = function() {\n    if (this._propagating) {\n        this._propagating.cancel();\n    }\n    if (this._computing) {\n        this._computing.cancel();\n    }\n    var self = this;\n    this._propagating = this._waitForDependencies().then(function () {\n");for(var i=0;i<incomings.length;i+=1)for(var bindings=incomings[i].bindings,k=0;k<bindings.length;k+=1)__append("        self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] = self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] || (\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output &&\n            self.context.vms['"),__append(escapeFn(incomings[i].source)),__append("'].output['"),__append(escapeFn(bindings[k].output)),__append("']);\n");__append("        self.status('ready');\n        self._propagating = undefined;\n        self._compute();\n    });\n};\n")}__append("\nViewModel.prototype.init = function (options) {\n    options = options || {};\n    this.output = undefined;\n    this.filters = options.input || {};\n"),incomings.length?__append("    this.status('clear');\n"):__append("    this.status('ready');\n"),__append("    var self = this;\n    this._initializing = new Promise(function (resolve) {\n        setTimeout(function () {\n"),incomings.length?__append("            self._propagate();\n"):__append("            self._compute();\n"),__append("            resolve();\n            self._initializing = undefined;\n        }, 1);\n    });\n};\n\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                params.context.vms[vm.id] = vm;\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () { delete params.context.vms[vm.id]; });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n")}return __output}},{}],103:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],104:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],105:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("<span>\n");for(var i=0;i<children.length;i+=1)__append("    \x3c!-- "),__append(escapeFn(children[i].name)),__append(" --\x3e\n    <c-"),__append(escapeFn(children[i].id)),__append(' params="context: context"></c-'),__append(escapeFn(children[i].id)),__append(">\n");for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype?(__append("    <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: trigger.bind($data,'"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n")):(__append('    <a class="waves-effect waves-light btn cyan col s12" data-bind="click: trigger.bind($data,\''),__append(escapeFn(events[i].id)),__append("')\">"),__append(escapeFn(events[i].name)),__append("</a>\n"));__append("</span>\n")}return __output}},{}],106:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48}],107:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<span>\n  \x3c!-- THIS CAN BE REMOVED (BEGIN) --\x3e\n  <a class="col-xs-2 btn btn-primary" data-bind="click: trigger, clickBubble: false">'),__append(escapeFn(name)),__append("</a>\n  \x3c!-- THIS CAN BE REMOVED (END) --\x3e\n</span>\n");return __output}},{}],108:[function(e,n,t){arguments[4][50][0].apply(t,arguments)},{dup:50}],109:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('<ul class="tabs tabs-transparent">\n    ');for(var i=0;i<landmarks.length;i+=1)__append('    <li class="tab col s6"><a class="cyan-text" data-bind="click: landmark.bind($data, \''),__append(escapeFn(landmarks[i].id)),__append("'), css: {active: active() === '"),__append(escapeFn(landmarks[i].id)),__append("'}\">"),__append(escapeFn(landmarks[i].name)),__append("</a></li>\n    ");__append("</ul>\n");for(var i=0;i<children.length;i+=1)__append("\x3c!-- ko if: active() === '"),__append(escapeFn(children[i].id)),__append("' --\x3e\n    \x3c!-- "),__append(escapeFn(children[i].name)),__append(" --\x3e\n    <c-"),__append(escapeFn(children[i].id)),__append(' params="context: context"></c-'),__append(escapeFn(children[i].id)),__append(">\n\x3c!-- /ko --\x3e\n");for(var i=0;i<events.length;i+=1)"system"==events[i].stereotype&&(__append("    <c-"),__append(escapeFn(events[i].id)),__append(" params=\"trigger: trigger.bind($data,'"),__append(escapeFn(events[i].id)),__append("')\"></c-"),__append(escapeFn(events[i].id)),__append(">\n       } else { "),__append('    <a class="waves-effect waves-light btn cyan col s12" data-bind="click: trigger.bind($data, \''),__append(escapeFn(events[i].id)),__append("')\">"),__append(escapeFn(events[i].name)),__append("</a>\n"))}return __output}},{}],110:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout');\n\nfunction ViewModel(params) {\n    var self = this;\n    self.context = params.context;\n    self.active = ko.observable(undefined);\n\n    self.init = function (options) {\n        options = options || {};\n        self.active(self.defaultChild);\n        if (self.defaultChild && options.mask !== self.defaultChild) {\n            self.context.vms[self.defaultChild].init(options);\n        }\n"),landmarks.length&&__append("        $('ul.tabs').tabs();\n"),__append("    };\n\n    self.landmark = function (id) {\n        self.active(id);\n        self.context.vms[id].init();\n    };\n    self.trigger = function (id) {\n        self.context.navigations[id](self.context);\n    };\n}\n\nViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n"),defaultChild&&(__append("ViewModel.prototype.defaultChild = '"),__append(escapeFn(defaultChild)),__append("';\n")),__append("\nexports.register = function () {\n    ko.components.register('c-"),__append(escapeFn(id)),__append("', {\n        viewModel: {\n            createViewModel: function (params, componentInfo) {\n                var vm = new ViewModel(params);\n                params.context.vms[vm.id] = vm;\n                params.context.runningActionsByContainer[vm.id] = [];\n                ko.utils.domNodeDisposal.addDisposeCallback(componentInfo.element, function () {\n                    params.context.runningActionsByContainer[vm.id].forEach(function (promise) {,\n                        promise.cancel();\n                    })\n                    delete params.context.runningActionsByContainer[vm.id];\n                    delete params.context.vms[vm.id];\n                });\n                return vm;\n            }\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n");return __output}},{}],111:[function(e,n,t){arguments[4][53][0].apply(t,arguments)},{"../../../pcn":221,"./templates/details-v.html.ejs":97,"./templates/details-vm.js.ejs":98,"./templates/form-v.html.ejs":99,"./templates/form-vm.js.ejs":100,"./templates/list-v.html.ejs":101,"./templates/list-vm.js.ejs":102,dup:53}],112:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)}),(function(n,t){var r=t.toId(n),a=i.chain(t.getChildren(n)).reject((function(e){return t.isEvent(e)})).map((function(e){return{id:e,name:t.toElement(e).attributes.name}})).value(),o=i.chain(t.getChildren(n)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype}})).value(),s={controls:{children:"C-"+r}};return s["C-"+r]={isFolder:!0,name:"c-"+r,children:["C-"+r+"-VM","C-"+r+"-V"]},s["C-"+r+"-VM"]={name:"index.js",content:e("./templates/nonxor-vm.js.ejs")({id:r,children:a})},s["C-"+r+"-V"]={name:"index.html",content:e("./templates/nonxor-v.html.ejs")({children:a,events:o})},s})),r((function(e,n){return n.isViewContainer(e)&&n.isXOR(e)}),(function(n,t){var r=t.toId(n),a=i.chain(t.getChildren(n)).filter((function(e){return t.isViewContainer(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{id:e.id,name:e.attributes.name}})).value(),o=i.chain(t.getChildren(n)).filter((function(e){return t.isDefault(e)})).first().value(),s=i.chain(a).filter((function(e){return t.isLandmark(e.id)})).value(),l=i.chain(t.getChildren(n)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype}})).value(),p={controls:{children:"C-"+r}};return p["C-"+r]={isFolder:!0,name:"c-"+r,children:["C-"+r+"-VM","C-"+r+"-V"]},p["C-"+r+"-VM"]={name:"index.js",content:e("./templates/xor-vm.js.ejs")({id:r,defaultChild:o,landmarks:s})},p["C-"+r+"-V"]={name:"index.html",content:e("./templates/xor-v.html.ejs")({children:a,landmarks:s,events:l})},p}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/nonxor-v.html.ejs":105,"./templates/nonxor-vm.js.ejs":106,"./templates/xor-v.html.ejs":109,"./templates/xor-vm.js.ejs":110}],113:[function(e,n,t){arguments[4][55][0].apply(t,arguments)},{"./elementrules":93,"./modelrules":114,dup:55}],114:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.almost:void 0!==n?n.almost:null,a=r.Rule,o=r.createRule,s=r.Exception;t.rules=[o(a.always,(function(n){var t=i.chain(n.elements).filter((function(e){return n.isViewElement(e)})).value(),r=i.chain(n.elements).filter((function(e){return n.isEvent(e)})).filter((function(e){return n.getOutbounds(e).length})).value(),a=i.chain(n.elements).filter((function(e){return n.isAction(e)})).filter((function(e){return n.getInbounds(e).length})).value(),o=n.getTopLevels(),l=i.chain(o).filter((function(e){return n.isDefault(e)})).first().value(),p=i.chain(o).filter((function(e){return n.isLandmark(e)})).map((function(e){return n.toElement(e)})).map((function(e){return{id:e.id,name:e.attributes.name}})).value(),u=i.chain(n.elements).filter((function(e){return n.isViewComponent(e)})).reject({attributes:{stereotype:"form"}}).map((function(e){if(e.attributes.collection)return e.attributes.collection;throw new s("Collection cannot be empty\n(ViewComponent id:"+e.id+")")})).uniq().value();return{"":{isFolder:!0,children:"mobileexample"},mobileexample:{isFolder:!0,name:"mobileexample",children:["src","package","config","gulp","gitignore"]},package:{name:"package.json",content:e("./templates/package.json.ejs")()},config:{name:"config.xml",content:e("./templates/config.xml.ejs")()},gitignore:{name:".gitignore",content:e("./templates/gitignore.ejs")()},gulp:{name:"gulpfile.js",content:e("./templates/gulpfile.js.ejs")()},src:{isFolder:!0,name:"src",children:["js","index"]},index:{name:"index.html",content:e("./templates/index.html.ejs")()},js:{isFolder:!0,name:"js",children:["js-index","controls","navigations","actions","repositories"]},"js-index":{name:"index.js",content:e("./templates/index.js.ejs")()},controls:{isFolder:!0,name:"controls",children:["controls-index","main-application"]},"controls-index":{name:"index.js",content:e("./templates/controls-index.js.ejs")({controls:t,events:r})},"main-application":{isFolder:!0,name:"main-application",children:["main-application-VM","main-application-V"]},"main-application-VM":{name:"index.js",content:e("./templates/main-application-vm.js.ejs")({defaultChild:l})},"main-application-V":{name:"index.html",content:e("./templates/main-application-v.html.ejs")({children:o,landmarks:p})},navigations:{isFolder:!0,name:"navigations",children:["navigations-index"]},"navigations-index":{name:"index.js",content:e("./templates/navigations-index.js.ejs")({events:r})},actions:{isFolder:!0,name:"actions",children:["actions-index"]},"actions-index":{name:"index.js",content:e("./templates/actions-index.js.ejs")({actions:a})},repositories:{isFolder:!0,name:"repositories",children:"repositories-index"},"repositories-index":{name:"index.js",content:e("./templates/repositories.index.js.ejs")({collections:u})}}})),o(a.always,(function(n){var t=i.chain(n.elements).filter((function(e){return n.isViewComponent(e)})).reject({attributes:{stereotype:"form"}}).map((function(e){return{name:e.attributes.collection,fields:i.chain(e.attributes.fields).concat(e.attributes.filters).compact().value()}})).groupBy("name").values().map((function(e){return{name:i.first(e).name,fields:i.chain(e).map("fields").flatten().uniq().value()}})).value(),r={repositories:{children:i.map(t,(function(e){return e.name+"-Repository"}))}};return i.each(t,(function(n){r[n.name+"-Repository"]={isFolder:!0,name:n.name,children:[n.name+"-Repository-Index",n.name+"-Repository-Default"]},r[n.name+"-Repository-Index"]={name:"index.js",content:e("./templates/repository.js.ejs")({name:n.name})},r[n.name+"-Repository-Default"]={name:"default.json",content:e("./templates/default.json.ejs")({fields:n.fields})}})),r}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./templates/actions-index.js.ejs":115,"./templates/config.xml.ejs":116,"./templates/controls-index.js.ejs":117,"./templates/default.json.ejs":118,"./templates/gitignore.ejs":119,"./templates/gulpfile.js.ejs":120,"./templates/index.html.ejs":121,"./templates/index.js.ejs":122,"./templates/main-application-v.html.ejs":123,"./templates/main-application-vm.js.ejs":124,"./templates/navigations-index.js.ejs":125,"./templates/package.json.ejs":126,"./templates/repositories.index.js.ejs":127,"./templates/repository.js.ejs":128}],115:[function(e,n,t){arguments[4][57][0].apply(t,arguments)},{dup:57}],116:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<?xml version=\'1.0\' encoding=\'utf-8\'?>\n<widget id="com.mydomain.mobileexample" version="0.0.1" xmlns="http://www.w3.org/ns/widgets" xmlns:cdv="http://cordova.apache.org/ns/1.0">\n    <name>Mobile Example</name>\n    <description>\n        A Mobile Example generated from an IFML specification\n    </description>\n    <content src="index.html" />\n    <access origin="*" />\n</widget>\n');return __output}},{}],117:[function(e,n,t){arguments[4][58][0].apply(t,arguments)},{dup:58}],118:[function(e,n,t){arguments[4][59][0].apply(t,arguments)},{dup:59}],119:[function(e,n,t){arguments[4][60][0].apply(t,arguments)},{dup:60}],120:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true */\n\"use strict\";\n\nvar gulp = require('gulp'),\n    rimraf = require('gulp-rimraf'),\n    rename = require('gulp-rename'),\n    minifyCss = require('gulp-cssnano'),\n    browserify = require('browserify'),\n    source = require('vinyl-source-stream'),\n    buffer = require('vinyl-buffer'),\n    minifyjs = require('gulp-uglify-es').default,\n    merge = require('merge-stream');\n\ngulp.task('clean', function () {\n    return gulp.src('./www/*', {read: false}).pipe(rimraf({ force: true}));\n});\n\ngulp.task('html', function () {\n    return gulp.src('./src/index.html').pipe(gulp.dest('./www'));\n});\n\ngulp.task('vendor', function () {\n    return merge(\n        gulp.src([\n            './node_modules/materialize-css/dist/js/materialize.min.js',\n            './node_modules/jquery/dist/jquery.min.js',\n            './node_modules/nedb/browser-version/out/nedb.min.js',\n            './node_modules/bluebird/js/browser/bluebird.min.js'\n        ]).pipe(gulp.dest('./www/js')),\n        gulp.src('./node_modules/knockout/build/output/knockout-latest.js')\n            .pipe(rename('knockout.min.js'))\n            .pipe(gulp.dest('./www/js'))\n    );\n});\n\ngulp.task('js', function () {\n    return browserify({\n        entries: './src/js/index.js',\n        debug: true\n    })\n        .transform('exposify', {\n            expose: {\n                'jquery': '$',\n                'knockout': 'ko',\n                'nedb': 'Nedb',\n                'bluebird': 'Promise'\n            }\n        })\n        .transform('stringify', {\n            extensions: ['.html'],\n            minify: true,\n            minifyOptions: {\n                removeComments: false\n            }\n        })\n        .bundle()\n        .pipe(source('index.js'))\n        .pipe(buffer())\n        .pipe(minifyjs())\n        .pipe(gulp.dest('./www/js'));\n});\n\ngulp.task('css', function () {\n    return merge(\n        gulp.src('./node_modules/materialize-css/dist/css/materialize.min.css').pipe(gulp.dest('./www/css')),\n        gulp.src('./node_modules/material-design-icons-iconfont/dist/material-design-icons.css')\n                .pipe(minifyCss({compatibility: 'ie8'}))\n                .pipe(rename({suffix: '.min'}))\n                .pipe(gulp.dest('./www/css')),\n        gulp.src('./node_modules/materialize-css/dist/fonts/roboto/*').pipe(gulp.dest('./www/fonts/roboto')),\n        gulp.src('./node_modules/material-design-icons-iconfont/dist/fonts/MaterialIcons-Regular.*').pipe(gulp.dest('./www/css/fonts'))\n    );\n});\n\ngulp.task('build', gulp.parallel('html', 'css', 'js', 'vendor'));\n\ngulp.task('default', gulp.series('clean', 'build'));\n");return __output}},{}],121:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">\n    \x3c!-- TODO: Remove to use a different UI framework BEGIN --\x3e\n    <link rel="stylesheet" type="text/css" href="./css/materialize.min.css">\n    <link rel="stylesheet" type="text/css" href="./css/material-design-icons.min.css">\n    \x3c!-- TODO: Remove to use a different UI framework END --\x3e\n  </head>\n  <body>\n    <main-application class="flow-text" params="context: context"></main-application>\n    <script type="text/javascript" src="./js/jquery.min.js"><\/script>\n    \x3c!-- TODO: Remove to use a different UI framework BEGIN --\x3e\n    <script type="text/javascript" src="./js/materialize.min.js"><\/script>\n    \x3c!-- TODO: Remove to use a different UI framework END --\x3e\n    <script type="text/javascript" src="./js/knockout.min.js"><\/script>\n    \x3c!-- TODO: Remove if not using NEDB BEGIN --\x3e\n    <script type="text/javascript" src="./js/nedb.min.js"><\/script>\n    \x3c!-- TODO: Remove if not using NEDB END --\x3e\n    <script type="text/javascript" src="./js/bluebird.min.js"><\/script>\n    <script type="text/javascript" src="cordova.js"><\/script>\n    <script type="text/javascript" src="./js/index.js"><\/script>\n  </body>\n</html>\n');return __output}},{}],122:[function(e,n,t){arguments[4][63][0].apply(t,arguments)},{dup:63}],123:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('<ul class="sidenav" id="landmarks">\n');for(var i=0;i<landmarks.length;i+=1)__append("    <li data-bind=\"click: landmark.bind($data,'"),__append(escapeFn(landmarks[i].id)),__append("'), css: {active: active() === '"),__append(escapeFn(landmarks[i].id)),__append("'}\"><a>"),__append(escapeFn(landmarks[i].name)),__append("</a></li>\n");__append('</ul>\n<div class="navbar-fixed">\n    <nav class="cyan darken-1">\n        <div class="nav-wrapper">\n            <a href="#" data-activates="landmarks" class="button-collapse"><i class="material-icons tiny">menu</i></a>\n        </div>\n    </nav>\n</div>\n<div class="container">\n    <div class="row">\n');for(var i=0;i<children.length;i+=1)__append("        <span data-bind=\"if: active() === '"),__append(escapeFn(children[i])),__append("'\">\n            <c-"),__append(escapeFn(children[i])),__append(' params="context: context" class="container"></c-'),__append(escapeFn(children[i])),__append(">\n        </span>\n");__append("    </div>\n</div>\n")}return __output}},{}],124:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar ko = require('knockout'),\n    $ = require('jquery');\n\nexports.register = function () {\n    ko.components.register('main-application', {\n        viewModel: function(params) {\n            var self = this,\n"),defaultChild?(__append("                defaultChild = '"),__append(escapeFn(defaultChild)),__append("';\n")):__append("                defaultChild = undefined;\n"),__append("            self.context = params.context;\n            self.active = ko.observable(undefined);\n\n            self.landmark = function (id) {\n                self.active(id);\n                self.context.vms[id].init();\n                $(\".button-collapse\").sidenav('hide');\n            };\n            self.init = function () {\n                self.active(defaultChild);\n                if (self.context.vms[defaultChild]) {\n                    self.context.vms[defaultChild].init();\n                }\n            };\n\n            self.context.top = self;\n\n            $(\".button-collapse\").sidenav();\n        },\n        template: require('./index.html'),\n        synchronous: true\n    });\n};\n");return __output}},{}],125:[function(e,n,t){arguments[4][66][0].apply(t,arguments)},{dup:66}],126:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('{\n  "name": "mobileexample",\n  "description": "An example Mobile application generated by IFML-WebEditor",\n  "version": "0.0.1",\n  "private": true,\n  "scripts": {\n    "build": "gulp",\n    "postinstall": "npm run build"\n  },\n  "dependencies": {\n    "bluebird": "^3.5.1",\n    "browserify": "^16.5.0",\n    "exposify": "^0.5.0",\n    "gulp": "^4.0.0",\n    "gulp-cssnano": "^2.1.0",\n    "gulp-rename": "^2.0.0",\n    "gulp-rimraf": "^1.0.0",\n    "gulp-uglify-es": "^2.0.0",\n    "jquery": "^3.4.1",\n    "knockout": "^3.4.0",\n    "material-design-icons-iconfont": "^2.0.4",\n    "materialize-css": "^1.0.0",\n    "merge-stream": "^1.0.0",\n    "nedb": "^1.8.0",\n    "stringify": "^5.1.0",\n    "vinyl-buffer": "^1.0.0",\n    "vinyl-source-stream": "^2.0.0"\n  }\n}\n');return __output}},{}],127:[function(e,n,t){arguments[4][68][0].apply(t,arguments)},{dup:68}],128:[function(e,n,t){arguments[4][69][0].apply(t,arguments)},{dup:69}],129:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule),a=(("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).Exception,{action:e("./templates/action.js.ejs")});t.rules=[r((function(e,n){return n.isAction(e)}),(function(n,t){var r=n.id,o=i.first(t.getInbounds(n)),s=t.getSource(o),l=t.getParent(s),p=t.getTopLevelAncestorId(l),u=n.attributes.name,c=n.attributes.parameters,d=n.attributes.results,f=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name}})).value(),_={routes:{children:r+"-route"},actions:{children:r+"-action"}};return _[r+"-route"]={name:r+".js",content:e("./templates/route.action.index.js.ejs")({id:r,vm:p})},_[r+"-action"]={name:r,isFolder:!0,children:r+"-action-js"},_[r+"-action-js"]={name:"index.js",content:a.action({id:r,name:u,parameters:c,results:d,events:f})},_}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/action.js.ejs":134,"./templates/route.action.index.js.ejs":147}],130:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule),a={list:e("./templates/list.event.js.ejs")};t.rules=[r((function(e,n){return!(!n.isViewComponent(e)||"list"!==e.attributes.stereotype)&&0===i.chain(n.getChildren(e)).filter((function(e){return n.isEvent(e)})).map((function(e){return n.toElement(e)})).filter((function(e){return n.getOutbounds(e).length&&"selection"===e.attributes.stereotype})).length}),(function(e,n){var t=n.toId(e),i=n.getTopLevelAncestor(e),r=i.id,o=n.isDefault(i)?"":r,s={};return s[r+"-viewmodel"]={children:t+"-view-js"},s[t+"-view-js"]={name:t+".js",content:a.list({id:t,component:t,path:o,currentTopLevel:r,isSameTopLevel:!0,targetsAction:!1,targetActives:[],broken:[],outcoming:void 0})},s}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/list.event.js.ejs":142}],131:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null;t.rules=i([]).concat(e("./action").rules).concat(e("./event").rules).concat(e("./navigationflow").rules).concat(e("./viewcomponent").rules).concat(e("./viewcontainer").rules).value()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./action":129,"./event":130,"./navigationflow":132,"./viewcomponent":153,"./viewcontainer":154}],132:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule),a={action:e("./templates/action.event.js.ejs"),container:e("./templates/container.event.js.ejs"),details:e("./templates/details.event.js.ejs"),list:e("./templates/list.event.js.ejs"),form:e("./templates/form.event.js.ejs")};t.rules=[r((function(e,n){return n.isNavigationFlow(e)&&n.isViewContainer(n.getParent(n.getSource(e)))}),(function(e,n){var t=n.getSource(e),r=n.toId(t),o=n.getParent(t),s=n.getTopLevelAncestor(o).id,l=n.getTarget(e),p=n.isAction(l),u=n.getTopLevelAncestor(l),c=u.id,d=p?l.id:n.isDefault(u)?"":c,f=s===c,_=i.chain(n.getAncestors(l)).filter((function(e){return n.isViewContainer(e)})).filter((function(e){return n.isXOR(n.getParent(e))})).map((function(e){return{xor:n.getParentId(e),child:r}})).value(),h=i.chain(n.getDescendants(l,!0)).reject((function(e){return n.isEvent(e)})).value(),m={};return m[s+"-viewmodel"]={children:r+"-viewmodel-js"},m[r+"-viewmodel-js"]={name:r+".js",content:a.container({id:r,path:d,currentTopLevel:s,isSameTopLevel:f,targetActives:_,targetsAction:p,broken:h})},m})),r((function(e,n){return n.isNavigationFlow(e)&&n.isViewComponent(n.getParent(n.getSource(e)))}),(function(e,n){var t=n.getSource(e),r=n.toId(t),o=n.getParent(t),s=n.getTopLevelAncestor(o).id,l=n.getTarget(e),p=n.isAction(l),u=n.getTopLevelAncestor(l),c=u.id,d=p?l.id:n.isDefault(u)?"":c,f=s===c,_="selection"===t.attributes.stereotype,h=i.chain(n.getOutbounds(r)).filter((function(e){return n.isNavigationFlow(e)})).map((function(e){return n.toElement(e)})).filter((function(e){return e.attributes.bindings&&e.attributes.bindings.length})).map((function(e){return{target:l.id,type:p?"action":l.attributes.stereotype,bindings:e.attributes.bindings}})).first().value(),m=i.chain(n.getAncestors(l)).filter((function(e){return n.isViewContainer(e)})).filter((function(e){return n.isXOR(n.getParent(e))})).map((function(e){return{xor:n.getParentId(e),child:e}})).value(),g=i.chain(n.getDescendants(l,!0)).reject((function(e){return n.isEvent(e)})).value(),v={};return v[s+"-viewmodel"]={children:r+"-viewmodel-js"},v[r+"-viewmodel-js"]={name:r+".js",content:a[o.attributes.stereotype]({id:r,component:o.id,path:d,currentTopLevel:s,isSameTopLevel:f,isSelection:_,targetActives:m,targetsAction:p,broken:g,outcoming:h})},v})),r((function(e,n){return n.isNavigationFlow(e)&&n.isAction(n.getParent(n.getSource(e)))}),(function(e,n){var t=n.getSource(e),r=n.toId(t),o=n.getParent(t),s=n.toId(o),l=n.getActionOrigin(o),p=n.getTopLevelAncestor(l).id,u=n.getTarget(e),c=n.getTopLevelAncestor(u),d=c.id,f=n.isDefault(c)?"":d,_=p===d,h=i.chain(n.getOutbounds(r)).filter((function(e){return n.isNavigationFlow(e)})).map((function(e){return n.toElement(e)})).filter((function(e){return e.attributes.bindings&&e.attributes.bindings.length})).map((function(e){return{target:u.id,type:u.attributes.stereotype,bindings:e.attributes.bindings}})).first().value(),m=i.chain(n.getAncestors(u)).filter((function(e){return n.isViewContainer(e)})).filter((function(e){return n.isXOR(n.getParent(e))})).map((function(e){return{xor:n.getParentId(e),child:e}})).value(),g=i.chain(n.getDescendants(u,!0)).reject((function(e){return n.isEvent(e)})).value(),v={};return v[s+"-action"]={children:r+"-event-js"},v[r+"-event-js"]={name:r+".js",content:a.action({id:r,path:f,currentTopLevel:p,isSameTopLevel:_,targetActives:m,broken:g,outcoming:h})},v}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/action.event.js.ejs":133,"./templates/container.event.js.ejs":135,"./templates/details.event.js.ejs":136,"./templates/form.event.js.ejs":139,"./templates/list.event.js.ejs":142}],133:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar url = require('url'),\n    merge = require('merge');\n\nvar target = {\n    targetChain: {\n");for(var i=0;i<targetActives.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(targetActives[i].xor)),__append("': '"),__append(escapeFn(targetActives[i].child)),__append("'\n");__append("    },\n    broken: {\n");for(var i=0;i<broken.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(broken[i])),__append("': true\n");if(__append("    }\n};\n\nfunction computeTarget(context, source) {\n"),outcoming){__append("        var targetInputs = {\n");for(var i=0;i<outcoming.bindings.length;i++)"details"===outcoming.type&&(__append("            "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("': source['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"list"===outcoming.type&&(__append("            "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"form"===outcoming.type&&(__append("            "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"action"===outcoming.type&&(__append("            "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n"));__append("        },\n        query;\n")}else __append("    var query;\n");isSameTopLevel?(__append("    query = merge(context.elements['"),__append(escapeFn(currentTopLevel)),__append("'].toQuery(target), target.targetChain);\n")):__append("    query = target.targetChain;\n"),outcoming?(__append("    return url.format({pathname: '/"),__append(escapeFn(path)),__append("', query: merge(query, targetInputs)})\n")):(__append("    return  url.format({pathname: '/"),__append(escapeFn(path)),__append("', query: query})\n")),__append("};\n\ncomputeTarget.id = '"),__append(escapeFn(id)),__append("';\n\nmodule.exports = computeTarget;\n")}return __output}},{}],134:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird');\n\nfunction Action(options) {\n    // TODO: Global Initialization\n    /*\n    example:\n    this.collection = options.repositories.mail;\n    */\n}\n\nAction.prototype.run = function(parameters, solve, reject) {\n    // Parameters\n");for(var i=0;i<parameters.length;i+=1)__append("    // parameters['"),__append(escapeFn(parameters[i])),__append("']\n");__append("    // TODO: Execution\n    /*\n    example:\n    mail.find({subject: 'Re: ' + data.subject})\n        .then(solve);\n    */\n    // THIS CAN BE REMOVED (BEGIN)\n    console.log('"),__append(escapeFn(name)),__append("');\n    solve({\n"),events.length&&(__append("        event: '"),__append(escapeFn(events[0].id)),__append("',\n"));for(var i=1;i<events.length;i+=1)__append("        // event: '"),__append(escapeFn(events[i].id)),__append("',\n");__append("        data: {\n");for(var i=0;i<results.length;i+=1)-1===parameters.indexOf(results[i])?(__append("            '"),__append(escapeFn(results[i])),__append("': '0',\n")):(__append("            '"),__append(escapeFn(results[i])),__append("': parameters['"),__append(escapeFn(results[i])),__append("'],\n"));__append("        }\n    });\n    // THIS CAN BE REMOVED (END)\n}\n\nvar events = {\n");for(var i=0;i<events.length;i+=1)__append("    '"),__append(escapeFn(events[i].id)),__append("': require('./"),__append(escapeFn(events[i].id)),__append("'),\n");__append("}\n\nexports.createAction = function (options) {\n    var action = new Action(options);\n    return function (context, req) {\n        return new Promise(function (solve, reject) {\n            var parameters = {\n");for(var i=0;i<parameters.length;i+=1)__append("                '"),__append(escapeFn(parameters[i])),__append("': req.body['"),__append(escapeFn(id)),__append("$f$"),__append(escapeFn(parameters[i])),__append("'],\n");__append("            };\n            action.run(parameters, solve, reject);\n        }).then(function (result) {\n            return events[result.event](context, result.data);\n        });\n    };\n};\n")}return __output}},{}],135:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird'),\n    url = require('url'),\n    merge = require('merge');\n\nexports.createInitializer = function (options) {\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n    }\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n    ViewModel.prototype.targetChain = {\n");for(var i=0;i<targetActives.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(targetActives[i].xor)),__append("': '"),__append(escapeFn(targetActives[i].child)),__append("'\n");__append("    };\n\n    ViewModel.prototype.broken = {\n");for(var i=0;i<broken.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(broken[i])),__append("': true\n");__append("    };\n\n    ViewModel.prototype.compute = function () {\n        this.computed = true;\n        return Promise.resolve();\n    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n        var pathname = './"),__append(escapeFn(path)),__append("',\n"),isSameTopLevel?(__append("            query = merge(this.context.elements['"),__append(escapeFn(currentTopLevel)),__append("'].toQuery(this), this.targetChain);\n")):__append("            query = this.targetChain;\n"),__append("        return {\n"),targetsAction?__append("            hiddens: {},\n            action: url.format({pathname: pathname, query: query})\n"):__append("            href: url.format({pathname: pathname, query: query})\n"),__append("        };\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],136:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird'),\n    url = require('url'),\n    merge = require('merge');\n\nexports.createInitializer = function (options) {\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n    }\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n    ViewModel.prototype.targetChain = {\n");for(var i=0;i<targetActives.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(targetActives[i].xor)),__append("': '"),__append(escapeFn(targetActives[i].child)),__append("'\n");__append("    };\n\n    ViewModel.prototype.broken = {\n");for(var i=0;i<broken.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(broken[i])),__append("': true\n");if(__append("    };\n\n    ViewModel.prototype.compute = function () {\n        this.computed = true;\n        return Promise.resolve();\n    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n        var pathname = './"),__append(escapeFn(path)),__append("',\n"),outcoming){__append("            source = this.context.elements['"),__append(escapeFn(component)),__append("'].toObject(),\n            targetInputs = {\n");for(var i=0;i<outcoming.bindings.length;i++)"details"===outcoming.type&&(__append("                "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("': source.item && source.item['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"list"===outcoming.type&&(__append("                "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source.item && source.item['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"form"===outcoming.type&&(__append("                "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source.item && source.item['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"action"===outcoming.type&&(__append("                "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source.item && source.item['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n"));__append("            },\n")}isSameTopLevel?(__append("            query = merge(this.context.elements['"),__append(escapeFn(currentTopLevel)),__append("'].toQuery(this), this.targetChain);\n")):__append("            query = this.targetChain;\n"),__append("        return {\n"),targetsAction?(outcoming?__append("            hiddens: targetInputs,\n"):__append("            hiddens: {},\n"),__append("            action: url.format({pathname: pathname, query: query})\n")):outcoming?__append("          href: url.format({pathname: pathname, query: merge(query, targetInputs)})\n"):__append("          href: url.format({pathname: pathname, query: query})\n"),__append("        };\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],137:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird');\n\nexports.createInitializer = function (options) {\n    var repository = options.repositories['"),__append(escapeFn(collection)),__append("'];\n\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n"),incomings.length?__append("\n        if (req.query[this.id]) {\n            this.item = req.query[this.id];\n            this.status = 'ready';\n        } else {\n            this.status = 'clear';\n        }\n"):__append("        if (req.query[this.id]) {\n            this.item = req.query[this.id];\n        }\n        this.status = 'ready';\n"),__append("    };\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n    ViewModel.prototype.fields = {\n        id: 1\n");for(var i=0;i<fields.length;++i)__append("        ,'"),__append(escapeFn(fields[i])),__append("': 1\n");if(__append("    };\n\n    ViewModel.prototype.compute = function () {\n        if (this.computing) { return this.computing; }\n        var self = this;\n        function compute() {\n            return repository.findById(self.item, self.fields)\n                .then(function (item) {\n                    self.item = item;\n                    self.computed = true;\n                    self.status = 'computed';\n                });\n        }\n"),incomings.length||events.length){__append("        if (this.status === 'clear') {\n            return this.computing = Promise.all([\n");for(var i=0;i<incomings.length;++i){__append("                "),__append(escapeFn(0!==i?",":"")),__append("this.context.elements['"),__append(escapeFn(incomings[i].source)),__append("'].compute()\n");var bindings=incomings[i].bindings;if(bindings.length){__append("                .then(function () {\n                    var result = self.context.elements['"),__append(escapeFn(incomings[i].source)),__append("'].toObject();\n");for(var k=0;k<bindings.length;++k)"details"===incomings[i].type&&(__append("                    self.item = self.item || (result.item && result.item['"),__append(escapeFn(bindings[k].output)),__append("']);\n")),"list"===incomings[i].type&&(__append("                    self.item = self.item || (result.selected && result.selected['"),__append(escapeFn(bindings[k].output)),__append("']);\n")),"form"===incomings[i].type&&(__append("                    self.item = self.item || (result.fields && result.fields['"),__append(escapeFn(bindings[k].output)),__append("']);\n"));__append("                })\n")}}for(var i=0;i<events.length;++i)__append("              "),__append(escapeFn(0!==i||incomings.length?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");if(__append("            ])\n            .then(compute);\n        } else {\n"),events.length){__append("        return this.computing = Promise.all([\n");for(var i=0;i<events.length;++i)__append("          "),__append(escapeFn(0!==i?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");__append("        ])\n        .then(compute);\n")}else __append("        return this.computing = compute();\n");__append("        }\n")}else __append("        return this.computing = compute();\n");__append("    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n        return {item: this.item};\n    };\n\n    ViewModel.prototype.toQuery = function (event) {\n        var obj = {}\n        if (!event || !event.broken[this.id]) {\n            obj[this.id] = this.item ? this.item.id : '';\n        }\n        return obj;\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],138:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("#"),__append(escapeFn(id)),__append(".container\n    h3 "),__append(escapeFn(name)),__append("\n    dl.row\n        - var item = vm['"),__append(escapeFn(id)),__append("'].item\n        if item\n");for(var i=0;i<fields.length;++i)__append("            dt.col-2 "),__append(escapeFn(fields[i])),__append("\n            dd.col-10= item['"),__append(escapeFn(fields[i])),__append("']\n");__append("    .row\n");for(var i=0;i<events.length;++i)events[i].targetsAction?(__append("        form(action=vm['"),__append(escapeFn(events[i].id)),__append("'].action, method=\"POST\")\n            each value, name in vm['"),__append(escapeFn(events[i].id)),__append("'].hiddens\n                input(type='hidden', name=name, value=value)\n            button.col-xs-2.btn.btn.btn-secondary "),__append(escapeFn(events[i].name)),__append("\n")):(__append("        a.col-xs-2.btn.btn.btn-secondary(href=vm['"),__append(escapeFn(events[i].id)),__append("'].href) "),__append(escapeFn(events[i].name)),__append("\n"))}return __output}},{}],139:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird'),\n    url = require('url'),\n    merge = require('merge');\n\nexports.createInitializer = function (options) {\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n    }\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n    ViewModel.prototype.targetChain = {\n");for(var i=0;i<targetActives.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(targetActives[i].xor)),__append("': '"),__append(escapeFn(targetActives[i].child)),__append("'\n");__append("    };\n\n    ViewModel.prototype.broken = {\n");for(var i=0;i<broken.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(broken[i])),__append("': true\n");if(__append("    };\n\n    ViewModel.prototype.compute = function () {\n        this.computed = true;\n        return Promise.resolve();\n    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n"),outcoming){__append("        var source = this.context.elements['"),__append(escapeFn(component)),__append("'].toObject(),\n            targetInputs = {\n");for(var i=0;i<outcoming.bindings.length;i++)"details"===outcoming.type&&(__append("                "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("': source.fields && source.fields['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"list"===outcoming.type&&(__append("                "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source.fields && source.fields['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"form"===outcoming.type&&(__append("                "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source.fields && source.fields['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"action"===outcoming.type&&(__append("                "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': source.fields && source.fields['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n"));__append("            },\n            query;\n")}else __append("        var query;\n");isSameTopLevel?(__append("        var query = merge(this.context.elements['"),__append(escapeFn(currentTopLevel)),__append("'].toQuery(this), this.targetChain);\n")):__append("        var query = this.targetChain;\n"),__append("        return {\n"),outcoming?(__append("            href: url.format({pathname: './"),__append(escapeFn(path)),__append("', query: merge(query, targetInputs)})\n")):(__append("            href: url.format({pathname: './"),__append(escapeFn(path)),__append("', query: query})\n")),__append("        };\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],140:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird');\n\nexports.createInitializer = function (options) {\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n        this.fields = {};\n"),incomings.length?__append("\n        if (req.query[this.id]) {\n            this.status = 'ready';\n        } else {\n            this.status = 'clear';\n        }\n"):__append("        this.status = 'ready';\n");for(var i=0;i<fields.length;++i)__append("        this.fields['"),__append(escapeFn(fields[i])),__append("'] = req.query[this.id + '$f$"),__append(escapeFn(fields[i])),__append("'] || '';\n");if(__append("    };\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n\n    ViewModel.prototype.compute = function () {\n        if (this.computing) { return this.computing; }\n        var self = this;\n        function compute() {\n            self.status = 'computed';\n            self.computed = true;\n            return Promise.resolve();\n        }\n"),incomings.length||events.length){__append("        if (this.status === 'clear') {\n            return this.computing = Promise.all([\n");for(var i=0;i<incomings.length;++i){__append("                "),__append(escapeFn(0!==i?",":"")),__append("this.context.elements['"),__append(escapeFn(incomings[i].source)),__append("'].compute()\n");var bindings=incomings[i].bindings;if(bindings.length){__append("                .then(function () {\n                    var result = self.context.elements['"),__append(escapeFn(incomings[i].source)),__append("'].toObject();\n");for(var k=0;k<bindings.length;++k)"details"===incomings[i].type&&(__append("                    self.fields['"),__append(escapeFn(bindings[k].input)),__append("'] = self.fields['"),__append(escapeFn(bindings[k].input)),__append("'] || (result.item && result.item['"),__append(escapeFn(bindings[k].output)),__append("']);\n")),"list"===incomings[i].type&&(__append("                    self.fields['"),__append(escapeFn(bindings[k].input)),__append("'] = self.fields['"),__append(escapeFn(bindings[k].input)),__append("'] || (result.selected && result.selected['"),__append(escapeFn(bindings[k].output)),__append("']);\n")),"form"===incomings[i].type&&(__append("                    self.fields['"),__append(escapeFn(bindings[k].input)),__append("'] = self.fields['"),__append(escapeFn(bindings[k].input)),__append("'] || (result.fields && result.fields['"),__append(escapeFn(bindings[k].output)),__append("']);\n"));__append("                })\n")}}for(var i=0;i<events.length;++i)__append("              "),__append(escapeFn(0!==i||incomings.length?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");if(__append("            ])\n            .then(compute);\n        } else {\n"),events.length){__append("        return this.computing = Promise.all([\n");for(var i=0;i<events.length;++i)__append("          "),__append(escapeFn(0!==i?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");__append("        ])\n        .then(compute);\n")}else __append("        return this.computing = compute();\n");__append("        }\n")}else __append("        return this.computing = compute();\n");__append("    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n        return {fields: this.fields};\n    };\n\n    ViewModel.prototype.toQuery = function (event) {\n        var self = this,\n            query = {};\n        if (!event || !event.broken[this.id]) {\n            Object.keys(this.fields).forEach(function (field) {\n                if (self.fields[field]) {\n                    query[self.id + '$f$' + field] = self.fields[field];\n                }\n            });\n            query[this.id] = '';\n        }\n        return query;\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],141:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("#"),__append(escapeFn(id)),__append(".container\n    h3 "),__append(escapeFn(name)),__append("\n    form(id='"),__append(escapeFn(id)),__append("')\n        - var fields = vm['"),__append(escapeFn(id)),__append("'].fields\n");for(var i=0;i<fields.length;++i)__append("            .form-group\n                label "),__append(escapeFn(fields[i])),__append("\n                input(type='text', name='"),__append(escapeFn(id)),__append("$f$"),__append(escapeFn(fields[i])),__append("', data-name='"),__append(escapeFn(id)),__append("$f$"),__append(escapeFn(fields[i])),__append("', value=fields['"),__append(escapeFn(fields[i])),__append("'])\n");__append("        .row\n");for(var i=0;i<events.length;++i)__append("        button#"),__append(escapeFn(events[i].id)),__append(".col-2.btn.btn-secondary(data-action=vm['"),__append(escapeFn(events[i].id)),__append("'].href, data-method= '"),__append(escapeFn(events[i].targetsAction?"POST":"GET")),__append("') "),__append(escapeFn(events[i].name)),__append("\n");__append("    script.\n        (function () {\n            var form = $('#"),__append(escapeFn(id)),__append(" > form'),\n                bindings = {\n");for(var i=0;i<events.length;++i){var event=events[i];__append("                    "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(event.id)),__append("': {\n");for(var bindings=event.bindings,k=0;k<bindings.length;++k)"details"===event.type&&(__append("                        "),__append(escapeFn(0!==k?",":"")),__append("'"),__append(escapeFn(id)),__append("$f$"),__append(escapeFn(bindings[k].output)),__append("': '"),__append(escapeFn(event.target)),__append("'\n")),"list"===event.type&&(__append("                        "),__append(escapeFn(0!==k?",":"")),__append("'"),__append(escapeFn(id)),__append("$f$"),__append(escapeFn(bindings[k].output)),__append("': '"),__append(escapeFn(event.target)),__append("$f$"),__append(escapeFn(bindings[k].input)),__append("'\n")),"form"===event.type&&(__append("                        "),__append(escapeFn(0!==k?",":"")),__append("'"),__append(escapeFn(id)),__append("$f$"),__append(escapeFn(bindings[k].output)),__append("': '"),__append(escapeFn(event.target)),__append("$f$"),__append(escapeFn(bindings[k].input)),__append("'\n")),"action"===event.type&&(__append("                        "),__append(escapeFn(0!==k?",":"")),__append("'"),__append(escapeFn(id)),__append("$f$"),__append(escapeFn(bindings[k].output)),__append("': '"),__append(escapeFn(event.target)),__append("$f$"),__append(escapeFn(bindings[k].input)),__append("'\n"));__append("                    }\n")}__append("                };\n            function toURL(href) {\n                var a = document.createElement('a');\n                a.href = href;\n                return new URL(a.href);\n            }\n            $('#"),__append(escapeFn(id)),__append(" > form > button[data-action]').click(function () {\n                var action = toURL($(this).data('action')),\n                    method = $(this).data('method'),\n                    mapping = bindings[this.id];\n                $('#"),__append(escapeFn(id)),__append(" input').each(function () {\n                    var name = $(this).data('name');\n                    if (action.searchParams.has(name)) {\n                        action.searchParams.set(name, this.value);\n                    }\n                    this.name = mapping[name] || '';\n                });\n                form.attr('action', action.href);\n                form.attr('method', method);\n            });\n        }());\n")}return __output}},{}],142:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird'),\n    url = require('url'),\n    merge = require('merge');\n\nexports.createInitializer = function (options) {\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n    }\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n    ViewModel.prototype.targetChain = {\n");for(var i=0;i<targetActives.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(targetActives[i].xor)),__append("': '"),__append(escapeFn(targetActives[i].child)),__append("'\n");__append("    };\n\n    ViewModel.prototype.broken = {\n");for(var i=0;i<broken.length;i++)__append("       "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(broken[i])),__append("': true\n");if(__append("    };\n\n    ViewModel.prototype.compute = function () {\n        this.computed = true;\n        return Promise.resolve();\n    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n        var self = this,\n            pathname = './"),__append(escapeFn(path)),__append("',\n            source = this.context.elements['"),__append(escapeFn(component)),__append("'].toObject(),\n            items = source.items.map(function (item) {\n                return {\n                    query: {\n"),isSameTopLevel&&-1===broken.indexOf(component)?isSelection?(__append("                        '"),__append(escapeFn(component)),__append("' : item.id\n")):(__append("                        '"),__append(escapeFn(component)),__append("' : source.selected && source.selected.id\n")):(__append("                        '"),__append(escapeFn(component)),__append("': undefined\n")),__append("                    },\n"),outcoming){__append("                    targetInputs: {\n");for(var i=0;i<outcoming.bindings.length;i++)"details"===outcoming.type&&(__append("                        "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("': item['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"list"===outcoming.type&&(__append("                        "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': item['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"form"===outcoming.type&&(__append("                        "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': item['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n")),"action"===outcoming.type&&(__append("                        "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(outcoming.target)),__append("$f$"),__append(escapeFn(outcoming.bindings[i].input)),__append("': item['"),__append(escapeFn(outcoming.bindings[i].output)),__append("']\n"));__append("                    }\n")}__append("                };\n            }),\n"),isSameTopLevel?(__append("            basequery = merge(this.context.elements['"),__append(escapeFn(currentTopLevel)),__append("'].toQuery(self), this.targetChain);\n")):__append("            basequery = this.targetChain;\n"),__append("        return items.map(function (item) {\n            var query = merge(basequery, item.query);\n"),targetsAction?(__append("            return {\n"),outcoming?__append("                hiddens: item.targetInputs,\n"):__append("                hiddens: {},\n"),__append("                action: url.format({pathname: pathname, query: query})\n            };\n")):(__append("            return {\n"),outcoming?__append("                href: url.format({pathname: pathname, query: merge(query, item.targetInputs)})\n"):__append("                href: url.format({pathname: pathname, query: query})\n"),__append("            };\n")),__append("        });\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],143:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('/*jslint node: true */\n"use strict";\n\n'),selection?__append("var Promise = require('bluebird');\n"):__append("var Promise = require('bluebird'),\n    url = require('url'),\n    merge = require('merge');\n"),__append("\nexports.createInitializer = function (options) {\n    var repository = options.repositories['"),__append(escapeFn(collection)),__append("'];\n\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n        this.filters = {};\n"),incomings.length?__append("\n        if (req.query[this.id]) {\n            this.selected = req.query[this.id];\n            this.status = 'ready';\n        } else {\n            this.status = 'clear';\n        }\n"):__append("        if (req.query[this.id]) {\n            this.selected = req.query[this.id];\n        }\n        this.status = 'ready';\n");for(var i=0;i<filters.length;++i)__append("        if (req.query[this.id + '$f$"),__append(escapeFn(filters[i])),__append("']) {\n            this.filters['"),__append(escapeFn(filters[i])),__append("'] = req.query[this.id + '$f$"),__append(escapeFn(filters[i])),__append("'];\n        }\n");__append("    };\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n    ViewModel.prototype.fields = {\n        id: 1\n");for(var i=0;i<fields.length;++i)__append("        ,'"),__append(escapeFn(fields[i])),__append("': 1\n");if(__append("    };\n\n    ViewModel.prototype.compute = function () {\n        if (this.computing) { return this.computing; }\n        var self = this;\n        function compute() {\n            return repository.find(self.filters, self.fields)\n                .then(function (items) {\n                    self.items = items;\n                    var id = self.selected;\n                    self.selected = undefined;\n                    if (id) {\n                        items.forEach(function (item) {\n                            if (item.id === id) {\n                                self.selected = item;\n                            }\n                        });\n                    }\n                    if (!self.selected && items.length) {\n                        self.selected = items[0];\n                    }\n                    self.status = 'computed';\n                    self.computed = true;\n                });\n        }\n"),incomings.length||events.length){__append("        if (this.status === 'clear') {\n            return this.computing = Promise.all([\n");for(var i=0;i<incomings.length;++i){__append("                "),__append(escapeFn(0!==i?",":"")),__append("this.context.elements['"),__append(escapeFn(incomings[i].source)),__append("'].compute()\n");var bindings=incomings[i].bindings;if(bindings.length){__append("                .then(function () {\n                    var result = self.context.elements['"),__append(escapeFn(incomings[i].source)),__append("'].toObject();\n");for(var k=0;k<bindings.length;++k)"details"===incomings[i].type&&(__append("                    self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] = self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] || (result.item && result.item['"),__append(escapeFn(bindings[k].output)),__append("']);\n")),"list"===incomings[i].type&&(__append("                    self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] = self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] || (result.selected && result.selected['"),__append(escapeFn(bindings[k].output)),__append("']);\n")),"form"===incomings[i].type&&(__append("                    self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] = self.filters['"),__append(escapeFn(bindings[k].input)),__append("'] || (result.fields && result.fields['"),__append(escapeFn(bindings[k].output)),__append("']);\n"));__append("                })\n")}}for(var i=0;i<events.length;++i)__append("              "),__append(escapeFn(0!==i||incomings.length?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");if(__append("            ])\n            .then(compute);\n        } else {\n"),events.length){__append("        return this.computing = Promise.all([\n");for(var i=0;i<events.length;++i)__append("          "),__append(escapeFn(0!==i?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");__append("        ])\n        .then(compute);\n")}else __append("        return this.computing = compute();\n");__append("        }\n")}else __append("        return this.computing = compute();\n");__append("    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n"),selection||(__append("        var basequery = this.context.elements['"),__append(escapeFn(toplevel)),__append("'].toQuery(),\n            pathname = './"),__append(escapeFn(path)),__append("';\n")),__append("        return {\n            items: this.items,\n"),selection?__append("            selected: this.selected\n"):(__append("            selected: this.selected,\n            href: this.items.map(function (item) {\n                var query = merge(basequery, {'"),__append(escapeFn(id)),__append("': item.id});\n                return url.format({pathname: pathname, query: query});\n            })\n")),__append("        };\n    };\n\n    ViewModel.prototype.toQuery = function (event) {\n        var self = this,\n            query = {};\n        if (!event || !event.broken[this.id]) {\n            Object.keys(this.filters).forEach(function (filter) {\n                if (self.filters[filter]) {\n                    query[self.id + '$f$' + filter] = self.filters[filter];\n                }\n            });\n            query[this.id] = this.selected ? this.selected.id : '';\n        }\n        return query;\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],144:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("#"),__append(escapeFn(id)),__append(".container\n    h3 "),__append(escapeFn(name)),__append("\n    table.table.table-hover.table-sm\n        thead\n            tr\n                th #\n");for(var i=0;i<fields.length;++i)__append("                th "),__append(escapeFn(fields[i])),__append("\n");events.length&&__append("                th actions\n"),__append("        tbody\n            - var sid = vm['"),__append(escapeFn(id)),__append("'].selected ? vm['"),__append(escapeFn(id)),__append("'].selected.id : '';\n            each item, itemindex in vm['"),__append(escapeFn(id)),__append("'].items\n                tr(class=item.id === sid ? 'info' : '')\n"),selection?selection.targetsAction?(__append("                    - var action = vm['"),__append(escapeFn(selection.id)),__append("'][itemindex].action\n                    - var hiddens = vm['"),__append(escapeFn(selection.id)),__append("'][itemindex].hiddens\n")):(__append("                    - var href = vm['"),__append(escapeFn(selection.id)),__append("'][itemindex].href\n")):(__append("\n                    - var href = vm['"),__append(escapeFn(id)),__append("'].href[itemindex]\n")),__append("                    th(scope='row')\n"),selection&&selection.targetsAction?__append("                        form(action=action, method=\"POST\")\n                            each value, name in hiddens\n                                input(type='hidden', name=name, value=value)\n                            button.btn.btn-link= item.id\n"):__append("                        a(href=href)= item.id\n");for(var i=0;i<fields.length;++i)__append("                    td\n\n"),selection&&selection.targetsAction?(__append("                        form(action=action, method=\"POST\")\n                            each value, name in hiddens\n                                input(type='hidden', name=name, value=value)\n                            button.btn.btn-link= item['"),__append(escapeFn(fields[i])),__append("']\n")):(__append("                        a(href=href)= item['"),__append(escapeFn(fields[i])),__append("']\n"));if(events.length){__append("                    td\n                        .dropdown\n                            button.btn.btn-secondary.dropdown-toggle(type='button', data-toggle='dropdown') Actions\n                            ul.dropdown-menu\n");for(var i=0;i<events.length;++i)events[i].targetsAction?(__append("                                    form(action=vm['"),__append(escapeFn(events[i].id)),__append("'][itemindex].action, method=\"POST\")\n                                        each value, name in vm['"),__append(escapeFn(events[i].id)),__append("'][itemindex].hiddens\n                                            input(type='hidden', name=name, value=value)\n                                        button.dropdown-item(type=\"button\") "),__append(escapeFn(events[i].name)),__append("\n")):(__append("                                a.dropdown-item(href=vm['"),__append(escapeFn(events[i].id)),__append("'][itemindex].href) "),__append(escapeFn(events[i].name)),__append("\n"))}}return __output}},{}],145:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){if(__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird'),\n    merge = require('merge');\n\nexports.createInitializer = function (options) {\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n    }\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n\n    ViewModel.prototype.compute = function () {\n        if (this.computing) { return this.computing; }\n        var self = this;\n"),children.length||events.length){__append("\n        return this.computing = Promise.all([\n");for(var i=0;i<children.length;++i)__append("            "),__append(escapeFn(0!==i?",":"")),__append("this.context.elements['"),__append(escapeFn(children[i])),__append("'].compute()\n");for(var i=0;i<events.length;++i)__append("            "),__append(escapeFn(0!==i||children.length?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");__append("        ]).then(function () {\n            self.computed = true;\n        });\n")}else __append("        return this.computing = Promise.resolve();\n");__append("    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n        return {};\n    };\n\n    ViewModel.prototype.toQuery = function (event) {\n        return merge(\n");for(var i=0;i<children.length;++i)__append("            "),__append(escapeFn(0!==i?",":"")),__append("this.context.elements['"),__append(escapeFn(children[i])),__append("'].toQuery(event)\n");__append("        );\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],146:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("#"),__append(escapeFn(id)),__append("\n");for(var i=0;i<children.length;++i)__append("    include ./"),__append(escapeFn(children[i])),__append(".pug\n");__append("    .container\n        .row\n");for(var i=0;i<events.length;++i)events[i].targetsAction?(__append("            form(action=vm['"),__append(escapeFn(events[i].id)),__append("'].action, method=\"POST\")\n                each value, name in vm['"),__append(escapeFn(events[i].id)),__append("'].hiddens\n                    input(type='hidden', name=name, value=value)\n                button.col-2.btn.btn.btn-secondary "),__append(escapeFn(events[i].name)),__append("\n")):(__append("            a.col-2.btn.btn.btn-secondary(href=vm['"),__append(escapeFn(events[i].id)),__append("'].href) "),__append(escapeFn(events[i].name)),__append("\n"))}return __output}},{}],147:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true */\n\"use strict\";\n\nvar express = require('express'),\n    bodyParser = require('body-parser');\n\nexports.createRouter = function (options) {\n    var router = express.Router(),\n        action = options.actions['"),__append(escapeFn(id)),__append("'],\n        createViewModel = options.viewModels['"),__append(escapeFn(vm)),__append("'];\n    router.post('/', bodyParser.urlencoded(), function (req, res, next) {\n        var vm = createViewModel(req);\n        vm.compute()\n            .then(function () {\n                return action(vm, req);\n            })\n            .then(function (target) {\n                console.log(target);\n                res.redirect(303, target);\n            })\n            .catch(next);\n    });\n    return router;\n};\n");return __output}},{}],148:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true */\n\"use strict\";\n\nvar express = require('express');\n\nexports.createRouter = function (options) {\n    var router = express.Router(),\n        createViewModel = options.viewModels['"),__append(escapeFn(id)),__append("'];\n    router.get('/', function (req, res, next) {\n        var vm = createViewModel(req);\n        vm.compute()\n            .then(function () {\n                res.render('"),__append(escapeFn(id)),__append("', {vm: vm.toObject() });\n            })\n            .catch(next);\n    });\n    return router;\n};\n");return __output}},{}],149:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("extends ../index.pug\n\nblock title\n    title "),__append(escapeFn(name)),__append("\n\nblock content\n    .pb-2.mt-4.mb-2.border-bottom\n        .container\n            h1 "),__append(escapeFn(name)),__append("\n    include ./"),__append(escapeFn(id)),__append(".pug\n");return __output}},{}],150:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird');\n\nexports.createInitializer = function (options) {\n    var items = [\n");for(var i=0;i<descendants.length;++i)__append("        "),__append(escapeFn(0!==i?",":"")),__append("require('./"),__append(escapeFn(descendants[i])),__append("').createInitializer(options)\n");__append("    ];\n    function ViewModel(req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(req); }\n        var self = this;\n        this.elements = {};\n        items.forEach(function (item) {\n            var element = item(self, req);\n            self.elements[element.id] = element;\n        });\n    }\n\n    ViewModel.prototype.main = '"),__append(escapeFn(main)),__append("';\n\n    ViewModel.prototype.compute = function () {\n        return this.elements[this.main].compute();\n    };\n\n    ViewModel.prototype.toObject = function () {\n        var self = this,\n            json = {};\n        Object.keys(this.elements).forEach(function (id) {\n            json[id] = self.elements[id].toObject();\n        });\n        return json;\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],151:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird'),\n    url = require('url'),\n    merge = require('merge');\n\nexports.createInitializer = function (options) {\n    function ViewModel(context, req) {\n        if (!(this instanceof ViewModel)) { return new ViewModel(context, req); }\n        this.context = context;\n"),defaultChild?(__append("        this.active = req.query[this.id] || '"),__append(escapeFn(defaultChild)),__append("';\n")):__append("        this.active = req.query[this.id];\n"),__append("    }\n\n    ViewModel.prototype.id = '"),__append(escapeFn(id)),__append("';\n    ViewModel.prototype.landmarks = [\n");for(var i=0;i<landmarks.length;++i){__append("        "),__append(escapeFn(0!==i?",":"")),__append("{id: '"),__append(escapeFn(landmarks[i].id)),__append("', broken: {\n");for(var k=0;k<landmarks[i].broken.length;++k)__append("            "),__append(escapeFn(0!==k?",":"")),__append("'"),__append(escapeFn(landmarks[i].broken[k])),__append("': true\n");__append("        }}\n")}if(__append("    ];\n\n    ViewModel.prototype.compute = function () {\n        if (this.computing) { return this.computing; }\n        if (!this.active) {\n"),events.length){__append("\n            return this.computing = Promise.all([\n");for(var i=0;i<events.length;++i)__append("                "),__append(escapeFn(0!==i||children.length?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");__append("            ]).then(function () {\n                self.computed = true;\n            });\n")}else __append("            this.computed = true;\n            return this.computing = Promise.resolve();\n");if(__append("        }\n        var self = this;\n        return this.computing = this.context.elements[this.active].compute()\n"),events.length){__append("\n            .then(function () {\n                return Promise.all([\n");for(var i=0;i<events.length;++i)__append("                    "),__append(escapeFn(0!==i||children.length?",":"")),__append("this.context.elements['"),__append(escapeFn(events[i].id)),__append("'].compute()\n");__append("                ]);\n            })\n")}__append("            .then(function () {\n                self.computed = true;\n            });\n    };\n\n    ViewModel.prototype.toObject = function () {\n        if (!this.computed) { return; }\n        var self = this,\n            obj = {active: this.active, landmarks: {}};\n        this.landmarks.forEach(function (child) {\n            var targetChain = {'"),__append(escapeFn(id)),__append("': child.id},\n                query = merge(self.context.elements['"),__append(escapeFn(currentTopLevel)),__append("'].toQuery({targetChain: targetChain, broken: child.broken}), targetChain);\n            obj.landmarks[child.id] = {\n                query: query,\n                href: url.format({pathname: './"),__append(escapeFn(path)),__append("', query: query})\n            };\n        });\n        return obj;\n    };\n\n    ViewModel.prototype.toQuery = function (event) {\n        var query = {};\n        if (this.active) {\n            if (event && event.targetChain[this.id]) {\n                if (this.active === event.targetChain[this.id]) {\n                    query = this.context.elements[this.active].toQuery(event);\n                }\n            } else {\n                if (!event || !event.broken[this.id]) {\n                    query[this.id] = this.active;\n                    query = merge(query, this.context.elements[this.active].toQuery(event));\n                }\n            }\n        }\n        return query;\n    };\n\n    return ViewModel;\n};\n")}return __output}},{}],152:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("#"),__append(escapeFn(id)),__append("\n    .container\n        .row\n");for(var i=0;i<landmarks.length;++i)__append("            a.col-xs-2.btn.btn.btn-secondary(href=vm['"),__append(escapeFn(id)),__append("'].landmarks['"),__append(escapeFn(landmarks[i].id)),__append("'].href) "),__append(escapeFn(landmarks[i].name)),__append("\n");for(var i=0;i<children.length;++i)__append("    if vm['"),__append(escapeFn(id)),__append("'].active === '"),__append(escapeFn(children[i])),__append("'\n        include ./"),__append(escapeFn(children[i])),__append(".pug\n");__append("    .container\n        .row\n");for(var i=0;i<events.length;++i)events[i].targetsAction?(__append("            form(action=vm['"),__append(escapeFn(events[i].id)),__append("'].action, method='POST')\n                each value, name in vm['"),__append(escapeFn(events[i].id)),__append("'].hiddens\n                    input(type='hidden', name=name, value=value)\n                button.col-xs-2.btn.btn.btn-secondary(type=\"button\") "),__append(escapeFn(events[i].name)),__append("\n")):(__append("            a.col-xs-2.btn.btn.btn-secondary(href=vm['"),__append(escapeFn(events[i].id)),__append("'].href) "),__append(escapeFn(events[i].name)),__append("\n"))}return __output}},{}],153:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isViewComponent(e)&&"list"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.collection,s=n.attributes.filters,l=t.getTopLevelAncestor(n),p=l.id,u=t.isDefault(l)?"":p,c=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){var n=t.getSource(e);return{source:n.id,type:n.attributes.stereotype,bindings:e.attributes.bindings}})).value(),d=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).map((function(e){return t.toElement(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){var n=t.getOutbounds(e)[0],i=n&&t.getTarget(n);return{id:t.toId(e),name:e.attributes.name,stereotype:e.attributes.stereotype,targetsAction:t.isAction(i,!1)}})).value(),f=i.chain(d).reject({stereotype:"selection"}).value(),_=i.chain(d).filter({stereotype:"selection"}).first().value(),h=n.attributes.fields,m={};return m[p+"-view"]={children:r+"-pug"},m[r+"-pug"]={name:r+".pug",content:e("./templates/list.pug.ejs")({id:r,name:a,fields:h,events:f,selection:_})},m[p+"-viewmodel"]={children:r+"-view-js"},m[r+"-view-js"]={name:r+".js",content:e("./templates/list.js.ejs")({id:r,incomings:c,collection:o,fields:h,filters:s,events:d,selection:_,path:u,toplevel:p})},m})),r((function(e,n){return n.isViewComponent(e)&&"form"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=t.getTopLevelAncestor(n).id,s=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){var n=t.getSource(e);return{source:n.id,type:n.attributes.stereotype,bindings:e.attributes.bindings}})).value(),l=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){var n=t.toElement(t.getOutbounds(e)[0]),i=t.getTarget(n);return{id:t.toId(e),name:e.attributes.name,target:t.toId(i),targetsAction:t.isAction(i),type:t.isAction(i)?"action":i.attributes.stereotype,bindings:n.attributes.bindings}})).value(),p=n.attributes.fields,u={};return u[o+"-view"]={children:r+"-pug"},u[r+"-pug"]={name:r+".pug",content:e("./templates/form.pug.ejs")({id:r,name:a,fields:p,events:l})},u[o+"-viewmodel"]={children:r+"-view-js"},u[r+"-view-js"]={name:r+".js",content:e("./templates/form.js.ejs")({id:r,incomings:s,fields:p,events:l})},u})),r((function(e,n){return n.isViewComponent(e)&&"details"===e.attributes.stereotype}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=n.attributes.collection,s=t.getTopLevelAncestor(n).id,l=i.chain(t.getInbounds(r)).filter((function(e){return t.isDataFlow(e)})).map((function(e){return t.toElement(e)})).map((function(e){var n=t.getSource(e);return{source:n.id,type:n.attributes.stereotype,bindings:e.attributes.bindings}})).value(),p=i.chain(t.getChildren(r)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){var n=t.getOutbounds(e)[0],i=n&&t.getTarget(n);return{id:t.toId(e),name:e.attributes.name,targetsAction:t.isAction(i)}})).value(),u=n.attributes.fields,c={};return c[s+"-view"]={children:r+"-pug"},c[r+"-pug"]={name:r+".pug",content:e("./templates/details.pug.ejs")({id:r,name:a,fields:u,events:p})},c[s+"-viewmodel"]={children:r+"-js"},c[r+"-js"]={name:r+".js",content:e("./templates/details.js.ejs")({id:r,incomings:l,collection:o,fields:u,events:p})},c}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/details.js.ejs":137,"./templates/details.pug.ejs":138,"./templates/form.js.ejs":140,"./templates/form.pug.ejs":141,"./templates/list.js.ejs":143,"./templates/list.pug.ejs":144}],154:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(e("../../../pcn").pcn,("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).createRule);t.rules=[r((function(e,n){return n.isViewContainer(e)&&void 0===n.getParent(e)}),(function(n,t){var r=t.toId(n),a=n.attributes.name,o=i.chain(t.getDescendants(n,!0)).map((function(e){return t.toElement(e)})).filter((function(e){return!t.isEvent(e)||t.getOutbounds(e).length})).map("id").value(),s={routes:{children:r+"-route"},views:{children:r+"-view"},viewmodels:{children:r+"-viewmodel"}};return s[r+"-route"]={isFolder:!0,name:r,children:r+"-route-index"},s[r+"-route-index"]={name:"index.js",content:e("./templates/route.page.index.js.ejs")({id:r})},s[r+"-view"]={isFolder:!0,name:r,children:r+"-view-index"},s[r+"-view-index"]={name:"index.pug",content:e("./templates/view.index.pug.ejs")({id:r,name:a})},s[r+"-viewmodel"]={isFolder:!0,name:r,children:r+"-viewmodel-index"},s[r+"-viewmodel-index"]={name:"index.js",content:e("./templates/viewmodel.index.js.ejs")({main:r,descendants:o})},s})),r((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)}),(function(n,t){var r=t.toId(n),a=i.chain(t.getChildren(n)).reject((function(e){return t.isEvent(e)})).map((function(e){return t.toElement(e)})).map("id").value(),o=i.chain(t.getChildren(n)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){var n=t.getOutbounds(e)[0],i=t.getTarget(n);return{id:t.toId(e),name:e.attributes.name,targetsAction:t.isAction(i)}})).value(),s=t.getTopLevelAncestor(n).id,l={};return l[s+"-view"]={children:r+"-pug"},l[r+"-pug"]={name:r+".pug",content:e("./templates/nonxor.pug.ejs")({id:r,children:a,events:o})},l[s+"-viewmodel"]={children:r+"-view-js"},l[r+"-view-js"]={name:r+".js",content:e("./templates/nonxor.js.ejs")({id:r,children:a,events:o})},l})),r((function(e,n){return n.isViewContainer(e)&&n.isXOR(e)}),(function(n,t){var r=t.toId(n),a=i.chain(t.getChildren(n)).filter((function(e){return t.isViewContainer(e)})).value(),o=i.chain(a).filter((function(e){return t.isLandmark(e)})).map((function(e){return t.toElement(e)})).map((function(e){return{id:t.toId(e),name:e.attributes.name,broken:i.chain(t.getDescendants(e,!0)).reject((function(e){return t.isEvent(e)})).value()}})).value(),s=i.chain(t.getChildren(n)).filter((function(e){return t.isDefault(e)})).first().value(),l=i.chain(t.getChildren(n)).filter((function(e){return t.isEvent(e)})).filter((function(e){return t.getOutbounds(e).length})).map((function(e){return t.toElement(e)})).map((function(e){var n=t.getOutbounds(e)[0],i=t.getTarget(n);return{id:t.toId(e),name:e.attributes.name,targetsAction:t.isAction(i)}})).value(),p=t.getTopLevelAncestor(n),u=p.id,c=t.isDefault(p)?"":u,d={};return d[u+"-view"]={children:r+"-pug"},d[r+"-pug"]={name:r+".pug",content:e("./templates/xor.pug.ejs")({id:r,children:a,events:l,landmarks:o})},d[u+"-viewmodel"]={children:r+"-view-js"},d[r+"-view-js"]={name:r+".js",content:e("./templates/xor.js.ejs")({id:r,children:a,events:l,defaultChild:s,currentTopLevel:u,landmarks:o,path:c})},d}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../pcn":221,"./templates/nonxor.js.ejs":145,"./templates/nonxor.pug.ejs":146,"./templates/route.page.index.js.ejs":148,"./templates/view.index.pug.ejs":149,"./templates/viewmodel.index.js.ejs":150,"./templates/xor.js.ejs":151,"./templates/xor.pug.ejs":152}],155:[function(e,n,t){arguments[4][55][0].apply(t,arguments)},{"./elementrules":131,"./modelrules":156,dup:55}],156:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.almost:void 0!==n?n.almost:null,a=r.Rule,o=r.createRule,s=r.Exception;t.rules=[o(a.always,(function(n){var t=i.chain(n.getTopLevels()).map((function(e){return n.toElement(e)})).sortBy("attributes.default").reverse().value(),r=i.chain(n.elements).filter((function(e){return n.isAction(e)})).map((function(e){return{id:e.id}})).value(),a=i.map(t,(function(e){return{id:e.id}})),o=i.chain(t).map((function(e){return{id:e.id,path:e.attributes.default?"":e.id}})).concat(i.map(r,(function(e){return{id:e.id,path:e.id}}))).value(),l=i.chain(t).filter((function(e){return n.isLandmark(e)})).map((function(e){return{href:e.attributes.default?"":e.id,name:e.attributes.name}})).value(),p=i.chain(n.elements).filter((function(e){return n.isViewComponent(e)})).reject({attributes:{stereotype:"form"}}).map((function(e){if(e.attributes.collection)return e.attributes.collection;throw new s("Collection cannot be empty\n(ViewComponent id:"+e.id+")")})).uniq().value();return{"":{isFolder:!0,children:"webexample"},webexample:{isFolder:!0,name:"webexample",children:["gulp","package","index","routes","actions","views","viewmodels","repositories","gitignore"]},gulp:{name:"gulpfile.js",content:e("./templates/gulpfile.js.ejs")()},gitignore:{name:".gitignore",content:e("./templates/gitignore.ejs")()},index:{name:"index.js",content:e("./templates/index.js.ejs")()},package:{name:"package.json",content:e("./templates/package.json.ejs")()},routes:{isFolder:!0,name:"routes",children:"routes-index"},actions:{isFolder:!0,name:"actions",children:"actions-index"},views:{isFolder:!0,name:"views",children:"views-index"},viewmodels:{isFolder:!0,name:"viewmodels",children:"viewmodels-index"},repositories:{isFolder:!0,name:"repositories",children:"repositories-index"},"routes-index":{name:"index.js",content:e("./templates/routes.index.js.ejs")({routes:o})},"actions-index":{name:"index.js",content:e("./templates/actions.index.js.ejs")({actions:r})},"views-index":{name:"index.pug",content:e("./templates/views.index.pug.ejs")({landmarks:l})},"viewmodels-index":{name:"index.js",content:e("./templates/viewmodels.index.js.ejs")({vms:a})},"repositories-index":{name:"index.js",content:e("./templates/repositories.index.js.ejs")({collections:p})}}})),o(a.always,(function(n){var t=i.chain(n.elements).filter((function(e){return n.isViewComponent(e)})).reject({attributes:{stereotype:"form"}}).map((function(e){return{name:e.attributes.collection,fields:i.chain(e.attributes.fields).concat(e.attributes.filters).compact().value()}})).groupBy("name").values().map((function(e){return{name:i.first(e).name,fields:i.chain(e).map("fields").flatten().uniq().without("id","_id").value()}})).value(),r={repositories:{children:i.map(t,(function(e){return e.name+"-reporitory"}))}};return i.each(t,(function(n){r[n.name+"-reporitory"]={isFolder:!0,name:n.name,children:[n.name+"-reporitory-index",n.name+"-reporitory-default"]},r[n.name+"-reporitory-index"]={name:"index.js",content:e("./templates/repository.js.ejs")({name:n.name})},r[n.name+"-reporitory-default"]={name:"default.json",content:e("./templates/default.json.ejs")({fields:n.fields})}})),r}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./templates/actions.index.js.ejs":157,"./templates/default.json.ejs":158,"./templates/gitignore.ejs":159,"./templates/gulpfile.js.ejs":160,"./templates/index.js.ejs":161,"./templates/package.json.ejs":162,"./templates/repositories.index.js.ejs":163,"./templates/repository.js.ejs":164,"./templates/routes.index.js.ejs":165,"./templates/viewmodels.index.js.ejs":166,"./templates/views.index.pug.ejs":167}],157:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar express = require('express');\n\nexports.createActions = function (options) {\n    return {\n");for(var i=0;i<actions.length;++i)__append("        "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(actions[i].id)),__append("': require('./"),__append(escapeFn(actions[i].id)),__append("').createAction(options)\n");__append("    };\n};\n")}return __output}},{}],158:[function(e,n,t){arguments[4][59][0].apply(t,arguments)},{dup:59}],159:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("# Logs\nlogs\n*.log\nnpm-debug.log*\nyarn-debug.log*\nyarn-error.log*\n\n# Runtime data\npids\n*.pid\n*.seed\n*.pid.lock\n\n# Directory for instrumented libs generated by jscoverage/JSCover\nlib-cov\n\n# Coverage directory used by tools like istanbul\ncoverage\n\n# nyc test coverage\n.nyc_output\n\n# Grunt intermediate storage (http://gruntjs.com/creating-plugins#storing-task-files)\n.grunt\n\n# Bower dependency directory (https://bower.io/)\nbower_components\n\n# node-waf configuration\n.lock-wscript\n\n# Compiled binary addons (http://nodejs.org/api/addons.html)\nbuild/Release\n\n# Dependency directories\nnode_modules/\njspm_packages/\n\n# Typescript v1 declaration files\ntypings/\n\n# Optional npm cache directory\n.npm\n\n# Optional eslint cache\n.eslintcache\n\n# Optional REPL history\n.node_repl_history\n\n# Output of 'npm pack'\n*.tgz\n\n# Yarn Integrity file\n.yarn-integrity\n\n# dotenv environment variables file\n.env\n");return __output}},{}],160:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true, nomen: true */\n\"use strict\";\n\nvar gulp = require('gulp'),\n    rimraf = require('gulp-rimraf');\n\ngulp.task('clean', function () {\n    return gulp.src('./public/*', {read: false, dot: true}).pipe(rimraf({ force: true }));\n});\n\ngulp.task('css', function () {\n    return gulp.src('./node_modules/bootstrap/dist/css/bootstrap.min.css').pipe(gulp.dest('./public/css'));\n});\n\ngulp.task('js', function () {\n    return gulp.src([\n        './node_modules/bootstrap/dist/js/bootstrap.min.js',\n        './node_modules/jquery/dist/jquery.min.js',\n    ]).pipe(gulp.dest('./public/js'));\n});\n\ngulp.task('build', gulp.parallel('css', 'js'));\n\ngulp.task('default', gulp.series('clean', 'build'));\n");return __output}},{}],161:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true */\n\"use strict\";\n\nvar express = require('express'),\n    Promise = require('bluebird');\n\nPromise.config({cancellation: true});\n\nvar BASE_PATH = process.env.BASE_PATH || '/';\n\nvar repositories = require('./repositories').createRepositories();\nvar actions = require('./actions').createActions({repositories: repositories});\nvar viewModels = require('./viewmodels').createInitializers({repositories: repositories});\n\nvar app = express();\napp.set('views', './views');\napp.set('view engine', 'pug');\napp.engine('pug', require('pug').__express);\n\napp.locals.BASE_PATH = BASE_PATH;\nif (app.get('env') === 'development') {\n    app.locals.pretty = true;\n}\n\napp.use(BASE_PATH, require('./routes').createRouter({\n    viewModels: viewModels,\n    actions: actions\n}));\n\napp.use(BASE_PATH, express.static('public'));\n\napp.listen(3001);\n");return __output}},{}],162:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('{\n  "name": "webexample",\n  "description": "An example Web application generated by IFML-WebEditor",\n  "version": "0.0.1",\n  "private": true,\n  "scripts": {\n    "build": "gulp",\n    "postinstall": "npm run build",\n    "start": "node index"\n  },\n  "dependencies": {\n    "bluebird": "^3.7.2",\n    "bootstrap": "^4.4.1",\n    "express": "^4.17.1",\n    "gulp": "^4.0.0",\n    "gulp-rimraf": "^1.0.0",\n    "pug": "^2.0.0",\n    "jquery": "3.4.1",\n    "merge": "^1.2.1",\n    "nedb": "^1.8.0"\n  }\n}\n');return __output}},{}],163:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append('/*jslint node: true */\n"use strict";\n\nexports.createRepositories = function (options) {\n    var repositories = {}\n');for(var i=0;i<collections.length;++i)__append("    repositories['"),__append(escapeFn(collections[i])),__append("'] = require('./"),__append(escapeFn(collections[i])),__append("').createRepository(options);\n");__append("    return repositories;\n};\n")}return __output}},{}],164:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append("/*jslint node: true */\n\"use strict\";\n\nvar Promise = require('bluebird'),\n    DataStore = require('nedb');\n\nfunction Repository(options) {\n    if (!(this instanceof Repository)) { return new Repository(options); }\n\n    this.db = Promise.promisifyAll(new DataStore({filename: '"),__append(escapeFn(name)),__append("', inMemoryOnly: true}));\n    this.db.insert(require('./default'));\n}\n\nRepository.prototype.findById = function (id) {\n    return this.db.findOneAsync({id: id});\n};\n\nRepository.prototype.find = function (fields, project) {\n    return this.db.findAsync(fields, project);\n};\n\nexports.createRepository = Repository;\n");return __output}},{}],165:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar express = require('express');\n\nexports.createRouter = function (options) {\n    var router = express.Router();\n");for(var i=0;i<routes.length;++i)__append("    router.use('/"),__append(escapeFn(routes[i].path)),__append("', require('./"),__append(escapeFn(routes[i].id)),__append("').createRouter(options));\n");__append("    return router;\n};\n")}return __output}},{}],166:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("/*jslint node: true */\n\"use strict\";\n\nvar express = require('express');\n\nexports.createInitializers = function (options) {\n    return {\n");for(var i=0;i<vms.length;++i)__append("        "),__append(escapeFn(0!==i?",":"")),__append("'"),__append(escapeFn(vms[i].id)),__append("': require('./"),__append(escapeFn(vms[i].id)),__append("').createInitializer(options)\n");__append("    };\n};\n")}return __output}},{}],167:[function(require,module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{}){__append("doctype html\nhtml\n    head\n        base(href=(BASE_PATH || '/'))\n        block title\n        meta(charset='UTF-8')\n        meta(name='viewport', content='width=device-width, initial-scale=1, shrink-to-fit=no')\n        link(href='./css/bootstrap.min.css', rel='stylesheet')\n        script(src='./js/jquery.min.js')\n    body\n        nav.navbar.navbar-expand-lg.bg-light\n            button.navbar-toggler(type='button', data-toggle='collapse', data-target='#landmark-menu')\n                span.navbar-toggler-icon\n            #landmark-menu.collapse.navbar-collapse\n                ul.navbar-nav.mr-auto\n");for(var i=0;i<landmarks.length;++i)__append("                    li.nav-item\n                        a.nav-link(href='./"),__append(escapeFn(landmarks[i].href)),__append("') "),__append(escapeFn(landmarks[i].name)),__append("\n");__append("        block content\n        script(src='./js/bootstrap.min.js')\n")}return __output}},{}],168:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window._:void 0!==n&&n._,("undefined"!=typeof window?window.almost.plugins.joint:void 0!==n?n.almost.plugins.joint:null).utils;var i=e("../ifml").ifml,r=(e("../pcn").pcn,e("./mobile").transform),a=e("./layout").layout;t.ifml2pcn={mobile:function(e){var n=r(i.extend(e));return a(n),n}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../ifml":22,"../pcn":221,"./layout":169,"./mobile":170}],169:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=(0,e("almost-extend").createExtender)({type:{Leaf:"layout.Leaf",Node:"layout.Node",ForRelation:"layout.For",ElementWithName:["pcn.PlaceChart","pcn.Transition"],ElementWithRotation:["pcn.Transition"]},relation:{Parent:{relation:"layout.Hierarchy",from:"child",to:"parent",single:!0},Children:{relation:"layout.Hierarchy",from:"parent",to:"child"}}});function a(e,n){var t,r=i.map(i.keys(e),(function(e){return parseFloat(e)})),a={};return r.sort((function(e,n){return e-n})),r.length?(t=-n,i.forEach(r,(function(i){var r=e[i];a[i]=t+n,0!==r&&(t+=n+r)}))):t=0,a.total=t,a}t.layout=function(e){var n=(e=r(e)).toElement("L-Root");!function e(n,t){if(!t.isLeaf(n)){var r,o,s=i.map(t.getChildren(n),(function(e){return t.toElement(e)})),l=n.attributes.padding||0,p=n.attributes.spacing||0,u={},c={};s.length||(n.attributes.width=0,n.attributes.height=0),i.forEach(s,(function(n){e(n,t);var i=n.attributes.row,r=n.attributes.column,a=n.attributes.width,o=n.attributes.height;u[i]=Math.max(u[i]||0,o),c[r]=Math.max(c[r]||0,a)})),r=a(c,p),o=a(u,p),n.attributes.width=r.total+2*l,n.attributes.height=o.total+2*l,i.forEach(s,(function(e){e.attributes.x=r[e.attributes.column]+l,e.attributes.y=o[e.attributes.row]+l}))}}(n,e),function e(n,t){var r=i.map(t.getChildren(n),(function(e){return t.toElement(e)}));i.forEach(r,(function(i){i.attributes.x+=n.attributes.x,i.attributes.y+=n.attributes.y,e(i,t)}))}(n,e),function(e){i(e.relations).filter((function(n){return e.isForRelation(n)})).forEach((function(n){var t=e.toElement(n.layout),i=e.toElement(n.pcn);i.metadata=i.metadata||{},i.metadata.graphics=i.metadata.graphics||{},i.metadata.graphics.position={x:t.attributes.x,y:t.attributes.y},i.metadata.graphics.size={width:t.attributes.width,height:t.attributes.height},e.isElementWithRotation(i)&&(i.metadata.graphics.angle=i.metadata.graphics.angle||0),e.isElementWithName(i)&&(i.metadata.graphics.name=i.metadata.graphics.name||{},i.metadata.graphics.name.vertical=i.metadata.graphics.name.vertical||"bottom",i.metadata.graphics.name.horizontal=i.metadata.graphics.name.horizontal||"middle")})).value()}(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"almost-extend":232}],170:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.almost:void 0!==n?n.almost:null,a=e("./semantics").semantics,o=e("./layout").layout,s=[a.rules,o.rules],l=r.createTransformer({model:i.flatten(i.map(s,"model")),element:i.flatten(i.map(s,"element")),relations:i.flatten(i.map(s,"relation"))},"m2a");t.transform=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./layout":173,"./semantics":195}],171:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isAction(e)&&n.getInbounds(e).length}),(function(e,n){var t=n.toId(e),i=t+"-Running-p",r=t+"-Running-n",a="L-"+n.getActionOriginId(e)+"-Content",o="L-"+t,s=o+"-Running-p",l=o+"-Running-n",p=e.metadata.graphics.position.x;return{elements:[{id:o,type:"layout.Node",attributes:{row:e.metadata.graphics.position.y,column:p,padding:20,spacing:20}},{id:s,type:"layout.Leaf",attributes:{row:0,column:0,width:40,height:40}},{id:l,type:"layout.Leaf",attributes:{row:1,column:0,width:40,height:40}}],relations:[{type:"layout.Hierarchy",parent:a,child:o},{type:"layout.Hierarchy",parent:o,child:s},{type:"layout.Hierarchy",parent:o,child:l},{type:"layout.For",layout:o,pcn:t},{type:"layout.For",layout:s,pcn:i},{type:"layout.For",layout:l,pcn:r}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],172:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,i=[n.createRule(n.Rule.always,(function(){return{elements:[{id:"L-Root",type:"layout.Node",attributes:{x:0,y:0,spacing:20}},{id:"L-Waiting",type:"layout.Node",attributes:{row:1,column:0,spacing:20}},{id:"L-Waiting-p",type:"layout.Leaf",attributes:{row:0,column:0,width:40,height:40}},{id:"Waiting-p",metadata:{graphics:{name:{vertical:"top"}}}},{id:"L-Waiting-Spacer",type:"layout.Leaf",attributes:{row:1,column:0,width:0,height:10}},{id:"L-Waiting-n",type:"layout.Leaf",attributes:{row:2,column:0,width:40,height:40}},{id:"L-Open",type:"layout.Leaf",attributes:{row:0,column:1,width:40,height:40}},{id:"Open",metadata:{execution:{priority:0}}},{id:"L-Close",type:"layout.Leaf",attributes:{row:2,column:1,width:40,height:40}},{id:"Close",metadata:{graphics:{name:{vertical:"top"}},execution:{priority:0}}},{id:"L-Application-Landmarks",type:"layout.Node",attributes:{row:0,column:1,padding:10,spacing:20}},{id:"L-Application",type:"layout.Node",attributes:{row:1,column:1,padding:20,spacing:20}},{id:"L-Application-Content",type:"layout.Node",attributes:{row:0,column:1,spacing:20}},{id:"L-Application-View",type:"layout.Node",attributes:{row:0,column:0,spacing:20}},{id:"L-Application-View-p",type:"layout.Leaf",attributes:{row:0,column:0,width:40,height:40}},{id:"L-Application-View-n",type:"layout.Leaf",attributes:{row:1,column:0,width:40,height:40}}],relations:[{type:"layout.Hierarchy",parent:"L-Root",child:"L-Waiting"},{type:"layout.Hierarchy",parent:"L-Root",child:"L-Application-Landmarks"},{type:"layout.Hierarchy",parent:"L-Root",child:"L-Application"},{type:"layout.Hierarchy",parent:"L-Waiting",child:"L-Waiting-p"},{type:"layout.Hierarchy",parent:"L-Waiting",child:"L-Waiting-Spacer"},{type:"layout.Hierarchy",parent:"L-Waiting",child:"L-Waiting-n"},{type:"layout.Hierarchy",parent:"L-Waiting",child:"L-Open"},{type:"layout.Hierarchy",parent:"L-Waiting",child:"L-Close"},{type:"layout.Hierarchy",parent:"L-Application",child:"L-Application-Content"},{type:"layout.Hierarchy",parent:"L-Application",child:"L-Application-View"},{type:"layout.Hierarchy",parent:"L-Application-View",child:"L-Application-View-p"},{type:"layout.Hierarchy",parent:"L-Application-View",child:"L-Application-View-n"},{type:"layout.For",layout:"L-Waiting-p",pcn:"Waiting-p"},{type:"layout.For",layout:"L-Waiting-n",pcn:"Waiting-n"},{type:"layout.For",layout:"L-Open",pcn:"Open"},{type:"layout.For",layout:"L-Close",pcn:"Close"},{type:"layout.For",layout:"L-Application",pcn:"Application"},{type:"layout.For",layout:"L-Application-View-p",pcn:"Application-View-p"},{type:"layout.For",layout:"L-Application-View-n",pcn:"Application-View-n"}]}}))];t.rules={model:i,element:[],relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],173:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=("undefined"!=typeof window?window.almost:void 0!==n&&n.almost,[e("./action").rules,e("./application").rules,e("./navigationflow").rules,e("./viewcomponent").rules,e("./viewcontainer").rules]);r={model:i.flatten(i.map(r,"model")),element:i.flatten(i.map(r,"element")),relation:i.flatten(i.map(r,"relation"))};t.layout={rules:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./action":171,"./application":172,"./navigationflow":174,"./viewcomponent":175,"./viewcontainer":176}],174:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isNavigationFlow(e)}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r="L-"+i,a=r+"-Group",o=t.metadata.graphics.position.x;return{elements:[{id:a,type:"layout.Node",attributes:{row:t.metadata.graphics.position.y,column:o,spacing:20}},{id:r,type:"layout.Leaf",attributes:{row:0,column:0,width:40,height:40}},{id:i,metadata:{execution:{priority:1}}}],relations:[{type:"layout.Hierarchy",parent:a,child:r},{type:"layout.For",layout:r,pcn:i}]}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isAction(n.getTarget(e))}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getTarget(e),a=n.getActionOriginId(r);return{elements:[{id:i,metadata:{graphics:{parent:a}}}],relations:[{type:"layout.Hierarchy",parent:"L-"+a+"-Content",child:"L-"+i+"-Group"}]}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&!n.isAction(n.getTarget(e))}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getInteractionContextId(e,"Application");return{elements:[{id:i,metadata:{graphics:{parent:r}}}],relations:[{type:"layout.Hierarchy",parent:"L-"+r+"-Content",child:"L-"+i+"-Group"}]}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getInteractionContextId(e,"Application"),o="L-"+r+"-Group",s=t.getXORTargetSet(e,a),l=n.map(s,(function(e,n){var t=r+"-Via-"+e,i="L"+t;return{elements:[{id:i,type:"layout.Leaf",attributes:{row:n+1,column:0,width:40,height:40}},{id:t,metadata:{graphics:{parent:a},execution:{priority:1}}}],relations:[{type:"layout.Hierarchy",parent:o,child:i},{type:"layout.For",layout:i,pcn:t}]}}));return{elements:n.flatten(n.map(l,"elements")),relations:n.flatten(n.map(l,"relations"))}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],175:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,i=[n.createRule((function(e,n){return n.isViewComponent(e)}),(function(e,n){var t=n.toId(e),i=t+"-Model",r=t+"-In-p",a=t+"-In-n",o=t+"-Compute",s=t+"-Out-p",l=t+"-Out-n",p=t+"-Render",u=t+"-ViewModel",c=t+"-View-p",d=t+"-View-n",f="L-"+t,_="L-"+n.getParentId(e)+"-Content",h=f+"-Group",m=f+"-Model",g=f+"-In-p",v=f+"-In-n",y=f+"-Compute",w=f+"-Out-p",b=f+"-Out-n",x=f+"-Render-Group",k=f+"-Render-Spacer",C=f+"-Render",E=f+"-ViewModel",F=f+"-View-p",T=f+"-View-Spacer",M=f+"-View-n",S=e.metadata.graphics.position.x;return{elements:[{id:h,type:"layout.Node",attributes:{row:e.metadata.graphics.position.y,column:S,spacing:20}},{id:f,type:"layout.Node",attributes:{row:1,column:0,padding:20}},{id:m,type:"layout.Node",attributes:{row:0,column:0,padding:20}},{id:v,type:"layout.Leaf",attributes:{row:0,column:0,width:40,height:40}},{id:a,metadata:{graphics:{name:{vertical:"top"}}}},{id:g,type:"layout.Leaf",attributes:{row:0,column:2,width:40,height:40}},{id:r,metadata:{graphics:{name:{vertical:"top"}}}},{id:y,type:"layout.Leaf",attributes:{row:1,column:1,width:40,height:40}},{id:o,metadata:{graphics:{parent:i,angle:-45,name:{vertical:"middle",horizontal:"right-outer"}},execution:{priority:2}}},{id:b,type:"layout.Leaf",attributes:{row:2,column:0,width:40,height:40}},{id:w,type:"layout.Leaf",attributes:{row:2,column:2,width:40,height:40}},{id:s,metadata:{graphics:{name:{vertical:"top",horizontal:"left"}}}},{id:x,type:"layout.Node",attributes:{row:1,column:0}},{id:k,type:"layout.Leaf",attributes:{row:0,column:0,width:100,height:0}},{id:C,type:"layout.Leaf",attributes:{row:0,column:1,width:40,height:40}},{id:p,metadata:{graphics:{parent:t,angle:90,name:{vertical:"middle",horizontal:"left-outer"}},execution:{priority:2}}},{id:E,type:"layout.Node",attributes:{row:2,column:0,padding:20}},{id:M,type:"layout.Leaf",attributes:{row:0,column:0,width:40,height:40}},{id:T,type:"layout.Leaf",attributes:{row:0,column:1,width:40,height:0}},{id:F,type:"layout.Leaf",attributes:{row:0,column:2,width:40,height:40}}],relations:[{type:"layout.Hierarchy",parent:_,child:h},{type:"layout.Hierarchy",parent:h,child:f},{type:"layout.Hierarchy",parent:f,child:m},{type:"layout.Hierarchy",parent:m,child:g},{type:"layout.Hierarchy",parent:m,child:v},{type:"layout.Hierarchy",parent:m,child:y},{type:"layout.Hierarchy",parent:m,child:w},{type:"layout.Hierarchy",parent:m,child:b},{type:"layout.Hierarchy",parent:f,child:x},{type:"layout.Hierarchy",parent:x,child:k},{type:"layout.Hierarchy",parent:x,child:C},{type:"layout.Hierarchy",parent:f,child:E},{type:"layout.Hierarchy",parent:E,child:F},{type:"layout.Hierarchy",parent:E,child:T},{type:"layout.Hierarchy",parent:E,child:M},{type:"layout.For",layout:f,pcn:t},{type:"layout.For",layout:m,pcn:i},{type:"layout.For",layout:g,pcn:r},{type:"layout.For",layout:v,pcn:a},{type:"layout.For",layout:y,pcn:o},{type:"layout.For",layout:w,pcn:s},{type:"layout.For",layout:b,pcn:l},{type:"layout.For",layout:C,pcn:p},{type:"layout.For",layout:E,pcn:u},{type:"layout.For",layout:F,pcn:c},{type:"layout.For",layout:M,pcn:d}]}})),n.createRule((function(e,n){return n.isViewComponent(e)&&n.isTargetOfDataFlow(e)}),(function(e,n){var t=n.toId(e),i=t+"-Propagate",r="L-"+t,a=r+"-Propagate";return{elements:[{id:a,type:"layout.Leaf",attributes:{row:0,column:0,width:40,height:40}},{id:i,metadata:{graphics:{parent:n.getParentId(e,"Application")},execution:{priority:2}}}],relations:[{type:"layout.Hierarchy",parent:r+"-Group",child:a},{type:"layout.For",layout:a,pcn:i}]}}))];t.rules={model:[],element:i,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],176:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isViewContainer(e)}),(function(e,n){var t=n.toId(e),i="L-"+t,r="L-"+t+"-Group",a="L-"+t+"-Landmarks",o=i+"-View",s=i+"-View-p",l=i+"-View-n",p=i+"-Content";return{elements:[{id:a,type:"layout.Node",attributes:{row:0,column:0}},{id:i,type:"layout.Node",attributes:{row:1,column:0,padding:20,spacing:20}},{id:o,type:"layout.Node",attributes:{row:0,column:0,spacing:20}},{id:s,type:"layout.Leaf",attributes:{row:0,column:0,width:40,height:40}},{id:l,type:"layout.Leaf",attributes:{row:1,column:0,width:40,height:40}},{id:p,type:"layout.Node",attributes:{row:0,column:1,spacing:20}}],relations:[{type:"layout.Hierarchy",parent:r,child:a},{type:"layout.Hierarchy",parent:r,child:i},{type:"layout.Hierarchy",parent:i,child:o},{type:"layout.Hierarchy",parent:o,child:s},{type:"layout.Hierarchy",parent:o,child:l},{type:"layout.Hierarchy",parent:i,child:p},{type:"layout.For",layout:i,pcn:t},{type:"layout.For",layout:s,pcn:t+"-View-p"},{type:"layout.For",layout:l,pcn:t+"-View-n"}]}})),i.createRule((function(e,n){return n.isViewContainer(e)&&n.isXOR(e)}),(function(e,n){var t="L-"+n.toId(e)+"-Group",i="L-"+n.getParentId(e)+"-Content",r=e.metadata.graphics.position.x;return{elements:[{id:t,type:"layout.Node",attributes:{row:e.metadata.graphics.position.y,column:r}}],relations:[{type:"layout.Hierarchy",parent:i,child:t}]}})),i.createRule((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)}),(function(e,t){var i=t.toId(e),r=t.getParentId(i,"Application"),a=t.getTopMostXORDescendants(e),o="L-"+i+"-Group",s="L-"+r+"-Content",l=n.map(a,(function(e){return i+"-Without-"+e})),p=n.map(a,(function(e){return"L-"+i+"-Without-"+e})),u=n.map(n.unzip([n.flatten([p]),n.flatten([l])]),(function(e){var n=e[0];return{elements:[{id:n,type:"layout.Node",attributes:{padding:20}}],relations:[{type:"layout.For",layout:n,pcn:e[1]}]}})),c=n.map(n.unzip([n.flatten([s,p]),n.flatten([p,o]),[e.metadata.graphics.position.y],[e.metadata.graphics.position.x]]),(function(e){var n=e[0],t=e[1];return{elements:[{id:t,attributes:{row:e[2]||0,column:e[3]||0}}],relations:[{type:"layout.Hierarchy",parent:n,child:t}]}})),d=n.flatten([u,c]);return{elements:n.flatten(n.map(d,"elements")),relations:n.flatten(n.map(d,"relations"))}})),i.createRule((function(e,n){return n.isViewContainer(e)&&n.isLandmark(e)&&n.isXOR(n.getParent(e),!0)}),(function(e,n){var t=n.toId(e),i=t+"-Landmark",r="L-"+t+"-Landmark",a="L-"+n.getParentId(e,"Application")+"-Landmarks",o=e.metadata.graphics.position.x;return{elements:[{id:r,type:"layout.Leaf",attributes:{row:e.metadata.graphics.position.y,column:o,width:40,height:40}},{id:i,metadata:{graphics:{angle:90,name:{vertical:"top"}},execution:{priority:1}}}],relations:[{type:"layout.Hierarchy",parent:a,child:r},{type:"layout.For",layout:r,pcn:i}]}})),i.createRule((function(e,n){return n.isViewContainer(e)&&n.isLandmark(e)&&n.isXOR(n.getParent(e))}),(function(e,n){return{elements:[{id:n.toId(e)+"-Landmark",metadata:{graphics:{parent:n.getParentId(e)}}}],relations:[]}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],177:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,i=[n.createRule(n.Rule.always,(function(){return{elements:[{id:"Waiting-p",type:"pcn.PlaceChart",attributes:{name:"Waiting"}},{id:"Waiting-n",type:"pcn.PlaceChart",attributes:{name:"\\overline{Waiting}"}},{id:"Application",type:"pcn.PlaceChart",attributes:{name:"Application"}},{id:"Application-View-p",type:"pcn.PlaceChart",attributes:{name:"View_{Application}"}},{id:"Application-View-n",type:"pcn.PlaceChart",attributes:{name:"\\overline{View}_{Application}"}},{id:"Application->Application-View-p",type:"pcn.Link",attributes:{tokens:1}},{id:"Open",type:"pcn.Transition",attributes:{name:"open"}},{id:"Waiting-p->Open",type:"pcn.Link",attributes:{tokens:1}},{id:"Application->Open",type:"pcn.Link",attributes:{tokens:1}},{id:"Open->Waiting-n",type:"pcn.Link",attributes:{tokens:1}},{id:"Open->Application",type:"pcn.Link",attributes:{tokens:1}},{id:"Close",type:"pcn.Transition",attributes:{name:"close"}},{id:"Waiting-n->Close",type:"pcn.Link",attributes:{tokens:1}},{id:"Application->Close",type:"pcn.Link",attributes:{tokens:1}},{id:"Close->Waiting-p",type:"pcn.Link",attributes:{tokens:1}},{id:"Close->Application-View-n",type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Hierarchy",parent:"Application",child:"Application-View-p"},{type:"pcn.Hierarchy",parent:"Application",child:"Application-View-n"},{type:"pcn.Source",link:"Application->Application-View-p",source:"Application"},{type:"pcn.Target",link:"Application->Application-View-p",target:"Application-View-p"},{type:"pcn.Source",link:"Waiting-p->Open",source:"Waiting-p"},{type:"pcn.Target",link:"Waiting-p->Open",target:"Open"},{type:"pcn.Source",link:"Application->Open",source:"Application"},{type:"pcn.Target",link:"Application->Open",target:"Open"},{type:"pcn.Source",link:"Open->Waiting-n",source:"Open"},{type:"pcn.Target",link:"Open->Waiting-n",target:"Waiting-n"},{type:"pcn.Source",link:"Open->Application",source:"Open"},{type:"pcn.Target",link:"Open->Application",target:"Application"},{type:"pcn.Source",link:"Waiting-n->Close",source:"Waiting-n"},{type:"pcn.Target",link:"Waiting-n->Close",target:"Close"},{type:"pcn.Source",link:"Application->Close",source:"Application"},{type:"pcn.Target",link:"Application->Close",target:"Close"},{type:"pcn.Source",link:"Close->Waiting-p",source:"Close"},{type:"pcn.Target",link:"Close->Waiting-p",target:"Waiting-p"},{type:"pcn.Source",link:"Close->Application-View-n",source:"Close"},{type:"pcn.Target",link:"Close->Application-View-n",target:"Application-View-n"}]}})),n.createRule(n.Rule.always,(function(){return{elements:[{id:"Waiting-p",attributes:{tokens:1}},{id:"Application-View-n",attributes:{tokens:1}}]}}))];t.rules={model:i,element:[],relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],178:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,i=[n.createRule((function(e,n){return n.isViewComponent(e)&&n.isTargetOfDataFlow(e)}),(function(e,n){var t=n.toId(e),i=t+"-Model",r=t+"-In-n",a=t+"-In-p",o=t+"-Out-n",s=i+"->"+r,l=i+"->"+o,p=t+"-Propagate",u=o+"->"+p,c=r+"->"+p,d=p+"->"+o,f=p+"->"+a;return{elements:[{id:s,type:"pcn.Link",attributes:{tokens:1}},{id:l,type:"pcn.Link",attributes:{tokens:1}},{id:p,type:"pcn.Transition",attributes:{name:"Propagate"+("_{"+e.attributes.name+"}")}},{id:u,type:"pcn.Link",attributes:{tokens:1}},{id:c,type:"pcn.Link",attributes:{tokens:1}},{id:d,type:"pcn.Link",attributes:{tokens:1}},{id:f,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:s,source:i},{type:"pcn.Target",link:s,target:r},{type:"pcn.Source",link:l,source:i},{type:"pcn.Target",link:l,target:o},{type:"pcn.Source",link:u,source:o},{type:"pcn.Target",link:u,target:p},{type:"pcn.Source",link:c,source:r},{type:"pcn.Target",link:c,target:p},{type:"pcn.Source",link:d,source:p},{type:"pcn.Target",link:d,target:o},{type:"pcn.Source",link:f,source:p},{type:"pcn.Target",link:f,target:a}]}})),n.createRule((function(e,n){return n.isDataFlow(e)&&n.isViewComponent(n.getTarget(e))}),(function(e,n){var t=n.getSourceId(e),i=n.getTargetId(e)+"-Propagate",r=t+"-View-p",a=r+"->"+i,o=i+"->"+r;return{elements:[{id:a,type:"pcn.Link",attributes:{tokens:1}},{id:o,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:a,source:r},{type:"pcn.Target",link:a,target:i},{type:"pcn.Source",link:o,source:i},{type:"pcn.Target",link:o,target:r}]}}))];t.rules={model:[],element:i,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],179:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isAction(e)&&n.getInbounds(e).length}),(function(e,n){var t=n.toId(e),i=n.getActionOriginId(e),r=t+"-Running-p",a=t+"-Running-n",o=t+"->"+a,s=i+"->"+t,l=e.attributes.name,p="_{"+l+"}";return{elements:[{id:t,type:"pcn.PlaceChart",attributes:{name:l}},{id:r,type:"pcn.PlaceChart",attributes:{name:"Running"+p}},{id:a,type:"pcn.PlaceChart",attributes:{name:"\\overline{Running}"+p}},{id:o,type:"pcn.Link",attributes:{tokens:1}},{id:s,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Hierarchy",parent:i,child:t},{type:"pcn.Hierarchy",parent:t,child:r},{type:"pcn.Hierarchy",parent:t,child:a},{type:"pcn.Source",link:o,source:t},{type:"pcn.Target",link:o,target:r},{type:"pcn.Source",link:s,source:i},{type:"pcn.Target",link:s,target:a}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],180:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isNavigationFlow(e)&&n.isAction(n.getTarget(e))}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getTargetId(e),a=t.attributes.name,o=n.getParentId(t)+"-View-p",s=r+"->"+i,l=i+"->"+r,p=o+"->"+i,u=i+"->"+o;return{elements:[{id:i,type:"pcn.Transition",attributes:{name:a}},{id:s,type:"pcn.Link",attributes:{tokens:1}},{id:l,type:"pcn.Link",attributes:{tokens:1}},{id:p,type:"pcn.Link",attributes:{tokens:1}},{id:u,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:s,source:r},{type:"pcn.Target",link:s,target:i},{type:"pcn.Source",link:l,source:i},{type:"pcn.Target",link:l,target:r},{type:"pcn.Source",link:p,source:o},{type:"pcn.Target",link:p,target:i},{type:"pcn.Source",link:u,source:i},{type:"pcn.Target",link:u,target:o}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],181:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isViewContainer(e)}),(function(e,n){var t=n.toId(e),i=t+"-View-p",r=t+"-View-n",a=t+"->"+i,o=e.attributes.name,s="_{"+o+"}";return{elements:[{id:t,type:"pcn.PlaceChart",attributes:{name:o}},{id:i,type:"pcn.PlaceChart",attributes:{name:"View"+s}},{id:r,type:"pcn.PlaceChart",attributes:{name:"\\overline{View}"+s}},{id:a,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Hierarchy",parent:t,child:i},{type:"pcn.Hierarchy",parent:t,child:r},{type:"pcn.Source",link:a,source:t},{type:"pcn.Target",link:a,target:i}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],182:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isViewContainer(e)&&!n.isXOR(n.getParent(e),!0)}),(function(e,n){var t=n.toId(e),i=n.getParentId(e),r=i+"->"+t;return{elements:[{id:r,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:r,source:i},{type:"pcn.Target",link:r,target:t}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isViewContainer(e)&&n.isDefault(e)&&n.isXOR(n.getParent(e),!0)}),(function(e,n){var t=n.toId(e),i=n.getParentId(e,"Application"),r=i+"->"+t;return{elements:[{id:r,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:r,source:i},{type:"pcn.Target",link:r,target:t}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],184:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isViewContainer(e)&&!n.isDefault(e)&&n.isXOR(n.getParent(e),!0)}),(function(e,n){var t=n.toId(e)+"-View-n",i=n.getParentId(e,"Application"),r=i+"->"+t;return{elements:[{id:r,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:r,source:i},{type:"pcn.Target",link:r,target:t}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],185:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isViewContainer(e)&&n.isLandmark(e)&&n.isXOR(n.getParent(e),!0)}),(function(e,n){var t=n.toId(e),i=t+"-Landmark",a=n.getParentId(r,"Application"),o=a+"-View-p",s=a+"->"+i,l=o+"->"+i,p=i+"->"+o,u=i+"->"+t;return{elements:[{id:i,type:"pcn.Transition",attributes:{name:"Landmark"+("_{"+e.name+"}")}},{id:s,type:"pcn.Link",attributes:{tokens:1}},{id:l,type:"pcn.Link",attributes:{tokens:1}},{id:p,type:"pcn.Link",attributes:{tokens:1}},{id:u,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:s,source:a},{type:"pcn.Target",link:s,target:i},{type:"pcn.Source",link:l,source:o},{type:"pcn.Target",link:l,target:i},{type:"pcn.Source",link:p,source:i},{type:"pcn.Target",link:p,target:o},{type:"pcn.Source",link:u,source:i},{type:"pcn.Target",link:u,target:t}]}})),i.createRule((function(e,n){return n.isViewContainer(e)&&n.isLandmark(e)&&n.isXOR(n.getParent(e))}),(function(e,t){var i=t.toId(e),a=i+"-Landmark",o=t.getParent(r),s=n.without(t.getChildren(o),i),l=n.map(s,(function(e){var n=e+"-View-p",t=a+"->"+n;return{elements:[{id:t,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:t,source:a},{type:"pcn.Target",link:t,target:n}]}}));return{elements:n.flatten(n.map(l,"elements")),relations:n.flatten(n.map(l,"relations"))}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],186:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)}),(function(e,t){var i=t.toId(e),r=i+"-View-p",a=t.getTopMostXORDescendants(e),o=e.attributes.name+"/",s=n.map(a,(function(e){var n=i+"-Without-"+e,a=n+"->"+r,s=t.toElement(e).attributes.name;return{elements:[{id:n,type:"pcn.PlaceChart",attributes:{name:o+s}},{id:a,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:a,source:n},{type:"pcn.Target",link:a,target:r}]}}));return{elements:n.flatten(n.map(s,"elements")),relations:n.flatten(n.map(s,"relations"))}})),i.createRule((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)}),(function(e,t){var i=t.toId(e),r=t.getTopMostXORDescendants(e),a=t.getChildren(e),o=n.flatten(n.map(r,(function(e){return n.map(n.difference(a,t.getAncestors(e,!0)),(function(n){var t=i+"-Without-"+e,r=t+"->"+n;return{elements:[{id:r,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:r,source:t},{type:"pcn.Target",link:r,target:n}]}}))})));return{elements:n.flatten(n.map(o,"elements")),relations:n.flatten(n.map(o,"relations"))}})),i.createRule((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)}),(function(e,t){var i=t.toId(e),r=t.getParentId(e,"Application"),a=t.getTopMostXORDescendants(e),o=n.map(a,(function(e){return i+"-Without-"+e})),s=n.unzip([n.flatten([r,o]),n.flatten([o,i])]),l=n.map(s,(function(e){return{elements:[],relations:[{type:"pcn.Hierarchy",parent:e[0],child:e[1]}]}}));return{elements:n.flatten(n.map(l,"elements")),relations:n.flatten(n.map(l,"relations"))}})),i.createRule((function(e,n){return n.isViewContainer(e)&&!n.isXOR(e)&&!n.isXOR(n.getParent(e),!0)}),(function(e,t){var i=t.toId(e),r=t.getParentId(e),a=t.getTopMostXORDescendants(e),o=n.map(a,(function(e){var n=i+"-Without-"+e,t=r+"-Without-"+e,a=t+"->"+n;return{elements:[{id:a,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:a,source:t},{type:"pcn.Target",link:a,target:n}]}}));return{elements:n.flatten(n.map(o,"elements")),relations:n.flatten(n.map(o,"relations"))}})),i.createRule((function(e,n){return n.isViewContainer(e)&&n.isXOR(e)}),(function(e,n){var t=n.toId(e);return{elements:[],relations:[{type:"pcn.Hierarchy",parent:n.getParentId(e),child:t}]}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],187:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&n.isXOR(n.getInteractionContext(e),!0)}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getTarget(e),a=n.getInteractionContext(e),o=n.getCoDisplayedAncestorId(r,a),s=o+"->"+i;return{elements:[{id:i,type:"pcn.Transition",attributes:{name:t.attributes.name}},{id:s,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:s,source:o},{type:"pcn.Target",link:s,target:i}]}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getInteractionContext(e),o=t.getXORTargetSet(e,a),s=n.map(o,(function(e){var n=e+"-View-p",t=r+"->"+n;return{elements:[{id:t,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:t,source:r},{type:"pcn.Target",link:t,target:n}]}}));return{elements:n.flatten(n.map(s,"elements")),relations:n.flatten(n.map(s,"relations"))}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getInteractionContext(e),o=t.getHideSet(e,a),s=n.map(o,(function(e){var n=e+"-View-n",t=r+"->"+n;return{elements:[{id:t,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:t,source:r},{type:"pcn.Target",link:t,target:n}]}}));return{elements:n.flatten(n.map(s,"elements")),relations:n.flatten(n.map(s,"relations"))}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getTarget(e),o=t.getInteractionContext(e),s=t.getDisplaySet(e,o),l=t.getAncestors(a),p=n.map(s,(function(e){var i=t.getTopMostXORDescendants(e),a=n.first(n.intersection(i,l)),o=a?e+"-Without-"+a:e,s=r+"->"+o;return{elements:[{id:s,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:s,source:r},{type:"pcn.Target",link:s,target:o}]}}));return{elements:n.flatten(n.map(p,"elements")),relations:n.flatten(n.map(p,"relations"))}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],188:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getParent(n.getSource(e)))&&n.isViewElement(n.getTarget(e))&&n.isXOR(n.getInteractionContext(e),!0)}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getParentId(t),a=n.getInteractionContext(e),o=n.getCoDisplayedAncestorId(r,a),s=r+"-View-p",l=s+"->"+i,p=o+"->"+i;return{elements:[{id:l,type:"pcn.Link",attributes:{tokens:1}},{id:p,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:l,source:s},{type:"pcn.Target",link:l,target:i},{type:"pcn.Source",link:p,source:o},{type:"pcn.Target",link:p,target:i}]}})),i.createRule((function(e,t){if(!t.isNavigationFlow(e))return!1;var i=t.getSource(e),r=t.getParent(i),a=t.getTarget(e);return!!(t.isViewElement(r)&&t.isViewElement(a)&&t.isXOR(t.getInteractionContext(e),!0))&&n.intersection(t.getAncestors(r),[a]).length}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getParentId(n.getParent(t)),a=n.getInteractionContext(e),o=i+"->"+(n.getCoDisplayedAncestorId(r,a)+"-View-n");return{elements:[{id:o,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:o,source:i},{type:"pcn.Target",link:o,target:o}]}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],189:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=t.attributes.name,a=n.getTargetId(e),o=a+"->"+i,s=i+"->"+a;return{elements:[{id:i,type:"pcn.Transition",attributes:{name:r}},{id:o,type:"pcn.Link",attributes:{tokens:1}},{id:s,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:o,source:a},{type:"pcn.Target",link:o,target:i},{type:"pcn.Source",link:s,source:i},{type:"pcn.Target",link:s,target:a}]}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getInteractionContext(e),o=t.getTarget(e),s=t.getAncestors(o),l=t.getXORTargetSet(e,a),p=n.flatten(n.map(l,(function(e){return t.getChildren(e)}))),u=n.intersection(s,p),c=n.map(u,(function(e){var n=e+"-View-p",t=n+"->"+r,i=r+"->"+n;return{elements:[{id:t,type:"pcn.Link",attributes:{tokens:1}},{id:i,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:t,source:n},{type:"pcn.Target",link:t,target:r},{type:"pcn.Source",link:i,source:r},{type:"pcn.Target",link:i,target:n}]}}));return{elements:n.flatten(n.map(c,"elements")),relations:n.flatten(n.map(c,"relations"))}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getTarget(e),o=t.getInteractionContext(e),s=t.getXORTargetSet(e,o),l=n.map(s,(function(e){var n=t.getCoDisplayedAncestor(a,e),o=t.toId(n),s=o+"-View-n",l=r+"-Via-"+e,p=e+"->"+l,u=s+"->"+l,c=l+"->"+o;return{elements:[{id:l,type:"pcn.Transition",attributes:{name:i.attributes.name+"▶"+n.attributes.name}},{id:p,type:"pcn.Link",attributes:{tokens:1}},{id:u,type:"pcn.Link",attributes:{tokens:1}},{id:c,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:p,source:e},{type:"pcn.Target",link:p,target:l},{type:"pcn.Source",link:u,source:s},{type:"pcn.Target",link:u,target:l},{type:"pcn.Source",link:c,source:l},{type:"pcn.Target",link:c,target:o}]}}));return{elements:n.flatten(n.map(l,"elements")),relations:n.flatten(n.map(l,"relations"))}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getInteractionContext(e),o=t.getXORTargetSet(e,a),s=n.flatten(n.map(o,(function(i){var a=t.getExtendedXORTargetSet(e,i),o=r+"-Via-"+i;return n.map(a,(function(e){var n=e+"-View-p",t=o+"->"+n;return{elements:[{id:t,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:t,source:o},{type:"pcn.Target",link:t,target:n}]}}))})));return{elements:n.flatten(n.map(s,"elements")),relations:n.flatten(n.map(s,"relations"))}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getInteractionContext(e),o=t.getTarget(e),s=t.getAncestors(o),l=t.getXORTargetSet(e,a),p=n.flatten(n.map(l,(function(i){var a=r+"-Via-"+i,o=t.getDisplaySet(e,i),l=n(o).map((function(e){var i=t.getTopMostXORDescendants(e);return n.first(n.intersection(i,s))})).filter().value();return n.map(l,(function(e){var n=i+"-Without-"+e,t=a+"->"+n;return{elements:[{id:t,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:t,source:a},{type:"pcn.Target",link:t,target:n}]}}))})));return{elements:n.flatten(n.map(p,"elements")),relations:n.flatten(n.map(p,"relations"))}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getInteractionContext(e),o=t.getXORTargetSet(e,a),s=n.flatten(n.map(o,(function(i){var a=t.getHideSet(e,i),o=r+"-Via-"+i;return n.map(a,(function(e){var n=e+"-View-n",t=o+"->"+n;return{elements:[{id:t,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:t,source:o},{type:"pcn.Target",link:t,target:n}]}}))})));return{elements:n.flatten(n.map(s,"elements")),relations:n.flatten(n.map(s,"relations"))}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],190:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getParent(n.getSource(e)))&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getParentId(t)+"-View-p",a=r+"->"+i;return{elements:[{id:a,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:a,source:r},{type:"pcn.Target",link:a,target:i}]}})),i.createRule((function(e,t){if(!t.isNavigationFlow(e))return!1;var i=t.getSource(e),r=t.getParent(i),a=t.getTarget(e);return!(!t.isViewElement(r)||!t.isViewElement(a)||t.isXOR(t.getInteractionContext(e),!0))&&!n.intersection(t.getAncestors(r),[t.toId(a)]).length}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getParentId(t)+"-View-p",a=i+"->"+r;return{elements:[{id:a,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:a,source:i},{type:"pcn.Target",link:a,target:r}]}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isViewElement(n.getParent(n.getSource(e)))&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getParentId(i),o=t.getInteractionContext(e),s=t.getXORTargetSet(e,o),l=n.map(s,(function(e){var n=r+"-Via-"+e,t=a+"-View-p",i=t+"->"+n;return{elements:[{id:i,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:i,source:t},{type:"pcn.Target",link:i,target:n}]}}));return{elements:n.flatten(n.map(l,"elements")),relations:n.flatten(n.map(l,"relations"))}})),i.createRule((function(e,t){if(!t.isNavigationFlow(e))return!1;var i=t.getSource(e),r=t.getParent(i),a=t.getTarget(e);return!(!t.isViewElement(r)||!t.isViewElement(a)||t.isXOR(t.getInteractionContext(e),!0))&&!n.intersection(t.getAncestors(r),[t.toId(a)]).length}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getParentId(i),o=t.getInteractionContext(e),s=t.getXORTargetSet(e,o),l=n.map(s,(function(e){var n=r+"-Via-"+e,t=a+"-View-p",i=n+"->"+t;return{elements:[{id:i,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:i,source:n},{type:"pcn.Target",link:i,target:t}]}}));return{elements:n.flatten(n.map(l,"elements")),relations:n.flatten(n.map(l,"relations"))}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],191:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isAction(n.getParent(n.getSource(e)))&&n.isViewElement(n.getTarget(e))&&n.isXOR(n.getInteractionContext(e),!0)}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getParentId(t)+"-Running-p",a=r+"->"+i;return{elements:[{id:a,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:a,source:r},{type:"pcn.Target",link:a,target:i}]}})),i.createRule((function(e,t){if(!t.isNavigationFlow(e))return!1;var i=t.getSource(e),r=t.getParentId(i),a=t.getTargetId(e);return!!(t.isAction(r)&&t.isViewElement(a)&&t.isXOR(t.getInteractionContext(e),!0))&&n.intersection(t.getAncestors(t.getActionOrigin(r)),[t.toId(a)]).length}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getParent(t),a=n.getInteractionContext(e),o=n.getActionOrigin(r),s=n.getCoDisplayedAncestorId(o,a),l=s+"-View-n",p=s+"->"+i,u=i+"->"+l;return{elements:[{id:p,type:"pcn.Link",attributes:{tokens:1}},{id:u,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:p,source:s},{type:"pcn.Target",link:p,target:i},{type:"pcn.Source",link:u,source:i},{type:"pcn.Target",link:u,target:l}]}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],192:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.almost:void 0!==e?e.almost:null,r=[i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isAction(n.getParent(n.getSource(e)))&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getParentId(t)+"-Running-p",a=r+"->"+i;return{elements:[{id:a,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:a,source:r},{type:"pcn.Target",link:a,target:i}]}})),i.createRule((function(e,t){if(!t.isNavigationFlow(e))return!1;var i,r=t.getSource(e),a=t.getParent(r),o=t.getTarget(e);return!(!t.isAction(a)||!t.isViewElement(o)||t.isXOR(t.getInteractionContext(e),!0))&&(i=t.getActionOrigin(a),!n.intersection(t.getAncestors(i),[t.toId(o)]).length)}),(function(e,n){var t=n.getSource(e),i=n.toId(t),r=n.getParentId(t)+"-Running-n",a=i+"->"+r;return{elements:[{id:a,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:a,source:i},{type:"pcn.Target",link:a,target:r}]}})),i.createRule((function(e,n){return n.isNavigationFlow(e)&&n.isAction(n.getParent(n.getSource(e)))&&n.isViewElement(n.getTarget(e))&&!n.isXOR(n.getInteractionContext(e),!0)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getParentId(i),o=t.getInteractionContext(e),s=t.getXORTargetSet(e,o),l=n.map(s,(function(e){var n=r+"-Via-"+e,t=a+"-Running-p",i=t+"->"+n;return{elements:[{id:i,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:i,source:t},{type:"pcn.Target",link:i,target:n}]}}));return{elements:n.flatten(n.map(l,"elements")),relations:n.flatten(n.map(l,"relations"))}})),i.createRule((function(e,t){if(!t.isNavigationFlow(e))return!1;var i,r=t.getSource(e),a=t.getParent(r),o=t.getTarget(e);return!(!t.isAction(a)||!t.isViewElement(o)||t.isXOR(t.getInteractionContext(e),!0))&&(i=t.getActionOrigin(a),!n.intersection(t.getAncestors(i),[t.toId(o)]).length)}),(function(e,t){var i=t.getSource(e),r=t.toId(i),a=t.getParentId(i),o=t.getInteractionContext(e),s=t.getXORTargetSet(e,o),l=n.map(s,(function(e){var n=r+"-Via-"+e,t=a+"-Running-n",i=n+"->"+t;return{elements:[{id:i,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:i,source:n},{type:"pcn.Target",link:i,target:t}]}}));return{elements:n.flatten(n.map(l,"elements")),relations:n.flatten(n.map(l,"relations"))}}))];t.rules={model:[],element:r,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],193:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isViewComponent(e)}),(function(e,n){var t=n.toId(e),i=n.getParentId(e),r=t+"-Model",a=t+"-In-p",o=t+"-In-n",s=t+"-Out-p",l=t+"-Out-n",p=t+"-Compute",u=t+"-ViewModel",c=t+"-View-p",d=t+"-View-n",f=t+"-Render",_=i+"->"+t,h=t+"->"+r,m=t+"->"+u,g=a+"->"+p,v=l+"->"+p,y=p+"->"+o,w=p+"->"+s,b=u+"->"+d,x=d+"->"+f,k=s+"->"+f,C=f+"->"+c,E=f+"->"+s,F=e.attributes.name,T="_{"+F+"}";return{elements:[{id:t,type:"pcn.PlaceChart",attributes:{name:F}},{id:_,type:"pcn.Link",attributes:{tokens:1}},{id:r,type:"pcn.PlaceChart",attributes:{name:"Model"+T}},{id:u,type:"pcn.PlaceChart",attributes:{name:"ViewModel"+T}},{id:h,type:"pcn.Link",attributes:{tokens:1}},{id:m,type:"pcn.Link",attributes:{tokens:1}},{id:a,type:"pcn.PlaceChart",attributes:{name:"In"+T}},{id:o,type:"pcn.PlaceChart",attributes:{name:"\\overline{In}"+T}},{id:s,type:"pcn.PlaceChart",attributes:{name:"Out"+T}},{id:l,type:"pcn.PlaceChart",attributes:{name:"\\overline{Out}"+T}},{id:p,type:"pcn.Transition",attributes:{name:"Compute"+T}},{id:g,type:"pcn.Link",attributes:{tokens:1}},{id:v,type:"pcn.Link",attributes:{tokens:1}},{id:y,type:"pcn.Link",attributes:{tokens:1}},{id:w,type:"pcn.Link",attributes:{tokens:1}},{id:c,type:"pcn.PlaceChart",attributes:{name:"View"+T}},{id:d,type:"pcn.PlaceChart",attributes:{name:"\\overline{View}"+T}},{id:b,type:"pcn.Link",attributes:{tokens:1}},{id:f,type:"pcn.Transition",attributes:{name:"Render"+T}},{id:x,type:"pcn.Link",attributes:{tokens:1}},{id:k,type:"pcn.Link",attributes:{tokens:1}},{id:C,type:"pcn.Link",attributes:{tokens:1}},{id:E,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Hierarchy",parent:i,child:t},{type:"pcn.Source",link:_,source:i},{type:"pcn.Target",link:_,target:t},{type:"pcn.Hierarchy",parent:t,child:r},{type:"pcn.Hierarchy",parent:t,child:u},{type:"pcn.Source",link:h,source:t},{type:"pcn.Target",link:h,target:r},{type:"pcn.Source",link:m,source:t},{type:"pcn.Target",link:m,target:u},{type:"pcn.Hierarchy",parent:r,child:a},{type:"pcn.Hierarchy",parent:r,child:o},{type:"pcn.Hierarchy",parent:r,child:s},{type:"pcn.Hierarchy",parent:r,child:l},{type:"pcn.Source",link:g,source:a},{type:"pcn.Target",link:g,target:p},{type:"pcn.Source",link:v,source:l},{type:"pcn.Target",link:v,target:p},{type:"pcn.Source",link:y,source:p},{type:"pcn.Target",link:y,target:o},{type:"pcn.Source",link:w,source:p},{type:"pcn.Target",link:w,target:s},{type:"pcn.Hierarchy",parent:u,child:c},{type:"pcn.Hierarchy",parent:u,child:d},{type:"pcn.Source",link:b,source:u},{type:"pcn.Target",link:b,target:d},{type:"pcn.Source",link:x,source:d},{type:"pcn.Target",link:x,target:f},{type:"pcn.Source",link:k,source:s},{type:"pcn.Target",link:k,target:f},{type:"pcn.Source",link:C,source:f},{type:"pcn.Target",link:C,target:c},{type:"pcn.Source",link:E,source:f},{type:"pcn.Target",link:E,target:s}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],194:[function(e,n,t){(function(e){"use strict";var n=[("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule((function(e,n){return n.isViewComponent(e)&&!n.isTargetOfDataFlow(e)}),(function(e,n){var t=n.toId(e),i=t+"-Model",r=t+"-In-p",a=t+"-Out-n",o=i+"->"+r,s=i+"->"+a;return{elements:[{id:o,type:"pcn.Link",attributes:{tokens:1}},{id:s,type:"pcn.Link",attributes:{tokens:1}}],relations:[{type:"pcn.Source",link:o,source:i},{type:"pcn.Target",link:o,target:r},{type:"pcn.Source",link:s,source:i},{type:"pcn.Target",link:s,target:a}]}}))];t.rules={model:[],element:n,relation:[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],195:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=("undefined"!=typeof window?window.almost:void 0!==n&&n.almost,[e("./1-Application").rules,e("./7-Base-ViewComponent").rules,e("./8-ViewComponent-Initialization-No-DataFlow").rules,e("./10-ViewComponent-Initialization-DataFlow").rules,e("./11-Action-Execution").rules,e("./12-Action-Activation").rules,e("./14-Nested-ViewContainer").rules,e("./15-NonXOR-Parent").rules,e("./16-XOR-Default-Child").rules,e("./17-XOR-NonDefault-Child").rules,e("./18-XOR-Landmark-Child").rules,e("./19-Selective-Initialization").rules,e("./20-Nested-Navigation").rules,e("./21-Nested-Navigation-From-ViewElement").rules,e("./22-Conditional-Navigation").rules,e("./23-Conditional-Navigation-From-ViewElement").rules,e("./24-Nested-Navigation-From-Action").rules,e("./25-Conditional-Navigation-From-Action").rules]);r={model:i.flatten(i.map(r,"model")),element:i.flatten(i.map(r,"element")),relation:i.flatten(i.map(r,"relation"))};t.semantics={rules:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./1-Application":177,"./10-ViewComponent-Initialization-DataFlow":178,"./11-Action-Execution":179,"./12-Action-Activation":180,"./14-Nested-ViewContainer":181,"./15-NonXOR-Parent":182,"./16-XOR-Default-Child":183,"./17-XOR-NonDefault-Child":184,"./18-XOR-Landmark-Child":185,"./19-Selective-Initialization":186,"./20-Nested-Navigation":187,"./21-Nested-Navigation-From-ViewElement":188,"./22-Conditional-Navigation":189,"./23-Conditional-Navigation-From-ViewElement":190,"./24-Nested-Navigation-From-Action":191,"./25-Conditional-Navigation-From-Action":192,"./7-Base-ViewComponent":193,"./8-ViewComponent-Initialization-No-DataFlow":194}],196:[function(e,n,t){(function(n){"use strict";var t="undefined"!=typeof window?window._:void 0!==n?n._:null,i="undefined"!=typeof window?window.$:void 0!==n?n.$:null,r=("undefined"!=typeof window?window.document:void 0!==n&&n.document,e("path"),"undefined"!=typeof window?window.joint:void 0!==n?n.joint:null),a="undefined"!=typeof window?window.Blob:void 0!==n?n.Blob:null,o="undefined"!=typeof window?window.saveAs:void 0!==n?n.saveAs:null,s="undefined"!=typeof window?window.FileReader:void 0!==n?n.FileReader:null,l=("undefined"!=typeof window?window.almost.plugins.joint:void 0!==n?n.almost.plugins.joint:null).createBoard,p=e("./ifml").ifml,u=e("./pcn").pcn,c=e("./ifml2pcn").ifml2pcn,d=e("./defaultlink").defaultLink,f=e("./isvalidparent").isValidParent,_=e("./statistics").StatisticsMenu,h=e("./modaledit").ModalEdit,m=e("./modalstatistics").ModalStatistics,g=e("./modaldb").ModalDB,v=e("./modalexamples").ModalExamples,y=e("./examples").examples,w=e("./ifml2code").ifml2code,b=e("./ifbrowser").IFBrowser,x=e("./ifclient").IFClient,k=("undefined"!=typeof window?window.almost:void 0!==n?n.almost:null).Exception;function C(e){return function(){return[new e]}}var E=new r.dia.Graph,F=t.values(p.elements).map(C).concat(t.values(p.nets)),T=l({el:"#ifml > .board",model:E,defaultLink:d,isValidParent:f}),M=(T.createElementsMenu({container:"#ifml > .sidebar > .list-group",template:'<div class="list-group-item almost-place-holder"></div>',builders:F,width:170}),new r.dia.Graph),S=l({el:"#statistics > .board",model:M,defaultLink:d,isValidParent:f,readonly:!0,magnetize:!1,resize:!1,rotate:!1,actions:[{marker:e("./statistics.svg"),checker:function(e){if(e.statistics){var n=e.statistics();return n&&n.length}},event:"statistics"}]}),L=_({ul:"#statistics > .sidebar > ul.statistics-color",model:M,position:"color",property:"accent",normalize:!0}),A=_({ul:"#statistics > .sidebar > ul.statistics-in",model:M,position:"in",property:"accent-in"}),j=_({ul:"#statistics > .sidebar > ul.statistics-out",model:M,position:"out",property:"accent-out"}),O=new r.dia.Graph,R=t.values(u.elements).map(C).concat(t.values(u.nets)),I=l({el:"#pcn > .board",model:O,defaultLink:d,isValidParent:f}),H=(I.createElementsMenu({container:"#pcn > .sidebar > .list-group",template:'<div class="list-group-item almost-place-holder"></div>',builders:R,width:170}),u.Simulator({model:O,paper:I.paper()})),D=b({el:"#web-server .ifbrowser",address:"#web-server .ifbrowser-address",back:"#web-server .ifbrowser-back",forward:"#web-server .ifbrowser-forward",repeat:"#web-server .ifbrowser-repeat",go:"#web-server .ifbrowser-go",BASE_PATH:BASE_PATH+"web-server/"}),V=x({el:"#web-client .ifclient",BASE_PATH:BASE_PATH+"web-client/"}),z=x({el:"#mobile .ifmobile-wrapper",BASE_PATH:BASE_PATH+"mobile/",scrolling:"no"});T.zoomE(),S.zoomE(),I.zoomE(),T.on("cell:edit cell:pointerdblclick link:options",(function(e){h({cell:e.model,board:T})})),S.on("cell:statistics cell:pointerdblclick link:options",(function(e){m({cell:e.model})})),I.on("cell:edit cell:pointerdblclick",(function(e){h({cell:e.model,board:I})}));var N=new Date;i("#ifml > .sidebar .png-download").click((function(){return T.download(),!1})),i("#ifml > .sidebar .model-download").click((function(){var e=p.toJSON(E);return e.statistics={session:{started_at:N,ended_at:new Date}},o(new a([JSON.stringify(e)],{type:"application/json"}),"ifml.json"),!1})),i("#ifml > input[type=file]").change((function(){var e=new s;e.onload=function(e){E.clear(),T.clearHistory();try{var n=new Date;E.addCells(p.fromJSON(JSON.parse(e.target.result))),T.clearHistory(),i.notify({message:"File loaded in "+Math.floor((new Date-n)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"}),N=new Date}catch(e){return T.clearHistory(),void i.notify({message:"Invalid input file!"},{allow_dismiss:!0,type:"danger"})}T.zoomE()},e.onerror=function(){i.notify({message:"Error loading file!"},{allow_dismiss:!0,type:"danger"})},e.readAsText(this.files[0]),this.value=""})),i("#ifml > .sidebar .model-load").click((function(){return i("#ifml > input[type=file]").click(),!1})),i("#ifml > .sidebar .modal-example").click((function(){return v({examples:y,load:function(e){i.getJSON(e.url,(function(e){E.clear(),T.clearHistory();try{var n=new Date;E.addCells(p.fromJSON(e)),T.clearHistory(),i.notify({message:"File loaded in "+Math.floor((new Date-n)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"}),N=new Date}catch(e){return E.clear(),T.clearHistory(),void i.notify({message:"Invalid input file!"},{allow_dismiss:!0,type:"danger"})}T.zoomE()}))}}),!1})).click(),i("#statistics > input[type=file]").change((function(){var e=new s,n=p.toJSON(E);e.onload=function(e){M.clear(),L.clear(),A.clear(),j.clear();try{var t=new Date,r=JSON.parse(e.target.result);n.elements.forEach((function(e){var n=r.analytics[e.id];n&&(e.metadata.statistics=n)})),M.addCells(p.fromJSON(n)),L.reload(),A.reload(),j.reload(),i.notify({message:"File loaded in "+Math.floor((new Date-t)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"}),N=new Date}catch(e){return M.clear(),L.clear(),A.clear(),j.clear(),void i.notify({message:"Invalid input file!"},{allow_dismiss:!0,type:"danger"})}S.zoomE()},e.onerror=function(){i.notify({message:"Error loading file!"},{allow_dismiss:!0,type:"danger"})},e.readAsText(this.files[0]),this.value=""})),i("#statistics > .sidebar .model-load").click((function(){return i("#statistics > input[type=file]").click(),!1})),i("#pcn > .sidebar .png-download").click((function(){return I.download(),!1})),i("#pcn > .sidebar .model-generate").click((function(){var e=new Date;return H.stop(),O.clear(),I.clearHistory(),O.addCells(u.fromJSON(c.mobile(p.toJSON(E)))),I.zoomE(),I.clearHistory(),i.notify({message:"Convertion completed in "+Math.floor((new Date-e)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"}),!1})),i("#pcn-simulate").click((function(){i(this).is(":checked")?H.start():H.stop()})),H.on("stop",(function(){i("#pcn-simulate").prop("checked",!1)})),i("#web-server .zip-download").click((function(){try{var e=new Date;o(w.server(p.toJSON(E)).generate({type:"blob"}),"webexample.zip"),i.notify({message:"Convertion completed in "+Math.floor((new Date-e)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"})}catch(e){e instanceof k?i.notify({title:"<strong>Convertion Failed</strong><br>",message:e.message.replace(/\n/g,"<br>")},{allow_dismiss:!0,type:"danger"}):i.notify({title:"Convertion Failed."},{allow_dismiss:!0,type:"danger"})}return!1})),i("#web-server .zip-try").click((function(){try{var e=new Date;D.start(w.server(p.toJSON(E)).generate({type:"string"})),D.reload(),i.notify({message:"Convertion completed in "+Math.floor((new Date-e)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"})}catch(e){e instanceof k?i.notify({title:"<strong>Convertion Failed</strong><br>",message:e.message.replace(/\n/g,"<br>")},{allow_dismiss:!0,type:"danger"}):i.notify({title:"Convertion Failed."},{allow_dismiss:!0,type:"danger"})}return!1})),i("#web-client .zip-download").click((function(){try{var e=new Date;o(w.client(p.toJSON(E)).generate({type:"blob"}),"clientexample.zip"),i.notify({message:"Convertion completed in "+Math.floor((new Date-e)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"})}catch(e){e instanceof k?i.notify({title:"<strong>Convertion Failed</strong><br>",message:e.message.replace(/\n/g,"<br>")},{allow_dismiss:!0,type:"danger"}):i.notify({title:"Convertion Failed."},{allow_dismiss:!0,type:"danger"})}return!1})),i("#web-client .zip-try").click((function(){try{var e=new Date;V.start(w.client(p.toJSON(E)).generate({type:"string"})),i.notify({message:"Convertion completed in "+Math.floor((new Date-e)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"})}catch(e){e instanceof k?i.notify({title:"<strong>Convertion Failed</strong><br>",message:e.message.replace(/\n/g,"<br>")},{allow_dismiss:!0,type:"danger"}):i.notify({title:"Convertion Failed."},{allow_dismiss:!0,type:"danger"})}return!1})),i("#mobile #cordova .zip-download").click((function(){try{var e=new Date;o(w.mobile(p.toJSON(E)).generate({type:"blob"}),"mobileexample.zip"),i.notify({message:"Convertion completed in "+Math.floor((new Date-e)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"})}catch(e){e instanceof k?i.notify({title:"<strong>Convertion Failed</strong><br>",message:e.message.replace(/\n/g,"<br>")},{allow_dismiss:!0,type:"danger"}):i.notify({title:"Convertion Failed."},{allow_dismiss:!0,type:"danger"})}return!1})),i("#mobile #flutter .zip-download").click((function(){try{var e=new Date;o(w.flutter(p.toJSON(E)).generate({type:"blob"}),"flutterexample.zip"),i.notify({message:"Convertion completed in "+Math.floor((new Date-e)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"})}catch(e){e instanceof k?i.notify({title:"<strong>Convertion Failed</strong><br>",message:e.message.replace(/\n/g,"<br>")},{allow_dismiss:!0,type:"danger"}):i.notify({title:"Convertion Failed."},{allow_dismiss:!0,type:"danger"})}return!1})),i("#mobile .zip-try").click((function(){try{var e=new Date;z.start(w.mobile(p.toJSON(E)).generate({type:"string"})),i.notify({message:"Convertion completed in "+Math.floor((new Date-e)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"})}catch(e){e instanceof k?i.notify({title:"<strong>Convertion Failed</strong><br>",message:e.message.replace(/\n/g,"<br>")},{allow_dismiss:!0,type:"danger"}):i.notify({title:"Convertion Failed."},{allow_dismiss:!0,type:"danger"})}return!1})),i("#web-server .edit-db").click((function(){return g({emulator:D}),!1})),i("#web-client .edit-db").click((function(){return g({emulator:V}),!1})),i("#mobile .edit-db").click((function(){return g({emulator:z}),!1})),i("#pcn").removeClass("active")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./defaultlink":1,"./examples":2,"./ifbrowser":3,"./ifclient":4,"./ifml":22,"./ifml2code":91,"./ifml2pcn":168,"./isvalidparent":197,"./modaldb":198,"./modaledit":200,"./modalexamples":202,"./modalstatistics":204,"./pcn":221,"./statistics":230,"./statistics.svg":231,path:285}],197:[function(e,n,t){(function(e){"use strict";var n=("undefined"!=typeof window?window.almost.plugins.joint:void 0!==e?e.almost.plugins.joint:null).utils;t.isValidParent=function(e,t){var i=e&&e.model,r=t&&t.model;return r?i.fixedParent&&i.get("parent")?i.get("parent")===r.id:-1!==(i.containers||[]).indexOf(r.get("type"))&&(!i.fullyContained||n.isFullyContained(i,r)):!i.requireEmbedding}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],198:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.$:void 0!==n?n.$:null,a="undefined"!=typeof window?window.ko:void 0!==n?n.ko:null,o="undefined"!=typeof window?window.Blob:void 0!==n?n.Blob:null,s="undefined"!=typeof window?window.FileReader:void 0!==n?n.FileReader:null,l="undefined"!=typeof window?window.saveAs:void 0!==n?n.saveAs:null,p="undefined"!=typeof window?window.document:void 0!==n?n.document:null;function u(e){var n=this;e=String(e),n.multiline=a.observable(e.split("\n").length>1),n.value=e,n.expand=function(){n.multiline(!0)}}function c(e,n){var t=this;t._id=n._id,e.forEach((function(e){t[e]=new u(n[e])})),t.toJSON=function(i){var r={};return!1!==(i=i||{}).internalId&&(r._id=n._id),e.forEach((function(e){r[e]=t[e].value})),r}}function d(e){var n=this,t=e.emulator;n.name=e.name,n.loaded=a.observable(!1),n.documents=a.observableArray(),n.fields=a.observableArray(),n.load=function(){t.dumpCollection(n.name,(function(e,t){if(!e){var i=Object.keys(t[0]);i.splice(i.indexOf("_id"),1),n.fields(i),n.documents(t.map((function(e){return new c(i,e)}))),n.loaded(!0)}}))},n.save=function(){n.loaded()&&t.restoreCollection(n.name,n.documents().map((function(e){return e.toJSON()})))},n.remove=function(){n.documents.splice(n.documents.indexOf(this),1)},n.add=function(){var e=n.documents()[n.documents().length-1]._id+1;n.documents.push(new c(n.fields(),{_id:e,id:e.toString()}))},n.download=function(){var e=n.documents().map((function(e){return e.toJSON({internalId:!1})}));l(new o([JSON.stringify(e)],{type:"application/json"}),n.name+".json")},n.upload=function(e){var t=new s;t.onload=function(e){try{var t,a=new Date,o=JSON.parse(e.target.result);if(!i.isArray(o))throw new Error("Input should be an array");t=n.fields(),n.documents(i.map(o,(function(e,n){var i={_id:n};return t.forEach((function(n){var t=e[n];void 0===t&&(t=""),i[n]=t})),new c(t,i)}))),r.notify({message:"File loaded in "+Math.floor((new Date-a)/10)/100+" seconds!"},{allow_dismiss:!0,type:"success"})}catch(e){r.notify({message:"Invalid input file!"},{allow_dismiss:!0,type:"danger"})}},t.onerror=function(){r.notify({message:"Error loading file!"},{allow_dismiss:!0,type:"danger"})},t.readAsText(e)}}function f(e){var n=this,t=e.emulator;n.current=a.observable(),n.collections=a.observableArray(),n.setCurrent=function(){n.current(this)},n.save=function(){n.collections().forEach((function(e){e.save()}))},n.saveAndReload=function(){n.save(),t.reload()},n.saveAndHotReload=function(){n.save(),t.hotReload()},t.getCollectionNames((function(e,i){e||(n.collections(i.map((function(e){return new d({name:e,emulator:t})}))),n.current(n.collections()[0]))}))}t.ModalDB=function n(t){if(!(this instanceof n))return new n(t);if("object"!=typeof(t=t||{}).emulator)throw new Error("Missing emulator");var i=t.emulator,o=r(e("./modal.html"));r(p.body).append(o),a.applyBindings(new f({emulator:i}),o.find(".modal-content")[0]),o.modal("show").on("hidden.bs.modal",(function(){o.remove()}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./modal.html":199}],199:[function(e,n,t){n.exports='<div class="modal fade bd-example-modal-xl" role="dialog">\n    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title">Edit DB</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n            </div>\n            <div class="modal-body">\n                <ul class="nav nav-tabs" data-bind="foreach: collections">\n                    <li class="nav-item" data-bind="css: { active: $data === $parent.current() }">\n                        <a href="#" data-bind="click: $parent.setCurrent">\n                            <span data-bind="text: name">\n                        </a>\n                    </li>\n                </ul>\n                <div class="db-table" data-bind="with: current">\n                    <button class="btn btn-primary col-xs-3" data-bind="click: load">\n                        <span data-bind="ifnot: loaded">load</span>\n                        <span data-bind="if: loaded">reset</span>\n                    </button>\n                    <table class="table table-striped">\n                        <thead>\n                            <tr>\n                                <th></th>\n                                \x3c!-- ko foreach: fields --\x3e\n                                <th data-bind="text: $data"></th>\n                                \x3c!-- /ko --\x3e\n                            </tr>\n                        </thead>\n                        <tbody>\n                            \x3c!-- ko foreach: {data: documents, as: \'document\'} --\x3e\n                            <tr>\n                                <td data-bind="if: $parent.documents().length > 1">\n                                    <button class="btn btn-danger" data-bind="click: $parent.remove">Remove</button>\n                                </td>\n                                \x3c!-- ko foreach: {data: $parent.fields, as: \'field\'} --\x3e\n                                <td data-bind="with: document[field]">\n                                    <span data-bind="ifnot: multiline">\n                                        <div class="input-group">\n                                          <input type="text" class="form-control" data-bind="value: value">\n                                          <span class="input-group-btn">\n                                              <button class="btn btn-default" data-bind="click: expand">Expand</button>\n                                          </span>\n                                        </div>\n                                    </span>\n                                    <span data-bind="if: multiline">\n                                        <textarea class="form-control" rows="3" data-bind="value: value"></textarea>\n                                    </span>\n                                </td>\n                                \x3c!-- /ko --\x3e\n                            </tr>\n                            \x3c!-- /ko --\x3e\n                            <tr data-bind="ifnot: loaded">\n                                <td data-bind="attr: {colspan: fields().length + 1}">Collection not loaded.</td>\n                            </tr>\n                            <tr data-bind="if: loaded">\n                                <td data-bind="attr: {colspan: fields().length + 1}">\n                                    <button class="btn btn-success" data-bind="click: add">\n                                        Add\n                                    </button>\n                                    <button class="btn btn-default" data-bind="click: download">\n                                        Download\n                                    </button>\n                                    <label class="btn btn-default btn-file">\n                                        Upload\n                                        <input type="file" data-bind="event: {change: function() { upload($element.files[0]); $element.value = \'\'; }}" style="display: none">\n                                    </label>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <div class="btn-group dropup">\n                    <button type="button" class="btn btn-default" data-dismiss="modal" data-bind="click: save">Save</button>\n                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                        <span class="caret"></span>\n                        <span class="sr-only">Toggle Dropdown</span>\n                    </button>\n                    <ul class="dropdown-menu">\n                        <li><a href="#" data-dismiss="modal" data-bind="click: saveAndReload">Save &amp; Reload</a></li>\n                        <li><a href="#" data-dismiss="modal" data-bind="click: saveAndHotReload">Save &amp; Hot-Reload</a></li>\n                    </ul>\n                </div>\n                <button class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},{}],200:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.$:void 0!==n?n.$:null,a="undefined"!=typeof window?window.ko:void 0!==n?n.ko:null,o="undefined"!=typeof window?window.document:void 0!==n?n.document:null,s=("undefined"!=typeof window?window.almost.plugins.joint:void 0!==n?n.almost.plugins.joint:null).utils;function l(e,n){var t={name:n.name,type:n.type,property:n.property,value:a.observable(e.prop(n.property))};return t.value.subscribe((function(t){e.prop(n.property,t)})),t}a.bindingHandlers.executeOnEnter={init:function(e,n,t,a){i.noop(n);var o=t();r(e).keypress((function(e){return 13!==(e.which||e.keyCode)||(o.executeOnEnter.call(a),!1)}))}};var p=l,u=l;function c(e,n){var t=this,r=e.cell;t.id=a.observable(r.id),t.id_tentative=a.observable(r.id),t.id_duplicated=a.observable(!1),t.id_tentative.subscribe((function(e){e=e.toLowerCase().replace(/[^0-9a-z\-]/gi,""),t.id_tentative(e),e.length&&s.changeId(r,e)?(t.id(e),t.id_duplicated(!1)):t.id_duplicated(!0)})),t.fields=i.map(e.fields,(function(e){switch(e.type){case"number":return function(e,n){var t=l(e,n);return t.min=n.min,t.max=n.max,t.text=a.pureComputed({read:t.value,write:function(e){if(""!==e&&"-"!==e){var i=t.value(),r=n.integer&&parseInt(e,10)||parseFloat(e,10)||0,a=r;"number"==typeof n.min&&(a=Math.max(n.min,a)),"number"==typeof n.max&&(a=Math.min(n.max,a)),i!==a?t.value(a):r!==a&&t.value.notifySubscribers(a)}}}).extend({notify:"always"}),t}(r,e);case"string":return p(r,e);case"stringset":return function(e,n){var t={name:n.name,type:n.type,strings:a.observableArray(i(e.get(n.property)||[]).sort().uniq(!0).value()),value:a.observable(""),add:function(){t.value().trim().length&&(t.strings(i(t.strings()).concat(t.value().trim()).sort().uniq(!0).value()),t.value(""))},remove:function(){t.strings.remove(this)}};return t.strings.subscribe((function(t){e.prop(n.property,t.slice())})),t}(r,e);case"boolean":return u(r,e);case"enum":return function(e,n){var t=l(e,n);return t.values=n.values,t}(r,e);case"booleanset":return function(e,n){return{name:n.name,type:n.type,items:n.items.map((function(n){return u(e,n)}))}}(r,e);case"bindings":return function(e,n){var t={name:n.name,type:n.type,bindings:a.observableArray((e.get(n.property)||[]).slice()),output:a.observable(),input:a.observable(),addBinding:function(){t.output()&&t.input()&&t.bindings.push({input:t.input(),output:t.output()})},removeBinding:function(){t.bindings.remove(this)}};return t.outputs=e.getSourceElement().outputs&&e.getSourceElement().outputs()||e.getSourceElement().getAncestors()[0].outputs&&e.getSourceElement().getAncestors()[0].outputs()||[],t.inputs=a.computed((function(){return i(e.getTargetElement().inputs()).difference(i.map(t.bindings(),(function(e){return e.input}))).value()})),t.bindings.subscribe((function(t){e.prop(n.property,t.slice())})),t}(r,e);case"elementslist":return function(e,n){var t=e.get(n.property),r=i.reject(t,n.filter),o={name:n.name,type:n.type,children:a.observableArray(i.chain(t).filter(n.filter).map((function(e){return{id:e,display:n.display(e)}})).value()),top:function(){var e=o.children.indexOf(this);e>0&&(o.children.splice(e,1),o.children.unshift(this))},up:function(){var e=o.children.indexOf(this);e>0&&o.children.splice(e-1,2,this,o.children()[e-1])},down:function(){var e=o.children.indexOf(this);e<o.children().length-1&&o.children.splice(e,2,o.children()[e+1],this)},bottom:function(){var e=o.children.indexOf(this);e<o.children().length-1&&(o.children.splice(e,1),o.children.push(this))}};return o.children.subscribe((function(t){e.prop(n.property,i.chain(t).map("id").concat(r).value())})),o}(r,e)}})),this.close=n}t.ModalEdit=function n(t){if(!(this instanceof n))return new n(t);if("object"!=typeof(t=t||{}).cell)throw new Error("cell should be provided");if("object"!=typeof t.board)throw new Error("board should be provided");var i=t.cell,s=t.board,l=i.editable&&i.editable(),p=r(e("./modal.html"));l&&(s.startUndoSequence(),r(o.body).append(p),a.applyBindings(new c({cell:i,fields:l},(function(){p.modal("hide")})),p.find(".modal-content")[0]),p.modal("show").on("hidden.bs.modal",(function(){p.remove(),s.stopUndoSequence()})))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./modal.html":201}],201:[function(e,n,t){n.exports='<div class="modal fade bd-example-modal-xl" role="dialog">\n    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title">Edit Element <small>(id: <span class="selectable" data-bind="text: id"></span>)</small></h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n            </div>\n            <div class="modal-body">\n                <div class="form-group row" data-bind="css: {\'has-error\': id_duplicated}">\n                    <label class="col-sm-2 col-form-label text-right" for="input-id">Id</label>\n                    <div class="col-sm-10">\n                        <input class="form-control" type="text" id="input-id" data-bind="value: id_tentative, executeOnEnter: $root.close">\n                    </div>\n                </div>\n                <div data-bind="foreach: fields">\n                    <div class="form-group row" data-bind="if: type === \'string\', visible: type === \'string\'">\n                        <label class="col-sm-2 col-form-label text-right" data-bind="text: name, attr: {for: \'input-field\' + property}"></label>\n                        <div class="col-sm-10">\n                            <input class="form-control" type="text" data-bind="textInput: value, executeOnEnter: $root.close, attr: {id: \'input-field\' + property}">\n                        </div>\n                    </div>\n                    <div class="form-group row" data-bind="if: type === \'number\', visible: type === \'number\'">\n                        <label class="col-sm-2 col-form-label text-right" data-bind="text: name, attr: {for: \'input-field\' + property}"></label>\n                        <div class="col-sm-10">\n                            <input class="form-control" type="number" data-bind="textInput: text, executeOnEnter: $root.close, attr: {id: \'input-field\' + property, min: min, max: max}">\n                        </div>\n                    </div>\n                    <div class="checkbox" data-bind="if: type === \'boolean\', visible: type === \'boolean\'">\n                        <label>\n                            <input type="checkbox" data-bind="checked: value">\n                            <span data-bind="text: name"></span>\n                        </label>\n                    </div>\n                    <div class="form-group row" data-bind="if: type === \'enum\', visible: type === \'enum\'">\n                        <label class="col-sm-2 col-form-label text-right" data-bind="text: name, attr: {for: \'input-field\' + property}"></label>\n                        <div class="col-sm-10">\n                            <select class="form-control" data-bind="options: values, optionsText: \'name\', optionsValue: \'value\', value: value, attr: {id: \'input-field\' + property}"></select>\n                        </div>\n                    </div>\n                    <div class="form-group row" data-bind="if: type === \'booleanset\', visible: type === \'booleanset\'">\n                        <label class="col-sm-2 col-form-label text-right" data-bind="text: name"></label>\n                        <div class="col-sm-10" data-bind="foreach: items">\n                            <label class="checkbox-inline">\n                                <input type="checkbox" data-bind="checked: value, attr: {id: \'input-field\' + property}">\n                                <span data-bind="text: name"></span>\n                            </label>\n                        </div>\n                    </div>\n                    <div class="form-group row" data-bind="if: type === \'stringset\', visible: type === \'stringset\'">\n                        <label class="col-sm-2 col-form-label text-right" data-bind="text: name"></label>\n                        <div class="col-sm-10">\n                            <table class="table table-condensed table-stripped">\n                                <thead>\n                                    <th>#</th>\n                                    <th>value</th>\n                                    <th></th>\n                                </thead>\n                                <tbody data-bind="foreach: strings">\n                                    <tr>\n                                        <th scopre="row" data-bind="text: $index"></th>\n                                        <td data-bind="text: $data"></td>\n                                        <td>\n                                            <button class="btn btn-secondary" data-bind="click: $parent.remove">remove</button>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                                <tfoot>\n                                    <th></th>\n                                    <th class="form-group">\n                                        <input class="form-control" type="text" data-bind="textInput: value, executeOnEnter: add">\n                                    </th>\n                                    <th>\n                                        <button class="btn btn-secondary" data-bind="click: add">add</button>\n                                    </th>\n                                </tfoot>\n                            </table>\n                        </div>\n                    </div>\n                    <div class="form-group row" data-bind="if: type === \'bindings\', visible: type === \'bindings\'">\n                        <label class="col-sm-2 col-form-label text-right" data-bind="text: name"></label>\n                        <div class="cols-sm-10 col-sm-10">\n                            <table class="table table-condensed table-stripped">\n                                <thead>\n                                    <th>#</th>\n                                    <th>output</th>\n                                    <th>input</th>\n                                    <th></th>\n                                </thead>\n                                <tbody data-bind="foreach: bindings">\n                                    <tr>\n                                        <th scopre="row" data-bind="text: $index"></th>\n                                        <td data-bind="text: output"></td>\n                                        <td data-bind="text: input"></td>\n                                        <td>\n                                            <button class="btn btn-secondary" data-bind="click: $parent.removeBinding">remove</button>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                                <tfoot>\n                                    <th></th>\n                                    <th class="form-group">\n                                        <select class="form-control" data-bind="options: outputs, value: output"></select>\n                                    </th>\n                                    <th class="form-group">\n                                        <select class="form-control" data-bind="options: inputs, value: input"></select>\n                                    </th>\n                                    <th>\n                                        <button class="btn btn-secondary" data-bind="click: addBinding">add</button>\n                                    </th>\n                                </tfoot>\n                            </table>\n                        </div>\n                    </div>\n                    <div class="form-group row" data-bind="if: type === \'elementslist\', visible: type === \'elementslist\'">\n                        <label class="col-sm-2 col-form-label text-right" data-bind="text: name"></label>\n                        <div class="cols-sm-10 col-sm-10">\n                            <table class="table table-condensed table-stripped">\n                                <tbody data-bind="foreach: children">\n                                    <tr>\n                                        <th scopre="row" data-bind="text: $index"></th>\n                                        <td data-bind="text: display"></td>\n                                        <td class="btn-group">\n                                            <button class="btn btn-secondary" data-bind="click: $parent.top, disable: $index() === 0">⭰</button>\n                                            <button class="btn btn-secondary" data-bind="click: $parent.up, disable: $index() === 0">←</button>\n                                            <button class="btn btn-secondary" data-bind="click: $parent.down, disable: $index() + 1 === $parent.children().length">→</button>\n                                            <button class="btn btn-secondary" data-bind="click: $parent.bottom, disable: $index() + 1 === $parent.children().length">⭲</button>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},{}],202:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.$:void 0!==n?n.$:null,a="undefined"!=typeof window?window.ko:void 0!==n?n.ko:null,o="undefined"!=typeof window?window.document:void 0!==n?n.document:null;function s(e,n){var t=this;t.examples=a.observableArray(e.examples),t.load=function(){e.load(this),t.close()},t.close=n}a.bindingHandlers.bootstrapCarousel={init:function(e){r(e).carousel()}},t.ModalExamples=function n(t){if(!(this instanceof n))return new n(t);if(void 0===(t=t||{}).examples)throw new Error("missing examples option");if(!i.isArray(t.examples))throw new Error("examples should be an array");if(void 0===t.load)throw new Error("missing load option");if("function"!=typeof t.load)throw new Error("load should be a function");var l=t.examples,p=t.load,u=r(e("./modal.html"));r(o.body).append(u),a.applyBindings(new s({examples:l,load:p},(function(){u.modal("hide")})),u.find(".modal-content")[0]),u.modal("show").on("hidden.bs.modal",(function(){u.remove()}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./modal.html":203}],203:[function(e,n,t){n.exports='<div class="modal fade bd-example-modal-lg" role="dialog">\n    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title">Load Examples</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n            </div>\n            <div class="modal-body">\n                <div id="examples-carousel" class="carousel slide" data-ride="carousel" data-bind="carousel: examples">\n                    \x3c!-- Indicators --\x3e\n                    <ol class="carousel-indicators" data-bind="foreach: examples">\n                        <li data-target="#examples-carousel" data-bind="attr: {\'data-slide-to\': $index}, css: {active: $index() === 0}"></li>\n                    </ol>\n\n                    \x3c!-- Wrapper for slides --\x3e\n                    <div class="carousel-inner" data-bind="foreach: examples">\n                        <div class="carousel-item ifml-image" data-bind="css: {active: $index() === 0}">\n                            <img class="d-block w-100" data-bind="attr: {src: image, alt: title}">\n                            <div class="carousel-caption">\n                                <button class="btn btn-primary" data-bind="click: $parent.load">Load <span data-bind="text: title"></span></button>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Left and right controls --\x3e\n                    <a class="carousel-control-prev" href="#examples-carousel" role="button" data-slide="prev">\n                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n                        <span class="sr-only">Previous</span>\n                    </a>\n                    <a class="carousel-control-next" href="#examples-carousel" role="button" data-slide="next">\n                        <span class="carousel-control-next-icon" aria-hidden="true"></span>\n                        <span class="sr-only">Next</span>\n                    </a>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <a href="#!" class="btn btn-default" data-dismiss="modal">Close</a>\n            </div>\n        </div>\n    </div>\n</div>\n'},{}],204:[function(e,n,t){(function(n){"use strict";"undefined"!=typeof window?window._:void 0!==n&&n._;var i="undefined"!=typeof window?window.$:void 0!==n?n.$:null,r="undefined"!=typeof window?window.ko:void 0!==n?n.ko:null,a="undefined"!=typeof window?window.document:void 0!==n?n.document:null;function o(e,n){this.statistics=e.statistics,this.close=n}t.ModalStatistics=function n(t){if(!(this instanceof n))return new n(t);if("object"!=typeof(t=t||{}).cell)throw new Error("At least element or link should be provided");var s=t.cell,l=s.statistics&&s.statistics(),p=i(e("./modal.html"));l&&(i(a.body).append(p),r.applyBindings(new o({statistics:l},(function(){p.modal("hide")})),p.find(".modal-content")[0]),p.modal("show").on("hidden.bs.modal",(function(){p.remove()})))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./modal.html":205}],205:[function(e,n,t){n.exports='<div class="modal fade" role="dialog">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">Element Statistics</h4>\n            </div>\n            <div class="modal-body">\n                <div class="form-horizontal" data-bind="foreach: statistics">\n                    <div class="form-group" data-bind="if: type === \'string\', visible: type === \'string\'">\n                        <strong class="col-sm-2" data-bind="text: name"></strong>\n                        <div class="col-sm-10" data-bind="text: value"></div>\n                    </div>\n                    <div class="form-group" data-bind="if: type === \'number\', visible: type === \'number\'">\n                        <strong class="col-sm-2" data-bind="text: name"></strong>\n                        <div class="col-sm-10" data-bind="text: value"></div>\n                    </div>\n                    <div class="form-group" data-bind="if: type === \'percentage\', visible: type === \'percentage\'">\n                        <strong class="col-sm-2" data-bind="text: name"></strong>\n                        <div class="col-sm-10" data-bind="text: value * 100 + \'%\'"></div>\n                    </div>\n                    <div class="form-group" data-bind="if: type === \'stringlist\', visible: type === \'stringlist\'">\n                        <strong class="col-sm-2" data-bind="text: name"></strong>\n                        <div class="col-sm-10">\n                            <table class="table table-condensed table-stripped">\n                                <thead>\n                                    <th>#</th>\n                                    <th>value</th>\n                                    <th></th>\n                                </thead>\n                                <tbody data-bind="foreach: value">\n                                    <tr>\n                                        <th scopre="row" data-bind="text: $index"></th>\n                                        <td data-bind="text: $data"></td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},{}],206:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r=e("./strtotext").strToText;function a(e){switch(e){case"top":return{"ref-y":-1,"ref-dy":null,"y-alignment":-.99};case"bottom":return{"ref-y":null,"ref-dy":1,"y-alignment":0};case"middle":return{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"};default:return{"ref-y":null,"ref-dy":1,"y-alignment":"middle"}}}function o(e){switch(e){case"left-outer":return{"ref-x":0,"ref-dx":null,"x-alignment":-.99};case"left":return{"ref-x":0,"ref-dx":null,"x-alignment":0};case"right":return{"ref-x":null,"ref-dx":0,"x-alignment":-.99};case"right-outer":return{"ref-x":null,"ref-dx":0,"x-alignment":0};case"middle":default:return{"ref-x":.5,"ref-dx":null,"x-alignment":"middle"}}}t.Base=i.shapes.basic.Generic.extend({defaults:i.util.deepSupplement({name:{text:"",vertical:"bottom",horizontal:"middle"}},i.shapes.basic.Generic.prototype.defaults),minsize:{width:0,height:0},editable:function(){return[{property:"name/text",name:"Name",type:"string"},{property:"name/vertical",name:"Position Vertical",type:"enum",values:[{value:"top",name:"Top"},{value:"middle",name:"Middle"},{value:"bottom",name:"Bottom"}]},{property:"name/horizontal",name:"Position Horizontal",type:"enum",values:[{value:"left-outer",name:"Outer Left"},{value:"left",name:"Left"},{value:"middle",name:"Middle"},{value:"right",name:"Right"},{value:"right-outer",name:"Outer Right"}]},{name:"Init Direction",type:"booleanset",items:[{property:"borders/top",name:"Top"},{property:"borders/left",name:"Left"},{property:"borders/bottom",name:"Bottom"},{property:"borders/right",name:"Right"}]}]},initialize:function(){this.on("change:size",this.fixSize,this),this.on("change:name",this.updateName,this),i.shapes.basic.Generic.prototype.initialize.apply(this,arguments),this.fixSize(),this.updateName()},fixSize:function(){var e=this.get("size"),n=this.minsize;(e.width<n.width||e.height<n.height)&&this.resize(Math.max(e.width,n.width),Math.max(e.height,n.height))},updateName:function(){this.attr({".name":i.util.deepSupplement(r(this.get("name").text),a(this.get("name").vertical),o(this.get("name").horizontal))})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./strtotext":210}],207:[function(e,n,t){"use strict";t.elements={PlaceChart:e("./placechart").PlaceChart,Transition:e("./transition").Transition}},{"./placechart":208,"./transition":211}],208:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,a=e("../base").Base;t.PlaceChart=a.extend({markup:e("./markup.svg"),defaults:r.util.deepSupplement({type:"pcn.PlaceChart",size:{width:40,height:40},tokens:0,attrs:{".":{marker:"passive"},".pcn-placechart-reference-rect":{"follow-scale":"auto"},".pcn-placechart-background-rect":{"ref-x":0,"ref-y":0,"ref-width":1,"ref-height":1,ref:".pcn-placechart-reference-rect"},".pcn-placechart-magnet-rect":{magnet:!0,visibility:"hidden","ref-x":0,"ref-y":0,"ref-width":1,"ref-height":1,ref:".pcn-placechart-reference-rect"},".tokens":{"ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle",ref:".pcn-placechart-reference-rect"},".name":{ref:".pcn-placechart-reference-rect"}}},a.prototype.defaults),minsize:{width:40,height:40},padding:{top:10,right:10,bottom:10,left:10},resizable:!0,isContraint:!0,fullyContained:!0,containers:["pcn.PlaceChart"],initialize:function(){a.prototype.initialize.apply(this,arguments),this._tokensChanged(),this.on("change:tokens",this._tokensChanged,this)},_tokensChanged:function(){var e=this.get("tokens")||0;this.attr({".tokens":{text:e>0?e:""}})},editable:function(){return i(a.prototype.editable()).concat([{property:"tokens",name:"Tokens",type:"number",integer:!0,min:0}]).value()},magnetize:function(){this.attr({".pcn-placechart-magnet-rect":{visibility:"visible"}})},demagnetize:function(){this.attr({".pcn-placechart-magnet-rect":{visibility:"hidden"}})},linkConnectionPoint:function(e,n,t,i,a,o,s){return function(e,n){var t=Math.abs(e.origin().x-n.x)<20,i=Math.abs(e.origin().y-n.y)<20,a=Math.abs(e.corner().x-n.x)<20,o=Math.abs(e.corner().y-n.y)<20;if(i){if(t)return r.g.ellipse(r.g.point(e.origin().x+20,e.origin().y+20),20,20).intersectionWithLineFromCenterToPoint(n);if(a)return r.g.ellipse(r.g.point(e.corner().x-20,e.origin().y+20),20,20).intersectionWithLineFromCenterToPoint(n)}else if(o){if(t)return r.g.ellipse(r.g.point(e.origin().x+20,e.corner().y-20),20,20).intersectionWithLineFromCenterToPoint(n);if(a)return r.g.ellipse(r.g.point(e.corner().x-20,e.corner().y-20),20,20).intersectionWithLineFromCenterToPoint(n)}return n}(this.getBBox({useModelGeometry:!0}),s())}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../base":206,"./markup.svg":209}],209:[function(e,n,t){n.exports='<g class="pcn-element">\n    <g class="scalable">\n        <rect class="pcn-placechart-reference-rect" width="60" height="60" fill="transparent"/>\n    </g>\n    <rect class="pcn-placechart-background-rect" fill="white" stroke="black" stroke-width="0.5" rx="20" ry="20"/>\n    <rect class="pcn-placechart-magnet-rect" fill="white" stroke="red" stroke-width="0.5" rx="20" ry="20" style=\'cursor: cell\'/>\n    <text class="tokens" fill="black" font-family="monospace" font-size="14"/>\n    <text class="name" fill="black" font-family="monospace" font-size="11" style="pointer-events: none"/>\n</g>\n'},{}],210:[function(e,n,t){"use strict";function i(e){return e.map((function(e){return"string"==typeof e?e:i(e.tree)})).join("")}function r(e){switch(e){case"\\overline":return{"text-decoration":"overline"};case"_":return{"font-size":"75%"};default:return{}}}function a(e,n){if(n=n||0,0===e.length)return[];var t=e.shift(),o=n,s=n+i([t]).length;return"string"==typeof t?a(e,s):[{start:o,end:s,attrs:r(t.func)}].concat(a(t.tree,n)).concat(a(e,s))}t.strToText=function(e){var n=function e(n){var t,i,r,a=[],o="";function s(s){if(""!==o&&(a.push(o),o=""),(r+=s.length)===n.length)return!0;if("{"!==n[r])t=n[r];else for(i=1,t="",r+=1;r<n.length&&i;)"{"===n[r]?i+=1:"}"===n[r]&&(i-=1),i&&(t+=n[r],r+=1);return t&&t.length&&a.push({func:s,tree:e(t)}),r===n.length||void 0}for(r=0;r<n.length;r+=1)if("\\"===n[r]){if(r===n.length-1)break;if("\\overline"===n.substring(r,r+"\\overline".length)){if(s("\\overline"))break}else o+=n[r+=1]}else if("_"===n[r]){if(s("_"))break}else o+=n[r];return""!==o&&a.push(o),a}(e);return{text:i(n),annotations:a(n)}}},{}],211:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window._:void 0!==n?n._:null,r=("undefined"!=typeof window?window.$:void 0!==n&&n.$,"undefined"!=typeof window?window.joint:void 0!==n?n.joint:null),a=e("../base").Base;t.Transition=a.extend({markup:e("./markup.svg"),defaults:r.util.deepSupplement({type:"pcn.Transition",size:{width:40,height:40},priority:0,attrs:{".":{magnet:"passive"},".pcn-transition-magnet-rect":{magnet:!0,visibility:"hidden"}}},a.prototype.defaults),magnetize:function(){this.attr({".pcn-transition-magnet-rect":{visibility:"visible"}})},demagnetize:function(){this.attr({".pcn-transition-magnet-rect":{visibility:"hidden"}})},rotatable:!0,isContraint:!0,fullyContained:!0,requireEmbedding:!1,containers:["pcn.PlaceChart"],editable:function(){return i(a.prototype.editable()).concat([{property:"priority",name:"Priority",type:"number",integer:!0}]).value()},linkConnectionPoint:function(e,n,t,i,a,o,s){var l=this.getBBox({useModelGeometry:!0});return s(l=r.g.rect(l.x+3*l.width/8,l.y,l.width/4,l.height))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../base":206,"./markup.svg":212}],212:[function(e,n,t){n.exports='<g class="pcn-element">\n    <g class="rotatable">\n        <rect class="pcn-transition-reference-rect" width="10" height="40" x="15" fill="black"/>\n        <rect class="pcn-transition-magnet-rect" width="10" height="40" x="15" fill="black" stroke="red" stroke-width="1" style=\'cursor: cell\'/>\n    </g>\n    <text class="name" fill="black" font-family="monospace" font-size="11" style="pointer-events: none"/>\n</g>\n'},{}],213:[function(e,n,t){(function(e){"use strict";"undefined"!=typeof window?window._:void 0!==e&&e._;var n=("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createExtender({type:{PlaceChart:"pcn.PlaceChart",Transition:"pcn.Transition",Link:"pcn.Link"},relation:{Parent:{relation:"pcn.Hierarchy",from:"child",to:"parent",single:!0},Children:{relation:"pcn.Hierarchy",from:"parent",to:"child"},Source:{relation:"pcn.Source",from:"link",to:"element",single:!0},Target:{relation:"pcn.Target",from:"link",to:"element",single:!0}}});t.extend=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],214:[function(e,n,t){"use strict";var i=e("almost-extend").createExtender;t.extend=i({type:{PlaceChart:"pcn.PlaceChart",Transition:"pcn.Transition",Link:"pcn.Link",Element:["pcn.PlaceChart","pcn.Transition","pcn.Link"],ElementWithName:["pcn.PlaceChart","pcn.Transition"],ElementWithPosition:["pcn.PlaceChart","pcn.Transition"],ElementWithSize:["pcn.PlaceChart"],ElementWithRotation:["pcn.Transition"],ElementWithPriority:["pcn.Transition"],ElementWithTokens:["pcn.PlaceChart","pcn.Link"],TargetRelation:"pcn.Target",SourceRelation:"pcn.Source",HierarchicalRelation:"pcn.Hierarchy"}})},{"almost-extend":232}],215:[function(e,n,t){arguments[4][16][0].apply(t,arguments)},{"./intermediate":217,"./tojoint":220,dup:16}],216:[function(e,n,t){(function(e){"use strict";var t=("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule;n.exports=[t((function(e,n){return n.isElementWithPosition(e)}),(function(e){return{elements:{id:e.id,position:e.metadata.graphics.position}}})),t((function(e,n){return n.isElementWithSize(e)}),(function(e){return{elements:{id:e.id,size:e.metadata.graphics.size}}})),t((function(e,n){return n.isElementWithRotation(e)}),(function(e){return{elements:{id:e.id,angle:e.metadata.graphics.angle}}})),t((function(e,n){return n.isElementWithTokens(e)}),(function(e){return{elements:{id:e.id,tokens:e.attributes.tokens||0}}})),t((function(e,n){return n.isElementWithName(e)}),(function(e){return{elements:{id:e.id,name:{text:e.attributes.name,horizontal:e.metadata.graphics.name.horizontal,vertical:e.metadata.graphics.name.vertical}}}})),t((function(e,n){return n.isElementWithPriority(e)}),(function(e){return{elements:{id:e.id,priority:e.metadata.execution.priority}}})),t((function(e,n){return n.isElement(e)}),(function(e){return{elements:{id:e.id,type:e.type}}})),t((function(e,n){return n.isTransition(e)&&e.metadata.graphics.parent}),(function(e){return{elements:[{id:e.id,parent:e.metadata.graphics.parent},{id:e.metadata.graphics.parent,embeds:e.id}]}}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],217:[function(e,n,t){arguments[4][18][0].apply(t,arguments)},{"../extender":214,"./elementrules":216,"./relationrules":218,dup:18}],218:[function(e,n,t){(function(e){"use strict";var t=("undefined"!=typeof window?window.almost:void 0!==e?e.almost:null).createRule;n.exports=[t((function(e,n){return n.isHierarchicalRelation(e)}),(function(e){return{elements:{id:e.child,parent:e.parent}}})),t((function(e,n){return n.isHierarchicalRelation(e)}),(function(e){return{elements:{id:e.parent,embeds:e.child}}})),t((function(e,n){return n.isSourceRelation(e)}),(function(e){return{elements:[{id:e.link,parent:e.source,source:{id:e.source}},{id:e.source,embeds:e.link}]}})),t((function(e,n){return n.isTargetRelation(e)}),(function(e){return{elements:{id:e.link,target:{id:e.target}}}}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],219:[function(e,n,t){(function(t){"use strict";var i=("undefined"!=typeof window?window.almost:void 0!==t?t.almost:null).createRule,r=e("../../").pcn;n.exports=[i((function(e,n){return n.isPlaceChart(e)}),(function(e){return new r.elements.PlaceChart(e)})),i((function(e,n){return n.isTransition(e)}),(function(e){return new r.elements.Transition(e)})),i((function(e,n){return n.isLink(e)}),(function(e){return new r.links.Link(e)}))]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../":221}],220:[function(e,n,t){arguments[4][21][0].apply(t,arguments)},{"../extender":214,"./elementrules":219,dup:21}],221:[function(e,n,t){"use strict";var i={};t.pcn=i,i.extend=e("./extender").extend,i.fromJSON=e("./fromjson").fromJSON,i.elements=e("./elements").elements,i.links=e("./links").links,i.nets=e("./nets").nets,i.Simulator=e("./simulate").Simulator},{"./elements":207,"./extender":213,"./fromjson":215,"./links":222,"./nets":228,"./simulate":229}],222:[function(e,n,t){"use strict";t.links={Link:e("./link").Link}},{"./link":223}],223:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window.joint:void 0!==e?e.joint:null;t.Link=n.dia.Link.extend({defaults:n.util.deepSupplement({type:"pcn.Link",tokens:1,attrs:{".marker-target":{fill:"black",stroke:"black",d:"M 10 0 L 0 5 L 10 10 z"}}},n.dia.Link.prototype.defaults),editable:function(){return[{property:"tokens",name:"Tokens",type:"number",integer:!0,min:1}]},initialize:function(){this.on("change:source",this._sourceChanged,this),this.on("change:target",this._targetChanged,this),this.on("change:parent",this._parentChanged,this),this.on("change:tokens",this._labelChanged,this),n.dia.Link.prototype.initialize.apply(this,arguments)},validateConnection:function(e,n,t,i,r,a){if(e===t)return!1;var o=e.model,s=t.model;if(!o||!s)return!1;switch(o.get("type")){case"pcn.Transition":return"pcn.PlaceChart"===s.get("type");case"pcn.PlaceChart":return"pcn.Transition"===s.get("type")||"pcn.PlaceChart"===s.get("type")&&s.isEmbeddedIn(o);default:return!1}},_sourceChanged:function(){this.get("source").id&&this.reparent()},_targetChanged:function(){this.previous("target").id&&this.get("target").id&&this.reparent()},_labelChanged:function(){this.get("tokens")>1?this.set("labels",[{position:.5,attrs:{text:{text:this.get("tokens")}}}]):this.set("labels",[])},reparent:function(){if(this.graph&&this.get("source")&&this.get("target")){var e,t=this.graph.getCell(this.get("source").id),i=this.graph.getCell(this.get("target").id);if(t&&(!i||i&&i.isEmbeddedIn(t)))return(e=this.get("parent")&&this.graph.getCell(this.get("parent")))&&e.unembed(this),t.embed(this),this}return n.dia.Link.prototype.reparent.apply(this,arguments)},_parentChanged:function(){if(this.graph&&this.get("source")&&this.get("target")){var e=this.graph.getCell(this.get("source").id),n=this.graph.getCell(this.get("target").id);e&&n&&"pcn.PlaceChart"===e.get("type")&&"pcn.PlaceChart"===n.get("type")&&(n.isEmbeddedIn(e)||this.remove())}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],224:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r=e("../elements").elements,a=e("../links").links;t.createAction=function(e){var n=(e=e||{}).name||"Action",t=e.id||i.util.uuid(),o=new r.PlaceChart({id:t,position:{x:0,y:0},size:{width:80,height:140},name:{text:n}}),s=new r.PlaceChart({id:o.id+"-running-p",position:{x:20,y:20},name:{text:"Running_{"+n+"}"}}),l=new r.PlaceChart({id:o.id+"-running-n",position:{x:20,y:80},name:{text:"\\overline{Running}_{"+n+"}"}}),p=new a.Link({source:{id:o.id},target:{id:s.id}});return o.embed(s),o.embed(l),o.embed(p),[o,s,l,p]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../elements":207,"../links":222}],225:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r=e("../elements").elements,a=e("../links").links;t.createApplication=function(e){var n=(e=e||{}).id||i.util.uuid(),t=new r.PlaceChart({id:n,position:{x:100,y:0},size:{width:80,height:140},name:{text:"Application"}}),o=new r.PlaceChart({id:n+"-waiting-p",position:{x:0,y:0},name:{text:"Waiting",vertical:"top"}}),s=new r.PlaceChart({id:n+"-waiting-n",position:{x:0,y:100},name:{text:"\\overline{Waiting}"}}),l=new r.Transition({position:{x:50,y:0},name:{text:"open"}}),p=new a.Link({source:{id:o.id},target:{id:l.id}}),u=new a.Link({source:{id:l.id},target:{id:s.id}}),c=new a.Link({source:{id:l.id},target:{id:t.id}}),d=new r.Transition({position:{x:50,y:100},name:{text:"close",vertical:"top"}}),f=new a.Link({source:{id:t.id},target:{id:d.id}}),_=new a.Link({source:{id:d.id},target:{id:o.id}}),h=new a.Link({source:{id:s.id},target:{id:d.id}}),m=new r.PlaceChart({position:{x:120,y:20},name:{text:"View_{Application}"}}),g=new a.Link({source:{id:t.id},target:{id:m.id}}),v=new r.PlaceChart({position:{x:120,y:80},name:{text:"\\overline{View}_{Application}"}}),y=new a.Link({source:{id:d.id},target:{id:v.id}});return t.embed(m),t.embed(g),t.embed(v),[t,o,s,m,g,v,l,p,u,c,d,f,_,h,y]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../elements":207,"../links":222}],226:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r=e("../elements").elements,a=e("../links").links;t.createComponent=function(e){var n=(e=e||{}).id||i.util.uuid(),t=e.name||"Component",o="_{"+t+"}",s=e.modelstate||"ready",l=e.modelstate||"invalidated",p=new r.PlaceChart({id:n,position:{x:0,y:0},size:{width:200,height:320},name:{text:t}}),u=new r.PlaceChart({id:n+"-model",position:{x:20,y:20},size:{width:160,height:160},name:{text:"Model"+o,vertical:"top"},borders:{left:!0}}),c=new a.Link({source:{id:p.id},target:{id:u.id}}),d=new r.PlaceChart({id:n+"-in-n",position:{x:40,y:40},name:{text:"\\overline{In}"+o,vertical:"top"},borders:{left:!0}}),f=new a.Link({source:{id:u.id},target:{id:d.id}}),_=new r.PlaceChart({id:n+"-in-p",position:{x:120,y:40},name:{text:"In"+o,vertical:"top"},borders:{right:!0}}),h=new a.Link({source:{id:u.id},target:{id:_.id}}),m=new r.PlaceChart({id:n+"-out-n",position:{x:40,y:120},name:{text:"\\overline{Out}"+o},borders:{left:!0}}),g=new a.Link({source:{id:u.id},target:{id:m.id}}),v=new r.PlaceChart({id:n+"-out-p",position:{x:120,y:120},name:{text:"Out"+o,vertical:"top",horizontal:"left"},borders:{right:!0}}),y=new a.Link({source:{id:u.id},target:{id:v.id}}),w=new r.Transition({position:{x:80,y:80},angle:135,name:{text:"compute"+o,vertical:"middle",horizontal:"right-outer"}}),b=new a.Link({source:{id:_.id},target:{id:w.id}}),x=new a.Link({source:{id:m.id},target:{id:w.id}}),k=new a.Link({source:{id:w.id},target:{id:d.id}}),C=new a.Link({source:{id:w.id},target:{id:v.id}}),E=new r.PlaceChart({id:n+"-viewmodel",position:{x:20,y:220},size:{width:160,height:80},name:{text:"ViewModel"+o},borders:{left:!0}}),F=new a.Link({source:{id:p.id},target:{id:E.id}}),T=new r.PlaceChart({id:n+"-view-n",position:{x:40,y:240},name:{text:"\\overline{View}"+o},borders:{left:!0}}),M=new a.Link({source:{id:E.id},target:{id:T.id}}),S=new r.PlaceChart({id:n+"-view-p",position:{x:120,y:240},name:{text:"View"+o},borders:{right:!0}}),L=new a.Link({source:{id:E.id},target:{id:S.id}}),A=new r.Transition({position:{x:120,y:180},angle:90,name:{text:"render"+o,vertical:"middle",horizontal:"left-outer"}}),j=new a.Link({source:{id:v.id},target:{id:A.id}}),O=new a.Link({source:{id:T.id},target:{id:A.id}}),R=new a.Link({source:{id:A.id},target:{id:S.id}}),I=new a.Link({source:{id:A.id},target:{id:v.id}}),H=[p,u,c,d,_,m,v,w,b,x,k,C,E,F,T,S,M,A,j,O,I,R];switch(p.embed(u),u.embed(d),u.embed(_),u.embed(m),u.embed(v),u.embed(w),_.embed(b),m.embed(x),w.embed(k),w.embed(C),p.embed(c),p.embed(E),E.embed(T),E.embed(S),p.embed(F),p.embed(A),v.embed(j),T.embed(O),A.embed(R),A.embed(I),s){case"computed":u.embed(f),u.embed(y),H.push(f),H.push(y);break;case"clear":u.embed(f),u.embed(g),H.push(f),H.push(g);break;case"ready":u.embed(h),u.embed(g),H.push(h),H.push(g)}switch(l){case"invalidated":u.embed(M),H.push(M);break;case"visible":u.embed(L),H.push(L)}return H}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../elements":207,"../links":222}],227:[function(e,n,t){(function(n){"use strict";var i="undefined"!=typeof window?window.joint:void 0!==n?n.joint:null,r=e("../elements").elements,a=e("../links").links;t.createContainer=function(e){var n=(e=e||{}).name||"Container",t=e.id||i.util.uuid(),o=new r.PlaceChart({id:t,position:{x:0,y:0},size:{width:80,height:140},name:{text:n}}),s=new r.PlaceChart({id:o.id+"-view-p",position:{x:20,y:20},name:{text:"View_{"+n+"}"}}),l=new a.Link({source:{id:o.id},target:{id:s.id}}),p=new r.PlaceChart({id:o.id+"-view-n",position:{x:20,y:80},name:{text:"\\overline{View}_{"+n+"}"}});return o.embed(s),o.embed(l),o.embed(p),[o,s,p,l]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../elements":207,"../links":222}],228:[function(e,n,t){"use strict";t.nets={createApplication:e("./application").createApplication,createContainer:e("./container").createContainer,createComponent:e("./component").createComponent,createAction:e("./action").createAction}},{"./action":224,"./application":225,"./component":226,"./container":227}],229:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window._:void 0!==e?e._:null,i="undefined"!=typeof window?window.Backbone:void 0!==e?e.Backbone:null,r="undefined"!=typeof window?window.joint:void 0!==e?e.joint:null;function a(e){return n.all(e.getEmbeddedCells(),(function(e){return"pcn.PlaceChart"!==e.get("type")}))}t.Simulator=function e(t){if(!(this instanceof e))return new e(t);n.extend(this,i.Events);var o=this,s=(t=t||{}).model,l=t.paper,p=!1;function u(){return n.chain(s.getCells()).filter((function(e){return"pcn.Transition"===e.get("type")})).filter((function(e){var t=s.getConnectedLinks(e,{inbound:!0});return n.all(t,(function(e){return function e(t){return a(t)?t.get("tokens"):n.chain(t.getEmbeddedCells()).filter((function(e){return"pcn.PlaceChart"===e.get("type")})).map((function(n){return e(n)})).max().value()}(e.getSourceElement())>=e.get("tokens")}))})).value()}function c(){if(p){var e,t,i,d,f=u(),_=n.chain(f).groupBy((function(e){return e.get("priority")})).pairs().sortBy((function(e){return-parseInt(e[0],10)})).map((function(e){return e[1]})).value();if(f.length){for(;_.length>1&&!n.random(0,1e3);)_=n.rest(_);e=n.sample(n.first(_)),t=c,i=s.getConnectedLinks(e,{inbound:!0}),d=n.map(s.getConnectedLinks(e,{outbound:!0}),(function(e){return{link:e,multiplier:1}})),n.each(i,(function(e){e.findView(l).sendToken(r.V("circle",{r:7,fill:"orange"}).node,1e3);var t=e.getSourceElement();a(t)?t.set("tokens",Math.max(0,parseInt(t.get("tokens"),10)-parseInt(e.get("tokens"),10))):n.each(n.chain(t.getEmbeddedCells({deep:!0})).filter((function(e){return"pcn.PlaceChart"===e.get("type")})).filter(a).value(),(function(e){e.set("tokens",0)}))})),setTimeout((function e(){if(d.length){var i=[];d=n.chain(d).map((function(e){if(!e.link.graph)return[];var t=e.link,o=e.multiplier,p=t.getTargetElement();return t.findView(l).sendToken(r.V("circle",{r:7,fill:"orange"}).node,1e3),a(p)?(i.push({place:p,tokens:parseInt(p.get("tokens"),10)+parseInt(t.get("tokens"),10)*o}),[]):n.chain(s.getConnectedLinks(p,{outbound:!0})).filter((function(e){return"pcn.PlaceChart"===e.getTargetElement().get("type")})).map((function(e){return{link:e,multiplier:parseInt(t.get("tokens"),10)*o}})).value()})).flatten().value(),setTimeout((function(){n.each(i,(function(e){e.place.set("tokens",e.tokens)})),e()}),1e3)}else setTimeout(t,1e3)}),1e3)}else o.trigger("stop"),p=!1}}this.isRunning=function(){return p},this.start=function(){p||(this.trigger("start"),p=!0,c())},this.stop=function(){p&&(this.trigger("stop"),p=!1)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],230:[function(e,n,t){(function(e){"use strict";var n="undefined"!=typeof window?window.$:void 0!==e?e.$:null,i="undefined"!=typeof window?window._:void 0!==e?e._:null;t.StatisticsMenu=function e(t){if(!(this instanceof e))return new e(t);var r=this,a=t.position,o=t.property,s=t.normalize||!1,l=t.model,p=n(t.ul);function u(e){p.children().removeClass("active"),e&&n(e).addClass("active"),i.forEach(l.getCells(),(function(e){e.unset(o)}))}function c(e){u(e.el);var n=e.limits.min,t=e.limits.max-e.limits.min;i.forEach(l.getCells(),(function(r){var a=i.chain(r.statistics()||[]).filter({name:e.name,type:e.type}).map("value").first().value();"number"==typeof a&&(s&&(a=(a-n)/t),r.set(o,a))}))}r.clear=function(){p.empty()},r.load=function(){var e,t=i.chain(l.getCells()).map((function(e){return e.statistics()||[]})).flatten().filter({position:a}).groupBy("type").value();i.chain(t.percentage||[]).map("name").uniq().sort().forEach((function(e){var t=n('<div class="list-group-item"></div>');t.text(e+" (%)"),p.append(t),t.click((function(){c({name:e,el:t,type:"percentage",limits:{min:0,max:1}})}))})).value(),i.chain(t.number||[]).groupBy("name").mapValues((function(e){return{min:i.chain(e).map("value").min().value(),max:i.chain(e).map("value").max().value()}})).forEach((function(e,t){var i=n('<div class="list-group-item"></div>');i.text(t+" ["+e.min+", "+e.max+"]"),p.append(i),i.click((function(){c({name:t,el:i,type:"number",limits:e})}))})).value(),(e=n('<div class="list-group-item active"></div>')).text("Nothing"),p.prepend(e),e.click((function(){u(e)}))},r.reload=function(){r.clear(),r.load()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],231:[function(e,n,t){n.exports='<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   version="1.1"\n   id="Capa_1"\n   x="0px"\n   y="0px"\n   width="44.236"\n   height="44.236"\n   viewBox="0 0 44.236 44.236"\n   xml:space="preserve"\n   inkscape:version="0.91 r13725"\n   sodipodi:docname="statistics.svg"><metadata\n     id="metadata53"><rdf:RDF><cc:Work\n         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs\n     id="defs51" /><sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1600"\n     inkscape:window-height="837"\n     id="namedview49"\n     showgrid="false"\n     inkscape:zoom="7.5448594"\n     inkscape:cx="2.1444747"\n     inkscape:cy="32.284412"\n     inkscape:window-x="2992"\n     inkscape:window-y="-8"\n     inkscape:window-maximized="1"\n     inkscape:current-layer="Capa_1" /><circle\n     style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.40000001;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker:none;enable-background:accumulate"\n     id="path4181"\n     cx="22.118"\n     cy="22.118"\n     r="22.118" /><path\n     d="M 22.118,44.236 C 9.922,44.236 0,34.314 0,22.119 0,9.923 9.922,0 22.118,0 c 12.196,0 22.118,9.923 22.118,22.119 0,12.195 -9.922,22.117 -22.118,22.117 z m 0,-42.736 C 10.75,1.5 1.5,10.75 1.5,22.119 c 0,11.369 9.25,20.617 20.618,20.617 11.368,0 20.618,-9.248 20.618,-20.617 C 42.736,10.75 33.486,1.5 22.118,1.5 Z"\n     id="path7"\n     inkscape:connector-curvature="0" /><g\n     transform="matrix(0.95782799,0,0,1.0662703,10.624064,9.3227564)"\n     id="icons"><g\n       id="statistics"><path\n         inkscape:connector-curvature="0"\n         d="m 5,12 -2,0 c -1.1,0 -2,0.9 -2,2 l 0,6 c 0,1.1 0.9,2 2,2 l 2,0 c 1.1,0 2,-0.9 2,-2 L 7,14 C 7,12.9 6.1,12 5,12 Z"\n         id="path7-8" /><path\n         inkscape:connector-curvature="0"\n         d="M 13,2 11,2 C 9.9,2 9,2.9 9,4 l 0,16 c 0,1.1 0.9,2 2,2 l 2,0 c 1.1,0 2,-0.9 2,-2 L 15,4 C 15,2.9 14.1,2 13,2 Z"\n         id="path9" /><path\n         inkscape:connector-curvature="0"\n         d="m 21,8 -2,0 c -1.1,0 -2,0.9 -2,2 l 0,10 c 0,1.1 0.9,2 2,2 l 2,0 c 1.1,0 2,-0.9 2,-2 L 23,10 C 23,8.9 22.1,8 21,8 Z"\n         id="path11" /></g></g></svg>\n'},{}],232:[function(e,n,t){"use strict";var i=e("./lib/extender");t.Extender=i,t.createExtender=i},{"./lib/extender":233}],233:[function(e,n,t){"use strict";var i=e("lodash");function r(e){return i.chain(e).map((function(e){return[e.id,e]})).fromPairs().value()}function a(e){return i.groupBy(e,"type")}function o(e){return function(n,t){return(n=this.toElement(n))?i.includes(e,n.type):!!t}}function s(e){return function(n,t){return arguments.length>1&&!Array.isArray(t)&&(t=[t]),e[this.toId(n)]||t||[]}}function l(e){var n=s(e);return function(){return i.head(n.apply(this,arguments))}}function p(e){var n=l(e);return function(){return this.toElement(n.apply(this,arguments))}}function u(e){return"string"==typeof e?e:e&&e.id}function c(e){return function(n){return"object"==typeof n?n:e[n]}}function d(e){function n(t){if(arguments.length<1)throw new Error("missing model argument");if(!(this instanceof n))return new n(t);if(!i.isPlainObject(t))throw new Error("invalid model argument, it should be a plain object");if(!i.has(t,"elements"))throw new Error("missing elements array");if(!i.isArray(t.elements))throw new Error("invalid elements array");if(!i.has(t,"relations"))throw new Error("missing relations array");if(!i.isArray(t.relations))throw new Error("invalid relations array");this.elements=t.elements.slice(),this.relations=t.relations.slice(),i.has(t,"metadata")&&(this.metadata=t.metadata);var o=this,u=r(this.elements),d=a(this.relations);this.toElement=c(u),i.forEach(e.relation,(function(e,n){var t=i.chain(d[e.relation]).groupBy(e.from).mapValues((function(n){return i.chain(n).map(e.to).filter().value()})).value();e.single?(o["get"+n]=p(t),o["get"+n+"Id"]=l(t)):o["get"+n]=s(t)}))}return n.prototype=e.prototype,n}n.exports=function(e){if(arguments.length<1)throw new Error("missing options argument");if(!i.isPlainObject(e))throw new Error("invalid options argument, it should be a plain object");if(i.has(e,"type")&&!i.isPlainObject(e.type))throw new Error("invalid type option argument, it should be a plain object");if(i.has(e,"relation")&&!i.isPlainObject(e.relation))throw new Error("invalid relation option argument, it should be a plain object");if(i.has(e,"custom")&&!i.isPlainObject(e.custom))throw new Error("invalid custom option argument, it should be a plain object");var n={toId:u};return i.forEach(e.type,(function(e,t){e=i.flatten([e]),i.forEach(e,(function(e){if("string"!=typeof e)throw new Error("invalid type configuration, it must be a string or an array of strings")})),n["is"+t]=o(e)})),i.forEach(e.relation,(function(e){if(!i.isPlainObject(e))throw new Error("invalid relation configuration, it must be a plain object");if(!i.has(e,"relation"))throw new Error("invalid relation configuration, missing relation field");if("string"!=typeof e.relation)throw new Error("invalid relation configuration, invalid relation field, it must be a string");if(!i.has(e,"from"))throw new Error("invalid relation configuration, missing from field");if("string"!=typeof e.from)throw new Error("invalid relation configuration, invalid from field, it must be a string");if(!i.has(e,"to"))throw new Error("invalid relation configuration, missing from field");if("string"!=typeof e.to)throw new Error("invalid relation configuration, invalid to field, it must be a string")})),i.forEach(e.custom,(function(e,t){if("function"!=typeof e)throw new Error("a custom helper must be a function");n[t]=e})),d({prototype:n,relation:e.relation})}},{lodash:234}],234:[function(e,n,t){(function(e){(function(){var i="Expected a function",r="__lodash_placeholder__",a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],o="[object Arguments]",s="[object Array]",l="[object Boolean]",p="[object Date]",u="[object Error]",c="[object Function]",d="[object GeneratorFunction]",f="[object Map]",_="[object Number]",h="[object Object]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object Symbol]",w="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",k="[object Float32Array]",C="[object Float64Array]",E="[object Int8Array]",F="[object Int16Array]",T="[object Int32Array]",M="[object Uint8Array]",S="[object Uint16Array]",L="[object Uint32Array]",A=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,O=/(__e\(.*?\)|\b__t\)) \+\n'';/g,R=/&(?:amp|lt|gt|quot|#39);/g,I=/[&<>"']/g,H=RegExp(R.source),D=RegExp(I.source),V=/<%-([\s\S]+?)%>/g,z=/<%([\s\S]+?)%>/g,N=/<%=([\s\S]+?)%>/g,B=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U=/[\\^$.*+?()[\]{}|]/g,W=RegExp(U.source),$=/^\s+|\s+$/g,X=/^\s+/,Z=/\s+$/,G=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,Y=/,? & /,K=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Q=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,te=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,re=/^\[object .+?Constructor\]$/,ae=/^0o[0-7]+$/i,oe=/^(?:0|[1-9]\d*)$/,se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,pe=/['\n\r\u2028\u2029\\]/g,ue="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="[\\ud800-\\udfff]",fe="["+ce+"]",_e="["+ue+"]",he="\\d+",me="[\\u2700-\\u27bf]",ge="[a-z\\xdf-\\xf6\\xf8-\\xff]",ve="[^\\ud800-\\udfff"+ce+he+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ye="\\ud83c[\\udffb-\\udfff]",we="[^\\ud800-\\udfff]",be="(?:\\ud83c[\\udde6-\\uddff]){2}",xe="[\\ud800-\\udbff][\\udc00-\\udfff]",ke="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ce="(?:"+ge+"|"+ve+")",Ee="(?:"+ke+"|"+ve+")",Fe="(?:"+_e+"|"+ye+")"+"?",Te="[\\ufe0e\\ufe0f]?"+Fe+("(?:\\u200d(?:"+[we,be,xe].join("|")+")[\\ufe0e\\ufe0f]?"+Fe+")*"),Me="(?:"+[me,be,xe].join("|")+")"+Te,Se="(?:"+[we+_e+"?",_e,be,xe,de].join("|")+")",Le=RegExp("['’]","g"),Ae=RegExp(_e,"g"),je=RegExp(ye+"(?="+ye+")|"+Se+Te,"g"),Oe=RegExp([ke+"?"+ge+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[fe,ke,"$"].join("|")+")",Ee+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[fe,ke+Ce,"$"].join("|")+")",ke+"?"+Ce+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ke+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",he,Me].join("|"),"g"),Re=RegExp("[\\u200d\\ud800-\\udfff"+ue+"\\ufe0e\\ufe0f]"),Ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,He=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],De=-1,Ve={};Ve[k]=Ve[C]=Ve[E]=Ve[F]=Ve[T]=Ve[M]=Ve["[object Uint8ClampedArray]"]=Ve[S]=Ve[L]=!0,Ve[o]=Ve[s]=Ve[b]=Ve[l]=Ve[x]=Ve[p]=Ve[u]=Ve[c]=Ve[f]=Ve[_]=Ve[h]=Ve[m]=Ve[g]=Ve[v]=Ve[w]=!1;var ze={};ze[o]=ze[s]=ze[b]=ze[x]=ze[l]=ze[p]=ze[k]=ze[C]=ze[E]=ze[F]=ze[T]=ze[f]=ze[_]=ze[h]=ze[m]=ze[g]=ze[v]=ze[y]=ze[M]=ze["[object Uint8ClampedArray]"]=ze[S]=ze[L]=!0,ze[u]=ze[c]=ze[w]=!1;var Ne={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Be=parseFloat,Pe=parseInt,qe="object"==typeof e&&e&&e.Object===Object&&e,Ue="object"==typeof self&&self&&self.Object===Object&&self,We=qe||Ue||Function("return this")(),$e="object"==typeof t&&t&&!t.nodeType&&t,Xe=$e&&"object"==typeof n&&n&&!n.nodeType&&n,Ze=Xe&&Xe.exports===$e,Ge=Ze&&qe.process,Je=function(){try{var e=Xe&&Xe.require&&Xe.require("util").types;return e||Ge&&Ge.binding&&Ge.binding("util")}catch(e){}}(),Ye=Je&&Je.isArrayBuffer,Ke=Je&&Je.isDate,Qe=Je&&Je.isMap,en=Je&&Je.isRegExp,nn=Je&&Je.isSet,tn=Je&&Je.isTypedArray;function rn(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function an(e,n,t,i){for(var r=-1,a=null==e?0:e.length;++r<a;){var o=e[r];n(i,o,t(o),e)}return i}function on(e,n){for(var t=-1,i=null==e?0:e.length;++t<i&&!1!==n(e[t],t,e););return e}function sn(e,n){for(var t=null==e?0:e.length;t--&&!1!==n(e[t],t,e););return e}function ln(e,n){for(var t=-1,i=null==e?0:e.length;++t<i;)if(!n(e[t],t,e))return!1;return!0}function pn(e,n){for(var t=-1,i=null==e?0:e.length,r=0,a=[];++t<i;){var o=e[t];n(o,t,e)&&(a[r++]=o)}return a}function un(e,n){return!!(null==e?0:e.length)&&wn(e,n,0)>-1}function cn(e,n,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(t(n,e[i]))return!0;return!1}function dn(e,n){for(var t=-1,i=null==e?0:e.length,r=Array(i);++t<i;)r[t]=n(e[t],t,e);return r}function fn(e,n){for(var t=-1,i=n.length,r=e.length;++t<i;)e[r+t]=n[t];return e}function _n(e,n,t,i){var r=-1,a=null==e?0:e.length;for(i&&a&&(t=e[++r]);++r<a;)t=n(t,e[r],r,e);return t}function hn(e,n,t,i){var r=null==e?0:e.length;for(i&&r&&(t=e[--r]);r--;)t=n(t,e[r],r,e);return t}function mn(e,n){for(var t=-1,i=null==e?0:e.length;++t<i;)if(n(e[t],t,e))return!0;return!1}var gn=Cn("length");function vn(e,n,t){var i;return t(e,(function(e,t,r){if(n(e,t,r))return i=t,!1})),i}function yn(e,n,t,i){for(var r=e.length,a=t+(i?1:-1);i?a--:++a<r;)if(n(e[a],a,e))return a;return-1}function wn(e,n,t){return n==n?function(e,n,t){var i=t-1,r=e.length;for(;++i<r;)if(e[i]===n)return i;return-1}(e,n,t):yn(e,xn,t)}function bn(e,n,t,i){for(var r=t-1,a=e.length;++r<a;)if(i(e[r],n))return r;return-1}function xn(e){return e!=e}function kn(e,n){var t=null==e?0:e.length;return t?Tn(e,n)/t:NaN}function Cn(e){return function(n){return null==n?void 0:n[e]}}function En(e){return function(n){return null==e?void 0:e[n]}}function Fn(e,n,t,i,r){return r(e,(function(e,r,a){t=i?(i=!1,e):n(t,e,r,a)})),t}function Tn(e,n){for(var t,i=-1,r=e.length;++i<r;){var a=n(e[i]);void 0!==a&&(t=void 0===t?a:t+a)}return t}function Mn(e,n){for(var t=-1,i=Array(e);++t<e;)i[t]=n(t);return i}function Sn(e){return function(n){return e(n)}}function Ln(e,n){return dn(n,(function(n){return e[n]}))}function An(e,n){return e.has(n)}function jn(e,n){for(var t=-1,i=e.length;++t<i&&wn(n,e[t],0)>-1;);return t}function On(e,n){for(var t=e.length;t--&&wn(n,e[t],0)>-1;);return t}function Rn(e,n){for(var t=e.length,i=0;t--;)e[t]===n&&++i;return i}var In=En({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Hn=En({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Dn(e){return"\\"+Ne[e]}function Vn(e){return Re.test(e)}function zn(e){var n=-1,t=Array(e.size);return e.forEach((function(e,i){t[++n]=[i,e]})),t}function Nn(e,n){return function(t){return e(n(t))}}function Bn(e,n){for(var t=-1,i=e.length,a=0,o=[];++t<i;){var s=e[t];s!==n&&s!==r||(e[t]=r,o[a++]=t)}return o}function Pn(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}function qn(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=[e,e]})),t}function Un(e){return Vn(e)?function(e){var n=je.lastIndex=0;for(;je.test(e);)++n;return n}(e):gn(e)}function Wn(e){return Vn(e)?function(e){return e.match(je)||[]}(e):function(e){return e.split("")}(e)}var $n=En({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Xn=function e(n){var t,ue=(n=null==n?We:Xn.defaults(We.Object(),n,Xn.pick(We,He))).Array,ce=n.Date,de=n.Error,fe=n.Function,_e=n.Math,he=n.Object,me=n.RegExp,ge=n.String,ve=n.TypeError,ye=ue.prototype,we=fe.prototype,be=he.prototype,xe=n["__core-js_shared__"],ke=we.toString,Ce=be.hasOwnProperty,Ee=0,Fe=(t=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",Te=be.toString,Me=ke.call(he),Se=We._,je=me("^"+ke.call(Ce).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=Ze?n.Buffer:void 0,Ne=n.Symbol,qe=n.Uint8Array,Ue=Re?Re.allocUnsafe:void 0,$e=Nn(he.getPrototypeOf,he),Xe=he.create,Ge=be.propertyIsEnumerable,Je=ye.splice,gn=Ne?Ne.isConcatSpreadable:void 0,En=Ne?Ne.iterator:void 0,Zn=Ne?Ne.toStringTag:void 0,Gn=function(){try{var e=Qr(he,"defineProperty");return e({},"",{}),e}catch(e){}}(),Jn=n.clearTimeout!==We.clearTimeout&&n.clearTimeout,Yn=ce&&ce.now!==We.Date.now&&ce.now,Kn=n.setTimeout!==We.setTimeout&&n.setTimeout,Qn=_e.ceil,et=_e.floor,nt=he.getOwnPropertySymbols,tt=Re?Re.isBuffer:void 0,it=n.isFinite,rt=ye.join,at=Nn(he.keys,he),ot=_e.max,st=_e.min,lt=ce.now,pt=n.parseInt,ut=_e.random,ct=ye.reverse,dt=Qr(n,"DataView"),ft=Qr(n,"Map"),_t=Qr(n,"Promise"),ht=Qr(n,"Set"),mt=Qr(n,"WeakMap"),gt=Qr(he,"create"),vt=mt&&new mt,yt={},wt=Fa(dt),bt=Fa(ft),xt=Fa(_t),kt=Fa(ht),Ct=Fa(mt),Et=Ne?Ne.prototype:void 0,Ft=Et?Et.valueOf:void 0,Tt=Et?Et.toString:void 0;function Mt(e){if(Uo(e)&&!Oo(e)&&!(e instanceof jt)){if(e instanceof At)return e;if(Ce.call(e,"__wrapped__"))return Ta(e)}return new At(e)}var St=function(){function e(){}return function(n){if(!qo(n))return{};if(Xe)return Xe(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();function Lt(){}function At(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=void 0}function jt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ot(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}function Rt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}function It(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}function Ht(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new It;++n<t;)this.add(e[n])}function Dt(e){var n=this.__data__=new Rt(e);this.size=n.size}function Vt(e,n){var t=Oo(e),i=!t&&jo(e),r=!t&&!i&&Do(e),a=!t&&!i&&!r&&Ko(e),o=t||i||r||a,s=o?Mn(e.length,ge):[],l=s.length;for(var p in e)!n&&!Ce.call(e,p)||o&&("length"==p||r&&("offset"==p||"parent"==p)||a&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||oa(p,l))||s.push(p);return s}function zt(e){var n=e.length;return n?e[Hi(0,n-1)]:void 0}function Nt(e,n){return ka(gr(e),Gt(n,0,e.length))}function Bt(e){return ka(gr(e))}function Pt(e,n,t){(void 0!==t&&!So(e[n],t)||void 0===t&&!(n in e))&&Xt(e,n,t)}function qt(e,n,t){var i=e[n];Ce.call(e,n)&&So(i,t)&&(void 0!==t||n in e)||Xt(e,n,t)}function Ut(e,n){for(var t=e.length;t--;)if(So(e[t][0],n))return t;return-1}function Wt(e,n,t,i){return ei(e,(function(e,r,a){n(i,e,t(e),a)})),i}function $t(e,n){return e&&vr(n,ws(n),e)}function Xt(e,n,t){"__proto__"==n&&Gn?Gn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function Zt(e,n){for(var t=-1,i=n.length,r=ue(i),a=null==e;++t<i;)r[t]=a?void 0:hs(e,n[t]);return r}function Gt(e,n,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==n&&(e=e>=n?e:n)),e}function Jt(e,n,t,i,r,a){var s,u=1&n,w=2&n,A=4&n;if(t&&(s=r?t(e,i,r,a):t(e)),void 0!==s)return s;if(!qo(e))return e;var j=Oo(e);if(j){if(s=function(e){var n=e.length,t=new e.constructor(n);n&&"string"==typeof e[0]&&Ce.call(e,"index")&&(t.index=e.index,t.input=e.input);return t}(e),!u)return gr(e,s)}else{var O=ta(e),R=O==c||O==d;if(Do(e))return cr(e,u);if(O==h||O==o||R&&!r){if(s=w||R?{}:ra(e),!u)return w?function(e,n){return vr(e,na(e),n)}(e,function(e,n){return e&&vr(n,bs(n),e)}(s,e)):function(e,n){return vr(e,ea(e),n)}(e,$t(s,e))}else{if(!ze[O])return r?e:{};s=function(e,n,t){var i=e.constructor;switch(n){case b:return dr(e);case l:case p:return new i(+e);case x:return function(e,n){var t=n?dr(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case k:case C:case E:case F:case T:case M:case"[object Uint8ClampedArray]":case S:case L:return fr(e,t);case f:return new i;case _:case v:return new i(e);case m:return function(e){var n=new e.constructor(e.source,ne.exec(e));return n.lastIndex=e.lastIndex,n}(e);case g:return new i;case y:return r=e,Ft?he(Ft.call(r)):{}}var r}(e,O,u)}}a||(a=new Dt);var I=a.get(e);if(I)return I;a.set(e,s),Go(e)?e.forEach((function(i){s.add(Jt(i,n,t,i,e,a))})):Wo(e)&&e.forEach((function(i,r){s.set(r,Jt(i,n,t,r,e,a))}));var H=j?void 0:(A?w?$r:Wr:w?bs:ws)(e);return on(H||e,(function(i,r){H&&(i=e[r=i]),qt(s,r,Jt(i,n,t,r,e,a))})),s}function Yt(e,n,t){var i=t.length;if(null==e)return!i;for(e=he(e);i--;){var r=t[i],a=n[r],o=e[r];if(void 0===o&&!(r in e)||!a(o))return!1}return!0}function Kt(e,n,t){if("function"!=typeof e)throw new ve(i);return ya((function(){e.apply(void 0,t)}),n)}function Qt(e,n,t,i){var r=-1,a=un,o=!0,s=e.length,l=[],p=n.length;if(!s)return l;t&&(n=dn(n,Sn(t))),i?(a=cn,o=!1):n.length>=200&&(a=An,o=!1,n=new Ht(n));e:for(;++r<s;){var u=e[r],c=null==t?u:t(u);if(u=i||0!==u?u:0,o&&c==c){for(var d=p;d--;)if(n[d]===c)continue e;l.push(u)}else a(n,c,i)||l.push(u)}return l}Mt.templateSettings={escape:V,evaluate:z,interpolate:N,variable:"",imports:{_:Mt}},Mt.prototype=Lt.prototype,Mt.prototype.constructor=Mt,At.prototype=St(Lt.prototype),At.prototype.constructor=At,jt.prototype=St(Lt.prototype),jt.prototype.constructor=jt,Ot.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},Ot.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Ot.prototype.get=function(e){var n=this.__data__;if(gt){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return Ce.call(n,e)?n[e]:void 0},Ot.prototype.has=function(e){var n=this.__data__;return gt?void 0!==n[e]:Ce.call(n,e)},Ot.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=gt&&void 0===n?"__lodash_hash_undefined__":n,this},Rt.prototype.clear=function(){this.__data__=[],this.size=0},Rt.prototype.delete=function(e){var n=this.__data__,t=Ut(n,e);return!(t<0)&&(t==n.length-1?n.pop():Je.call(n,t,1),--this.size,!0)},Rt.prototype.get=function(e){var n=this.__data__,t=Ut(n,e);return t<0?void 0:n[t][1]},Rt.prototype.has=function(e){return Ut(this.__data__,e)>-1},Rt.prototype.set=function(e,n){var t=this.__data__,i=Ut(t,e);return i<0?(++this.size,t.push([e,n])):t[i][1]=n,this},It.prototype.clear=function(){this.size=0,this.__data__={hash:new Ot,map:new(ft||Rt),string:new Ot}},It.prototype.delete=function(e){var n=Yr(this,e).delete(e);return this.size-=n?1:0,n},It.prototype.get=function(e){return Yr(this,e).get(e)},It.prototype.has=function(e){return Yr(this,e).has(e)},It.prototype.set=function(e,n){var t=Yr(this,e),i=t.size;return t.set(e,n),this.size+=t.size==i?0:1,this},Ht.prototype.add=Ht.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ht.prototype.has=function(e){return this.__data__.has(e)},Dt.prototype.clear=function(){this.__data__=new Rt,this.size=0},Dt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Dt.prototype.get=function(e){return this.__data__.get(e)},Dt.prototype.has=function(e){return this.__data__.has(e)},Dt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Rt){var i=t.__data__;if(!ft||i.length<199)return i.push([e,n]),this.size=++t.size,this;t=this.__data__=new It(i)}return t.set(e,n),this.size=t.size,this};var ei=br(li),ni=br(pi,!0);function ti(e,n){var t=!0;return ei(e,(function(e,i,r){return t=!!n(e,i,r)})),t}function ii(e,n,t){for(var i=-1,r=e.length;++i<r;){var a=e[i],o=n(a);if(null!=o&&(void 0===s?o==o&&!Yo(o):t(o,s)))var s=o,l=a}return l}function ri(e,n){var t=[];return ei(e,(function(e,i,r){n(e,i,r)&&t.push(e)})),t}function ai(e,n,t,i,r){var a=-1,o=e.length;for(t||(t=aa),r||(r=[]);++a<o;){var s=e[a];n>0&&t(s)?n>1?ai(s,n-1,t,i,r):fn(r,s):i||(r[r.length]=s)}return r}var oi=xr(),si=xr(!0);function li(e,n){return e&&oi(e,n,ws)}function pi(e,n){return e&&si(e,n,ws)}function ui(e,n){return pn(n,(function(n){return No(e[n])}))}function ci(e,n){for(var t=0,i=(n=sr(n,e)).length;null!=e&&t<i;)e=e[Ea(n[t++])];return t&&t==i?e:void 0}function di(e,n,t){var i=n(e);return Oo(e)?i:fn(i,t(e))}function fi(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Zn&&Zn in he(e)?function(e){var n=Ce.call(e,Zn),t=e[Zn];try{e[Zn]=void 0;var i=!0}catch(e){}var r=Te.call(e);i&&(n?e[Zn]=t:delete e[Zn]);return r}(e):function(e){return Te.call(e)}(e)}function _i(e,n){return e>n}function hi(e,n){return null!=e&&Ce.call(e,n)}function mi(e,n){return null!=e&&n in he(e)}function gi(e,n,t){for(var i=t?cn:un,r=e[0].length,a=e.length,o=a,s=ue(a),l=1/0,p=[];o--;){var u=e[o];o&&n&&(u=dn(u,Sn(n))),l=st(u.length,l),s[o]=!t&&(n||r>=120&&u.length>=120)?new Ht(o&&u):void 0}u=e[0];var c=-1,d=s[0];e:for(;++c<r&&p.length<l;){var f=u[c],_=n?n(f):f;if(f=t||0!==f?f:0,!(d?An(d,_):i(p,_,t))){for(o=a;--o;){var h=s[o];if(!(h?An(h,_):i(e[o],_,t)))continue e}d&&d.push(_),p.push(f)}}return p}function vi(e,n,t){var i=null==(e=ha(e,n=sr(n,e)))?e:e[Ea(Va(n))];return null==i?void 0:rn(i,e,t)}function yi(e){return Uo(e)&&fi(e)==o}function wi(e,n,t,i,r){return e===n||(null==e||null==n||!Uo(e)&&!Uo(n)?e!=e&&n!=n:function(e,n,t,i,r,a){var c=Oo(e),d=Oo(n),w=c?s:ta(e),k=d?s:ta(n),C=(w=w==o?h:w)==h,E=(k=k==o?h:k)==h,F=w==k;if(F&&Do(e)){if(!Do(n))return!1;c=!0,C=!1}if(F&&!C)return a||(a=new Dt),c||Ko(e)?qr(e,n,t,i,r,a):function(e,n,t,i,r,a,o){switch(t){case x:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case b:return!(e.byteLength!=n.byteLength||!a(new qe(e),new qe(n)));case l:case p:case _:return So(+e,+n);case u:return e.name==n.name&&e.message==n.message;case m:case v:return e==n+"";case f:var s=zn;case g:var c=1&i;if(s||(s=Pn),e.size!=n.size&&!c)return!1;var d=o.get(e);if(d)return d==n;i|=2,o.set(e,n);var h=qr(s(e),s(n),i,r,a,o);return o.delete(e),h;case y:if(Ft)return Ft.call(e)==Ft.call(n)}return!1}(e,n,w,t,i,r,a);if(!(1&t)){var T=C&&Ce.call(e,"__wrapped__"),M=E&&Ce.call(n,"__wrapped__");if(T||M){var S=T?e.value():e,L=M?n.value():n;return a||(a=new Dt),r(S,L,t,i,a)}}if(!F)return!1;return a||(a=new Dt),function(e,n,t,i,r,a){var o=1&t,s=Wr(e),l=s.length,p=Wr(n).length;if(l!=p&&!o)return!1;var u=l;for(;u--;){var c=s[u];if(!(o?c in n:Ce.call(n,c)))return!1}var d=a.get(e);if(d&&a.get(n))return d==n;var f=!0;a.set(e,n),a.set(n,e);var _=o;for(;++u<l;){c=s[u];var h=e[c],m=n[c];if(i)var g=o?i(m,h,c,n,e,a):i(h,m,c,e,n,a);if(!(void 0===g?h===m||r(h,m,t,i,a):g)){f=!1;break}_||(_="constructor"==c)}if(f&&!_){var v=e.constructor,y=n.constructor;v==y||!("constructor"in e)||!("constructor"in n)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(f=!1)}return a.delete(e),a.delete(n),f}(e,n,t,i,r,a)}(e,n,t,i,wi,r))}function bi(e,n,t,i){var r=t.length,a=r,o=!i;if(null==e)return!a;for(e=he(e);r--;){var s=t[r];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<a;){var l=(s=t[r])[0],p=e[l],u=s[1];if(o&&s[2]){if(void 0===p&&!(l in e))return!1}else{var c=new Dt;if(i)var d=i(p,u,l,e,n,c);if(!(void 0===d?wi(u,p,3,i,c):d))return!1}}return!0}function xi(e){return!(!qo(e)||(n=e,Fe&&Fe in n))&&(No(e)?je:re).test(Fa(e));var n}function ki(e){return"function"==typeof e?e:null==e?$s:"object"==typeof e?Oo(e)?Si(e[0],e[1]):Mi(e):nl(e)}function Ci(e){if(!ca(e))return at(e);var n=[];for(var t in he(e))Ce.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Ei(e){if(!qo(e))return function(e){var n=[];if(null!=e)for(var t in he(e))n.push(t);return n}(e);var n=ca(e),t=[];for(var i in e)("constructor"!=i||!n&&Ce.call(e,i))&&t.push(i);return t}function Fi(e,n){return e<n}function Ti(e,n){var t=-1,i=Io(e)?ue(e.length):[];return ei(e,(function(e,r,a){i[++t]=n(e,r,a)})),i}function Mi(e){var n=Kr(e);return 1==n.length&&n[0][2]?fa(n[0][0],n[0][1]):function(t){return t===e||bi(t,e,n)}}function Si(e,n){return la(e)&&da(n)?fa(Ea(e),n):function(t){var i=hs(t,e);return void 0===i&&i===n?ms(t,e):wi(n,i,3)}}function Li(e,n,t,i,r){e!==n&&oi(n,(function(a,o){if(r||(r=new Dt),qo(a))!function(e,n,t,i,r,a,o){var s=ga(e,t),l=ga(n,t),p=o.get(l);if(p)return void Pt(e,t,p);var u=a?a(s,l,t+"",e,n,o):void 0,c=void 0===u;if(c){var d=Oo(l),f=!d&&Do(l),_=!d&&!f&&Ko(l);u=l,d||f||_?Oo(s)?u=s:Ho(s)?u=gr(s):f?(c=!1,u=cr(l,!0)):_?(c=!1,u=fr(l,!0)):u=[]:Xo(l)||jo(l)?(u=s,jo(s)?u=os(s):qo(s)&&!No(s)||(u=ra(l))):c=!1}c&&(o.set(l,u),r(u,l,i,a,o),o.delete(l));Pt(e,t,u)}(e,n,o,t,Li,i,r);else{var s=i?i(ga(e,o),a,o+"",e,n,r):void 0;void 0===s&&(s=a),Pt(e,o,s)}}),bs)}function Ai(e,n){var t=e.length;if(t)return oa(n+=n<0?t:0,t)?e[n]:void 0}function ji(e,n,t){var i=-1;return n=dn(n.length?n:[$s],Sn(Jr())),function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}(Ti(e,(function(e,t,r){return{criteria:dn(n,(function(n){return n(e)})),index:++i,value:e}})),(function(e,n){return function(e,n,t){var i=-1,r=e.criteria,a=n.criteria,o=r.length,s=t.length;for(;++i<o;){var l=_r(r[i],a[i]);if(l){if(i>=s)return l;var p=t[i];return l*("desc"==p?-1:1)}}return e.index-n.index}(e,n,t)}))}function Oi(e,n,t){for(var i=-1,r=n.length,a={};++i<r;){var o=n[i],s=ci(e,o);t(s,o)&&Bi(a,sr(o,e),s)}return a}function Ri(e,n,t,i){var r=i?bn:wn,a=-1,o=n.length,s=e;for(e===n&&(n=gr(n)),t&&(s=dn(e,Sn(t)));++a<o;)for(var l=0,p=n[a],u=t?t(p):p;(l=r(s,u,l,i))>-1;)s!==e&&Je.call(s,l,1),Je.call(e,l,1);return e}function Ii(e,n){for(var t=e?n.length:0,i=t-1;t--;){var r=n[t];if(t==i||r!==a){var a=r;oa(r)?Je.call(e,r,1):Qi(e,r)}}return e}function Hi(e,n){return e+et(ut()*(n-e+1))}function Di(e,n){var t="";if(!e||n<1||n>9007199254740991)return t;do{n%2&&(t+=e),(n=et(n/2))&&(e+=e)}while(n);return t}function Vi(e,n){return wa(_a(e,n,$s),e+"")}function zi(e){return zt(Ss(e))}function Ni(e,n){var t=Ss(e);return ka(t,Gt(n,0,t.length))}function Bi(e,n,t,i){if(!qo(e))return e;for(var r=-1,a=(n=sr(n,e)).length,o=a-1,s=e;null!=s&&++r<a;){var l=Ea(n[r]),p=t;if(r!=o){var u=s[l];void 0===(p=i?i(u,l,s):void 0)&&(p=qo(u)?u:oa(n[r+1])?[]:{})}qt(s,l,p),s=s[l]}return e}var Pi=vt?function(e,n){return vt.set(e,n),e}:$s,qi=Gn?function(e,n){return Gn(e,"toString",{configurable:!0,enumerable:!1,value:qs(n),writable:!0})}:$s;function Ui(e){return ka(Ss(e))}function Wi(e,n,t){var i=-1,r=e.length;n<0&&(n=-n>r?0:r+n),(t=t>r?r:t)<0&&(t+=r),r=n>t?0:t-n>>>0,n>>>=0;for(var a=ue(r);++i<r;)a[i]=e[i+n];return a}function $i(e,n){var t;return ei(e,(function(e,i,r){return!(t=n(e,i,r))})),!!t}function Xi(e,n,t){var i=0,r=null==e?i:e.length;if("number"==typeof n&&n==n&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=e[a];null!==o&&!Yo(o)&&(t?o<=n:o<n)?i=a+1:r=a}return r}return Zi(e,n,$s,t)}function Zi(e,n,t,i){n=t(n);for(var r=0,a=null==e?0:e.length,o=n!=n,s=null===n,l=Yo(n),p=void 0===n;r<a;){var u=et((r+a)/2),c=t(e[u]),d=void 0!==c,f=null===c,_=c==c,h=Yo(c);if(o)var m=i||_;else m=p?_&&(i||d):s?_&&d&&(i||!f):l?_&&d&&!f&&(i||!h):!f&&!h&&(i?c<=n:c<n);m?r=u+1:a=u}return st(a,4294967294)}function Gi(e,n){for(var t=-1,i=e.length,r=0,a=[];++t<i;){var o=e[t],s=n?n(o):o;if(!t||!So(s,l)){var l=s;a[r++]=0===o?0:o}}return a}function Ji(e){return"number"==typeof e?e:Yo(e)?NaN:+e}function Yi(e){if("string"==typeof e)return e;if(Oo(e))return dn(e,Yi)+"";if(Yo(e))return Tt?Tt.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Ki(e,n,t){var i=-1,r=un,a=e.length,o=!0,s=[],l=s;if(t)o=!1,r=cn;else if(a>=200){var p=n?null:Dr(e);if(p)return Pn(p);o=!1,r=An,l=new Ht}else l=n?[]:s;e:for(;++i<a;){var u=e[i],c=n?n(u):u;if(u=t||0!==u?u:0,o&&c==c){for(var d=l.length;d--;)if(l[d]===c)continue e;n&&l.push(c),s.push(u)}else r(l,c,t)||(l!==s&&l.push(c),s.push(u))}return s}function Qi(e,n){return null==(e=ha(e,n=sr(n,e)))||delete e[Ea(Va(n))]}function er(e,n,t,i){return Bi(e,n,t(ci(e,n)),i)}function nr(e,n,t,i){for(var r=e.length,a=i?r:-1;(i?a--:++a<r)&&n(e[a],a,e););return t?Wi(e,i?0:a,i?a+1:r):Wi(e,i?a+1:0,i?r:a)}function tr(e,n){var t=e;return t instanceof jt&&(t=t.value()),_n(n,(function(e,n){return n.func.apply(n.thisArg,fn([e],n.args))}),t)}function ir(e,n,t){var i=e.length;if(i<2)return i?Ki(e[0]):[];for(var r=-1,a=ue(i);++r<i;)for(var o=e[r],s=-1;++s<i;)s!=r&&(a[r]=Qt(a[r]||o,e[s],n,t));return Ki(ai(a,1),n,t)}function rr(e,n,t){for(var i=-1,r=e.length,a=n.length,o={};++i<r;){var s=i<a?n[i]:void 0;t(o,e[i],s)}return o}function ar(e){return Ho(e)?e:[]}function or(e){return"function"==typeof e?e:$s}function sr(e,n){return Oo(e)?e:la(e,n)?[e]:Ca(ss(e))}var lr=Vi;function pr(e,n,t){var i=e.length;return t=void 0===t?i:t,!n&&t>=i?e:Wi(e,n,t)}var ur=Jn||function(e){return We.clearTimeout(e)};function cr(e,n){if(n)return e.slice();var t=e.length,i=Ue?Ue(t):new e.constructor(t);return e.copy(i),i}function dr(e){var n=new e.constructor(e.byteLength);return new qe(n).set(new qe(e)),n}function fr(e,n){var t=n?dr(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function _r(e,n){if(e!==n){var t=void 0!==e,i=null===e,r=e==e,a=Yo(e),o=void 0!==n,s=null===n,l=n==n,p=Yo(n);if(!s&&!p&&!a&&e>n||a&&o&&l&&!s&&!p||i&&o&&l||!t&&l||!r)return 1;if(!i&&!a&&!p&&e<n||p&&t&&r&&!i&&!a||s&&t&&r||!o&&r||!l)return-1}return 0}function hr(e,n,t,i){for(var r=-1,a=e.length,o=t.length,s=-1,l=n.length,p=ot(a-o,0),u=ue(l+p),c=!i;++s<l;)u[s]=n[s];for(;++r<o;)(c||r<a)&&(u[t[r]]=e[r]);for(;p--;)u[s++]=e[r++];return u}function mr(e,n,t,i){for(var r=-1,a=e.length,o=-1,s=t.length,l=-1,p=n.length,u=ot(a-s,0),c=ue(u+p),d=!i;++r<u;)c[r]=e[r];for(var f=r;++l<p;)c[f+l]=n[l];for(;++o<s;)(d||r<a)&&(c[f+t[o]]=e[r++]);return c}function gr(e,n){var t=-1,i=e.length;for(n||(n=ue(i));++t<i;)n[t]=e[t];return n}function vr(e,n,t,i){var r=!t;t||(t={});for(var a=-1,o=n.length;++a<o;){var s=n[a],l=i?i(t[s],e[s],s,t,e):void 0;void 0===l&&(l=e[s]),r?Xt(t,s,l):qt(t,s,l)}return t}function yr(e,n){return function(t,i){var r=Oo(t)?an:Wt,a=n?n():{};return r(t,e,Jr(i,2),a)}}function wr(e){return Vi((function(n,t){var i=-1,r=t.length,a=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(a=e.length>3&&"function"==typeof a?(r--,a):void 0,o&&sa(t[0],t[1],o)&&(a=r<3?void 0:a,r=1),n=he(n);++i<r;){var s=t[i];s&&e(n,s,i,a)}return n}))}function br(e,n){return function(t,i){if(null==t)return t;if(!Io(t))return e(t,i);for(var r=t.length,a=n?r:-1,o=he(t);(n?a--:++a<r)&&!1!==i(o[a],a,o););return t}}function xr(e){return function(n,t,i){for(var r=-1,a=he(n),o=i(n),s=o.length;s--;){var l=o[e?s:++r];if(!1===t(a[l],l,a))break}return n}}function kr(e){return function(n){var t=Vn(n=ss(n))?Wn(n):void 0,i=t?t[0]:n.charAt(0),r=t?pr(t,1).join(""):n.slice(1);return i[e]()+r}}function Cr(e){return function(n){return _n(Ns(js(n).replace(Le,"")),e,"")}}function Er(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=St(e.prototype),i=e.apply(t,n);return qo(i)?i:t}}function Fr(e){return function(n,t,i){var r=he(n);if(!Io(n)){var a=Jr(t,3);n=ws(n),t=function(e){return a(r[e],e,r)}}var o=e(n,t,i);return o>-1?r[a?n[o]:o]:void 0}}function Tr(e){return Ur((function(n){var t=n.length,r=t,a=At.prototype.thru;for(e&&n.reverse();r--;){var o=n[r];if("function"!=typeof o)throw new ve(i);if(a&&!s&&"wrapper"==Zr(o))var s=new At([],!0)}for(r=s?r:t;++r<t;){var l=Zr(o=n[r]),p="wrapper"==l?Xr(o):void 0;s=p&&pa(p[0])&&424==p[1]&&!p[4].length&&1==p[9]?s[Zr(p[0])].apply(s,p[3]):1==o.length&&pa(o)?s[l]():s.thru(o)}return function(){var e=arguments,i=e[0];if(s&&1==e.length&&Oo(i))return s.plant(i).value();for(var r=0,a=t?n[r].apply(this,e):i;++r<t;)a=n[r].call(this,a);return a}}))}function Mr(e,n,t,i,r,a,o,s,l,p){var u=128&n,c=1&n,d=2&n,f=24&n,_=512&n,h=d?void 0:Er(e);return function m(){for(var g=arguments.length,v=ue(g),y=g;y--;)v[y]=arguments[y];if(f)var w=Gr(m),b=Rn(v,w);if(i&&(v=hr(v,i,r,f)),a&&(v=mr(v,a,o,f)),g-=b,f&&g<p){var x=Bn(v,w);return Ir(e,n,Mr,m.placeholder,t,v,x,s,l,p-g)}var k=c?t:this,C=d?k[e]:e;return g=v.length,s?v=ma(v,s):_&&g>1&&v.reverse(),u&&l<g&&(v.length=l),this&&this!==We&&this instanceof m&&(C=h||Er(C)),C.apply(k,v)}}function Sr(e,n){return function(t,i){return function(e,n,t,i){return li(e,(function(e,r,a){n(i,t(e),r,a)})),i}(t,e,n(i),{})}}function Lr(e,n){return function(t,i){var r;if(void 0===t&&void 0===i)return n;if(void 0!==t&&(r=t),void 0!==i){if(void 0===r)return i;"string"==typeof t||"string"==typeof i?(t=Yi(t),i=Yi(i)):(t=Ji(t),i=Ji(i)),r=e(t,i)}return r}}function Ar(e){return Ur((function(n){return n=dn(n,Sn(Jr())),Vi((function(t){var i=this;return e(n,(function(e){return rn(e,i,t)}))}))}))}function jr(e,n){var t=(n=void 0===n?" ":Yi(n)).length;if(t<2)return t?Di(n,e):n;var i=Di(n,Qn(e/Un(n)));return Vn(n)?pr(Wn(i),0,e).join(""):i.slice(0,e)}function Or(e){return function(n,t,i){return i&&"number"!=typeof i&&sa(n,t,i)&&(t=i=void 0),n=ts(n),void 0===t?(t=n,n=0):t=ts(t),function(e,n,t,i){for(var r=-1,a=ot(Qn((n-e)/(t||1)),0),o=ue(a);a--;)o[i?a:++r]=e,e+=t;return o}(n,t,i=void 0===i?n<t?1:-1:ts(i),e)}}function Rr(e){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=as(n),t=as(t)),e(n,t)}}function Ir(e,n,t,i,r,a,o,s,l,p){var u=8&n;n|=u?32:64,4&(n&=~(u?64:32))||(n&=-4);var c=[e,n,r,u?a:void 0,u?o:void 0,u?void 0:a,u?void 0:o,s,l,p],d=t.apply(void 0,c);return pa(e)&&va(d,c),d.placeholder=i,ba(d,e,n)}function Hr(e){var n=_e[e];return function(e,t){if(e=as(e),(t=null==t?0:st(is(t),292))&&it(e)){var i=(ss(e)+"e").split("e");return+((i=(ss(n(i[0]+"e"+(+i[1]+t)))+"e").split("e"))[0]+"e"+(+i[1]-t))}return n(e)}}var Dr=ht&&1/Pn(new ht([,-0]))[1]==1/0?function(e){return new ht(e)}:Ys;function Vr(e){return function(n){var t=ta(n);return t==f?zn(n):t==g?qn(n):function(e,n){return dn(n,(function(n){return[n,e[n]]}))}(n,e(n))}}function zr(e,n,t,a,o,s,l,p){var u=2&n;if(!u&&"function"!=typeof e)throw new ve(i);var c=a?a.length:0;if(c||(n&=-97,a=o=void 0),l=void 0===l?l:ot(is(l),0),p=void 0===p?p:is(p),c-=o?o.length:0,64&n){var d=a,f=o;a=o=void 0}var _=u?void 0:Xr(e),h=[e,n,t,a,o,d,f,s,l,p];if(_&&function(e,n){var t=e[1],i=n[1],a=t|i,o=a<131,s=128==i&&8==t||128==i&&256==t&&e[7].length<=n[8]||384==i&&n[7].length<=n[8]&&8==t;if(!o&&!s)return e;1&i&&(e[2]=n[2],a|=1&t?0:4);var l=n[3];if(l){var p=e[3];e[3]=p?hr(p,l,n[4]):l,e[4]=p?Bn(e[3],r):n[4]}(l=n[5])&&(p=e[5],e[5]=p?mr(p,l,n[6]):l,e[6]=p?Bn(e[5],r):n[6]);(l=n[7])&&(e[7]=l);128&i&&(e[8]=null==e[8]?n[8]:st(e[8],n[8]));null==e[9]&&(e[9]=n[9]);e[0]=n[0],e[1]=a}(h,_),e=h[0],n=h[1],t=h[2],a=h[3],o=h[4],!(p=h[9]=void 0===h[9]?u?0:e.length:ot(h[9]-c,0))&&24&n&&(n&=-25),n&&1!=n)m=8==n||16==n?function(e,n,t){var i=Er(e);return function r(){for(var a=arguments.length,o=ue(a),s=a,l=Gr(r);s--;)o[s]=arguments[s];var p=a<3&&o[0]!==l&&o[a-1]!==l?[]:Bn(o,l);if((a-=p.length)<t)return Ir(e,n,Mr,r.placeholder,void 0,o,p,void 0,void 0,t-a);var u=this&&this!==We&&this instanceof r?i:e;return rn(u,this,o)}}(e,n,p):32!=n&&33!=n||o.length?Mr.apply(void 0,h):function(e,n,t,i){var r=1&n,a=Er(e);return function n(){for(var o=-1,s=arguments.length,l=-1,p=i.length,u=ue(p+s),c=this&&this!==We&&this instanceof n?a:e;++l<p;)u[l]=i[l];for(;s--;)u[l++]=arguments[++o];return rn(c,r?t:this,u)}}(e,n,t,a);else var m=function(e,n,t){var i=1&n,r=Er(e);return function n(){var a=this&&this!==We&&this instanceof n?r:e;return a.apply(i?t:this,arguments)}}(e,n,t);return ba((_?Pi:va)(m,h),e,n)}function Nr(e,n,t,i){return void 0===e||So(e,be[t])&&!Ce.call(i,t)?n:e}function Br(e,n,t,i,r,a){return qo(e)&&qo(n)&&(a.set(n,e),Li(e,n,void 0,Br,a),a.delete(n)),e}function Pr(e){return Xo(e)?void 0:e}function qr(e,n,t,i,r,a){var o=1&t,s=e.length,l=n.length;if(s!=l&&!(o&&l>s))return!1;var p=a.get(e);if(p&&a.get(n))return p==n;var u=-1,c=!0,d=2&t?new Ht:void 0;for(a.set(e,n),a.set(n,e);++u<s;){var f=e[u],_=n[u];if(i)var h=o?i(_,f,u,n,e,a):i(f,_,u,e,n,a);if(void 0!==h){if(h)continue;c=!1;break}if(d){if(!mn(n,(function(e,n){if(!An(d,n)&&(f===e||r(f,e,t,i,a)))return d.push(n)}))){c=!1;break}}else if(f!==_&&!r(f,_,t,i,a)){c=!1;break}}return a.delete(e),a.delete(n),c}function Ur(e){return wa(_a(e,void 0,Oa),e+"")}function Wr(e){return di(e,ws,ea)}function $r(e){return di(e,bs,na)}var Xr=vt?function(e){return vt.get(e)}:Ys;function Zr(e){for(var n=e.name+"",t=yt[n],i=Ce.call(yt,n)?t.length:0;i--;){var r=t[i],a=r.func;if(null==a||a==e)return r.name}return n}function Gr(e){return(Ce.call(Mt,"placeholder")?Mt:e).placeholder}function Jr(){var e=Mt.iteratee||Xs;return e=e===Xs?ki:e,arguments.length?e(arguments[0],arguments[1]):e}function Yr(e,n){var t,i,r=e.__data__;return("string"==(i=typeof(t=n))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t)?r["string"==typeof n?"string":"hash"]:r.map}function Kr(e){for(var n=ws(e),t=n.length;t--;){var i=n[t],r=e[i];n[t]=[i,r,da(r)]}return n}function Qr(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return xi(t)?t:void 0}var ea=nt?function(e){return null==e?[]:(e=he(e),pn(nt(e),(function(n){return Ge.call(e,n)})))}:rl,na=nt?function(e){for(var n=[];e;)fn(n,ea(e)),e=$e(e);return n}:rl,ta=fi;function ia(e,n,t){for(var i=-1,r=(n=sr(n,e)).length,a=!1;++i<r;){var o=Ea(n[i]);if(!(a=null!=e&&t(e,o)))break;e=e[o]}return a||++i!=r?a:!!(r=null==e?0:e.length)&&Po(r)&&oa(o,r)&&(Oo(e)||jo(e))}function ra(e){return"function"!=typeof e.constructor||ca(e)?{}:St($e(e))}function aa(e){return Oo(e)||jo(e)||!!(gn&&e&&e[gn])}function oa(e,n){var t=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==t||"symbol"!=t&&oe.test(e))&&e>-1&&e%1==0&&e<n}function sa(e,n,t){if(!qo(t))return!1;var i=typeof n;return!!("number"==i?Io(t)&&oa(n,t.length):"string"==i&&n in t)&&So(t[n],e)}function la(e,n){if(Oo(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!Yo(e))||(P.test(e)||!B.test(e)||null!=n&&e in he(n))}function pa(e){var n=Zr(e),t=Mt[n];if("function"!=typeof t||!(n in jt.prototype))return!1;if(e===t)return!0;var i=Xr(t);return!!i&&e===i[0]}(dt&&ta(new dt(new ArrayBuffer(1)))!=x||ft&&ta(new ft)!=f||_t&&"[object Promise]"!=ta(_t.resolve())||ht&&ta(new ht)!=g||mt&&ta(new mt)!=w)&&(ta=function(e){var n=fi(e),t=n==h?e.constructor:void 0,i=t?Fa(t):"";if(i)switch(i){case wt:return x;case bt:return f;case xt:return"[object Promise]";case kt:return g;case Ct:return w}return n});var ua=xe?No:al;function ca(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||be)}function da(e){return e==e&&!qo(e)}function fa(e,n){return function(t){return null!=t&&(t[e]===n&&(void 0!==n||e in he(t)))}}function _a(e,n,t){return n=ot(void 0===n?e.length-1:n,0),function(){for(var i=arguments,r=-1,a=ot(i.length-n,0),o=ue(a);++r<a;)o[r]=i[n+r];r=-1;for(var s=ue(n+1);++r<n;)s[r]=i[r];return s[n]=t(o),rn(e,this,s)}}function ha(e,n){return n.length<2?e:ci(e,Wi(n,0,-1))}function ma(e,n){for(var t=e.length,i=st(n.length,t),r=gr(e);i--;){var a=n[i];e[i]=oa(a,t)?r[a]:void 0}return e}function ga(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var va=xa(Pi),ya=Kn||function(e,n){return We.setTimeout(e,n)},wa=xa(qi);function ba(e,n,t){var i=n+"";return wa(e,function(e,n){var t=n.length;if(!t)return e;var i=t-1;return n[i]=(t>1?"& ":"")+n[i],n=n.join(t>2?", ":" "),e.replace(G,"{\n/* [wrapped with "+n+"] */\n")}(i,function(e,n){return on(a,(function(t){var i="_."+t[0];n&t[1]&&!un(e,i)&&e.push(i)})),e.sort()}(function(e){var n=e.match(J);return n?n[1].split(Y):[]}(i),t)))}function xa(e){var n=0,t=0;return function(){var i=lt(),r=16-(i-t);if(t=i,r>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function ka(e,n){var t=-1,i=e.length,r=i-1;for(n=void 0===n?i:n;++t<n;){var a=Hi(t,r),o=e[a];e[a]=e[t],e[t]=o}return e.length=n,e}var Ca=function(e){var n=ko(e,(function(e){return 500===t.size&&t.clear(),e})),t=n.cache;return n}((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(q,(function(e,t,i,r){n.push(i?r.replace(Q,"$1"):t||e)})),n}));function Ea(e){if("string"==typeof e||Yo(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Fa(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ta(e){if(e instanceof jt)return e.clone();var n=new At(e.__wrapped__,e.__chain__);return n.__actions__=gr(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var Ma=Vi((function(e,n){return Ho(e)?Qt(e,ai(n,1,Ho,!0)):[]})),Sa=Vi((function(e,n){var t=Va(n);return Ho(t)&&(t=void 0),Ho(e)?Qt(e,ai(n,1,Ho,!0),Jr(t,2)):[]})),La=Vi((function(e,n){var t=Va(n);return Ho(t)&&(t=void 0),Ho(e)?Qt(e,ai(n,1,Ho,!0),void 0,t):[]}));function Aa(e,n,t){var i=null==e?0:e.length;if(!i)return-1;var r=null==t?0:is(t);return r<0&&(r=ot(i+r,0)),yn(e,Jr(n,3),r)}function ja(e,n,t){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return void 0!==t&&(r=is(t),r=t<0?ot(i+r,0):st(r,i-1)),yn(e,Jr(n,3),r,!0)}function Oa(e){return(null==e?0:e.length)?ai(e,1):[]}function Ra(e){return e&&e.length?e[0]:void 0}var Ia=Vi((function(e){var n=dn(e,ar);return n.length&&n[0]===e[0]?gi(n):[]})),Ha=Vi((function(e){var n=Va(e),t=dn(e,ar);return n===Va(t)?n=void 0:t.pop(),t.length&&t[0]===e[0]?gi(t,Jr(n,2)):[]})),Da=Vi((function(e){var n=Va(e),t=dn(e,ar);return(n="function"==typeof n?n:void 0)&&t.pop(),t.length&&t[0]===e[0]?gi(t,void 0,n):[]}));function Va(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}var za=Vi(Na);function Na(e,n){return e&&e.length&&n&&n.length?Ri(e,n):e}var Ba=Ur((function(e,n){var t=null==e?0:e.length,i=Zt(e,n);return Ii(e,dn(n,(function(e){return oa(e,t)?+e:e})).sort(_r)),i}));function Pa(e){return null==e?e:ct.call(e)}var qa=Vi((function(e){return Ki(ai(e,1,Ho,!0))})),Ua=Vi((function(e){var n=Va(e);return Ho(n)&&(n=void 0),Ki(ai(e,1,Ho,!0),Jr(n,2))})),Wa=Vi((function(e){var n=Va(e);return n="function"==typeof n?n:void 0,Ki(ai(e,1,Ho,!0),void 0,n)}));function $a(e){if(!e||!e.length)return[];var n=0;return e=pn(e,(function(e){if(Ho(e))return n=ot(e.length,n),!0})),Mn(n,(function(n){return dn(e,Cn(n))}))}function Xa(e,n){if(!e||!e.length)return[];var t=$a(e);return null==n?t:dn(t,(function(e){return rn(n,void 0,e)}))}var Za=Vi((function(e,n){return Ho(e)?Qt(e,n):[]})),Ga=Vi((function(e){return ir(pn(e,Ho))})),Ja=Vi((function(e){var n=Va(e);return Ho(n)&&(n=void 0),ir(pn(e,Ho),Jr(n,2))})),Ya=Vi((function(e){var n=Va(e);return n="function"==typeof n?n:void 0,ir(pn(e,Ho),void 0,n)})),Ka=Vi($a);var Qa=Vi((function(e){var n=e.length,t=n>1?e[n-1]:void 0;return t="function"==typeof t?(e.pop(),t):void 0,Xa(e,t)}));function eo(e){var n=Mt(e);return n.__chain__=!0,n}function no(e,n){return n(e)}var to=Ur((function(e){var n=e.length,t=n?e[0]:0,i=this.__wrapped__,r=function(n){return Zt(n,e)};return!(n>1||this.__actions__.length)&&i instanceof jt&&oa(t)?((i=i.slice(t,+t+(n?1:0))).__actions__.push({func:no,args:[r],thisArg:void 0}),new At(i,this.__chain__).thru((function(e){return n&&!e.length&&e.push(void 0),e}))):this.thru(r)}));var io=yr((function(e,n,t){Ce.call(e,t)?++e[t]:Xt(e,t,1)}));var ro=Fr(Aa),ao=Fr(ja);function oo(e,n){return(Oo(e)?on:ei)(e,Jr(n,3))}function so(e,n){return(Oo(e)?sn:ni)(e,Jr(n,3))}var lo=yr((function(e,n,t){Ce.call(e,t)?e[t].push(n):Xt(e,t,[n])}));var po=Vi((function(e,n,t){var i=-1,r="function"==typeof n,a=Io(e)?ue(e.length):[];return ei(e,(function(e){a[++i]=r?rn(n,e,t):vi(e,n,t)})),a})),uo=yr((function(e,n,t){Xt(e,t,n)}));function co(e,n){return(Oo(e)?dn:Ti)(e,Jr(n,3))}var fo=yr((function(e,n,t){e[t?0:1].push(n)}),(function(){return[[],[]]}));var _o=Vi((function(e,n){if(null==e)return[];var t=n.length;return t>1&&sa(e,n[0],n[1])?n=[]:t>2&&sa(n[0],n[1],n[2])&&(n=[n[0]]),ji(e,ai(n,1),[])})),ho=Yn||function(){return We.Date.now()};function mo(e,n,t){return n=t?void 0:n,zr(e,128,void 0,void 0,void 0,void 0,n=e&&null==n?e.length:n)}function go(e,n){var t;if("function"!=typeof n)throw new ve(i);return e=is(e),function(){return--e>0&&(t=n.apply(this,arguments)),e<=1&&(n=void 0),t}}var vo=Vi((function(e,n,t){var i=1;if(t.length){var r=Bn(t,Gr(vo));i|=32}return zr(e,i,n,t,r)})),yo=Vi((function(e,n,t){var i=3;if(t.length){var r=Bn(t,Gr(yo));i|=32}return zr(n,i,e,t,r)}));function wo(e,n,t){var r,a,o,s,l,p,u=0,c=!1,d=!1,f=!0;if("function"!=typeof e)throw new ve(i);function _(n){var t=r,i=a;return r=a=void 0,u=n,s=e.apply(i,t)}function h(e){return u=e,l=ya(g,n),c?_(e):s}function m(e){var t=e-p;return void 0===p||t>=n||t<0||d&&e-u>=o}function g(){var e=ho();if(m(e))return v(e);l=ya(g,function(e){var t=n-(e-p);return d?st(t,o-(e-u)):t}(e))}function v(e){return l=void 0,f&&r?_(e):(r=a=void 0,s)}function y(){var e=ho(),t=m(e);if(r=arguments,a=this,p=e,t){if(void 0===l)return h(p);if(d)return ur(l),l=ya(g,n),_(p)}return void 0===l&&(l=ya(g,n)),s}return n=as(n)||0,qo(t)&&(c=!!t.leading,o=(d="maxWait"in t)?ot(as(t.maxWait)||0,n):o,f="trailing"in t?!!t.trailing:f),y.cancel=function(){void 0!==l&&ur(l),u=0,r=p=a=l=void 0},y.flush=function(){return void 0===l?s:v(ho())},y}var bo=Vi((function(e,n){return Kt(e,1,n)})),xo=Vi((function(e,n,t){return Kt(e,as(n)||0,t)}));function ko(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new ve(i);var t=function(){var i=arguments,r=n?n.apply(this,i):i[0],a=t.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return t.cache=a.set(r,o)||a,o};return t.cache=new(ko.Cache||It),t}function Co(e){if("function"!=typeof e)throw new ve(i);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}ko.Cache=It;var Eo=lr((function(e,n){var t=(n=1==n.length&&Oo(n[0])?dn(n[0],Sn(Jr())):dn(ai(n,1),Sn(Jr()))).length;return Vi((function(i){for(var r=-1,a=st(i.length,t);++r<a;)i[r]=n[r].call(this,i[r]);return rn(e,this,i)}))})),Fo=Vi((function(e,n){return zr(e,32,void 0,n,Bn(n,Gr(Fo)))})),To=Vi((function(e,n){return zr(e,64,void 0,n,Bn(n,Gr(To)))})),Mo=Ur((function(e,n){return zr(e,256,void 0,void 0,void 0,n)}));function So(e,n){return e===n||e!=e&&n!=n}var Lo=Rr(_i),Ao=Rr((function(e,n){return e>=n})),jo=yi(function(){return arguments}())?yi:function(e){return Uo(e)&&Ce.call(e,"callee")&&!Ge.call(e,"callee")},Oo=ue.isArray,Ro=Ye?Sn(Ye):function(e){return Uo(e)&&fi(e)==b};function Io(e){return null!=e&&Po(e.length)&&!No(e)}function Ho(e){return Uo(e)&&Io(e)}var Do=tt||al,Vo=Ke?Sn(Ke):function(e){return Uo(e)&&fi(e)==p};function zo(e){if(!Uo(e))return!1;var n=fi(e);return n==u||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!Xo(e)}function No(e){if(!qo(e))return!1;var n=fi(e);return n==c||n==d||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Bo(e){return"number"==typeof e&&e==is(e)}function Po(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function qo(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function Uo(e){return null!=e&&"object"==typeof e}var Wo=Qe?Sn(Qe):function(e){return Uo(e)&&ta(e)==f};function $o(e){return"number"==typeof e||Uo(e)&&fi(e)==_}function Xo(e){if(!Uo(e)||fi(e)!=h)return!1;var n=$e(e);if(null===n)return!0;var t=Ce.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&ke.call(t)==Me}var Zo=en?Sn(en):function(e){return Uo(e)&&fi(e)==m};var Go=nn?Sn(nn):function(e){return Uo(e)&&ta(e)==g};function Jo(e){return"string"==typeof e||!Oo(e)&&Uo(e)&&fi(e)==v}function Yo(e){return"symbol"==typeof e||Uo(e)&&fi(e)==y}var Ko=tn?Sn(tn):function(e){return Uo(e)&&Po(e.length)&&!!Ve[fi(e)]};var Qo=Rr(Fi),es=Rr((function(e,n){return e<=n}));function ns(e){if(!e)return[];if(Io(e))return Jo(e)?Wn(e):gr(e);if(En&&e[En])return function(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}(e[En]());var n=ta(e);return(n==f?zn:n==g?Pn:Ss)(e)}function ts(e){return e?(e=as(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function is(e){var n=ts(e),t=n%1;return n==n?t?n-t:n:0}function rs(e){return e?Gt(is(e),0,4294967295):0}function as(e){if("number"==typeof e)return e;if(Yo(e))return NaN;if(qo(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=qo(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace($,"");var t=ie.test(e);return t||ae.test(e)?Pe(e.slice(2),t?2:8):te.test(e)?NaN:+e}function os(e){return vr(e,bs(e))}function ss(e){return null==e?"":Yi(e)}var ls=wr((function(e,n){if(ca(n)||Io(n))vr(n,ws(n),e);else for(var t in n)Ce.call(n,t)&&qt(e,t,n[t])})),ps=wr((function(e,n){vr(n,bs(n),e)})),us=wr((function(e,n,t,i){vr(n,bs(n),e,i)})),cs=wr((function(e,n,t,i){vr(n,ws(n),e,i)})),ds=Ur(Zt);var fs=Vi((function(e,n){e=he(e);var t=-1,i=n.length,r=i>2?n[2]:void 0;for(r&&sa(n[0],n[1],r)&&(i=1);++t<i;)for(var a=n[t],o=bs(a),s=-1,l=o.length;++s<l;){var p=o[s],u=e[p];(void 0===u||So(u,be[p])&&!Ce.call(e,p))&&(e[p]=a[p])}return e})),_s=Vi((function(e){return e.push(void 0,Br),rn(ks,void 0,e)}));function hs(e,n,t){var i=null==e?void 0:ci(e,n);return void 0===i?t:i}function ms(e,n){return null!=e&&ia(e,n,mi)}var gs=Sr((function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Te.call(n)),e[n]=t}),qs($s)),vs=Sr((function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Te.call(n)),Ce.call(e,n)?e[n].push(t):e[n]=[t]}),Jr),ys=Vi(vi);function ws(e){return Io(e)?Vt(e):Ci(e)}function bs(e){return Io(e)?Vt(e,!0):Ei(e)}var xs=wr((function(e,n,t){Li(e,n,t)})),ks=wr((function(e,n,t,i){Li(e,n,t,i)})),Cs=Ur((function(e,n){var t={};if(null==e)return t;var i=!1;n=dn(n,(function(n){return n=sr(n,e),i||(i=n.length>1),n})),vr(e,$r(e),t),i&&(t=Jt(t,7,Pr));for(var r=n.length;r--;)Qi(t,n[r]);return t}));var Es=Ur((function(e,n){return null==e?{}:function(e,n){return Oi(e,n,(function(n,t){return ms(e,t)}))}(e,n)}));function Fs(e,n){if(null==e)return{};var t=dn($r(e),(function(e){return[e]}));return n=Jr(n),Oi(e,t,(function(e,t){return n(e,t[0])}))}var Ts=Vr(ws),Ms=Vr(bs);function Ss(e){return null==e?[]:Ln(e,ws(e))}var Ls=Cr((function(e,n,t){return n=n.toLowerCase(),e+(t?As(n):n)}));function As(e){return zs(ss(e).toLowerCase())}function js(e){return(e=ss(e))&&e.replace(se,In).replace(Ae,"")}var Os=Cr((function(e,n,t){return e+(t?"-":"")+n.toLowerCase()})),Rs=Cr((function(e,n,t){return e+(t?" ":"")+n.toLowerCase()})),Is=kr("toLowerCase");var Hs=Cr((function(e,n,t){return e+(t?"_":"")+n.toLowerCase()}));var Ds=Cr((function(e,n,t){return e+(t?" ":"")+zs(n)}));var Vs=Cr((function(e,n,t){return e+(t?" ":"")+n.toUpperCase()})),zs=kr("toUpperCase");function Ns(e,n,t){return e=ss(e),void 0===(n=t?void 0:n)?function(e){return Ie.test(e)}(e)?function(e){return e.match(Oe)||[]}(e):function(e){return e.match(K)||[]}(e):e.match(n)||[]}var Bs=Vi((function(e,n){try{return rn(e,void 0,n)}catch(e){return zo(e)?e:new de(e)}})),Ps=Ur((function(e,n){return on(n,(function(n){n=Ea(n),Xt(e,n,vo(e[n],e))})),e}));function qs(e){return function(){return e}}var Us=Tr(),Ws=Tr(!0);function $s(e){return e}function Xs(e){return ki("function"==typeof e?e:Jt(e,1))}var Zs=Vi((function(e,n){return function(t){return vi(t,e,n)}})),Gs=Vi((function(e,n){return function(t){return vi(e,t,n)}}));function Js(e,n,t){var i=ws(n),r=ui(n,i);null!=t||qo(n)&&(r.length||!i.length)||(t=n,n=e,e=this,r=ui(n,ws(n)));var a=!(qo(t)&&"chain"in t&&!t.chain),o=No(e);return on(r,(function(t){var i=n[t];e[t]=i,o&&(e.prototype[t]=function(){var n=this.__chain__;if(a||n){var t=e(this.__wrapped__),r=t.__actions__=gr(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),t.__chain__=n,t}return i.apply(e,fn([this.value()],arguments))})})),e}function Ys(){}var Ks=Ar(dn),Qs=Ar(ln),el=Ar(mn);function nl(e){return la(e)?Cn(Ea(e)):function(e){return function(n){return ci(n,e)}}(e)}var tl=Or(),il=Or(!0);function rl(){return[]}function al(){return!1}var ol=Lr((function(e,n){return e+n}),0),sl=Hr("ceil"),ll=Lr((function(e,n){return e/n}),1),pl=Hr("floor");var ul,cl=Lr((function(e,n){return e*n}),1),dl=Hr("round"),fl=Lr((function(e,n){return e-n}),0);return Mt.after=function(e,n){if("function"!=typeof n)throw new ve(i);return e=is(e),function(){if(--e<1)return n.apply(this,arguments)}},Mt.ary=mo,Mt.assign=ls,Mt.assignIn=ps,Mt.assignInWith=us,Mt.assignWith=cs,Mt.at=ds,Mt.before=go,Mt.bind=vo,Mt.bindAll=Ps,Mt.bindKey=yo,Mt.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Oo(e)?e:[e]},Mt.chain=eo,Mt.chunk=function(e,n,t){n=(t?sa(e,n,t):void 0===n)?1:ot(is(n),0);var i=null==e?0:e.length;if(!i||n<1)return[];for(var r=0,a=0,o=ue(Qn(i/n));r<i;)o[a++]=Wi(e,r,r+=n);return o},Mt.compact=function(e){for(var n=-1,t=null==e?0:e.length,i=0,r=[];++n<t;){var a=e[n];a&&(r[i++]=a)}return r},Mt.concat=function(){var e=arguments.length;if(!e)return[];for(var n=ue(e-1),t=arguments[0],i=e;i--;)n[i-1]=arguments[i];return fn(Oo(t)?gr(t):[t],ai(n,1))},Mt.cond=function(e){var n=null==e?0:e.length,t=Jr();return e=n?dn(e,(function(e){if("function"!=typeof e[1])throw new ve(i);return[t(e[0]),e[1]]})):[],Vi((function(t){for(var i=-1;++i<n;){var r=e[i];if(rn(r[0],this,t))return rn(r[1],this,t)}}))},Mt.conforms=function(e){return function(e){var n=ws(e);return function(t){return Yt(t,e,n)}}(Jt(e,1))},Mt.constant=qs,Mt.countBy=io,Mt.create=function(e,n){var t=St(e);return null==n?t:$t(t,n)},Mt.curry=function e(n,t,i){var r=zr(n,8,void 0,void 0,void 0,void 0,void 0,t=i?void 0:t);return r.placeholder=e.placeholder,r},Mt.curryRight=function e(n,t,i){var r=zr(n,16,void 0,void 0,void 0,void 0,void 0,t=i?void 0:t);return r.placeholder=e.placeholder,r},Mt.debounce=wo,Mt.defaults=fs,Mt.defaultsDeep=_s,Mt.defer=bo,Mt.delay=xo,Mt.difference=Ma,Mt.differenceBy=Sa,Mt.differenceWith=La,Mt.drop=function(e,n,t){var i=null==e?0:e.length;return i?Wi(e,(n=t||void 0===n?1:is(n))<0?0:n,i):[]},Mt.dropRight=function(e,n,t){var i=null==e?0:e.length;return i?Wi(e,0,(n=i-(n=t||void 0===n?1:is(n)))<0?0:n):[]},Mt.dropRightWhile=function(e,n){return e&&e.length?nr(e,Jr(n,3),!0,!0):[]},Mt.dropWhile=function(e,n){return e&&e.length?nr(e,Jr(n,3),!0):[]},Mt.fill=function(e,n,t,i){var r=null==e?0:e.length;return r?(t&&"number"!=typeof t&&sa(e,n,t)&&(t=0,i=r),function(e,n,t,i){var r=e.length;for((t=is(t))<0&&(t=-t>r?0:r+t),(i=void 0===i||i>r?r:is(i))<0&&(i+=r),i=t>i?0:rs(i);t<i;)e[t++]=n;return e}(e,n,t,i)):[]},Mt.filter=function(e,n){return(Oo(e)?pn:ri)(e,Jr(n,3))},Mt.flatMap=function(e,n){return ai(co(e,n),1)},Mt.flatMapDeep=function(e,n){return ai(co(e,n),1/0)},Mt.flatMapDepth=function(e,n,t){return t=void 0===t?1:is(t),ai(co(e,n),t)},Mt.flatten=Oa,Mt.flattenDeep=function(e){return(null==e?0:e.length)?ai(e,1/0):[]},Mt.flattenDepth=function(e,n){return(null==e?0:e.length)?ai(e,n=void 0===n?1:is(n)):[]},Mt.flip=function(e){return zr(e,512)},Mt.flow=Us,Mt.flowRight=Ws,Mt.fromPairs=function(e){for(var n=-1,t=null==e?0:e.length,i={};++n<t;){var r=e[n];i[r[0]]=r[1]}return i},Mt.functions=function(e){return null==e?[]:ui(e,ws(e))},Mt.functionsIn=function(e){return null==e?[]:ui(e,bs(e))},Mt.groupBy=lo,Mt.initial=function(e){return(null==e?0:e.length)?Wi(e,0,-1):[]},Mt.intersection=Ia,Mt.intersectionBy=Ha,Mt.intersectionWith=Da,Mt.invert=gs,Mt.invertBy=vs,Mt.invokeMap=po,Mt.iteratee=Xs,Mt.keyBy=uo,Mt.keys=ws,Mt.keysIn=bs,Mt.map=co,Mt.mapKeys=function(e,n){var t={};return n=Jr(n,3),li(e,(function(e,i,r){Xt(t,n(e,i,r),e)})),t},Mt.mapValues=function(e,n){var t={};return n=Jr(n,3),li(e,(function(e,i,r){Xt(t,i,n(e,i,r))})),t},Mt.matches=function(e){return Mi(Jt(e,1))},Mt.matchesProperty=function(e,n){return Si(e,Jt(n,1))},Mt.memoize=ko,Mt.merge=xs,Mt.mergeWith=ks,Mt.method=Zs,Mt.methodOf=Gs,Mt.mixin=Js,Mt.negate=Co,Mt.nthArg=function(e){return e=is(e),Vi((function(n){return Ai(n,e)}))},Mt.omit=Cs,Mt.omitBy=function(e,n){return Fs(e,Co(Jr(n)))},Mt.once=function(e){return go(2,e)},Mt.orderBy=function(e,n,t,i){return null==e?[]:(Oo(n)||(n=null==n?[]:[n]),Oo(t=i?void 0:t)||(t=null==t?[]:[t]),ji(e,n,t))},Mt.over=Ks,Mt.overArgs=Eo,Mt.overEvery=Qs,Mt.overSome=el,Mt.partial=Fo,Mt.partialRight=To,Mt.partition=fo,Mt.pick=Es,Mt.pickBy=Fs,Mt.property=nl,Mt.propertyOf=function(e){return function(n){return null==e?void 0:ci(e,n)}},Mt.pull=za,Mt.pullAll=Na,Mt.pullAllBy=function(e,n,t){return e&&e.length&&n&&n.length?Ri(e,n,Jr(t,2)):e},Mt.pullAllWith=function(e,n,t){return e&&e.length&&n&&n.length?Ri(e,n,void 0,t):e},Mt.pullAt=Ba,Mt.range=tl,Mt.rangeRight=il,Mt.rearg=Mo,Mt.reject=function(e,n){return(Oo(e)?pn:ri)(e,Co(Jr(n,3)))},Mt.remove=function(e,n){var t=[];if(!e||!e.length)return t;var i=-1,r=[],a=e.length;for(n=Jr(n,3);++i<a;){var o=e[i];n(o,i,e)&&(t.push(o),r.push(i))}return Ii(e,r),t},Mt.rest=function(e,n){if("function"!=typeof e)throw new ve(i);return Vi(e,n=void 0===n?n:is(n))},Mt.reverse=Pa,Mt.sampleSize=function(e,n,t){return n=(t?sa(e,n,t):void 0===n)?1:is(n),(Oo(e)?Nt:Ni)(e,n)},Mt.set=function(e,n,t){return null==e?e:Bi(e,n,t)},Mt.setWith=function(e,n,t,i){return i="function"==typeof i?i:void 0,null==e?e:Bi(e,n,t,i)},Mt.shuffle=function(e){return(Oo(e)?Bt:Ui)(e)},Mt.slice=function(e,n,t){var i=null==e?0:e.length;return i?(t&&"number"!=typeof t&&sa(e,n,t)?(n=0,t=i):(n=null==n?0:is(n),t=void 0===t?i:is(t)),Wi(e,n,t)):[]},Mt.sortBy=_o,Mt.sortedUniq=function(e){return e&&e.length?Gi(e):[]},Mt.sortedUniqBy=function(e,n){return e&&e.length?Gi(e,Jr(n,2)):[]},Mt.split=function(e,n,t){return t&&"number"!=typeof t&&sa(e,n,t)&&(n=t=void 0),(t=void 0===t?4294967295:t>>>0)?(e=ss(e))&&("string"==typeof n||null!=n&&!Zo(n))&&!(n=Yi(n))&&Vn(e)?pr(Wn(e),0,t):e.split(n,t):[]},Mt.spread=function(e,n){if("function"!=typeof e)throw new ve(i);return n=null==n?0:ot(is(n),0),Vi((function(t){var i=t[n],r=pr(t,0,n);return i&&fn(r,i),rn(e,this,r)}))},Mt.tail=function(e){var n=null==e?0:e.length;return n?Wi(e,1,n):[]},Mt.take=function(e,n,t){return e&&e.length?Wi(e,0,(n=t||void 0===n?1:is(n))<0?0:n):[]},Mt.takeRight=function(e,n,t){var i=null==e?0:e.length;return i?Wi(e,(n=i-(n=t||void 0===n?1:is(n)))<0?0:n,i):[]},Mt.takeRightWhile=function(e,n){return e&&e.length?nr(e,Jr(n,3),!1,!0):[]},Mt.takeWhile=function(e,n){return e&&e.length?nr(e,Jr(n,3)):[]},Mt.tap=function(e,n){return n(e),e},Mt.throttle=function(e,n,t){var r=!0,a=!0;if("function"!=typeof e)throw new ve(i);return qo(t)&&(r="leading"in t?!!t.leading:r,a="trailing"in t?!!t.trailing:a),wo(e,n,{leading:r,maxWait:n,trailing:a})},Mt.thru=no,Mt.toArray=ns,Mt.toPairs=Ts,Mt.toPairsIn=Ms,Mt.toPath=function(e){return Oo(e)?dn(e,Ea):Yo(e)?[e]:gr(Ca(ss(e)))},Mt.toPlainObject=os,Mt.transform=function(e,n,t){var i=Oo(e),r=i||Do(e)||Ko(e);if(n=Jr(n,4),null==t){var a=e&&e.constructor;t=r?i?new a:[]:qo(e)&&No(a)?St($e(e)):{}}return(r?on:li)(e,(function(e,i,r){return n(t,e,i,r)})),t},Mt.unary=function(e){return mo(e,1)},Mt.union=qa,Mt.unionBy=Ua,Mt.unionWith=Wa,Mt.uniq=function(e){return e&&e.length?Ki(e):[]},Mt.uniqBy=function(e,n){return e&&e.length?Ki(e,Jr(n,2)):[]},Mt.uniqWith=function(e,n){return n="function"==typeof n?n:void 0,e&&e.length?Ki(e,void 0,n):[]},Mt.unset=function(e,n){return null==e||Qi(e,n)},Mt.unzip=$a,Mt.unzipWith=Xa,Mt.update=function(e,n,t){return null==e?e:er(e,n,or(t))},Mt.updateWith=function(e,n,t,i){return i="function"==typeof i?i:void 0,null==e?e:er(e,n,or(t),i)},Mt.values=Ss,Mt.valuesIn=function(e){return null==e?[]:Ln(e,bs(e))},Mt.without=Za,Mt.words=Ns,Mt.wrap=function(e,n){return Fo(or(n),e)},Mt.xor=Ga,Mt.xorBy=Ja,Mt.xorWith=Ya,Mt.zip=Ka,Mt.zipObject=function(e,n){return rr(e||[],n||[],qt)},Mt.zipObjectDeep=function(e,n){return rr(e||[],n||[],Bi)},Mt.zipWith=Qa,Mt.entries=Ts,Mt.entriesIn=Ms,Mt.extend=ps,Mt.extendWith=us,Js(Mt,Mt),Mt.add=ol,Mt.attempt=Bs,Mt.camelCase=Ls,Mt.capitalize=As,Mt.ceil=sl,Mt.clamp=function(e,n,t){return void 0===t&&(t=n,n=void 0),void 0!==t&&(t=(t=as(t))==t?t:0),void 0!==n&&(n=(n=as(n))==n?n:0),Gt(as(e),n,t)},Mt.clone=function(e){return Jt(e,4)},Mt.cloneDeep=function(e){return Jt(e,5)},Mt.cloneDeepWith=function(e,n){return Jt(e,5,n="function"==typeof n?n:void 0)},Mt.cloneWith=function(e,n){return Jt(e,4,n="function"==typeof n?n:void 0)},Mt.conformsTo=function(e,n){return null==n||Yt(e,n,ws(n))},Mt.deburr=js,Mt.defaultTo=function(e,n){return null==e||e!=e?n:e},Mt.divide=ll,Mt.endsWith=function(e,n,t){e=ss(e),n=Yi(n);var i=e.length,r=t=void 0===t?i:Gt(is(t),0,i);return(t-=n.length)>=0&&e.slice(t,r)==n},Mt.eq=So,Mt.escape=function(e){return(e=ss(e))&&D.test(e)?e.replace(I,Hn):e},Mt.escapeRegExp=function(e){return(e=ss(e))&&W.test(e)?e.replace(U,"\\$&"):e},Mt.every=function(e,n,t){var i=Oo(e)?ln:ti;return t&&sa(e,n,t)&&(n=void 0),i(e,Jr(n,3))},Mt.find=ro,Mt.findIndex=Aa,Mt.findKey=function(e,n){return vn(e,Jr(n,3),li)},Mt.findLast=ao,Mt.findLastIndex=ja,Mt.findLastKey=function(e,n){return vn(e,Jr(n,3),pi)},Mt.floor=pl,Mt.forEach=oo,Mt.forEachRight=so,Mt.forIn=function(e,n){return null==e?e:oi(e,Jr(n,3),bs)},Mt.forInRight=function(e,n){return null==e?e:si(e,Jr(n,3),bs)},Mt.forOwn=function(e,n){return e&&li(e,Jr(n,3))},Mt.forOwnRight=function(e,n){return e&&pi(e,Jr(n,3))},Mt.get=hs,Mt.gt=Lo,Mt.gte=Ao,Mt.has=function(e,n){return null!=e&&ia(e,n,hi)},Mt.hasIn=ms,Mt.head=Ra,Mt.identity=$s,Mt.includes=function(e,n,t,i){e=Io(e)?e:Ss(e),t=t&&!i?is(t):0;var r=e.length;return t<0&&(t=ot(r+t,0)),Jo(e)?t<=r&&e.indexOf(n,t)>-1:!!r&&wn(e,n,t)>-1},Mt.indexOf=function(e,n,t){var i=null==e?0:e.length;if(!i)return-1;var r=null==t?0:is(t);return r<0&&(r=ot(i+r,0)),wn(e,n,r)},Mt.inRange=function(e,n,t){return n=ts(n),void 0===t?(t=n,n=0):t=ts(t),function(e,n,t){return e>=st(n,t)&&e<ot(n,t)}(e=as(e),n,t)},Mt.invoke=ys,Mt.isArguments=jo,Mt.isArray=Oo,Mt.isArrayBuffer=Ro,Mt.isArrayLike=Io,Mt.isArrayLikeObject=Ho,Mt.isBoolean=function(e){return!0===e||!1===e||Uo(e)&&fi(e)==l},Mt.isBuffer=Do,Mt.isDate=Vo,Mt.isElement=function(e){return Uo(e)&&1===e.nodeType&&!Xo(e)},Mt.isEmpty=function(e){if(null==e)return!0;if(Io(e)&&(Oo(e)||"string"==typeof e||"function"==typeof e.splice||Do(e)||Ko(e)||jo(e)))return!e.length;var n=ta(e);if(n==f||n==g)return!e.size;if(ca(e))return!Ci(e).length;for(var t in e)if(Ce.call(e,t))return!1;return!0},Mt.isEqual=function(e,n){return wi(e,n)},Mt.isEqualWith=function(e,n,t){var i=(t="function"==typeof t?t:void 0)?t(e,n):void 0;return void 0===i?wi(e,n,void 0,t):!!i},Mt.isError=zo,Mt.isFinite=function(e){return"number"==typeof e&&it(e)},Mt.isFunction=No,Mt.isInteger=Bo,Mt.isLength=Po,Mt.isMap=Wo,Mt.isMatch=function(e,n){return e===n||bi(e,n,Kr(n))},Mt.isMatchWith=function(e,n,t){return t="function"==typeof t?t:void 0,bi(e,n,Kr(n),t)},Mt.isNaN=function(e){return $o(e)&&e!=+e},Mt.isNative=function(e){if(ua(e))throw new de("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xi(e)},Mt.isNil=function(e){return null==e},Mt.isNull=function(e){return null===e},Mt.isNumber=$o,Mt.isObject=qo,Mt.isObjectLike=Uo,Mt.isPlainObject=Xo,Mt.isRegExp=Zo,Mt.isSafeInteger=function(e){return Bo(e)&&e>=-9007199254740991&&e<=9007199254740991},Mt.isSet=Go,Mt.isString=Jo,Mt.isSymbol=Yo,Mt.isTypedArray=Ko,Mt.isUndefined=function(e){return void 0===e},Mt.isWeakMap=function(e){return Uo(e)&&ta(e)==w},Mt.isWeakSet=function(e){return Uo(e)&&"[object WeakSet]"==fi(e)},Mt.join=function(e,n){return null==e?"":rt.call(e,n)},Mt.kebabCase=Os,Mt.last=Va,Mt.lastIndexOf=function(e,n,t){var i=null==e?0:e.length;if(!i)return-1;var r=i;return void 0!==t&&(r=(r=is(t))<0?ot(i+r,0):st(r,i-1)),n==n?function(e,n,t){for(var i=t+1;i--;)if(e[i]===n)return i;return i}(e,n,r):yn(e,xn,r,!0)},Mt.lowerCase=Rs,Mt.lowerFirst=Is,Mt.lt=Qo,Mt.lte=es,Mt.max=function(e){return e&&e.length?ii(e,$s,_i):void 0},Mt.maxBy=function(e,n){return e&&e.length?ii(e,Jr(n,2),_i):void 0},Mt.mean=function(e){return kn(e,$s)},Mt.meanBy=function(e,n){return kn(e,Jr(n,2))},Mt.min=function(e){return e&&e.length?ii(e,$s,Fi):void 0},Mt.minBy=function(e,n){return e&&e.length?ii(e,Jr(n,2),Fi):void 0},Mt.stubArray=rl,Mt.stubFalse=al,Mt.stubObject=function(){return{}},Mt.stubString=function(){return""},Mt.stubTrue=function(){return!0},Mt.multiply=cl,Mt.nth=function(e,n){return e&&e.length?Ai(e,is(n)):void 0},Mt.noConflict=function(){return We._===this&&(We._=Se),this},Mt.noop=Ys,Mt.now=ho,Mt.pad=function(e,n,t){e=ss(e);var i=(n=is(n))?Un(e):0;if(!n||i>=n)return e;var r=(n-i)/2;return jr(et(r),t)+e+jr(Qn(r),t)},Mt.padEnd=function(e,n,t){e=ss(e);var i=(n=is(n))?Un(e):0;return n&&i<n?e+jr(n-i,t):e},Mt.padStart=function(e,n,t){e=ss(e);var i=(n=is(n))?Un(e):0;return n&&i<n?jr(n-i,t)+e:e},Mt.parseInt=function(e,n,t){return t||null==n?n=0:n&&(n=+n),pt(ss(e).replace(X,""),n||0)},Mt.random=function(e,n,t){if(t&&"boolean"!=typeof t&&sa(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=ts(e),void 0===n?(n=e,e=0):n=ts(n)),e>n){var i=e;e=n,n=i}if(t||e%1||n%1){var r=ut();return st(e+r*(n-e+Be("1e-"+((r+"").length-1))),n)}return Hi(e,n)},Mt.reduce=function(e,n,t){var i=Oo(e)?_n:Fn,r=arguments.length<3;return i(e,Jr(n,4),t,r,ei)},Mt.reduceRight=function(e,n,t){var i=Oo(e)?hn:Fn,r=arguments.length<3;return i(e,Jr(n,4),t,r,ni)},Mt.repeat=function(e,n,t){return n=(t?sa(e,n,t):void 0===n)?1:is(n),Di(ss(e),n)},Mt.replace=function(){var e=arguments,n=ss(e[0]);return e.length<3?n:n.replace(e[1],e[2])},Mt.result=function(e,n,t){var i=-1,r=(n=sr(n,e)).length;for(r||(r=1,e=void 0);++i<r;){var a=null==e?void 0:e[Ea(n[i])];void 0===a&&(i=r,a=t),e=No(a)?a.call(e):a}return e},Mt.round=dl,Mt.runInContext=e,Mt.sample=function(e){return(Oo(e)?zt:zi)(e)},Mt.size=function(e){if(null==e)return 0;if(Io(e))return Jo(e)?Un(e):e.length;var n=ta(e);return n==f||n==g?e.size:Ci(e).length},Mt.snakeCase=Hs,Mt.some=function(e,n,t){var i=Oo(e)?mn:$i;return t&&sa(e,n,t)&&(n=void 0),i(e,Jr(n,3))},Mt.sortedIndex=function(e,n){return Xi(e,n)},Mt.sortedIndexBy=function(e,n,t){return Zi(e,n,Jr(t,2))},Mt.sortedIndexOf=function(e,n){var t=null==e?0:e.length;if(t){var i=Xi(e,n);if(i<t&&So(e[i],n))return i}return-1},Mt.sortedLastIndex=function(e,n){return Xi(e,n,!0)},Mt.sortedLastIndexBy=function(e,n,t){return Zi(e,n,Jr(t,2),!0)},Mt.sortedLastIndexOf=function(e,n){if(null==e?0:e.length){var t=Xi(e,n,!0)-1;if(So(e[t],n))return t}return-1},Mt.startCase=Ds,Mt.startsWith=function(e,n,t){return e=ss(e),t=null==t?0:Gt(is(t),0,e.length),n=Yi(n),e.slice(t,t+n.length)==n},Mt.subtract=fl,Mt.sum=function(e){return e&&e.length?Tn(e,$s):0},Mt.sumBy=function(e,n){return e&&e.length?Tn(e,Jr(n,2)):0},Mt.template=function(e,n,t){var i=Mt.templateSettings;t&&sa(e,n,t)&&(n=void 0),e=ss(e),n=us({},n,i,Nr);var r,a,o=us({},n.imports,i.imports,Nr),s=ws(o),l=Ln(o,s),p=0,u=n.interpolate||le,c="__p += '",d=me((n.escape||le).source+"|"+u.source+"|"+(u===N?ee:le).source+"|"+(n.evaluate||le).source+"|$","g"),f="//# sourceURL="+(Ce.call(n,"sourceURL")?(n.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++De+"]")+"\n";e.replace(d,(function(n,t,i,o,s,l){return i||(i=o),c+=e.slice(p,l).replace(pe,Dn),t&&(r=!0,c+="' +\n__e("+t+") +\n'"),s&&(a=!0,c+="';\n"+s+";\n__p += '"),i&&(c+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),p=l+n.length,n})),c+="';\n";var _=Ce.call(n,"variable")&&n.variable;_||(c="with (obj) {\n"+c+"\n}\n"),c=(a?c.replace(A,""):c).replace(j,"$1").replace(O,"$1;"),c="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var h=Bs((function(){return fe(s,f+"return "+c).apply(void 0,l)}));if(h.source=c,zo(h))throw h;return h},Mt.times=function(e,n){if((e=is(e))<1||e>9007199254740991)return[];var t=4294967295,i=st(e,4294967295);e-=4294967295;for(var r=Mn(i,n=Jr(n));++t<e;)n(t);return r},Mt.toFinite=ts,Mt.toInteger=is,Mt.toLength=rs,Mt.toLower=function(e){return ss(e).toLowerCase()},Mt.toNumber=as,Mt.toSafeInteger=function(e){return e?Gt(is(e),-9007199254740991,9007199254740991):0===e?e:0},Mt.toString=ss,Mt.toUpper=function(e){return ss(e).toUpperCase()},Mt.trim=function(e,n,t){if((e=ss(e))&&(t||void 0===n))return e.replace($,"");if(!e||!(n=Yi(n)))return e;var i=Wn(e),r=Wn(n);return pr(i,jn(i,r),On(i,r)+1).join("")},Mt.trimEnd=function(e,n,t){if((e=ss(e))&&(t||void 0===n))return e.replace(Z,"");if(!e||!(n=Yi(n)))return e;var i=Wn(e);return pr(i,0,On(i,Wn(n))+1).join("")},Mt.trimStart=function(e,n,t){if((e=ss(e))&&(t||void 0===n))return e.replace(X,"");if(!e||!(n=Yi(n)))return e;var i=Wn(e);return pr(i,jn(i,Wn(n))).join("")},Mt.truncate=function(e,n){var t=30,i="...";if(qo(n)){var r="separator"in n?n.separator:r;t="length"in n?is(n.length):t,i="omission"in n?Yi(n.omission):i}var a=(e=ss(e)).length;if(Vn(e)){var o=Wn(e);a=o.length}if(t>=a)return e;var s=t-Un(i);if(s<1)return i;var l=o?pr(o,0,s).join(""):e.slice(0,s);if(void 0===r)return l+i;if(o&&(s+=l.length-s),Zo(r)){if(e.slice(s).search(r)){var p,u=l;for(r.global||(r=me(r.source,ss(ne.exec(r))+"g")),r.lastIndex=0;p=r.exec(u);)var c=p.index;l=l.slice(0,void 0===c?s:c)}}else if(e.indexOf(Yi(r),s)!=s){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+i},Mt.unescape=function(e){return(e=ss(e))&&H.test(e)?e.replace(R,$n):e},Mt.uniqueId=function(e){var n=++Ee;return ss(e)+n},Mt.upperCase=Vs,Mt.upperFirst=zs,Mt.each=oo,Mt.eachRight=so,Mt.first=Ra,Js(Mt,(ul={},li(Mt,(function(e,n){Ce.call(Mt.prototype,n)||(ul[n]=e)})),ul),{chain:!1}),Mt.VERSION="4.17.15",on(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mt[e].placeholder=Mt})),on(["drop","take"],(function(e,n){jt.prototype[e]=function(t){t=void 0===t?1:ot(is(t),0);var i=this.__filtered__&&!n?new jt(this):this.clone();return i.__filtered__?i.__takeCount__=st(t,i.__takeCount__):i.__views__.push({size:st(t,4294967295),type:e+(i.__dir__<0?"Right":"")}),i},jt.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}})),on(["filter","map","takeWhile"],(function(e,n){var t=n+1,i=1==t||3==t;jt.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:Jr(e,3),type:t}),n.__filtered__=n.__filtered__||i,n}})),on(["head","last"],(function(e,n){var t="take"+(n?"Right":"");jt.prototype[e]=function(){return this[t](1).value()[0]}})),on(["initial","tail"],(function(e,n){var t="drop"+(n?"":"Right");jt.prototype[e]=function(){return this.__filtered__?new jt(this):this[t](1)}})),jt.prototype.compact=function(){return this.filter($s)},jt.prototype.find=function(e){return this.filter(e).head()},jt.prototype.findLast=function(e){return this.reverse().find(e)},jt.prototype.invokeMap=Vi((function(e,n){return"function"==typeof e?new jt(this):this.map((function(t){return vi(t,e,n)}))})),jt.prototype.reject=function(e){return this.filter(Co(Jr(e)))},jt.prototype.slice=function(e,n){e=is(e);var t=this;return t.__filtered__&&(e>0||n<0)?new jt(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),void 0!==n&&(t=(n=is(n))<0?t.dropRight(-n):t.take(n-e)),t)},jt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},jt.prototype.toArray=function(){return this.take(4294967295)},li(jt.prototype,(function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),r=Mt[i?"take"+("last"==n?"Right":""):n],a=i||/^find/.test(n);r&&(Mt.prototype[n]=function(){var n=this.__wrapped__,o=i?[1]:arguments,s=n instanceof jt,l=o[0],p=s||Oo(n),u=function(e){var n=r.apply(Mt,fn([e],o));return i&&c?n[0]:n};p&&t&&"function"==typeof l&&1!=l.length&&(s=p=!1);var c=this.__chain__,d=!!this.__actions__.length,f=a&&!c,_=s&&!d;if(!a&&p){n=_?n:new jt(this);var h=e.apply(n,o);return h.__actions__.push({func:no,args:[u],thisArg:void 0}),new At(h,c)}return f&&_?e.apply(this,o):(h=this.thru(u),f?i?h.value()[0]:h.value():h)})})),on(["pop","push","shift","sort","splice","unshift"],(function(e){var n=ye[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Mt.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return n.apply(Oo(r)?r:[],e)}return this[t]((function(t){return n.apply(Oo(t)?t:[],e)}))}})),li(jt.prototype,(function(e,n){var t=Mt[n];if(t){var i=t.name+"";Ce.call(yt,i)||(yt[i]=[]),yt[i].push({name:n,func:t})}})),yt[Mr(void 0,2).name]=[{name:"wrapper",func:void 0}],jt.prototype.clone=function(){var e=new jt(this.__wrapped__);return e.__actions__=gr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gr(this.__views__),e},jt.prototype.reverse=function(){if(this.__filtered__){var e=new jt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},jt.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=Oo(e),i=n<0,r=t?e.length:0,a=function(e,n,t){var i=-1,r=t.length;for(;++i<r;){var a=t[i],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":n-=o;break;case"take":n=st(n,e+o);break;case"takeRight":e=ot(e,n-o)}}return{start:e,end:n}}(0,r,this.__views__),o=a.start,s=a.end,l=s-o,p=i?s:o-1,u=this.__iteratees__,c=u.length,d=0,f=st(l,this.__takeCount__);if(!t||!i&&r==l&&f==l)return tr(e,this.__actions__);var _=[];e:for(;l--&&d<f;){for(var h=-1,m=e[p+=n];++h<c;){var g=u[h],v=g.iteratee,y=g.type,w=v(m);if(2==y)m=w;else if(!w){if(1==y)continue e;break e}}_[d++]=m}return _},Mt.prototype.at=to,Mt.prototype.chain=function(){return eo(this)},Mt.prototype.commit=function(){return new At(this.value(),this.__chain__)},Mt.prototype.next=function(){void 0===this.__values__&&(this.__values__=ns(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Mt.prototype.plant=function(e){for(var n,t=this;t instanceof Lt;){var i=Ta(t);i.__index__=0,i.__values__=void 0,n?r.__wrapped__=i:n=i;var r=i;t=t.__wrapped__}return r.__wrapped__=e,n},Mt.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof jt){var n=e;return this.__actions__.length&&(n=new jt(this)),(n=n.reverse()).__actions__.push({func:no,args:[Pa],thisArg:void 0}),new At(n,this.__chain__)}return this.thru(Pa)},Mt.prototype.toJSON=Mt.prototype.valueOf=Mt.prototype.value=function(){return tr(this.__wrapped__,this.__actions__)},Mt.prototype.first=Mt.prototype.head,En&&(Mt.prototype[En]=function(){return this}),Mt}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(We._=Xn,define((function(){return Xn}))):Xe?((Xe.exports=Xn)._=Xn,$e._=Xn):We._=Xn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],235:[function(e,n,t){"use strict";t.byteLength=function(e){var n=p(e),t=n[0],i=n[1];return 3*(t+i)/4-i},t.toByteArray=function(e){var n,t,i=p(e),o=i[0],s=i[1],l=new a(function(e,n,t){return 3*(n+t)/4-t}(0,o,s)),u=0,c=s>0?o-4:o;for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],l[u++]=n>>16&255,l[u++]=n>>8&255,l[u++]=255&n;2===s&&(n=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,l[u++]=255&n);1===s&&(n=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,l[u++]=n>>8&255,l[u++]=255&n);return l},t.fromByteArray=function(e){for(var n,t=e.length,r=t%3,a=[],o=0,s=t-r;o<s;o+=16383)a.push(u(e,o,o+16383>s?s:o+16383));1===r?(n=e[t-1],a.push(i[n>>2]+i[n<<4&63]+"==")):2===r&&(n=(e[t-2]<<8)+e[t-1],a.push(i[n>>10]+i[n>>4&63]+i[n<<2&63]+"="));return a.join("")};for(var i=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)i[s]=o[s],r[o.charCodeAt(s)]=s;function p(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return-1===t&&(t=n),[t,t===n?0:4-t%4]}function u(e,n,t){for(var r,a,o=[],s=n;s<t;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(i[(a=r)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],236:[function(e,n,t){(function(n){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var i=e("base64-js"),r=e("ieee754");t.Buffer=n,t.SlowBuffer=function(e){+e!=e&&(e=0);return n.alloc(+e)},t.INSPECT_MAX_BYTES=50;function a(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=n.prototype,t}function n(e,n,t){if("number"==typeof e){if("string"==typeof n)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return o(e,n,t)}function o(e,t,i){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!n.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|c(e,t),r=a(i),o=r.write(e,t);o!==i&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return p(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return function(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i);return r.__proto__=n.prototype,r}(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return n.from(r,t,i);var o=function(e){if(n.isBuffer(e)){var t=0|u(e.length),i=a(t);return 0===i.length||e.copy(i,0,0,t),i}if(void 0!==e.length)return"number"!=typeof e.length||z(e.length)?a(0):p(e);if("Buffer"===e.type&&Array.isArray(e.data))return p(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return n.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return s(e),a(e<0?0:0|u(e))}function p(e){for(var n=e.length<0?0:0|u(e.length),t=a(n),i=0;i<n;i+=1)t[i]=255&e[i];return t}function u(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function c(e,t){if(n.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return H(e).length;default:if(a)return r?-1:I(e).length;t=(""+t).toLowerCase(),a=!0}}function d(e,n,t){var i=!1;if((void 0===n||n<0)&&(n=0),n>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(n>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return F(this,n,t);case"utf8":case"utf-8":return k(this,n,t);case"ascii":return C(this,n,t);case"latin1":case"binary":return E(this,n,t);case"base64":return x(this,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,n,t);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function f(e,n,t){var i=e[n];e[n]=e[t],e[t]=i}function _(e,t,i,r,a){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),z(i=+i)&&(i=a?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(a)return-1;i=e.length-1}else if(i<0){if(!a)return-1;i=0}if("string"==typeof t&&(t=n.from(t,r)),n.isBuffer(t))return 0===t.length?-1:h(e,t,i,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):h(e,[t],i,r,a);throw new TypeError("val must be string, number or Buffer")}function h(e,n,t,i,r){var a,o=1,s=e.length,l=n.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||n.length<2)return-1;o=2,s/=2,l/=2,t/=2}function p(e,n){return 1===o?e[n]:e.readUInt16BE(n*o)}if(r){var u=-1;for(a=t;a<s;a++)if(p(e,a)===p(n,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(t+l>s&&(t=s-l),a=t;a>=0;a--){for(var c=!0,d=0;d<l;d++)if(p(e,a+d)!==p(n,d)){c=!1;break}if(c)return a}return-1}function m(e,n,t,i){t=Number(t)||0;var r=e.length-t;i?(i=Number(i))>r&&(i=r):i=r;var a=n.length;i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(n.substr(2*o,2),16);if(z(s))return o;e[t+o]=s}return o}function g(e,n,t,i){return D(I(n,e.length-t),e,t,i)}function v(e,n,t,i){return D(function(e){for(var n=[],t=0;t<e.length;++t)n.push(255&e.charCodeAt(t));return n}(n),e,t,i)}function y(e,n,t,i){return v(e,n,t,i)}function w(e,n,t,i){return D(H(n),e,t,i)}function b(e,n,t,i){return D(function(e,n){for(var t,i,r,a=[],o=0;o<e.length&&!((n-=2)<0);++o)t=e.charCodeAt(o),i=t>>8,r=t%256,a.push(r),a.push(i);return a}(n,e.length-t),e,t,i)}function x(e,n,t){return 0===n&&t===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(n,t))}function k(e,n,t){t=Math.min(e.length,t);for(var i=[],r=n;r<t;){var a,o,s,l,p=e[r],u=null,c=p>239?4:p>223?3:p>191?2:1;if(r+c<=t)switch(c){case 1:p<128&&(u=p);break;case 2:128==(192&(a=e[r+1]))&&(l=(31&p)<<6|63&a)>127&&(u=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&(l=(15&p)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&p)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,c=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=c}return function(e){var n=e.length;if(n<=4096)return String.fromCharCode.apply(String,e);var t="",i=0;for(;i<n;)t+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return t}(i)}t.kMaxLength=2147483647,n.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),n.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(e,n,t){return o(e,n,t)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(e,n,t){return function(e,n,t){return s(e),e<=0?a(e):void 0!==n?"string"==typeof t?a(e).fill(n,t):a(e).fill(n):a(e)}(e,n,t)},n.allocUnsafe=function(e){return l(e)},n.allocUnsafeSlow=function(e){return l(e)},n.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==n.prototype},n.compare=function(e,t){if(V(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=n.from(t,t.offset,t.byteLength)),!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,r=t.length,a=0,o=Math.min(i,r);a<o;++a)if(e[a]!==t[a]){i=e[a],r=t[a];break}return i<r?-1:r<i?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return n.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var r=n.allocUnsafe(t),a=0;for(i=0;i<e.length;++i){var o=e[i];if(V(o,Uint8Array)&&(o=n.from(o)),!n.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},n.byteLength=c,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)f(this,n,n+1);return this},n.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)f(this,n,n+3),f(this,n+1,n+2);return this},n.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)f(this,n,n+7),f(this,n+1,n+6),f(this,n+2,n+5),f(this,n+3,n+4);return this},n.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):d.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===n.compare(this,e)},n.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n.prototype.compare=function(e,t,i,r,a){if(V(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),!n.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||i>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=i)return 0;if(r>=a)return-1;if(t>=i)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(r>>>=0),s=(i>>>=0)-(t>>>=0),l=Math.min(o,s),p=this.slice(r,a),u=e.slice(t,i),c=0;c<l;++c)if(p[c]!==u[c]){o=p[c],s=u[c];break}return o<s?-1:s<o?1:0},n.prototype.includes=function(e,n,t){return-1!==this.indexOf(e,n,t)},n.prototype.indexOf=function(e,n,t){return _(this,e,n,t,!0)},n.prototype.lastIndexOf=function(e,n,t){return _(this,e,n,t,!1)},n.prototype.write=function(e,n,t,i){if(void 0===n)i="utf8",t=this.length,n=0;else if(void 0===t&&"string"==typeof n)i=n,t=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(t)?(t>>>=0,void 0===i&&(i="utf8")):(i=t,t=void 0)}var r=this.length-n;if((void 0===t||t>r)&&(t=r),e.length>0&&(t<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return m(this,e,n,t);case"utf8":case"utf-8":return g(this,e,n,t);case"ascii":return v(this,e,n,t);case"latin1":case"binary":return y(this,e,n,t);case"base64":return w(this,e,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,n,t);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(e,n,t){var i="";t=Math.min(e.length,t);for(var r=n;r<t;++r)i+=String.fromCharCode(127&e[r]);return i}function E(e,n,t){var i="";t=Math.min(e.length,t);for(var r=n;r<t;++r)i+=String.fromCharCode(e[r]);return i}function F(e,n,t){var i=e.length;(!n||n<0)&&(n=0),(!t||t<0||t>i)&&(t=i);for(var r="",a=n;a<t;++a)r+=R(e[a]);return r}function T(e,n,t){for(var i=e.slice(n,t),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function M(e,n,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+n>t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,i,r,a,o){if(!n.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function L(e,n,t,i,r,a){if(t+i>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function A(e,n,t,i,a){return n=+n,t>>>=0,a||L(e,0,t,4),r.write(e,n,t,i,23,4),t+4}function j(e,n,t,i,a){return n=+n,t>>>=0,a||L(e,0,t,8),r.write(e,n,t,i,52,8),t+8}n.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=n.prototype,r},n.prototype.readUIntLE=function(e,n,t){e>>>=0,n>>>=0,t||M(e,n,this.length);for(var i=this[e],r=1,a=0;++a<n&&(r*=256);)i+=this[e+a]*r;return i},n.prototype.readUIntBE=function(e,n,t){e>>>=0,n>>>=0,t||M(e,n,this.length);for(var i=this[e+--n],r=1;n>0&&(r*=256);)i+=this[e+--n]*r;return i},n.prototype.readUInt8=function(e,n){return e>>>=0,n||M(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,n){return e>>>=0,n||M(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,n){return e>>>=0,n||M(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,n){return e>>>=0,n||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,n){return e>>>=0,n||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,n,t){e>>>=0,n>>>=0,t||M(e,n,this.length);for(var i=this[e],r=1,a=0;++a<n&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*n)),i},n.prototype.readIntBE=function(e,n,t){e>>>=0,n>>>=0,t||M(e,n,this.length);for(var i=n,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*n)),a},n.prototype.readInt8=function(e,n){return e>>>=0,n||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,n){e>>>=0,n||M(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},n.prototype.readInt16BE=function(e,n){e>>>=0,n||M(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},n.prototype.readInt32LE=function(e,n){return e>>>=0,n||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,n){return e>>>=0,n||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,n){return e>>>=0,n||M(e,4,this.length),r.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,n){return e>>>=0,n||M(e,4,this.length),r.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,n){return e>>>=0,n||M(e,8,this.length),r.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,n){return e>>>=0,n||M(e,8,this.length),r.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,n,t,i){(e=+e,n>>>=0,t>>>=0,i)||S(this,e,n,t,Math.pow(2,8*t)-1,0);var r=1,a=0;for(this[n]=255&e;++a<t&&(r*=256);)this[n+a]=e/r&255;return n+t},n.prototype.writeUIntBE=function(e,n,t,i){(e=+e,n>>>=0,t>>>=0,i)||S(this,e,n,t,Math.pow(2,8*t)-1,0);var r=t-1,a=1;for(this[n+r]=255&e;--r>=0&&(a*=256);)this[n+r]=e/a&255;return n+t},n.prototype.writeUInt8=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,1,255,0),this[n]=255&e,n+1},n.prototype.writeUInt16LE=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,2,65535,0),this[n]=255&e,this[n+1]=e>>>8,n+2},n.prototype.writeUInt16BE=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=255&e,n+2},n.prototype.writeUInt32LE=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e,n+4},n.prototype.writeUInt32BE=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},n.prototype.writeIntLE=function(e,n,t,i){if(e=+e,n>>>=0,!i){var r=Math.pow(2,8*t-1);S(this,e,n,t,r-1,-r)}var a=0,o=1,s=0;for(this[n]=255&e;++a<t&&(o*=256);)e<0&&0===s&&0!==this[n+a-1]&&(s=1),this[n+a]=(e/o>>0)-s&255;return n+t},n.prototype.writeIntBE=function(e,n,t,i){if(e=+e,n>>>=0,!i){var r=Math.pow(2,8*t-1);S(this,e,n,t,r-1,-r)}var a=t-1,o=1,s=0;for(this[n+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[n+a+1]&&(s=1),this[n+a]=(e/o>>0)-s&255;return n+t},n.prototype.writeInt8=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=255&e,n+1},n.prototype.writeInt16LE=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,2,32767,-32768),this[n]=255&e,this[n+1]=e>>>8,n+2},n.prototype.writeInt16BE=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=255&e,n+2},n.prototype.writeInt32LE=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,4,2147483647,-2147483648),this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4},n.prototype.writeInt32BE=function(e,n,t){return e=+e,n>>>=0,t||S(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},n.prototype.writeFloatLE=function(e,n,t){return A(this,e,n,!0,t)},n.prototype.writeFloatBE=function(e,n,t){return A(this,e,n,!1,t)},n.prototype.writeDoubleLE=function(e,n,t){return j(this,e,n,!0,t)},n.prototype.writeDoubleBE=function(e,n,t){return j(this,e,n,!1,t)},n.prototype.copy=function(e,t,i,r){if(!n.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var a=r-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,r);else if(this===e&&i<t&&t<r)for(var o=a-1;o>=0;--o)e[o+t]=this[o+i];else Uint8Array.prototype.set.call(e,this.subarray(i,r),t);return a},n.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!n.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var a=e.charCodeAt(0);("utf8"===r&&a<128||"latin1"===r)&&(e=a)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var o;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(o=t;o<i;++o)this[o]=e;else{var s=n.isBuffer(e)?e:n.from(e,r),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<i-t;++o)this[o+t]=s[o%l]}return this};var O=/[^+/0-9A-Za-z-_]/g;function R(e){return e<16?"0"+e.toString(16):e.toString(16)}function I(e,n){var t;n=n||1/0;for(var i=e.length,r=null,a=[],o=0;o<i;++o){if((t=e.charCodeAt(o))>55295&&t<57344){if(!r){if(t>56319){(n-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(n-=3)>-1&&a.push(239,191,189);continue}r=t;continue}if(t<56320){(n-=3)>-1&&a.push(239,191,189),r=t;continue}t=65536+(r-55296<<10|t-56320)}else r&&(n-=3)>-1&&a.push(239,191,189);if(r=null,t<128){if((n-=1)<0)break;a.push(t)}else if(t<2048){if((n-=2)<0)break;a.push(t>>6|192,63&t|128)}else if(t<65536){if((n-=3)<0)break;a.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return a}function H(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,n,t,i){for(var r=0;r<i&&!(r+t>=n.length||r>=e.length);++r)n[r+t]=e[r];return r}function V(e,n){return e instanceof n||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===n.name}function z(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":235,buffer:236,ieee754:243}],237:[function(e,n,t){var i=e("color-name"),r={};for(var a in i)i.hasOwnProperty(a)&&(r[i[a]]=a);var o=n.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in o)if(o.hasOwnProperty(s)){if(!("channels"in o[s]))throw new Error("missing channels property: "+s);if(!("labels"in o[s]))throw new Error("missing channel labels property: "+s);if(o[s].labels.length!==o[s].channels)throw new Error("channel and label counts mismatch: "+s);var l=o[s].channels,p=o[s].labels;delete o[s].channels,delete o[s].labels,Object.defineProperty(o[s],"channels",{value:l}),Object.defineProperty(o[s],"labels",{value:p})}o.rgb.hsl=function(e){var n,t,i=e[0]/255,r=e[1]/255,a=e[2]/255,o=Math.min(i,r,a),s=Math.max(i,r,a),l=s-o;return s===o?n=0:i===s?n=(r-a)/l:r===s?n=2+(a-i)/l:a===s&&(n=4+(i-r)/l),(n=Math.min(60*n,360))<0&&(n+=360),t=(o+s)/2,[n,100*(s===o?0:t<=.5?l/(s+o):l/(2-s-o)),100*t]},o.rgb.hsv=function(e){var n,t,i,r,a,o=e[0]/255,s=e[1]/255,l=e[2]/255,p=Math.max(o,s,l),u=p-Math.min(o,s,l),c=function(e){return(p-e)/6/u+.5};return 0===u?r=a=0:(a=u/p,n=c(o),t=c(s),i=c(l),o===p?r=i-t:s===p?r=1/3+n-i:l===p&&(r=2/3+t-n),r<0?r+=1:r>1&&(r-=1)),[360*r,100*a,100*p]},o.rgb.hwb=function(e){var n=e[0],t=e[1],i=e[2];return[o.rgb.hsl(e)[0],100*(1/255*Math.min(n,Math.min(t,i))),100*(i=1-1/255*Math.max(n,Math.max(t,i)))]},o.rgb.cmyk=function(e){var n,t=e[0]/255,i=e[1]/255,r=e[2]/255;return[100*((1-t-(n=Math.min(1-t,1-i,1-r)))/(1-n)||0),100*((1-i-n)/(1-n)||0),100*((1-r-n)/(1-n)||0),100*n]},o.rgb.keyword=function(e){var n=r[e];if(n)return n;var t,a,o,s=1/0;for(var l in i)if(i.hasOwnProperty(l)){var p=i[l],u=(a=e,o=p,Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)+Math.pow(a[2]-o[2],2));u<s&&(s=u,t=l)}return t},o.keyword.rgb=function(e){return i[e]},o.rgb.xyz=function(e){var n=e[0]/255,t=e[1]/255,i=e[2]/255;return[100*(.4124*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.3576*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*n+.7152*t+.0722*i),100*(.0193*n+.1192*t+.9505*i)]},o.rgb.lab=function(e){var n=o.rgb.xyz(e),t=n[0],i=n[1],r=n[2];return i/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(t-i),200*(i-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},o.hsl.rgb=function(e){var n,t,i,r,a,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[a=255*l,a,a];n=2*l-(t=l<.5?l*(1+s):l+s-l*s),r=[0,0,0];for(var p=0;p<3;p++)(i=o+1/3*-(p-1))<0&&i++,i>1&&i--,a=6*i<1?n+6*(t-n)*i:2*i<1?t:3*i<2?n+(t-n)*(2/3-i)*6:n,r[p]=255*a;return r},o.hsl.hsv=function(e){var n=e[0],t=e[1]/100,i=e[2]/100,r=t,a=Math.max(i,.01);return t*=(i*=2)<=1?i:2-i,r*=a<=1?a:2-a,[n,100*(0===i?2*r/(a+r):2*t/(i+t)),100*((i+t)/2)]},o.hsv.rgb=function(e){var n=e[0]/60,t=e[1]/100,i=e[2]/100,r=Math.floor(n)%6,a=n-Math.floor(n),o=255*i*(1-t),s=255*i*(1-t*a),l=255*i*(1-t*(1-a));switch(i*=255,r){case 0:return[i,l,o];case 1:return[s,i,o];case 2:return[o,i,l];case 3:return[o,s,i];case 4:return[l,o,i];case 5:return[i,o,s]}},o.hsv.hsl=function(e){var n,t,i,r=e[0],a=e[1]/100,o=e[2]/100,s=Math.max(o,.01);return i=(2-a)*o,t=a*s,[r,100*(t=(t/=(n=(2-a)*s)<=1?n:2-n)||0),100*(i/=2)]},o.hwb.rgb=function(e){var n,t,i,r,a,o,s,l=e[0]/360,p=e[1]/100,u=e[2]/100,c=p+u;switch(c>1&&(p/=c,u/=c),i=6*l-(n=Math.floor(6*l)),0!=(1&n)&&(i=1-i),r=p+i*((t=1-u)-p),n){default:case 6:case 0:a=t,o=r,s=p;break;case 1:a=r,o=t,s=p;break;case 2:a=p,o=t,s=r;break;case 3:a=p,o=r,s=t;break;case 4:a=r,o=p,s=t;break;case 5:a=t,o=p,s=r}return[255*a,255*o,255*s]},o.cmyk.rgb=function(e){var n=e[0]/100,t=e[1]/100,i=e[2]/100,r=e[3]/100;return[255*(1-Math.min(1,n*(1-r)+r)),255*(1-Math.min(1,t*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r))]},o.xyz.rgb=function(e){var n,t,i,r=e[0]/100,a=e[1]/100,o=e[2]/100;return t=-.9689*r+1.8758*a+.0415*o,i=.0557*r+-.204*a+1.057*o,n=(n=3.2406*r+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,[255*(n=Math.min(Math.max(0,n),1)),255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1))]},o.xyz.lab=function(e){var n=e[0],t=e[1],i=e[2];return t/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(t=t>.008856?Math.pow(t,1/3):7.787*t+16/116)-16,500*(n-t),200*(t-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},o.lab.xyz=function(e){var n,t,i,r=e[0];n=e[1]/500+(t=(r+16)/116),i=t-e[2]/200;var a=Math.pow(t,3),o=Math.pow(n,3),s=Math.pow(i,3);return t=a>.008856?a:(t-16/116)/7.787,n=o>.008856?o:(n-16/116)/7.787,i=s>.008856?s:(i-16/116)/7.787,[n*=95.047,t*=100,i*=108.883]},o.lab.lch=function(e){var n,t=e[0],i=e[1],r=e[2];return(n=360*Math.atan2(r,i)/2/Math.PI)<0&&(n+=360),[t,Math.sqrt(i*i+r*r),n]},o.lch.lab=function(e){var n,t=e[0],i=e[1];return n=e[2]/360*2*Math.PI,[t,i*Math.cos(n),i*Math.sin(n)]},o.rgb.ansi16=function(e){var n=e[0],t=e[1],i=e[2],r=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];if(0===(r=Math.round(r/50)))return 30;var a=30+(Math.round(i/255)<<2|Math.round(t/255)<<1|Math.round(n/255));return 2===r&&(a+=60),a},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){var n=e[0],t=e[1],i=e[2];return n===t&&t===i?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)},o.ansi16.rgb=function(e){var n=e%10;if(0===n||7===n)return e>50&&(n+=3.5),[n=n/10.5*255,n,n];var t=.5*(1+~~(e>50));return[(1&n)*t*255,(n>>1&1)*t*255,(n>>2&1)*t*255]},o.ansi256.rgb=function(e){if(e>=232){var n=10*(e-232)+8;return[n,n,n]}var t;return e-=16,[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},o.rgb.hex=function(e){var n=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(n.length)+n},o.hex.rgb=function(e){var n=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var t=n[0];3===n[0].length&&(t=t.split("").map((function(e){return e+e})).join(""));var i=parseInt(t,16);return[i>>16&255,i>>8&255,255&i]},o.rgb.hcg=function(e){var n,t=e[0]/255,i=e[1]/255,r=e[2]/255,a=Math.max(Math.max(t,i),r),o=Math.min(Math.min(t,i),r),s=a-o;return n=s<=0?0:a===t?(i-r)/s%6:a===i?2+(r-t)/s:4+(t-i)/s+4,n/=6,[360*(n%=1),100*s,100*(s<1?o/(1-s):0)]},o.hsl.hcg=function(e){var n=e[1]/100,t=e[2]/100,i=1,r=0;return(i=t<.5?2*n*t:2*n*(1-t))<1&&(r=(t-.5*i)/(1-i)),[e[0],100*i,100*r]},o.hsv.hcg=function(e){var n=e[1]/100,t=e[2]/100,i=n*t,r=0;return i<1&&(r=(t-i)/(1-i)),[e[0],100*i,100*r]},o.hcg.rgb=function(e){var n=e[0]/360,t=e[1]/100,i=e[2]/100;if(0===t)return[255*i,255*i,255*i];var r,a=[0,0,0],o=n%1*6,s=o%1,l=1-s;switch(Math.floor(o)){case 0:a[0]=1,a[1]=s,a[2]=0;break;case 1:a[0]=l,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=s;break;case 3:a[0]=0,a[1]=l,a[2]=1;break;case 4:a[0]=s,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=l}return r=(1-t)*i,[255*(t*a[0]+r),255*(t*a[1]+r),255*(t*a[2]+r)]},o.hcg.hsv=function(e){var n=e[1]/100,t=n+e[2]/100*(1-n),i=0;return t>0&&(i=n/t),[e[0],100*i,100*t]},o.hcg.hsl=function(e){var n=e[1]/100,t=e[2]/100*(1-n)+.5*n,i=0;return t>0&&t<.5?i=n/(2*t):t>=.5&&t<1&&(i=n/(2*(1-t))),[e[0],100*i,100*t]},o.hcg.hwb=function(e){var n=e[1]/100,t=n+e[2]/100*(1-n);return[e[0],100*(t-n),100*(1-t)]},o.hwb.hcg=function(e){var n=e[1]/100,t=1-e[2]/100,i=t-n,r=0;return i<1&&(r=(t-i)/(1-i)),[e[0],100*i,100*r]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]},o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){var n=255&Math.round(e[0]/100*255),t=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},{"color-name":240}],238:[function(e,n,t){var i=e("./conversions"),r=e("./route"),a={};Object.keys(i).forEach((function(e){a[e]={},Object.defineProperty(a[e],"channels",{value:i[e].channels}),Object.defineProperty(a[e],"labels",{value:i[e].labels});var n=r(e);Object.keys(n).forEach((function(t){var i=n[t];a[e][t]=function(e){var n=function(n){if(null==n)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var t=e(n);if("object"==typeof t)for(var i=t.length,r=0;r<i;r++)t[r]=Math.round(t[r]);return t};return"conversion"in e&&(n.conversion=e.conversion),n}(i),a[e][t].raw=function(e){var n=function(n){return null==n?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),e(n))};return"conversion"in e&&(n.conversion=e.conversion),n}(i)}))})),n.exports=a},{"./conversions":237,"./route":239}],239:[function(e,n,t){var i=e("./conversions");function r(e){var n=function(){for(var e={},n=Object.keys(i),t=n.length,r=0;r<t;r++)e[n[r]]={distance:-1,parent:null};return e}(),t=[e];for(n[e].distance=0;t.length;)for(var r=t.pop(),a=Object.keys(i[r]),o=a.length,s=0;s<o;s++){var l=a[s],p=n[l];-1===p.distance&&(p.distance=n[r].distance+1,p.parent=r,t.unshift(l))}return n}function a(e,n){return function(t){return n(e(t))}}function o(e,n){for(var t=[n[e].parent,e],r=i[n[e].parent][e],o=n[e].parent;n[o].parent;)t.unshift(n[o].parent),r=a(i[n[o].parent][o],r),o=n[o].parent;return r.conversion=t,r}n.exports=function(e){for(var n=r(e),t={},i=Object.keys(n),a=i.length,s=0;s<a;s++){var l=i[s];null!==n[l].parent&&(t[l]=o(l,n))}return t}},{"./conversions":237}],240:[function(e,n,t){"use strict";n.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],241:[function(e,n,t){var i=e("color-name"),r=e("simple-swizzle"),a={};for(var o in i)i.hasOwnProperty(o)&&(a[i[o]]=o);var s=n.exports={to:{},get:{}};function l(e,n,t){return Math.min(Math.max(n,e),t)}function p(e){var n=e.toString(16).toUpperCase();return n.length<2?"0"+n:n}s.get=function(e){var n,t;switch(e.substring(0,3).toLowerCase()){case"hsl":n=s.get.hsl(e),t="hsl";break;case"hwb":n=s.get.hwb(e),t="hwb";break;default:n=s.get.rgb(e),t="rgb"}return n?{model:t,value:n}:null},s.get.rgb=function(e){if(!e)return null;var n,t,r,a=[0,0,0,1];if(n=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=n[2],n=n[1],t=0;t<3;t++){var o=2*t;a[t]=parseInt(n.slice(o,o+2),16)}r&&(a[3]=Math.round(parseInt(r,16)/255*100)/100)}else if(n=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(n=n[1])[3],t=0;t<3;t++)a[t]=parseInt(n[t]+n[t],16);r&&(a[3]=Math.round(parseInt(r+r,16)/255*100)/100)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(t=0;t<3;t++)a[t]=parseInt(n[t+1],0);n[4]&&(a[3]=parseFloat(n[4]))}else{if(!(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(n=e.match(/(\D+)/))?"transparent"===n[1]?[0,0,0,0]:(a=i[n[1]])?(a[3]=1,a):null:null;for(t=0;t<3;t++)a[t]=Math.round(2.55*parseFloat(n[t+1]));n[4]&&(a[3]=parseFloat(n[4]))}for(t=0;t<3;t++)a[t]=l(a[t],0,255);return a[3]=l(a[3],0,1),a},s.get.hsl=function(e){if(!e)return null;var n=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var t=parseFloat(n[4]);return[(parseFloat(n[1])+360)%360,l(parseFloat(n[2]),0,100),l(parseFloat(n[3]),0,100),l(isNaN(t)?1:t,0,1)]}return null},s.get.hwb=function(e){if(!e)return null;var n=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var t=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,l(parseFloat(n[2]),0,100),l(parseFloat(n[3]),0,100),l(isNaN(t)?1:t,0,1)]}return null},s.to.hex=function(){var e=r(arguments);return"#"+p(e[0])+p(e[1])+p(e[2])+(e[3]<1?p(Math.round(255*e[3])):"")},s.to.rgb=function(){var e=r(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},s.to.rgb.percent=function(){var e=r(arguments),n=Math.round(e[0]/255*100),t=Math.round(e[1]/255*100),i=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+n+"%, "+t+"%, "+i+"%)":"rgba("+n+"%, "+t+"%, "+i+"%, "+e[3]+")"},s.to.hsl=function(){var e=r(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},s.to.hwb=function(){var e=r(arguments),n="";return e.length>=4&&1!==e[3]&&(n=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+n+")"},s.to.keyword=function(e){return a[e.slice(0,3)]}},{"color-name":240,"simple-swizzle":287}],242:[function(e,n,t){"use strict";var i=e("color-string"),r=e("color-convert"),a=[].slice,o=["keyword","gray","hex"],s={};Object.keys(r).forEach((function(e){s[a.call(r[e].labels).sort().join("")]=e}));var l={};function p(e,n){if(!(this instanceof p))return new p(e,n);if(n&&n in o&&(n=null),n&&!(n in r))throw new Error("Unknown model: "+n);var t,u;if(e)if(e instanceof p)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var c=i.get(e);if(null===c)throw new Error("Unable to parse color from string: "+e);this.model=c.model,u=r[this.model].channels,this.color=c.value.slice(0,u),this.valpha="number"==typeof c.value[u]?c.value[u]:1}else if(e.length){this.model=n||"rgb",u=r[this.model].channels;var d=a.call(e,0,u);this.color=f(d,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var _=Object.keys(e);"alpha"in e&&(_.splice(_.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var h=_.sort().join("");if(!(h in s))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=s[h];var m=r[this.model].labels,g=[];for(t=0;t<m.length;t++)g.push(e[m[t]]);this.color=f(g)}else this.model="rgb",this.color=[0,0,0],this.valpha=1;if(l[this.model])for(u=r[this.model].channels,t=0;t<u;t++){var v=l[this.model][t];v&&(this.color[t]=v(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(e,n,t){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(l[e]||(l[e]=[]))[n]=t})),e=e[0],function(i){var r;return arguments.length?(t&&(i=t(i)),(r=this[e]()).color[n]=i,r):(r=this[e]().color[n],t&&(r=t(r)),r)}}function c(e){return function(n){return Math.max(0,Math.min(e,n))}}function d(e){return Array.isArray(e)?e:[e]}function f(e,n){for(var t=0;t<n;t++)"number"!=typeof e[t]&&(e[t]=0);return e}p.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var n=this.model in i.to?this:this.rgb(),t=1===(n=n.round("number"==typeof e?e:1)).valpha?n.color:n.color.concat(this.valpha);return i.to[n.model](t)},percentString:function(e){var n=this.rgb().round("number"==typeof e?e:1),t=1===n.valpha?n.color:n.color.concat(this.valpha);return i.to.rgb.percent(t)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},n=r[this.model].channels,t=r[this.model].labels,i=0;i<n;i++)e[t[i]]=this.color[i];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new p(this.color.map(function(e){return function(n){return function(e,n){return Number(e.toFixed(n))}(n,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new p(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:u("rgb",0,c(255)),green:u("rgb",1,c(255)),blue:u("rgb",2,c(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:u("hsl",1,c(100)),lightness:u("hsl",2,c(100)),saturationv:u("hsv",1,c(100)),value:u("hsv",2,c(100)),chroma:u("hcg",1,c(100)),gray:u("hcg",2,c(100)),white:u("hwb",1,c(100)),wblack:u("hwb",2,c(100)),cyan:u("cmyk",0,c(100)),magenta:u("cmyk",1,c(100)),yellow:u("cmyk",2,c(100)),black:u("cmyk",3,c(100)),x:u("xyz",0,c(100)),y:u("xyz",1,c(100)),z:u("xyz",2,c(100)),l:u("lab",0,c(100)),a:u("lab",1),b:u("lab",2),keyword:function(e){return arguments.length?new p(e):r[this.model].keyword(this.color)},hex:function(e){return arguments.length?new p(e):i.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,n=[],t=0;t<e.length;t++){var i=e[t]/255;n[t]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*n[0]+.7152*n[1]+.0722*n[2]},contrast:function(e){var n=this.luminosity(),t=e.luminosity();return n>t?(n+.05)/(t+.05):(t+.05)/(n+.05)},level:function(e){var n=this.contrast(e);return n>=7.1?"AAA":n>=4.5?"AA":""},dark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=this.rgb(),n=0;n<3;n++)e.color[n]=255-e.color[n];return e},lighten:function(e){var n=this.hsl();return n.color[2]+=n.color[2]*e,n},darken:function(e){var n=this.hsl();return n.color[2]-=n.color[2]*e,n},saturate:function(e){var n=this.hsl();return n.color[1]+=n.color[1]*e,n},desaturate:function(e){var n=this.hsl();return n.color[1]-=n.color[1]*e,n},whiten:function(e){var n=this.hwb();return n.color[1]+=n.color[1]*e,n},blacken:function(e){var n=this.hwb();return n.color[2]+=n.color[2]*e,n},grayscale:function(){var e=this.rgb().color,n=.3*e[0]+.59*e[1]+.11*e[2];return p.rgb(n,n,n)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var n=this.hsl(),t=n.color[0];return t=(t=(t+e)%360)<0?360+t:t,n.color[0]=t,n},mix:function(e,n){var t=this.rgb(),i=e.rgb(),r=void 0===n?.5:n,a=2*r-1,o=t.alpha()-i.alpha(),s=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return p.rgb(s*t.red()+l*i.red(),s*t.green()+l*i.green(),s*t.blue()+l*i.blue(),t.alpha()*r+i.alpha()*(1-r))}},Object.keys(r).forEach((function(e){if(-1===o.indexOf(e)){var n=r[e].channels;p.prototype[e]=function(){if(this.model===e)return new p(this);if(arguments.length)return new p(arguments,e);var t="number"==typeof arguments[n]?n:this.valpha;return new p(d(r[this.model][e].raw(this.color)).concat(t),e)},p[e]=function(t){return"number"==typeof t&&(t=f(a.call(arguments),n)),new p(t,e)}}})),n.exports=p},{"color-convert":238,"color-string":241}],243:[function(e,n,t){t.read=function(e,n,t,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,p=l>>1,u=-7,c=t?r-1:0,d=t?-1:1,f=e[n+c];for(c+=d,a=f&(1<<-u)-1,f>>=-u,u+=s;u>0;a=256*a+e[n+c],c+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=i;u>0;o=256*o+e[n+c],c+=d,u-=8);if(0===a)a=1-p;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),a-=p}return(f?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,n,t,i,r,a){var o,s,l,p=8*a-r-1,u=(1<<p)-1,c=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,_=i?1:-1,h=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(s=isNaN(n)?1:0,o=u):(o=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-o))<1&&(o--,l*=2),(n+=o+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=u?(s=0,o=u):o+c>=1?(s=(n*l-1)*Math.pow(2,r),o+=c):(s=n*Math.pow(2,c-1)*Math.pow(2,r),o=0));r>=8;e[t+f]=255&s,f+=_,s/=256,r-=8);for(o=o<<r|s,p+=r;p>0;e[t+f]=255&o,f+=_,o/=256,p-=8);e[t+f-_]|=128*h}},{}],244:[function(e,n,t){n.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},{}],245:[function(e,n,t){"use strict";var i=e("./dataReader");function r(e){if(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0;for(var n=0;n<this.data.length;n++)e[n]=255&e[n]}}r.prototype=new i,r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var n=e.charCodeAt(0),t=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===n&&this.data[a+1]===t&&this.data[a+2]===i&&this.data[a+3]===r)return a-this.zero;return-1},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=r},{"./dataReader":250}],246:[function(e,n,t){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e,n){for(var t,r,a,o,s,l,p,u="",c=0;c<e.length;)o=(t=e.charCodeAt(c++))>>2,s=(3&t)<<4|(r=e.charCodeAt(c++))>>4,l=(15&r)<<2|(a=e.charCodeAt(c++))>>6,p=63&a,isNaN(r)?l=p=64:isNaN(a)&&(p=64),u=u+i.charAt(o)+i.charAt(s)+i.charAt(l)+i.charAt(p);return u},t.decode=function(e,n){var t,r,a,o,s,l,p="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=i.indexOf(e.charAt(u++))<<2|(o=i.indexOf(e.charAt(u++)))>>4,r=(15&o)<<4|(s=i.indexOf(e.charAt(u++)))>>2,a=(3&s)<<6|(l=i.indexOf(e.charAt(u++))),p+=String.fromCharCode(t),64!=s&&(p+=String.fromCharCode(r)),64!=l&&(p+=String.fromCharCode(a));return p}},{}],247:[function(e,n,t){"use strict";function i(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}i.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},n.exports=i},{}],248:[function(e,n,t){"use strict";t.STORE={magic:"\0\0",compress:function(e,n){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},t.DEFLATE=e("./flate")},{"./flate":253}],249:[function(e,n,t){"use strict";var i=e("./utils"),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];n.exports=function(e,n){if(void 0===e||!e.length)return 0;var t="string"!==i.getTypeOf(e);void 0===n&&(n=0);var a=0;n^=-1;for(var o=0,s=e.length;o<s;o++)a=t?e[o]:e.charCodeAt(o),n=n>>>8^r[255&(n^a)];return-1^n}},{"./utils":266}],250:[function(e,n,t){"use strict";var i=e("./utils");function r(e){this.data=null,this.length=0,this.index=0,this.zero=0}r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var n,t=0;for(this.checkOffset(e),n=this.index+e-1;n>=this.index;n--)t=(t<<8)+this.byteAt(n);return this.index+=e,t},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},n.exports=r},{"./utils":266}],251:[function(e,n,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!1,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],252:[function(e,n,t){"use strict";var i=e("./utils");t.string2binary=function(e){return i.string2binary(e)},t.string2Uint8Array=function(e){return i.transformTo("uint8array",e)},t.uint8Array2String=function(e){return i.transformTo("string",e)},t.string2Blob=function(e){var n=i.transformTo("arraybuffer",e);return i.arrayBuffer2Blob(n)},t.arrayBuffer2Blob=function(e){return i.arrayBuffer2Blob(e)},t.transformTo=function(e,n){return i.transformTo(e,n)},t.getTypeOf=function(e){return i.getTypeOf(e)},t.checkSupport=function(e){return i.checkSupport(e)},t.MAX_VALUE_16BITS=i.MAX_VALUE_16BITS,t.MAX_VALUE_32BITS=i.MAX_VALUE_32BITS,t.pretty=function(e){return i.pretty(e)},t.findCompression=function(e){return i.findCompression(e)},t.isRegExp=function(e){return i.isRegExp(e)}},{"./utils":266}],253:[function(e,n,t){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=e("pako");t.uncompressInputType=i?"uint8array":"array",t.compressInputType=i?"uint8array":"array",t.magic="\b\0",t.compress=function(e,n){return r.deflateRaw(e,{level:n.level||-1})},t.uncompress=function(e){return r.inflateRaw(e)}},{pako:269}],254:[function(e,n,t){"use strict";var i=e("./base64");function r(e,n){if(!(this instanceof r))return new r(e,n);this.files={},this.comment=null,this.root="",e&&this.load(e,n),this.clone=function(){var e=new r;for(var n in this)"function"!=typeof this[n]&&(e[n]=this[n]);return e}}r.prototype=e("./object"),r.prototype.load=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.utils=e("./deprecatedPublicUtils"),r.base64={encode:function(e){return i.encode(e)},decode:function(e){return i.decode(e)}},r.compressions=e("./compressions"),n.exports=r},{"./base64":246,"./compressions":248,"./defaults":251,"./deprecatedPublicUtils":252,"./load":255,"./object":258,"./support":262}],255:[function(e,n,t){"use strict";var i=e("./base64"),r=e("./utf8"),a=e("./utils"),o=e("./zipEntries");n.exports=function(e,n){var t,s,l,p;for((n=a.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode})).base64&&(e=i.decode(e)),t=(s=new o(e,n)).files,l=0;l<t.length;l++)p=t[l],this.file(p.fileNameStr,p.decompressed,{binary:!0,optimizedBinaryString:!0,date:p.date,dir:p.dir,comment:p.fileCommentStr.length?p.fileCommentStr:null,unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions,createFolders:n.createFolders});return s.zipComment.length&&(this.comment=s.zipComment),this}},{"./base64":246,"./utf8":265,"./utils":266,"./zipEntries":267}],256:[function(e,n,t){(function(e){"use strict";n.exports=function(n,t){return new e(n,t)},n.exports.test=function(n){return e.isBuffer(n)}}).call(this,e("buffer").Buffer)},{buffer:236}],257:[function(e,n,t){"use strict";var i=e("./uint8ArrayReader");function r(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0}r.prototype=new i,r.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=r},{"./uint8ArrayReader":263}],258:[function(e,n,t){"use strict";var i=e("./support"),r=e("./utils"),a=e("./crc32"),o=e("./signature"),s=e("./defaults"),l=e("./base64"),p=e("./compressions"),u=e("./compressedObject"),c=e("./nodeBuffer"),d=e("./utf8"),f=e("./stringWriter"),_=e("./uint8ArrayWriter"),h=function(e){if(e._data instanceof u&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===r.getTypeOf(e._data))){var n=e._data;e._data=new Uint8Array(n.length),0!==n.length&&e._data.set(n,0)}return e._data},m=function(e){var n=h(e);return"string"===r.getTypeOf(n)?!e.options.binary&&i.nodebuffer?c(n,"utf-8"):e.asBinary():n},g=function(e){var n=h(this);return null==n?"":(this.options.base64&&(n=l.decode(n)),n=e&&this.options.binary?F.utf8decode(n):r.transformTo("string",n),e||this.options.binary||(n=r.transformTo("string",F.utf8encode(n))),n)},v=function(e,n,t){this.name=e,this.dir=t.dir,this.date=t.date,this.comment=t.comment,this.unixPermissions=t.unixPermissions,this.dosPermissions=t.dosPermissions,this._data=n,this.options=t,this._initialMetadata={dir:t.dir,date:t.date}};v.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var e=m(this);return r.transformTo("nodebuffer",e)},asUint8Array:function(){var e=m(this);return r.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var y=function(e,n){var t,i="";for(t=0;t<n;t++)i+=String.fromCharCode(255&e),e>>>=8;return i},w=function(e,n,t){var i,a=r.getTypeOf(n);if("string"==typeof(t=function(e){return!0!==(e=e||{}).base64||null!==e.binary&&void 0!==e.binary||(e.binary=!0),(e=r.extend(e,s)).date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e}(t)).unixPermissions&&(t.unixPermissions=parseInt(t.unixPermissions,8)),t.unixPermissions&&16384&t.unixPermissions&&(t.dir=!0),t.dosPermissions&&16&t.dosPermissions&&(t.dir=!0),t.dir&&(e=x(e)),t.createFolders&&(i=b(e))&&k.call(this,i,!0),t.dir||null==n)t.base64=!1,t.binary=!1,n=null,a=null;else if("string"===a)t.binary&&!t.base64&&!0!==t.optimizedBinaryString&&(n=r.string2binary(n));else{if(t.base64=!1,t.binary=!0,!(a||n instanceof u))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===a&&(n=r.transformTo("uint8array",n))}var o=new v(e,n,t);return this.files[e]=o,o},b=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var n=e.lastIndexOf("/");return n>0?e.substring(0,n):""},x=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},k=function(e,n){return n=void 0!==n&&n,e=x(e),this.files[e]||w.call(this,e,null,{dir:!0,createFolders:n}),this.files[e]},C=function(e,n,t){var i,o=new u;return e._data instanceof u?(o.uncompressedSize=e._data.uncompressedSize,o.crc32=e._data.crc32,0===o.uncompressedSize||e.dir?(n=p.STORE,o.compressedContent="",o.crc32=0):e._data.compressionMethod===n.magic?o.compressedContent=e._data.getCompressedContent():(i=e._data.getContent(),o.compressedContent=n.compress(r.transformTo(n.compressInputType,i),t))):((i=m(e))&&0!==i.length&&!e.dir||(n=p.STORE,i=""),o.uncompressedSize=i.length,o.crc32=a(i),o.compressedContent=n.compress(r.transformTo(n.compressInputType,i),t)),o.compressedSize=o.compressedContent.length,o.compressionMethod=n.magic,o},E=function(e,n,t,i,s,l){t.compressedContent;var p,u,c,f,_=l!==d.utf8encode,h=r.transformTo("string",l(n.name)),m=r.transformTo("string",d.utf8encode(n.name)),g=n.comment||"",v=r.transformTo("string",l(g)),w=r.transformTo("string",d.utf8encode(g)),b=m.length!==n.name.length,x=w.length!==g.length,k=n.options,C="",E="",F="";c=n._initialMetadata.dir!==n.dir?n.dir:k.dir,f=n._initialMetadata.date!==n.date?n.date:k.date;var T,M,S,L=0,A=0;c&&(L|=16),"UNIX"===s?(A=798,L|=(T=n.unixPermissions,M=c,S=T,T||(S=M?16893:33204),(65535&S)<<16)):(A=20,L|=63&(n.dosPermissions||0)),p=f.getHours(),p<<=6,p|=f.getMinutes(),p<<=5,p|=f.getSeconds()/2,u=f.getFullYear()-1980,u<<=4,u|=f.getMonth()+1,u<<=5,u|=f.getDate(),b&&(E=y(1,1)+y(a(h),4)+m,C+="up"+y(E.length,2)+E),x&&(F=y(1,1)+y(this.crc32(v),4)+w,C+="uc"+y(F.length,2)+F);var j="";return j+="\n\0",j+=_||!b&&!x?"\0\0":"\0\b",j+=t.compressionMethod,j+=y(p,2),j+=y(u,2),j+=y(t.crc32,4),j+=y(t.compressedSize,4),j+=y(t.uncompressedSize,4),j+=y(h.length,2),j+=y(C.length,2),{fileRecord:o.LOCAL_FILE_HEADER+j+h+C,dirRecord:o.CENTRAL_FILE_HEADER+y(A,2)+j+y(v.length,2)+"\0\0\0\0"+y(L,4)+y(i,4)+h+C+v,compressedObject:t}},F={load:function(e,n){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var n,t,i,a,o=[];for(n in this.files)this.files.hasOwnProperty(n)&&(i=this.files[n],a=new v(i.name,i._data,r.extend(i.options)),t=n.slice(this.root.length,n.length),n.slice(0,this.root.length)===this.root&&e(t,a)&&o.push(a));return o},file:function(e,n,t){if(1===arguments.length){if(r.isRegExp(e)){var i=e;return this.filter((function(e,n){return!n.dir&&i.test(e)}))}return this.filter((function(n,t){return!t.dir&&n===e}))[0]||null}return e=this.root+e,w.call(this,e,n,t),this},folder:function(e){if(!e)return this;if(r.isRegExp(e))return this.filter((function(n,t){return t.dir&&e.test(n)}));var n=this.root+e,t=k.call(this,n),i=this.clone();return i.root=t.name,i},remove:function(e){e=this.root+e;var n=this.files[e];if(n||("/"!=e.slice(-1)&&(e+="/"),n=this.files[e]),n&&!n.dir)delete this.files[e];else for(var t=this.filter((function(n,t){return t.name.slice(0,e.length)===e})),i=0;i<t.length;i++)delete this.files[t[i].name];return this},generate:function(e){e=r.extend(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode}),r.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var n,t,i=[],a=0,s=0,u=r.transformTo("string",e.encodeFileName(e.comment||this.comment||""));for(var c in this.files)if(this.files.hasOwnProperty(c)){var h=this.files[c],m=h.options.compression||e.compression.toUpperCase(),g=p[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=h.options.compressionOptions||e.compressionOptions||{},w=C.call(this,h,g,v),b=E.call(this,c,h,w,a,e.platform,e.encodeFileName);a+=b.fileRecord.length+w.compressedSize,s+=b.dirRecord.length,i.push(b)}var x;x=o.CENTRAL_DIRECTORY_END+"\0\0\0\0"+y(i.length,2)+y(i.length,2)+y(s,4)+y(a,4)+y(u.length,2)+u;var k=e.type.toLowerCase();for(n="uint8array"===k||"arraybuffer"===k||"blob"===k||"nodebuffer"===k?new _(a+s+x.length):new f(a+s+x.length),t=0;t<i.length;t++)n.append(i[t].fileRecord),n.append(i[t].compressedObject.compressedContent);for(t=0;t<i.length;t++)n.append(i[t].dirRecord);n.append(x);var F=n.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(e.type.toLowerCase(),F);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",F),e.mimeType);case"base64":return e.base64?l.encode(F):F;default:return F}},crc32:function(e,n){return a(e,n)},utf8encode:function(e){return r.transformTo("string",d.utf8encode(e))},utf8decode:function(e){return d.utf8decode(e)}};n.exports=F},{"./base64":246,"./compressedObject":247,"./compressions":248,"./crc32":249,"./defaults":251,"./nodeBuffer":256,"./signature":259,"./stringWriter":261,"./support":262,"./uint8ArrayWriter":264,"./utf8":265,"./utils":266}],259:[function(e,n,t){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},{}],260:[function(e,n,t){"use strict";var i=e("./dataReader"),r=e("./utils");function a(e,n){this.data=e,n||(this.data=r.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}a.prototype=new i,a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"./dataReader":250,"./utils":266}],261:[function(e,n,t){"use strict";var i=e("./utils"),r=function(){this.data=[]};r.prototype={append:function(e){e=i.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},n.exports=r},{"./utils":266}],262:[function(e,n,t){(function(e){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var n=new ArrayBuffer(0);try{t.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);i.append(n),t.blob=0===i.getBlob("application/zip").size}catch(e){t.blob=!1}}}}).call(this,e("buffer").Buffer)},{buffer:236}],263:[function(e,n,t){"use strict";var i=e("./arrayReader");function r(e){e&&(this.data=e,this.length=this.data.length,this.index=0,this.zero=0)}r.prototype=new i,r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=r},{"./arrayReader":245}],264:[function(e,n,t){"use strict";var i=e("./utils"),r=function(e){this.data=new Uint8Array(e),this.index=0};r.prototype={append:function(e){0!==e.length&&(e=i.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},n.exports=r},{"./utils":266}],265:[function(e,n,t){"use strict";for(var i=e("./utils"),r=e("./support"),a=e("./nodeBuffer"),o=new Array(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;o[254]=o[254]=1;var l=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;t>=0&&128==(192&e[t]);)t--;return t<0||0===t?n:t+o[e[t]]>n?t:n},p=function(e){var n,t,r,a,s=e.length,l=new Array(2*s);for(t=0,n=0;n<s;)if((r=e[n++])<128)l[t++]=r;else if((a=o[r])>4)l[t++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&n<s;)r=r<<6|63&e[n++],a--;a>1?l[t++]=65533:r<65536?l[t++]=r:(r-=65536,l[t++]=55296|r>>10&1023,l[t++]=56320|1023&r)}return l.length!==t&&(l.subarray?l=l.subarray(0,t):l.length=t),i.applyFromCharCode(l)};t.utf8encode=function(e){return r.nodebuffer?a(e,"utf-8"):function(e){var n,t,i,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(t=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(t=65536+(t-55296<<10)+(i-56320),a++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=r.uint8array?new Uint8Array(l):new Array(l),o=0,a=0;o<l;a++)55296==(64512&(t=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(t=65536+(t-55296<<10)+(i-56320),a++),t<128?n[o++]=t:t<2048?(n[o++]=192|t>>>6,n[o++]=128|63&t):t<65536?(n[o++]=224|t>>>12,n[o++]=128|t>>>6&63,n[o++]=128|63&t):(n[o++]=240|t>>>18,n[o++]=128|t>>>12&63,n[o++]=128|t>>>6&63,n[o++]=128|63&t);return n}(e)},t.utf8decode=function(e){if(r.nodebuffer)return i.transformTo("nodebuffer",e).toString("utf-8");for(var n=[],t=0,a=(e=i.transformTo(r.uint8array?"uint8array":"array",e)).length;t<a;){var o=l(e,Math.min(t+65536,a));r.uint8array?n.push(p(e.subarray(t,o))):n.push(p(e.slice(t,o))),t=o}return n.join("")}},{"./nodeBuffer":256,"./support":262,"./utils":266}],266:[function(e,n,t){"use strict";var i=e("./support"),r=e("./compressions"),a=e("./nodeBuffer");function o(e){return e}function s(e,n){for(var t=0;t<e.length;++t)n[t]=255&e.charCodeAt(t);return n}function l(e){var n=65536,i=[],r=e.length,o=t.getTypeOf(e),s=0,l=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,a(0))}}catch(e){l=!1}if(!l){for(var p="",u=0;u<e.length;u++)p+=String.fromCharCode(e[u]);return p}for(;s<r&&n>1;)try{"array"===o||"nodebuffer"===o?i.push(String.fromCharCode.apply(null,e.slice(s,Math.min(s+n,r)))):i.push(String.fromCharCode.apply(null,e.subarray(s,Math.min(s+n,r)))),s+=n}catch(e){n=Math.floor(n/2)}return i.join("")}function p(e,n){for(var t=0;t<e.length;t++)n[t]=e[t];return n}t.string2binary=function(e){for(var n="",t=0;t<e.length;t++)n+=String.fromCharCode(255&e.charCodeAt(t));return n},t.arrayBuffer2Blob=function(e,n){t.checkSupport("blob"),n=n||"application/zip";try{return new Blob([e],{type:n})}catch(t){try{var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return i.append(e),i.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}},t.applyFromCharCode=l;var u={};u.string={string:o,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return u.string.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:function(e){return s(e,a(e.length))}},u.array={string:l,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a(e)}},u.arraybuffer={string:function(e){return l(new Uint8Array(e))},array:function(e){return p(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a(new Uint8Array(e))}},u.uint8array={string:l,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return a(e)}},u.nodebuffer={string:l,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return u.nodebuffer.uint8array(e).buffer},uint8array:function(e){return p(e,new Uint8Array(e.length))},nodebuffer:o},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var i=t.getTypeOf(n);return u[i][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":i.nodebuffer&&a.test(e)?"nodebuffer":i.uint8array&&e instanceof Uint8Array?"uint8array":i.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!i[e.toLowerCase()])throw new Error(e+" is not supported by this browser")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var n,t,i="";for(t=0;t<(e||"").length;t++)i+="\\x"+((n=e.charCodeAt(t))<16?"0":"")+n.toString(16).toUpperCase();return i},t.findCompression=function(e){for(var n in r)if(r.hasOwnProperty(n)&&r[n].magic===e)return r[n];return null},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.extend=function(){var e,n,t={};for(e=0;e<arguments.length;e++)for(n in arguments[e])arguments[e].hasOwnProperty(n)&&void 0===t[n]&&(t[n]=arguments[e][n]);return t}},{"./compressions":248,"./nodeBuffer":256,"./support":262}],267:[function(e,n,t){"use strict";var i=e("./stringReader"),r=e("./nodeBufferReader"),a=e("./uint8ArrayReader"),o=e("./arrayReader"),s=e("./utils"),l=e("./signature"),p=e("./zipEntry"),u=e("./support");e("./object");function c(e,n){this.files=[],this.loadOptions=n,e&&this.load(e)}c.prototype={checkSignature:function(e){var n=this.reader.readString(4);if(n!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(n)+", expected "+s.pretty(e)+")")},isSignature:function(e,n){var t=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===n;return this.reader.setIndex(t),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),n=u.uint8array?"uint8array":"array",t=s.transformTo(n,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,n,t,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),n=this.reader.readInt(4),t=this.reader.readString(n),this.zip64ExtensibleData[e]={id:e,length:n,value:t}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,n;for(e=0;e<this.files.length;e++)n=this.files[e],this.reader.setIndex(n.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),n.readLocalPart(this.reader),n.handleUTF8(),n.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)(e=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory");this.reader.setIndex(e);var n=e;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var t=this.centralDirOffset+this.centralDirSize;this.zip64&&(t+=20,t+=12+this.zip64EndOfCentralSize);var i=n-t;if(i>0)this.isSignature(n,l.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){var n=s.getTypeOf(e);if(s.checkSupport(n),"string"!==n||u.uint8array)if("nodebuffer"===n)this.reader=new r(e);else if(u.uint8array)this.reader=new a(s.transformTo("uint8array",e));else{if(!u.array)throw new Error("Unexpected error: unsupported type '"+n+"'");this.reader=new o(s.transformTo("array",e))}else this.reader=new i(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./arrayReader":245,"./nodeBufferReader":257,"./object":258,"./signature":259,"./stringReader":260,"./support":262,"./uint8ArrayReader":263,"./utils":266,"./zipEntry":268}],268:[function(e,n,t){"use strict";var i=e("./stringReader"),r=e("./utils"),a=e("./compressedObject"),o=e("./object"),s=e("./support");function l(e,n){this.options=e,this.loadOptions=n}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(e,n,t){return function(){var i=e.index;e.setIndex(n);var r=e.readData(t);return e.setIndex(i),r}},prepareContent:function(e,n,t,i,a){return function(){var e=r.transformTo(i.uncompressInputType,this.getCompressedContent()),n=i.uncompress(e);if(n.length!==a)throw new Error("Bug : uncompressed data size mismatch");return n}},readLocalPart:function(e){var n,t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(n=r.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,n),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,n,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=r.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readData(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var n=new i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(e){var n,t,i,r=e.index;for(this.extraFields=this.extraFields||{};e.index<r+this.extraFieldsLength;)n=e.readInt(2),t=e.readInt(2),i=e.readString(t),this.extraFields[n]={id:n,length:t,value:i}},handleUTF8:function(){var e=s.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var n=this.findExtraFieldUnicodePath();if(null!==n)this.fileNameStr=n;else{var t=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var a=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var n=new i(e.value);return 1!==n.readInt(1)||o.crc32(this.fileName)!==n.readInt(4)?null:o.utf8decode(n.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var n=new i(e.value);return 1!==n.readInt(1)||o.crc32(this.fileComment)!==n.readInt(4)?null:o.utf8decode(n.readString(e.length-5))}return null}},n.exports=l},{"./compressedObject":247,"./object":258,"./stringReader":260,"./support":262,"./utils":266}],269:[function(e,n,t){"use strict";var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":270,"./lib/inflate":271,"./lib/utils/common":272,"./lib/zlib/constants":275}],270:[function(e,n,t){"use strict";var i=e("./zlib/deflate"),r=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString;function p(e){if(!(this instanceof p))return new p(e);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var t=i.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(0!==t)throw new Error(o[t]);if(n.header&&i.deflateSetHeader(this.strm,n.header),n.dictionary){var u;if(u="string"==typeof n.dictionary?a.string2buf(n.dictionary):"[object ArrayBuffer]"===l.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,0!==(t=i.deflateSetDictionary(this.strm,u)))throw new Error(o[t]);this._dict_set=!0}}function u(e,n){var t=new p(n);if(t.push(e,!0),t.err)throw t.msg||o[t.err];return t.result}p.prototype.push=function(e,n){var t,o,s=this.strm,p=this.options.chunkSize;if(this.ended)return!1;o=n===~~n?n:!0===n?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(p),s.next_out=0,s.avail_out=p),1!==(t=i.deflate(s,o))&&0!==t)return this.onEnd(t),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==t);return 4===o?(t=i.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,0===t):2!==o||(this.onEnd(0),s.avail_out=0,!0)},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=p,t.deflate=u,t.deflateRaw=function(e,n){return(n=n||{}).raw=!0,u(e,n)},t.gzip=function(e,n){return(n=n||{}).gzip=!0,u(e,n)}},{"./utils/common":272,"./utils/strings":273,"./zlib/deflate":277,"./zlib/messages":282,"./zlib/zstream":284}],271:[function(e,n,t){"use strict";var i=e("./zlib/inflate"),r=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),p=e("./zlib/gzheader"),u=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&0==(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var t=i.inflateInit2(this.strm,n.windowBits);if(t!==o.Z_OK)throw new Error(s[t]);if(this.header=new p,i.inflateGetHeader(this.strm,this.header),n.dictionary&&("string"==typeof n.dictionary?n.dictionary=a.string2buf(n.dictionary):"[object ArrayBuffer]"===u.call(n.dictionary)&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=i.inflateSetDictionary(this.strm,n.dictionary))!==o.Z_OK))throw new Error(s[t])}function d(e,n){var t=new c(n);if(t.push(e,!0),t.err)throw t.msg||s[t.err];return t.result}c.prototype.push=function(e,n){var t,s,l,p,c,d=this.strm,f=this.options.chunkSize,_=this.options.dictionary,h=!1;if(this.ended)return!1;s=n===~~n?n:!0===n?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?d.input=a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new r.Buf8(f),d.next_out=0,d.avail_out=f),(t=i.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&_&&(t=i.inflateSetDictionary(this.strm,_)),t===o.Z_BUF_ERROR&&!0===h&&(t=o.Z_OK,h=!1),t!==o.Z_STREAM_END&&t!==o.Z_OK)return this.onEnd(t),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&t!==o.Z_STREAM_END&&(0!==d.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(d.output,d.next_out),p=d.next_out-l,c=a.buf2string(d.output,l),d.next_out=p,d.avail_out=f-p,p&&r.arraySet(d.output,d.output,l,p,0),this.onData(c)):this.onData(r.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(h=!0)}while((d.avail_in>0||0===d.avail_out)&&t!==o.Z_STREAM_END);return t===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(t=i.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),d.avail_out=0,!0)},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=c,t.inflate=d,t.inflateRaw=function(e,n){return(n=n||{}).raw=!0,d(e,n)},t.ungzip=d},{"./utils/common":272,"./utils/strings":273,"./zlib/constants":275,"./zlib/gzheader":278,"./zlib/inflate":280,"./zlib/messages":282,"./zlib/zstream":284}],272:[function(e,n,t){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,n){return Object.prototype.hasOwnProperty.call(e,n)}t.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var t=n.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(var i in t)r(t,i)&&(e[i]=t[i])}}return e},t.shrinkBuf=function(e,n){return e.length===n?e:e.subarray?e.subarray(0,n):(e.length=n,e)};var a={arraySet:function(e,n,t,i,r){if(n.subarray&&e.subarray)e.set(n.subarray(t,t+i),r);else for(var a=0;a<i;a++)e[r+a]=n[t+a]},flattenChunks:function(e){var n,t,i,r,a,o;for(i=0,n=0,t=e.length;n<t;n++)i+=e[n].length;for(o=new Uint8Array(i),r=0,n=0,t=e.length;n<t;n++)a=e[n],o.set(a,r),r+=a.length;return o}},o={arraySet:function(e,n,t,i,r){for(var a=0;a<i;a++)e[r+a]=n[t+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(i)},{}],273:[function(e,n,t){"use strict";var i=e("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new i.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,n){if(n<65534&&(e.subarray&&a||!e.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(e,n));for(var t="",o=0;o<n;o++)t+=String.fromCharCode(e[o]);return t}o[254]=o[254]=1,t.string2buf=function(e){var n,t,r,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(t=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(t=65536+(t-55296<<10)+(r-56320),a++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=new i.Buf8(l),o=0,a=0;o<l;a++)55296==(64512&(t=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(t=65536+(t-55296<<10)+(r-56320),a++),t<128?n[o++]=t:t<2048?(n[o++]=192|t>>>6,n[o++]=128|63&t):t<65536?(n[o++]=224|t>>>12,n[o++]=128|t>>>6&63,n[o++]=128|63&t):(n[o++]=240|t>>>18,n[o++]=128|t>>>12&63,n[o++]=128|t>>>6&63,n[o++]=128|63&t);return n},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var n=new i.Buf8(e.length),t=0,r=n.length;t<r;t++)n[t]=e.charCodeAt(t);return n},t.buf2string=function(e,n){var t,i,r,a,s=n||e.length,p=new Array(2*s);for(i=0,t=0;t<s;)if((r=e[t++])<128)p[i++]=r;else if((a=o[r])>4)p[i++]=65533,t+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&t<s;)r=r<<6|63&e[t++],a--;a>1?p[i++]=65533:r<65536?p[i++]=r:(r-=65536,p[i++]=55296|r>>10&1023,p[i++]=56320|1023&r)}return l(p,i)},t.utf8border=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;t>=0&&128==(192&e[t]);)t--;return t<0||0===t?n:t+o[e[t]]>n?t:n}},{"./common":272}],274:[function(e,n,t){"use strict";n.exports=function(e,n,t,i){for(var r=65535&e|0,a=e>>>16&65535|0,o=0;0!==t;){t-=o=t>2e3?2e3:t;do{a=a+(r=r+n[i++]|0)|0}while(--o);r%=65521,a%=65521}return r|a<<16|0}},{}],275:[function(e,n,t){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],276:[function(e,n,t){"use strict";var i=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n,t,r){var a=i,o=r+t;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^n[s])];return-1^e}},{}],277:[function(e,n,t){"use strict";var i,r=e("../utils/common"),a=e("./trees"),o=e("./adler32"),s=e("./crc32"),l=e("./messages");function p(e,n){return e.msg=l[n],n}function u(e){return(e<<1)-(e>4?9:0)}function c(e){for(var n=e.length;--n>=0;)e[n]=0}function d(e){var n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(r.arraySet(e.output,n.pending_buf,n.pending_out,t,e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,0===n.pending&&(n.pending_out=0))}function f(e,n){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,d(e.strm)}function _(e,n){e.pending_buf[e.pending++]=n}function h(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function m(e,n){var t,i,r=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,p=e.window,u=e.w_mask,c=e.prev,d=e.strstart+258,f=p[a+o-1],_=p[a+o];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(p[(t=n)+o]===_&&p[t+o-1]===f&&p[t]===p[a]&&p[++t]===p[a+1]){a+=2,t++;do{}while(p[++a]===p[++t]&&p[++a]===p[++t]&&p[++a]===p[++t]&&p[++a]===p[++t]&&p[++a]===p[++t]&&p[++a]===p[++t]&&p[++a]===p[++t]&&p[++a]===p[++t]&&a<d);if(i=258-(d-a),a=d-258,i>o){if(e.match_start=n,o=i,i>=s)break;f=p[a+o-1],_=p[a+o]}}}while((n=c[n&u])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead}function g(e){var n,t,i,a,l,p,u,c,d,f,_=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=_+(_-262)){r.arraySet(e.window,e.window,_,_,0),e.match_start-=_,e.strstart-=_,e.block_start-=_,n=t=e.hash_size;do{i=e.head[--n],e.head[n]=i>=_?i-_:0}while(--t);n=t=_;do{i=e.prev[--n],e.prev[n]=i>=_?i-_:0}while(--t);a+=_}if(0===e.strm.avail_in)break;if(p=e.strm,u=e.window,c=e.strstart+e.lookahead,d=a,f=void 0,(f=p.avail_in)>d&&(f=d),t=0===f?0:(p.avail_in-=f,r.arraySet(u,p.input,p.next_in,f,c),1===p.state.wrap?p.adler=o(p.adler,u,f,c):2===p.state.wrap&&(p.adler=s(p.adler,u,f,c)),p.next_in+=f,p.total_in+=f,f),e.lookahead+=t,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function v(e,n){for(var t,i;;){if(e.lookahead<262){if(g(e),e.lookahead<262&&0===n)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-262&&(e.match_length=m(e,t)),e.match_length>=3)if(i=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===n?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}function y(e,n){for(var t,i,r;;){if(e.lookahead<262){if(g(e),e.lookahead<262&&0===n)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-262&&(e.match_length=m(e,t),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(f(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=a._tr_tally(e,0,e.window[e.strstart-1]))&&f(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===n?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}function w(e,n,t,i,r){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=i,this.func=r}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:113,e.adler=2===n.wrap?0:1,n.last_flush=0,a._tr_init(n),0):p(e,-2)}function k(e){var n,t=x(e);return 0===t&&((n=e.state).window_size=2*n.w_size,c(n.head),n.max_lazy_match=i[n.level].max_lazy,n.good_match=i[n.level].good_length,n.nice_match=i[n.level].nice_length,n.max_chain_length=i[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t}function C(e,n,t,i,a,o){if(!e)return-2;var s=1;if(-1===n&&(n=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),a<1||a>9||8!==t||i<8||i>15||n<0||n>9||o<0||o>4)return p(e,-2);8===i&&(i=9);var l=new b;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=n,l.strategy=o,l.method=t,k(e)}i=[new w(0,0,0,0,(function(e,n){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(g(e),0===e.lookahead&&0===n)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+t;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,f(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(f(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(f(e,!1),e.strm.avail_out),1)})),new w(4,4,8,4,v),new w(4,5,16,8,v),new w(4,6,32,32,v),new w(4,4,16,16,y),new w(8,16,32,32,y),new w(8,16,128,128,y),new w(8,32,128,256,y),new w(32,128,258,1024,y),new w(32,258,258,4096,y)],t.deflateInit=function(e,n){return C(e,n,8,15,8,0)},t.deflateInit2=C,t.deflateReset=k,t.deflateResetKeep=x,t.deflateSetHeader=function(e,n){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=n,0):-2},t.deflate=function(e,n){var t,r,o,l;if(!e||!e.state||n>5||n<0)return e?p(e,-2):-2;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&4!==n)return p(e,0===e.avail_out?-5:-2);if(r.strm=e,t=r.last_flush,r.last_flush=n,42===r.status)if(2===r.wrap)e.adler=0,_(r,31),_(r,139),_(r,8),r.gzhead?(_(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),_(r,255&r.gzhead.time),_(r,r.gzhead.time>>8&255),_(r,r.gzhead.time>>16&255),_(r,r.gzhead.time>>24&255),_(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),_(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(_(r,255&r.gzhead.extra.length),_(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=s(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(_(r,0),_(r,0),_(r,0),_(r,0),_(r,0),_(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),_(r,3),r.status=113);else{var m=8+(r.w_bits-8<<4)<<8;m|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(m|=32),m+=31-m%31,r.status=113,h(r,m),0!==r.strstart&&(h(r,e.adler>>>16),h(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),d(e),o=r.pending,r.pending!==r.pending_buf_size));)_(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),d(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,_(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),d(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,_(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&d(e),r.pending+2<=r.pending_buf_size&&(_(r,255&e.adler),_(r,e.adler>>8&255),e.adler=0,r.status=113)):r.status=113),0!==r.pending){if(d(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&u(n)<=u(t)&&4!==n)return p(e,-5);if(666===r.status&&0!==e.avail_in)return p(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==n&&666!==r.status){var v=2===r.strategy?function(e,n){for(var t;;){if(0===e.lookahead&&(g(e),0===e.lookahead)){if(0===n)return 1;break}if(e.match_length=0,t=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}(r,n):3===r.strategy?function(e,n){for(var t,i,r,o,s=e.window;;){if(e.lookahead<=258){if(g(e),e.lookahead<=258&&0===n)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){o=e.strstart+258;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);e.match_length=258-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(t=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}(r,n):i[r.level].func(r,n);if(3!==v&&4!==v||(r.status=666),1===v||3===v)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===v&&(1===n?a._tr_align(r):5!==n&&(a._tr_stored_block(r,0,0,!1),3===n&&(c(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),d(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==n?0:r.wrap<=0?1:(2===r.wrap?(_(r,255&e.adler),_(r,e.adler>>8&255),_(r,e.adler>>16&255),_(r,e.adler>>24&255),_(r,255&e.total_in),_(r,e.total_in>>8&255),_(r,e.total_in>>16&255),_(r,e.total_in>>24&255)):(h(r,e.adler>>>16),h(r,65535&e.adler)),d(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},t.deflateEnd=function(e){var n;return e&&e.state?42!==(n=e.state.status)&&69!==n&&73!==n&&91!==n&&103!==n&&113!==n&&666!==n?p(e,-2):(e.state=null,113===n?p(e,-3):0):-2},t.deflateSetDictionary=function(e,n){var t,i,a,s,l,p,u,d,f=n.length;if(!e||!e.state)return-2;if(2===(s=(t=e.state).wrap)||1===s&&42!==t.status||t.lookahead)return-2;for(1===s&&(e.adler=o(e.adler,n,f,0)),t.wrap=0,f>=t.w_size&&(0===s&&(c(t.head),t.strstart=0,t.block_start=0,t.insert=0),d=new r.Buf8(t.w_size),r.arraySet(d,n,f-t.w_size,t.w_size,0),n=d,f=t.w_size),l=e.avail_in,p=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=n,g(t);t.lookahead>=3;){i=t.strstart,a=t.lookahead-2;do{t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+3-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++}while(--a);t.strstart=i,t.lookahead=2,g(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=2,t.match_available=0,e.next_in=p,e.input=u,e.avail_in=l,t.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":272,"./adler32":274,"./crc32":276,"./messages":282,"./trees":283}],278:[function(e,n,t){"use strict";n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],279:[function(e,n,t){"use strict";n.exports=function(e,n){var t,i,r,a,o,s,l,p,u,c,d,f,_,h,m,g,v,y,w,b,x,k,C,E,F;t=e.state,i=e.next_in,E=e.input,r=i+(e.avail_in-5),a=e.next_out,F=e.output,o=a-(n-e.avail_out),s=a+(e.avail_out-257),l=t.dmax,p=t.wsize,u=t.whave,c=t.wnext,d=t.window,f=t.hold,_=t.bits,h=t.lencode,m=t.distcode,g=(1<<t.lenbits)-1,v=(1<<t.distbits)-1;e:do{_<15&&(f+=E[i++]<<_,_+=8,f+=E[i++]<<_,_+=8),y=h[f&g];n:for(;;){if(f>>>=w=y>>>24,_-=w,0===(w=y>>>16&255))F[a++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=h[(65535&y)+(f&(1<<w)-1)];continue n}if(32&w){t.mode=12;break e}e.msg="invalid literal/length code",t.mode=30;break e}b=65535&y,(w&=15)&&(_<w&&(f+=E[i++]<<_,_+=8),b+=f&(1<<w)-1,f>>>=w,_-=w),_<15&&(f+=E[i++]<<_,_+=8,f+=E[i++]<<_,_+=8),y=m[f&v];t:for(;;){if(f>>>=w=y>>>24,_-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=m[(65535&y)+(f&(1<<w)-1)];continue t}e.msg="invalid distance code",t.mode=30;break e}if(x=65535&y,_<(w&=15)&&(f+=E[i++]<<_,(_+=8)<w&&(f+=E[i++]<<_,_+=8)),(x+=f&(1<<w)-1)>l){e.msg="invalid distance too far back",t.mode=30;break e}if(f>>>=w,_-=w,x>(w=a-o)){if((w=x-w)>u&&t.sane){e.msg="invalid distance too far back",t.mode=30;break e}if(k=0,C=d,0===c){if(k+=p-w,w<b){b-=w;do{F[a++]=d[k++]}while(--w);k=a-x,C=F}}else if(c<w){if(k+=p+c-w,(w-=c)<b){b-=w;do{F[a++]=d[k++]}while(--w);if(k=0,c<b){b-=w=c;do{F[a++]=d[k++]}while(--w);k=a-x,C=F}}}else if(k+=c-w,w<b){b-=w;do{F[a++]=d[k++]}while(--w);k=a-x,C=F}for(;b>2;)F[a++]=C[k++],F[a++]=C[k++],F[a++]=C[k++],b-=3;b&&(F[a++]=C[k++],b>1&&(F[a++]=C[k++]))}else{k=a-x;do{F[a++]=F[k++],F[a++]=F[k++],F[a++]=F[k++],b-=3}while(b>2);b&&(F[a++]=F[k++],b>1&&(F[a++]=F[k++]))}break}}break}}while(i<r&&a<s);i-=b=_>>3,f&=(1<<(_-=b<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=a<s?s-a+257:257-(a-s),t.hold=f,t.bits=_}},{}],280:[function(e,n,t){"use strict";var i=e("../utils/common"),r=e("./adler32"),a=e("./crc32"),o=e("./inffast"),s=e("./inftrees");function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var n;return e&&e.state?(n=e.state,e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=1,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new i.Buf32(852),n.distcode=n.distdyn=new i.Buf32(592),n.sane=1,n.back=-1,0):-2}function c(e){var n;return e&&e.state?((n=e.state).wsize=0,n.whave=0,n.wnext=0,u(e)):-2}function d(e,n){var t,i;return e&&e.state?(i=e.state,n<0?(t=0,n=-n):(t=1+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?-2:(null!==i.window&&i.wbits!==n&&(i.window=null),i.wrap=t,i.wbits=n,c(e))):-2}function f(e,n){var t,i;return e?(i=new p,e.state=i,i.window=null,0!==(t=d(e,n))&&(e.state=null),t):-2}var _,h,m=!0;function g(e){if(m){var n;for(_=new i.Buf32(512),h=new i.Buf32(32),n=0;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(s(1,e.lens,0,288,_,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;s(2,e.lens,0,32,h,0,e.work,{bits:5}),m=!1}e.lencode=_,e.lenbits=9,e.distcode=h,e.distbits=5}function v(e,n,t,r){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),r>=o.wsize?(i.arraySet(o.window,n,t-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>r&&(a=r),i.arraySet(o.window,n,t-r,a,o.wnext),(r-=a)?(i.arraySet(o.window,n,t-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=c,t.inflateReset2=d,t.inflateResetKeep=u,t.inflateInit=function(e){return f(e,15)},t.inflateInit2=f,t.inflate=function(e,n){var t,p,u,c,d,f,_,h,m,y,w,b,x,k,C,E,F,T,M,S,L,A,j,O,R=0,I=new i.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(t=e.state).mode&&(t.mode=13),d=e.next_out,u=e.output,_=e.avail_out,c=e.next_in,p=e.input,f=e.avail_in,h=t.hold,m=t.bits,y=f,w=_,A=0;e:for(;;)switch(t.mode){case 1:if(0===t.wrap){t.mode=13;break}for(;m<16;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(2&t.wrap&&35615===h){t.check=0,I[0]=255&h,I[1]=h>>>8&255,t.check=a(t.check,I,2,0),h=0,m=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",t.mode=30;break}if(8!=(15&h)){e.msg="unknown compression method",t.mode=30;break}if(m-=4,L=8+(15&(h>>>=4)),0===t.wbits)t.wbits=L;else if(L>t.wbits){e.msg="invalid window size",t.mode=30;break}t.dmax=1<<L,e.adler=t.check=1,t.mode=512&h?10:12,h=0,m=0;break;case 2:for(;m<16;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(t.flags=h,8!=(255&t.flags)){e.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=h>>8&1),512&t.flags&&(I[0]=255&h,I[1]=h>>>8&255,t.check=a(t.check,I,2,0)),h=0,m=0,t.mode=3;case 3:for(;m<32;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}t.head&&(t.head.time=h),512&t.flags&&(I[0]=255&h,I[1]=h>>>8&255,I[2]=h>>>16&255,I[3]=h>>>24&255,t.check=a(t.check,I,4,0)),h=0,m=0,t.mode=4;case 4:for(;m<16;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}t.head&&(t.head.xflags=255&h,t.head.os=h>>8),512&t.flags&&(I[0]=255&h,I[1]=h>>>8&255,t.check=a(t.check,I,2,0)),h=0,m=0,t.mode=5;case 5:if(1024&t.flags){for(;m<16;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}t.length=h,t.head&&(t.head.extra_len=h),512&t.flags&&(I[0]=255&h,I[1]=h>>>8&255,t.check=a(t.check,I,2,0)),h=0,m=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((b=t.length)>f&&(b=f),b&&(t.head&&(L=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),i.arraySet(t.head.extra,p,c,b,L)),512&t.flags&&(t.check=a(t.check,p,b,c)),f-=b,c+=b,t.length-=b),t.length))break e;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===f)break e;b=0;do{L=p[c+b++],t.head&&L&&t.length<65536&&(t.head.name+=String.fromCharCode(L))}while(L&&b<f);if(512&t.flags&&(t.check=a(t.check,p,b,c)),f-=b,c+=b,L)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===f)break e;b=0;do{L=p[c+b++],t.head&&L&&t.length<65536&&(t.head.comment+=String.fromCharCode(L))}while(L&&b<f);if(512&t.flags&&(t.check=a(t.check,p,b,c)),f-=b,c+=b,L)break e}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;m<16;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(h!==(65535&t.check)){e.msg="header crc mismatch",t.mode=30;break}h=0,m=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=12;break;case 10:for(;m<32;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}e.adler=t.check=l(h),h=0,m=0,t.mode=11;case 11:if(0===t.havedict)return e.next_out=d,e.avail_out=_,e.next_in=c,e.avail_in=f,t.hold=h,t.bits=m,2;e.adler=t.check=1,t.mode=12;case 12:if(5===n||6===n)break e;case 13:if(t.last){h>>>=7&m,m-=7&m,t.mode=27;break}for(;m<3;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}switch(t.last=1&h,m-=1,3&(h>>>=1)){case 0:t.mode=14;break;case 1:if(g(t),t.mode=20,6===n){h>>>=2,m-=2;break e}break;case 2:t.mode=17;break;case 3:e.msg="invalid block type",t.mode=30}h>>>=2,m-=2;break;case 14:for(h>>>=7&m,m-=7&m;m<32;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&h,h=0,m=0,t.mode=15,6===n)break e;case 15:t.mode=16;case 16:if(b=t.length){if(b>f&&(b=f),b>_&&(b=_),0===b)break e;i.arraySet(u,p,c,b,d),f-=b,c+=b,_-=b,d+=b,t.length-=b;break}t.mode=12;break;case 17:for(;m<14;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(t.nlen=257+(31&h),h>>>=5,m-=5,t.ndist=1+(31&h),h>>>=5,m-=5,t.ncode=4+(15&h),h>>>=4,m-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;m<3;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}t.lens[H[t.have++]]=7&h,h>>>=3,m-=3}for(;t.have<19;)t.lens[H[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,j={bits:t.lenbits},A=s(0,t.lens,0,19,t.lencode,0,t.work,j),t.lenbits=j.bits,A){e.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;E=(R=t.lencode[h&(1<<t.lenbits)-1])>>>16&255,F=65535&R,!((C=R>>>24)<=m);){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(F<16)h>>>=C,m-=C,t.lens[t.have++]=F;else{if(16===F){for(O=C+2;m<O;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(h>>>=C,m-=C,0===t.have){e.msg="invalid bit length repeat",t.mode=30;break}L=t.lens[t.have-1],b=3+(3&h),h>>>=2,m-=2}else if(17===F){for(O=C+3;m<O;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}m-=C,L=0,b=3+(7&(h>>>=C)),h>>>=3,m-=3}else{for(O=C+7;m<O;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}m-=C,L=0,b=11+(127&(h>>>=C)),h>>>=7,m-=7}if(t.have+b>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=30;break}for(;b--;)t.lens[t.have++]=L}}if(30===t.mode)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,j={bits:t.lenbits},A=s(1,t.lens,0,t.nlen,t.lencode,0,t.work,j),t.lenbits=j.bits,A){e.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,j={bits:t.distbits},A=s(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,j),t.distbits=j.bits,A){e.msg="invalid distances set",t.mode=30;break}if(t.mode=20,6===n)break e;case 20:t.mode=21;case 21:if(f>=6&&_>=258){e.next_out=d,e.avail_out=_,e.next_in=c,e.avail_in=f,t.hold=h,t.bits=m,o(e,w),d=e.next_out,u=e.output,_=e.avail_out,c=e.next_in,p=e.input,f=e.avail_in,h=t.hold,m=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;E=(R=t.lencode[h&(1<<t.lenbits)-1])>>>16&255,F=65535&R,!((C=R>>>24)<=m);){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(E&&0==(240&E)){for(T=C,M=E,S=F;E=(R=t.lencode[S+((h&(1<<T+M)-1)>>T)])>>>16&255,F=65535&R,!(T+(C=R>>>24)<=m);){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}h>>>=T,m-=T,t.back+=T}if(h>>>=C,m-=C,t.back+=C,t.length=F,0===E){t.mode=26;break}if(32&E){t.back=-1,t.mode=12;break}if(64&E){e.msg="invalid literal/length code",t.mode=30;break}t.extra=15&E,t.mode=22;case 22:if(t.extra){for(O=t.extra;m<O;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}t.length+=h&(1<<t.extra)-1,h>>>=t.extra,m-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;E=(R=t.distcode[h&(1<<t.distbits)-1])>>>16&255,F=65535&R,!((C=R>>>24)<=m);){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(0==(240&E)){for(T=C,M=E,S=F;E=(R=t.distcode[S+((h&(1<<T+M)-1)>>T)])>>>16&255,F=65535&R,!(T+(C=R>>>24)<=m);){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}h>>>=T,m-=T,t.back+=T}if(h>>>=C,m-=C,t.back+=C,64&E){e.msg="invalid distance code",t.mode=30;break}t.offset=F,t.extra=15&E,t.mode=24;case 24:if(t.extra){for(O=t.extra;m<O;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}t.offset+=h&(1<<t.extra)-1,h>>>=t.extra,m-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===_)break e;if(b=w-_,t.offset>b){if((b=t.offset-b)>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=30;break}b>t.wnext?(b-=t.wnext,x=t.wsize-b):x=t.wnext-b,b>t.length&&(b=t.length),k=t.window}else k=u,x=d-t.offset,b=t.length;b>_&&(b=_),_-=b,t.length-=b;do{u[d++]=k[x++]}while(--b);0===t.length&&(t.mode=21);break;case 26:if(0===_)break e;u[d++]=t.length,_--,t.mode=21;break;case 27:if(t.wrap){for(;m<32;){if(0===f)break e;f--,h|=p[c++]<<m,m+=8}if(w-=_,e.total_out+=w,t.total+=w,w&&(e.adler=t.check=t.flags?a(t.check,u,w,d-w):r(t.check,u,w,d-w)),w=_,(t.flags?h:l(h))!==t.check){e.msg="incorrect data check",t.mode=30;break}h=0,m=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;m<32;){if(0===f)break e;f--,h+=p[c++]<<m,m+=8}if(h!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=30;break}h=0,m=0}t.mode=29;case 29:A=1;break e;case 30:A=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=d,e.avail_out=_,e.next_in=c,e.avail_in=f,t.hold=h,t.bits=m,(t.wsize||w!==e.avail_out&&t.mode<30&&(t.mode<27||4!==n))&&v(e,e.output,e.next_out,w-e.avail_out)?(t.mode=31,-4):(y-=e.avail_in,w-=e.avail_out,e.total_in+=y,e.total_out+=w,t.total+=w,t.wrap&&w&&(e.adler=t.check=t.flags?a(t.check,u,w,e.next_out-w):r(t.check,u,w,e.next_out-w)),e.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0===y&&0===w||4===n)&&0===A&&(A=-5),A)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var n=e.state;return n.window&&(n.window=null),e.state=null,0},t.inflateGetHeader=function(e,n){var t;return e&&e.state?0==(2&(t=e.state).wrap)?-2:(t.head=n,n.done=!1,0):-2},t.inflateSetDictionary=function(e,n){var t,i=n.length;return e&&e.state?0!==(t=e.state).wrap&&11!==t.mode?-2:11===t.mode&&r(1,n,i,0)!==t.check?-3:v(e,n,i,i)?(t.mode=31,-4):(t.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":272,"./adler32":274,"./crc32":276,"./inffast":279,"./inftrees":281}],281:[function(e,n,t){"use strict";var i=e("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(e,n,t,l,p,u,c,d){var f,_,h,m,g,v,y,w,b,x=d.bits,k=0,C=0,E=0,F=0,T=0,M=0,S=0,L=0,A=0,j=0,O=null,R=0,I=new i.Buf16(16),H=new i.Buf16(16),D=null,V=0;for(k=0;k<=15;k++)I[k]=0;for(C=0;C<l;C++)I[n[t+C]]++;for(T=x,F=15;F>=1&&0===I[F];F--);if(T>F&&(T=F),0===F)return p[u++]=20971520,p[u++]=20971520,d.bits=1,0;for(E=1;E<F&&0===I[E];E++);for(T<E&&(T=E),L=1,k=1;k<=15;k++)if(L<<=1,(L-=I[k])<0)return-1;if(L>0&&(0===e||1!==F))return-1;for(H[1]=0,k=1;k<15;k++)H[k+1]=H[k]+I[k];for(C=0;C<l;C++)0!==n[t+C]&&(c[H[n[t+C]]++]=C);if(0===e?(O=D=c,v=19):1===e?(O=r,R-=257,D=a,V-=257,v=256):(O=o,D=s,v=-1),j=0,C=0,k=E,g=u,M=T,S=0,h=-1,m=(A=1<<T)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){y=k-S,c[C]<v?(w=0,b=c[C]):c[C]>v?(w=D[V+c[C]],b=O[R+c[C]]):(w=96,b=0),f=1<<k-S,E=_=1<<M;do{p[g+(j>>S)+(_-=f)]=y<<24|w<<16|b|0}while(0!==_);for(f=1<<k-1;j&f;)f>>=1;if(0!==f?(j&=f-1,j+=f):j=0,C++,0==--I[k]){if(k===F)break;k=n[t+c[C]]}if(k>T&&(j&m)!==h){for(0===S&&(S=T),g+=E,L=1<<(M=k-S);M+S<F&&!((L-=I[M+S])<=0);)M++,L<<=1;if(A+=1<<M,1===e&&A>852||2===e&&A>592)return 1;p[h=j&m]=T<<24|M<<16|g-u|0}}return 0!==j&&(p[g+j]=k-S<<24|64<<16|0),d.bits=T,0}},{"../utils/common":272}],282:[function(e,n,t){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],283:[function(e,n,t){"use strict";var i=e("../utils/common");function r(e){for(var n=e.length;--n>=0;)e[n]=0}var a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);r(p);var u=new Array(60);r(u);var c=new Array(512);r(c);var d=new Array(256);r(d);var f=new Array(29);r(f);var _,h,m,g=new Array(30);function v(e,n,t,i,r){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function y(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function w(e){return e<256?c[e]:c[256+(e>>>7)]}function b(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function x(e,n,t){e.bi_valid>16-t?(e.bi_buf|=n<<e.bi_valid&65535,b(e,e.bi_buf),e.bi_buf=n>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)}function k(e,n,t){x(e,t[2*n],t[2*n+1])}function C(e,n){var t=0;do{t|=1&e,e>>>=1,t<<=1}while(--n>0);return t>>>1}function E(e,n,t){var i,r,a=new Array(16),o=0;for(i=1;i<=15;i++)a[i]=o=o+t[i-1]<<1;for(r=0;r<=n;r++){var s=e[2*r+1];0!==s&&(e[2*r]=C(a[s]++,s))}}function F(e){var n;for(n=0;n<286;n++)e.dyn_ltree[2*n]=0;for(n=0;n<30;n++)e.dyn_dtree[2*n]=0;for(n=0;n<19;n++)e.bl_tree[2*n]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function T(e){e.bi_valid>8?b(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function M(e,n,t,i){var r=2*n,a=2*t;return e[r]<e[a]||e[r]===e[a]&&i[n]<=i[t]}function S(e,n,t){for(var i=e.heap[t],r=t<<1;r<=e.heap_len&&(r<e.heap_len&&M(n,e.heap[r+1],e.heap[r],e.depth)&&r++,!M(n,i,e.heap[r],e.depth));)e.heap[t]=e.heap[r],t=r,r<<=1;e.heap[t]=i}function L(e,n,t){var i,r,s,l,p=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*p]<<8|e.pending_buf[e.d_buf+2*p+1],r=e.pending_buf[e.l_buf+p],p++,0===i?k(e,r,n):(k(e,(s=d[r])+256+1,n),0!==(l=a[s])&&x(e,r-=f[s],l),k(e,s=w(--i),t),0!==(l=o[s])&&x(e,i-=g[s],l))}while(p<e.last_lit);k(e,256,n)}function A(e,n){var t,i,r,a=n.dyn_tree,o=n.stat_desc.static_tree,s=n.stat_desc.has_stree,l=n.stat_desc.elems,p=-1;for(e.heap_len=0,e.heap_max=573,t=0;t<l;t++)0!==a[2*t]?(e.heap[++e.heap_len]=p=t,e.depth[t]=0):a[2*t+1]=0;for(;e.heap_len<2;)a[2*(r=e.heap[++e.heap_len]=p<2?++p:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=o[2*r+1]);for(n.max_code=p,t=e.heap_len>>1;t>=1;t--)S(e,a,t);r=l;do{t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],S(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=i,a[2*r]=a[2*t]+a[2*i],e.depth[r]=(e.depth[t]>=e.depth[i]?e.depth[t]:e.depth[i])+1,a[2*t+1]=a[2*i+1]=r,e.heap[1]=r++,S(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,n){var t,i,r,a,o,s,l=n.dyn_tree,p=n.max_code,u=n.stat_desc.static_tree,c=n.stat_desc.has_stree,d=n.stat_desc.extra_bits,f=n.stat_desc.extra_base,_=n.stat_desc.max_length,h=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<573;t++)(a=l[2*l[2*(i=e.heap[t])+1]+1]+1)>_&&(a=_,h++),l[2*i+1]=a,i>p||(e.bl_count[a]++,o=0,i>=f&&(o=d[i-f]),s=l[2*i],e.opt_len+=s*(a+o),c&&(e.static_len+=s*(u[2*i+1]+o)));if(0!==h){do{for(a=_-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[_]--,h-=2}while(h>0);for(a=_;0!==a;a--)for(i=e.bl_count[a];0!==i;)(r=e.heap[--t])>p||(l[2*r+1]!==a&&(e.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),i--)}}(e,n),E(a,p,e.bl_count)}function j(e,n,t){var i,r,a=-1,o=n[1],s=0,l=7,p=4;for(0===o&&(l=138,p=3),n[2*(t+1)+1]=65535,i=0;i<=t;i++)r=o,o=n[2*(i+1)+1],++s<l&&r===o||(s<p?e.bl_tree[2*r]+=s:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=r,0===o?(l=138,p=3):r===o?(l=6,p=3):(l=7,p=4))}function O(e,n,t){var i,r,a=-1,o=n[1],s=0,l=7,p=4;for(0===o&&(l=138,p=3),i=0;i<=t;i++)if(r=o,o=n[2*(i+1)+1],!(++s<l&&r===o)){if(s<p)do{k(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==a&&(k(e,r,e.bl_tree),s--),k(e,16,e.bl_tree),x(e,s-3,2)):s<=10?(k(e,17,e.bl_tree),x(e,s-3,3)):(k(e,18,e.bl_tree),x(e,s-11,7));s=0,a=r,0===o?(l=138,p=3):r===o?(l=6,p=3):(l=7,p=4)}}r(g);var R=!1;function I(e,n,t,r){x(e,0+(r?1:0),3),function(e,n,t,r){T(e),r&&(b(e,t),b(e,~t)),i.arraySet(e.pending_buf,e.window,n,t,e.pending),e.pending+=t}(e,n,t,!0)}t._tr_init=function(e){R||(!function(){var e,n,t,i,r,l=new Array(16);for(t=0,i=0;i<28;i++)for(f[i]=t,e=0;e<1<<a[i];e++)d[t++]=i;for(d[t-1]=i,r=0,i=0;i<16;i++)for(g[i]=r,e=0;e<1<<o[i];e++)c[r++]=i;for(r>>=7;i<30;i++)for(g[i]=r<<7,e=0;e<1<<o[i]-7;e++)c[256+r++]=i;for(n=0;n<=15;n++)l[n]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,l[8]++;for(;e<=255;)p[2*e+1]=9,e++,l[9]++;for(;e<=279;)p[2*e+1]=7,e++,l[7]++;for(;e<=287;)p[2*e+1]=8,e++,l[8]++;for(E(p,287,l),e=0;e<30;e++)u[2*e+1]=5,u[2*e]=C(e,5);_=new v(p,a,257,286,15),h=new v(u,o,0,30,15),m=new v(new Array(0),s,0,19,7)}(),R=!0),e.l_desc=new y(e.dyn_ltree,_),e.d_desc=new y(e.dyn_dtree,h),e.bl_desc=new y(e.bl_tree,m),e.bi_buf=0,e.bi_valid=0,F(e)},t._tr_stored_block=I,t._tr_flush_block=function(e,n,t,i){var r,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0}(e)),A(e,e.l_desc),A(e,e.d_desc),o=function(e){var n;for(j(e,e.dyn_ltree,e.l_desc.max_code),j(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),n=18;n>=3&&0===e.bl_tree[2*l[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n}(e),r=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=r&&(r=a)):r=a=t+5,t+4<=r&&-1!==n?I(e,n,t,i):4===e.strategy||a===r?(x(e,2+(i?1:0),3),L(e,p,u)):(x(e,4+(i?1:0),3),function(e,n,t,i){var r;for(x(e,n-257,5),x(e,t-1,5),x(e,i-4,4),r=0;r<i;r++)x(e,e.bl_tree[2*l[r]+1],3);O(e,e.dyn_ltree,n-1),O(e,e.dyn_dtree,t-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),L(e,e.dyn_ltree,e.dyn_dtree)),F(e),i&&T(e)},t._tr_tally=function(e,n,t){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===n?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(d[t]+256+1)]++,e.dyn_dtree[2*w(n)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){x(e,2,3),k(e,256,p),function(e){16===e.bi_valid?(b(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":272}],284:[function(e,n,t){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],285:[function(e,n,t){(function(e){function n(e,n){for(var t=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),t++):t&&(e.splice(i,1),t--)}if(n)for(;t--;t)e.unshift("..");return e}function i(e,n){if(e.filter)return e.filter(n);for(var t=[],i=0;i<e.length;i++)n(e[i],i,e)&&t.push(e[i]);return t}t.resolve=function(){for(var t="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,r="/"===o.charAt(0))}return(r?"/":"")+(t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"))||"."},t.normalize=function(e){var a=t.isAbsolute(e),o="/"===r(e,-1);return(e=n(i(e.split("/"),(function(e){return!!e})),!a).join("/"))||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,n){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function i(e){for(var n=0;n<e.length&&""===e[n];n++);for(var t=e.length-1;t>=0&&""===e[t];t--);return n>t?[]:e.slice(n,t-n+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=i(e.split("/")),a=i(n.split("/")),o=Math.min(r.length,a.length),s=o,l=0;l<o;l++)if(r[l]!==a[l]){s=l;break}var p=[];for(l=s;l<r.length;l++)p.push("..");return(p=p.concat(a.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var n=e.charCodeAt(0),t=47===n,i=-1,r=!0,a=e.length-1;a>=1;--a)if(47===(n=e.charCodeAt(a))){if(!r){i=a;break}}else r=!1;return-1===i?t?"/":".":t&&1===i?"/":e.slice(0,i)},t.basename=function(e,n){var t=function(e){"string"!=typeof e&&(e+="");var n,t=0,i=-1,r=!0;for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!r){t=n+1;break}}else-1===i&&(r=!1,i=n+1);return-1===i?"":e.slice(t,i)}(e);return n&&t.substr(-1*n.length)===n&&(t=t.substr(0,t.length-n.length)),t},t.extname=function(e){"string"!=typeof e&&(e+="");for(var n=-1,t=0,i=-1,r=!0,a=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===i&&(r=!1,i=o+1),46===s?-1===n?n=o:1!==a&&(a=1):-1!==n&&(a=-1);else if(!r){t=o+1;break}}return-1===n||-1===i||0===a||1===a&&n===i-1&&n===t+1?"":e.slice(n,i)};var r="b"==="ab".substr(-1)?function(e,n,t){return e.substr(n,t)}:function(e,n,t){return n<0&&(n=e.length+n),e.substr(n,t)}}).call(this,e("_process"))},{_process:286}],286:[function(e,n,t){var i,r,a=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(n){try{return i.call(null,e,0)}catch(n){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var p,u=[],c=!1,d=-1;function f(){c&&p&&(c=!1,p.length?u=p.concat(u):d=-1,u.length&&_())}function _(){if(!c){var e=l(f);c=!0;for(var n=u.length;n;){for(p=u,u=[];++d<n;)p&&p[d].run();d=-1,n=u.length}p=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(n){try{return r.call(null,e)}catch(n){return r.call(this,e)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function m(){}a.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];u.push(new h(e,n)),1!==u.length||c||l(_)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],287:[function(e,n,t){"use strict";var i=e("is-arrayish"),r=Array.prototype.concat,a=Array.prototype.slice,o=n.exports=function(e){for(var n=[],t=0,o=e.length;t<o;t++){var s=e[t];i(s)?n=r.call(n,a.call(s)):n.push(s)}return n};o.wrap=function(e){return function(){return e(o(arguments))}}},{"is-arrayish":244}]},{},[196]);